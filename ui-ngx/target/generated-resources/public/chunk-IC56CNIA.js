import{j as G}from"./chunk-Z4H5XVQJ.js";G();(function(S){var F=10,U=.95;function V(d){var N=null,m=null,r=null,p=null,g=null,I=null,C=!1,t=null,w=[];d.hooks.processOptions.push(function(e,i){i.series.pie.show&&(i.grid.show=!1,i.series.pie.label.show==="auto"&&(i.legend.show?i.series.pie.label.show=!1:i.series.pie.label.show=!0),i.series.pie.radius==="auto"&&(i.series.pie.label.show?i.series.pie.radius=3/4:i.series.pie.radius=1),i.series.pie.tilt>1?i.series.pie.tilt=1:i.series.pie.tilt<0&&(i.series.pie.tilt=0))}),d.hooks.bindEvents.push(function(e,i){var a=e.getOptions();a.series.pie.show&&(a.grid.hoverable&&i.unbind("mousemove").mousemove(se),a.grid.clickable&&i.unbind("click").click(te))}),d.hooks.processDatapoints.push(function(e,i,a,h){var f=e.getOptions();f.series.pie.show&&j(e,i,a,h)}),d.hooks.drawOverlay.push(function(e,i){var a=e.getOptions();a.series.pie.show&&le(e,i)}),d.hooks.draw.push(function(e,i){var a=e.getOptions();a.series.pie.show&&ee(e,i)});function j(e){C||(C=!0,N=e.getCanvas(),m=S(N).parent(),r=e.getOptions(),e.setData($(e.getData())))}function $(e){var i=0,a=0,h=0,f=r.series.pie.combine.color,o=[],s,n;for(s=0;s<e.length;++s)n=e[s].data,S.isArray(n)&&n.length===1&&(n=n[0]),S.isArray(n)?!isNaN(parseFloat(n[1]))&&isFinite(n[1])?n[1]=+n[1]:n[1]=0:!isNaN(parseFloat(n))&&isFinite(n)?n=[1,+n]:n=[1,0],e[s].data=[n];for(s=0;s<e.length;++s)i+=e[s].data[0][1];for(s=0;s<e.length;++s)n=e[s].data[0][1],n/i<=r.series.pie.combine.threshold&&(a+=n,h++,f||(f=e[s].color));for(s=0;s<e.length;++s)n=e[s].data[0][1],(h<2||n/i>r.series.pie.combine.threshold)&&o.push(S.extend(e[s],{data:[[1,n]],color:e[s].color,label:e[s].label,angle:n*Math.PI*2/i,percent:n/(i/100)}));return h>1&&o.push({data:[[1,a]],color:f,label:r.series.pie.combine.label,angle:a*Math.PI*2/i,percent:a/(i/100)}),o}function ee(e,i){if(!m)return;var a=e.getPlaceholder().width(),h=e.getPlaceholder().height(),f=m.children().filter(".legend").children().width()||0;t=i,C=!1,p=Math.min(a,h/r.series.pie.tilt)/2,I=h/2+r.series.pie.offset.top,g=a/2,r.series.pie.offset.left==="auto"?(r.legend.position.match("w")?g+=f/2:g-=f/2,g<p?g=p:g>a-p&&(g=a-p)):g+=r.series.pie.offset.left;var o=e.getData(),s=0;do s>0&&(p*=U),s+=1,n(),r.series.pie.tilt<=.8&&l();while(!H()&&s<F);s>=F&&(n(),typeof console=="object"&&typeof console.warn=="function"&&console.warn("Could not draw pie with labels contained inside canvas")),e.setSeries&&e.insertLegend&&(e.setSeries(o),e.insertLegend());function n(){t.clearRect(0,0,a,h),m.children().filter(".pieLabel, .pieLabelBackground").remove()}function l(){var k=r.series.pie.shadow.left,O=r.series.pie.shadow.top,u=10,v=r.series.pie.shadow.alpha,A=r.series.pie.radius>1?r.series.pie.radius:p*r.series.pie.radius;if(!(A>=a/2-k||A*r.series.pie.tilt>=h/2-O||A<=u)){t.save(),t.translate(k,O),t.globalAlpha=v,t.fillStyle="#000",t.translate(g,I),t.scale(1,r.series.pie.tilt);for(var R=1;R<=u;R++)t.beginPath(),t.arc(0,0,A,0,Math.PI*2,!1),t.fill(),A-=R;t.restore()}}function H(){var k=Math.PI*r.series.pie.startAngle,O=r.series.pie.radius>1?r.series.pie.radius:p*r.series.pie.radius,u;t.save(),t.translate(g,I),t.scale(1,r.series.pie.tilt),t.save();var v=k;for(u=0;u<o.length;++u)o[u].startAngle=v,A(o[u].angle,o[u].color,!0);if(t.restore(),r.series.pie.stroke.width>0){for(t.save(),t.lineWidth=r.series.pie.stroke.width,v=k,u=0;u<o.length;++u)A(o[u].angle,r.series.pie.stroke.color,!1);t.restore()}if(W(t),t.restore(),r.series.pie.label.show)return R();return!0;function A(c,L,b){c<=0||isNaN(c)||(b?t.fillStyle=L:(t.strokeStyle=L,t.lineJoin="round"),t.beginPath(),Math.abs(c-Math.PI*2)>1e-9&&t.moveTo(0,0),t.arc(0,0,O,v,v+c/2,!1),t.arc(0,0,O,v+c/2,v+c,!1),t.closePath(),v+=c,b?t.fill():t.stroke())}function R(){for(var c=k,L=r.series.pie.label.radius>1?r.series.pie.label.radius:p*r.series.pie.label.radius,b=0;b<o.length;++b){if(o[b].percent>=r.series.pie.label.threshold*100&&!y(o[b],c,b))return!1;c+=o[b].angle}return!0;function y(M,Y,_){if(M.data[0][1]===0)return!0;var z=r.legend.labelFormatter,D,J=r.series.pie.label.formatter;z?D=z(M.label,M):D=M.label,J&&(D=J(D,M));var K=(Y+M.angle+Y)/2,Q=g+Math.round(Math.cos(K)*L),q=I+Math.round(Math.sin(K)*L)*r.series.pie.tilt,oe="<span class='pieLabel' id='pieLabel"+_+"' style='position:absolute;top:"+q+"px;left:"+Q+"px;'>"+D+"</span>";m.append(oe);var P=m.children("#pieLabel"+_),T=q-P.height()/2,x=Q-P.width()/2;if(P.css("top",T),P.css("left",x),0-T>0||0-x>0||h-(T+P.height())<0||a-(x+P.width())<0)return!1;if(r.series.pie.label.background.opacity!==0){var E=r.series.pie.label.background.color;E==null&&(E=M.color);var fe="top:"+T+"px;left:"+x+"px;";S("<div class='pieLabelBackground' style='position:absolute;width:"+P.width()+"px;height:"+P.height()+"px;"+fe+"background-color:"+E+";'></div>").css("opacity",r.series.pie.label.background.opacity).insertBefore(P)}return!0}}}}function W(e){if(r.series.pie.innerRadius>0){e.save();var i=r.series.pie.innerRadius>1?r.series.pie.innerRadius:p*r.series.pie.innerRadius;e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=r.series.pie.stroke.color,e.arc(0,0,i,0,Math.PI*2,!1),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=r.series.pie.stroke.color,e.arc(0,0,i,0,Math.PI*2,!1),e.stroke(),e.closePath(),e.restore()}}function ie(e,i){for(var a=!1,h=-1,f=e.length,o=f-1;++h<f;o=h)(e[h][1]<=i[1]&&i[1]<e[o][1]||e[o][1]<=i[1]&&i[1]<e[h][1])&&i[0]<(e[o][0]-e[h][0])*(i[1]-e[h][1])/(e[o][1]-e[h][1])+e[h][0]&&(a=!a);return a}function re(e,i){for(var a=d.getData(),h=d.getOptions(),f=h.series.pie.radius>1?h.series.pie.radius:p*h.series.pie.radius,o,s,n=0;n<a.length;++n){var l=a[n];if(l.pie.show){if(t.save(),t.beginPath(),t.moveTo(0,0),t.arc(0,0,f,l.startAngle,l.startAngle+l.angle/2,!1),t.arc(0,0,f,l.startAngle+l.angle/2,l.startAngle+l.angle,!1),t.closePath(),o=e-g,s=i-I,t.isPointInPath){if(t.isPointInPath(e-g,i-I))return t.restore(),{datapoint:[l.percent,l.data],dataIndex:0,series:l,seriesIndex:n}}else{var H=f*Math.cos(l.startAngle),k=f*Math.sin(l.startAngle),O=f*Math.cos(l.startAngle+l.angle/4),u=f*Math.sin(l.startAngle+l.angle/4),v=f*Math.cos(l.startAngle+l.angle/2),A=f*Math.sin(l.startAngle+l.angle/2),R=f*Math.cos(l.startAngle+l.angle/1.5),c=f*Math.sin(l.startAngle+l.angle/1.5),L=f*Math.cos(l.startAngle+l.angle),b=f*Math.sin(l.startAngle+l.angle),y=[[0,0],[H,k],[O,u],[v,A],[R,c],[L,b]],M=[o,s];if(ie(y,M))return t.restore(),{datapoint:[l.percent,l.data],dataIndex:0,series:l,seriesIndex:n}}t.restore()}}return null}function se(e){B("plothover",e)}function te(e){B("plotclick",e)}function B(e,i){var a=d.offset(),h=parseInt(i.pageX-a.left,10),f=parseInt(i.pageY-a.top,10),o=re(h,f);if(r.grid.autoHighlight)for(var s=0;s<w.length;++s){var n=w[s];n.auto===e&&!(o&&n.series===o.series)&&ne(n.series)}o&&ae(o.series,e);var l={pageX:i.pageX,pageY:i.pageY};m.trigger(e,[l,o])}function ae(e,i){var a=X(e);a===-1?(w.push({series:e,auto:i}),d.triggerRedrawOverlay()):i||(w[a].auto=!1)}function ne(e){e==null&&(w=[],d.triggerRedrawOverlay());var i=X(e);i!==-1&&(w.splice(i,1),d.triggerRedrawOverlay())}function X(e){for(var i=0;i<w.length;++i){var a=w[i];if(a.series===e)return i}return-1}function le(e,i){var a=e.getOptions(),h=a.series.pie.radius>1?a.series.pie.radius:p*a.series.pie.radius;i.save(),i.translate(g,I),i.scale(1,a.series.pie.tilt);for(var f=0;f<w.length;++f)o(w[f].series);W(i),i.restore();function o(s){s.angle<=0||isNaN(s.angle)||(i.fillStyle="rgba(255, 255, 255, "+a.series.pie.highlight.opacity+")",i.beginPath(),Math.abs(s.angle-Math.PI*2)>1e-9&&i.moveTo(0,0),i.arc(0,0,h,s.startAngle,s.startAngle+s.angle/2,!1),i.arc(0,0,h,s.startAngle+s.angle/2,s.startAngle+s.angle,!1),i.closePath(),i.fill())}}}var Z={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:3/2,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(d,N){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+N.color+";'>"+d+"<br/>"+Math.round(N.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};S.plot.plugins.push({init:V,options:Z,name:"pie",version:"1.1"})})(jQuery);
