import{a as sr}from"./chunk-AX5EF6W6.js";import{e as Kt,j as Xe}from"./chunk-Z4H5XVQJ.js";var fr=Kt((Fr,tr)=>{Xe();var gr=function(){"use strict";function t(p,h,g,y){var F;typeof h=="object"&&(g=h.depth,y=h.prototype,F=h.filter,h=h.circular);var L=[],M=[],N=typeof Buffer<"u";typeof h>"u"&&(h=!0),typeof g>"u"&&(g=1/0);function R(z,te){if(z===null)return null;if(te==0)return z;var A,E;if(typeof z!="object")return z;if(t.__isArray(z))A=[];else if(t.__isRegExp(z))A=new RegExp(z.source,D(z)),z.lastIndex&&(A.lastIndex=z.lastIndex);else if(t.__isDate(z))A=new Date(z.getTime());else{if(N&&Buffer.isBuffer(z))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(z.length):A=new Buffer(z.length),z.copy(A),A;typeof y>"u"?(E=Object.getPrototypeOf(z),A=Object.create(E)):(A=Object.create(y),E=y)}if(h){var C=L.indexOf(z);if(C!=-1)return M[C];L.push(z),M.push(A)}for(var Y in z){var w;E&&(w=Object.getOwnPropertyDescriptor(E,Y)),!(w&&w.set==null)&&(A[Y]=R(z[Y],te-1))}return A}return R(p,g)}t.clonePrototype=function(h){if(h===null)return null;var g=function(){};return g.prototype=h,new g};function e(p){return Object.prototype.toString.call(p)}t.__objToStr=e;function u(p){return typeof p=="object"&&e(p)==="[object Date]"}t.__isDate=u;function i(p){return typeof p=="object"&&e(p)==="[object Array]"}t.__isArray=i;function f(p){return typeof p=="object"&&e(p)==="[object RegExp]"}t.__isRegExp=f;function D(p){var h="";return p.global&&(h+="g"),p.ignoreCase&&(h+="i"),p.multiline&&(h+="m"),h}return t.__getRegExpFlags=D,t}();typeof tr=="object"&&tr.exports&&(tr.exports=gr)});var cr=Kt((wr,lr)=>{Xe();var yr=fr();lr.exports=function(t,e){return t=t||{},Object.keys(e).forEach(function(u){typeof t[u]>"u"&&(t[u]=yr(e[u]))}),t}});var Dr=Kt((kr,pr)=>{Xe();pr.exports=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]]});var vr=Kt((Br,or)=>{"use strict";Xe();var xr=cr(),Jt=Dr(),dr={nul:0,control:0};or.exports=function(e){return hr(e,dr)};or.exports.config=function(t){return t=xr(t||{},dr),function(u){return hr(u,t)}};function hr(t,e){if(typeof t!="string")return mr(t,e);for(var u=0,i=0;i<t.length;i++){var f=mr(t.charCodeAt(i),e);if(f<0)return-1;u+=f}return u}function mr(t,e){return t===0?e.nul:t<32||t>=127&&t<160?e.control:Cr(t)?0:1+(t>=4352&&(t<=4447||t==9001||t==9002||t>=11904&&t<=42191&&t!=12351||t>=44032&&t<=55203||t>=63744&&t<=64255||t>=65040&&t<=65049||t>=65072&&t<=65135||t>=65280&&t<=65376||t>=65504&&t<=65510||t>=131072&&t<=196605||t>=196608&&t<=262141))}function Cr(t){var e=0,u=Jt.length-1,i;if(t<Jt[0][0]||t>Jt[u][1])return!1;for(;u>=e;)if(i=Math.floor((e+u)/2),t>Jt[i][1])e=i+1;else if(t<Jt[i][0])u=i-1;else return!0;return!1}});var br=Kt((exports,module)=>{Xe();(function(t){var e=function(){return e.cache.hasOwnProperty(arguments[0])||(e.cache[arguments[0]]=e.parse(arguments[0])),e.format.call(null,e.cache[arguments[0]],arguments)};e.format=function(D,p){var h=1,g=D.length,y="",F,L=[],M,N,R,z,te,A;for(M=0;M<g;M++)if(y=i(D[M]),y==="string")L.push(D[M]);else if(y==="array"){if(R=D[M],R[2])for(F=p[h],N=0;N<R[2].length;N++){if(!F.hasOwnProperty(R[2][N]))throw e('[sprintf] property "%s" does not exist',R[2][N]);F=F[R[2][N]]}else R[1]?F=p[R[1]]:F=p[h++];if(/[^s]/.test(R[8])&&i(F)!=="number")throw e("[sprintf] expecting number but found %s",i(F));switch(R[8]){case"b":F=F.toString(2);break;case"c":F=String.fromCharCode(F);break;case"d":F=parseInt(F,10);break;case"e":F=R[7]?F.toExponential(R[7]):F.toExponential();break;case"f":F=R[7]?parseFloat(F).toFixed(R[7]):parseFloat(F);break;case"o":F=F.toString(8);break;case"s":F=(F=String(F))&&R[7]?F.slice(0,R[7]):F;break;case"u":F=F>>>0;break;case"x":F=F.toString(16);break;case"X":F=F.toString(16).toUpperCase();break}F=/[def]/.test(R[8])&&R[3]&&F>=0?" +"+F:F,te=R[4]?R[4]==="0"?"0":R[4].charAt(1):" ",A=R[6]-String(F).length,z=R[6]?f(te,A):"",L.push(R[5]?F+z:z+F)}return L.join("")},e.cache={},e.parse=function(D){for(var p=D,h=[],g=[],y=0;p;){if((h=/^[^\x25]+/.exec(p))!==null)g.push(h[0]);else if((h=/^\x25{2}/.exec(p))!==null)g.push("%");else if((h=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(p))!==null){if(h[2]){y|=1;var F=[],L=h[2],M=[];if((M=/^([a-z_][a-z_\d]*)/i.exec(L))!==null)for(F.push(M[1]);(L=L.slice(M[0].length))!=="";)if((M=/^\.([a-z_][a-z_\d]*)/i.exec(L))!==null)F.push(M[1]);else if((M=/^\[(\d+)\]/.exec(L))!==null)F.push(M[1]);else throw"[sprintf] huh?";else throw"[sprintf] huh?";h[2]=F}else y|=2;if(y===3)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";g.push(h)}else throw"[sprintf] huh?";p=p.slice(h[0].length)}return g};var u=function(D,p,h){return h=p.slice(0),h.splice(0,0,D),e.apply(null,h)};function i(D){return Object.prototype.toString.call(D).slice(8,-1).toLowerCase()}function f(D,p){for(var h=[];p>0;h[--p]=D);return h.join("")}t.sprintf=e,t.vsprintf=u})(typeof global<"u"?global:self||window);(function(t,e){var u;if(typeof window<"u")u=window;else if(typeof self<"u")u=self;else if(typeof global<"u")u=global;else throw new Error("Unknow context");typeof define=="function"&&define.amd?define(["jquery","wcwidth"],function(i,f){return t(i,f,u),i}):typeof module=="object"&&module.exports?module.exports=function(i,f,D){return f===e&&(typeof window<"u"?f=sr():f=sr()(i)),D===e&&(D=vr()),t(f,D,i),f}:(u.jQuery||(u.$=u.cash),t(u.jQuery||u.cash,u.wcwidth,u))})(function($,wcwidth,root,undefined){"use strict";function debug(t){}function DelayQueue(){var t=$.Callbacks(),e=!1,u=this;this.resolve=function(){t.fire(),u.resolved=e=!0},this.add=function(i){e?i():t.add(i)}}$.omap=function(t,e){var u={};return $.each(t,function(i,f){u[i]=e.call(t,i,f)}),u},$.fn.text_length=function(){return this.map(function(){return $(this).text().length}).get().reduce(function(t,e){return t+e},0)};var Clone={clone_object:function(t){var e={};if(typeof t=="object"){if(Array.isArray(t))return this.clone_array(t);if(t===null)return t;for(var u in t)Array.isArray(t[u])?e[u]=this.clone_array(t[u]):typeof t[u]=="object"?e[u]=this.clone_object(t[u]):e[u]=t[u]}return e},clone_array:function(t){if(!is_function(Array.prototype.map))throw new Error("Your browser don't support ES5 array map use es5-shim");return t.slice(0).map(function(e){return typeof e=="object"?this.clone_object(e):e}.bind(this))}},clone=function(t){return Clone.clone_object(t)};"Map"in root&&!("clear"in Map.prototype)&&(Map.prototype.clear=function(){this.forEach(function(t,e,u){u.delete(e)})});var localStorage;(function(){var t=function(){try{var y="test",F=window.localStorage;return F.setItem(y,"1"),F.removeItem(y),!0}catch{return!1}},e=function(){try{return document.cookie.split(";"),!0}catch{return!1}},u=t();function i(y,F){var L;if(typeof y=="string"&&typeof F=="string")return localStorage[y]=F,!0;if(typeof y=="object"&&typeof F>"u"){for(L in y)y.hasOwnProperty(L)&&(localStorage[L]=y[L]);return!0}return!1}function f(y,F){var L,M,N;if(L=new Date,L.setTime(L.getTime()+31536e6),M="; expires="+L.toGMTString(),typeof y=="string"&&typeof F=="string")return document.cookie=y+"="+F+M+"; path=/",!0;if(typeof y=="object"&&typeof F>"u"){for(N in y)y.hasOwnProperty(N)&&(document.cookie=N+"="+y[N]+M+"; path=/");return!0}return!1}function D(y){return localStorage[y]}function p(y){var F,L,M,N;for(F=y+"=",L=document.cookie.split(";"),M=0;M<L.length;M++){for(N=L[M];N.charAt(0)===" ";)N=N.slice(1,N.length);if(N.indexOf(F)===0)return N.slice(F.length,N.length)}return null}function h(y){return delete localStorage[y]}function g(y){return f(y,"",-1)}!e()&&!u?(localStorage={},$.extend({Storage:{set:i,get:D,remove:h}})):(u&&(localStorage=window.localStorage),$.extend({Storage:{set:u?i:f,get:u?D:p,remove:u?h:g}}))})();var debounce=function(){var t="Expected a function";function e(i){var f=typeof i;return i!=null&&(f=="object"||f=="function")}function u(){return Date.now()}return function(f,D,p){var h=Math.max,g=Math.min,y,F,L,M,N,R,z=0,te=!1,A=!1,E=!0;if(typeof f!="function")throw new TypeError(t);D=D||0,e(p)&&(te=!!p.leading,A="maxWait"in p,L=A?h(p.maxWait||0,D):L,E="trailing"in p?!!p.trailing:E);function C(ne){var ee=y,Z=F;return y=F=undefined,z=ne,M=f.apply(Z,ee),M}function Y(ne){return z=ne,N=setTimeout(ue,D),te?C(ne):M}function w(ne){var ee=ne-R,Z=ne-z,Ee=D-ee;return A?g(Ee,L-Z):Ee}function ie(ne){var ee=ne-R,Z=ne-z;return R===undefined||ee>=D||ee<0||A&&Z>=L}function ue(){var ne=u();if(ie(ne))return I(ne);N=setTimeout(ue,w(ne))}function I(ne){return N=undefined,E&&y?C(ne):(y=F=undefined,M)}function pe(){N!==undefined&&clearTimeout(N),z=0,y=R=F=N=undefined}function ae(){return N===undefined?M:I(u())}function G(){var ne=u(),ee=ie(ne);if(y=arguments,F=this,R=ne,ee){if(N===undefined)return Y(R);if(A)return N=setTimeout(ue,D),C(R)}return N===undefined&&(N=setTimeout(ue,D)),M}return G.cancel=pe,G.flush=ae,G}}(),jQuery=$;(function(t){jQuery.fn.extend({everyTime:function(e,u,i,f,D){return this.each(function(){jQuery.timer.add(this,e,u,i,f,D)})},oneTime:function(e,u,i){return this.each(function(){jQuery.timer.add(this,e,u,i,1)})},stopTime:function(e,u){return this.each(function(){jQuery.timer.remove(this,e,u)})}}),jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===undefined||e===null)return null;var u=this.regex.exec(e.toString().trim());if(u[2]){var i=parseInt(u[1],10),f=this.powers[u[2]]||1;return i*f}else return e},add:function(e,u,i,f,D,p){var h=0;if(typeof i=="function"&&(D||(D=f),f=i,i=u),u=jQuery.timer.timeParse(u),!(typeof u!="number"||isNaN(u)||u<=0)){D&&D.constructor!==Number&&(p=!!D,D=0),D=D||0,p=p||!1,e.$timers||(e.$timers={}),e.$timers[i]||(e.$timers[i]={}),f.$timerID=f.$timerID||this.guid++;var g=function(){p&&g.inProgress||(g.inProgress=!0,(++h>D&&D!==0||f.call(e,h)===!1)&&jQuery.timer.remove(e,i,f),g.inProgress=!1)};g.$timerID=f.$timerID,e.$timers[i][f.$timerID]||(e.$timers[i][f.$timerID]=setInterval(g,u)),this.global[i]||(this.global[i]=[]),this.global[i].push(e)}},remove:function(e,u,i){var f=e.$timers,D;if(f){if(u){if(f[u]){if(i)i.$timerID&&(clearInterval(f[u][i.$timerID]),delete f[u][i.$timerID]);else for(var h in f[u])f[u].hasOwnProperty(h)&&(clearInterval(f[u][h]),delete f[u][h]);for(D in f[u])if(f[u].hasOwnProperty(D))break;D||(D=null,delete f[u])}}else for(var p in f)f.hasOwnProperty(p)&&this.remove(e,p,i);for(D in f)if(f.hasOwnProperty(D))break;D||(e.$timers=null)}}}}),/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())&&t(window).one("unload",function(){var e=jQuery.timer.global;for(var u in e)if(e.hasOwnProperty(u))for(var i=e[u],f=i.length;--f;)jQuery.timer.remove(i[f],u)})})(jQuery),function(t){if(String.prototype.split.toString().match(/\[native/)){var e=String.prototype.split,u=/()??/.exec("")[1]===t,i;return i=function(f,D,p){if(Object.prototype.toString.call(D)!=="[object RegExp]")return e.call(f,D,p);var h=[],g=(D.ignoreCase?"i":"")+(D.multiline?"m":"")+(D.extended?"x":"")+(D.sticky?"y":""),y=0,F,L,M,N;for(D=new RegExp(D.source,g+"g"),f+="",u||(F=new RegExp("^"+D.source+"$(?!\\s)",g)),p=p===t?-1>>>0:p>>>0;(L=D.exec(f))&&(M=L.index+L[0].length,!(M>y&&(h.push(f.slice(y,L.index)),!u&&L.length>1&&L[0].replace(F,function(){for(var R=1;R<arguments.length-2;R++)arguments[R]===t&&(L[R]=t)}),L.length>1&&L.index<f.length&&Array.prototype.push.apply(h,L.slice(1)),N=L[0].length,y=M,h.length>=p)));)D.lastIndex===L.index&&D.lastIndex++;return y===f.length?(N||!D.test(""))&&h.push(""):h.push(f.slice(y)),h.length>p?h.slice(0,p):h},String.prototype.split=function(f,D){return i(this,f,D)},i}}(),$.fn.caret=function(t){var e=this[0],u=e.contentEditable==="true";if(arguments.length===0){if(window.getSelection){if(u){this.is(":focus")||e.focus();var i=window.getSelection().getRangeAt(0),f=i.cloneRange();return f.selectNodeContents(e),f.setEnd(i.endContainer,i.endOffset),f.toString().length}return e.selectionStart}if(document.selection){if(e.focus(),u){var i=document.selection.createRange(),f=document.body.createTextRange();return f.moveToElementText(e),f.setEndPoint("EndToEnd",i),f.text.length}var t=0,D=e.createTextRange(),f=document.selection.createRange().duplicate(),p=f.getBookmark();for(D.moveToBookmark(p);D.moveStart("character",-1)!==0;)t++;return t}return 0}if(t===-1&&(t=this[u?"text":"val"]().length),window.getSelection)if(u){this.is(":focus")||e.focus();var h=window.getSelection();h.collapse(h.focusNode,t)}else e.setSelectionRange(t,t);else if(document.body.createTextRange){var D=document.body.createTextRange();D.moveToElementText(e),D.moveStart("character",t),D.collapse(!0),D.select()}return!u&&!this.is(":focus")&&e.focus(),t};function make_callback_plugin(t){var e=$.extend({init:$.noop,destroy:$.noop,name:"event"},t);return function(u,i){var f=arguments.length===0,D=arguments[0]==="unbind";if(!f&&!D&&!is_function(u))throw new Error('Invalid argument, it need to a function or string "unbind" or no arguments.');D&&(u=is_function(arguments[1])?arguments[1]:null);var p="callbacks_"+e.name;return this.each(function(){var h=$(this),g;function y(F){g.fireWith(h,[F])}f||D?(g=h.data(p),f?g&&g.fire():(u&&g?(g.remove(u),g.has()||(g=null)):g=null,g||(h.removeData(p),e.destroy.call(this,y,i)))):h.data(p)?$(this).data(p).add(u):(g=$.Callbacks(),g.add(u),h.data(p,g),e.init.call(this,y,i))})}}$.fn.resizer=make_callback_plugin({name:"resize",init:function(t,e){var u=$.extend({prefix:""},e),i=$(this),f,D=!0;if(i.is("body"))$(window).on("resize.resizer",t);else if(window.ResizeObserver)f=new ResizeObserver(function(){D||setTimeout(t,0),D=!1}),f.observe(this),i.data("observer",f);else{var p=$("<iframe/>").addClass(u.prefix+"resizer").appendTo(this)[0];$(p.contentWindow).on("resize",t)}},destroy:function(){var t=$(this);if(window.ResizeObserver){var e=t.data("observer");e&&(e.unobserve(this),t.removeData("observer"))}else{var u=t.find('> iframe[class$="resizer"]');u.length?($(u[0].contentWindow).off("resize").remove(),u.remove()):t.is("body")&&$(window).off("resize.resizer")}}}),$.fn.touch_scroll=make_callback_plugin({name:"touch",init:function(t){var e,u;$(this).on("touchstart.scroll",function(i){i=i.originalEvent,i.target.tagName.toLowerCase()!=="a"&&i.touches.length===1&&(u=e=i.touches[0])}).on("touchmove.scroll",function(i){if(i=i.originalEvent,e&&i.touches.length===1){var f=i.touches[0],D=t({origin:e,previous:u,current:f});D===!1&&i.preventDefault(),u=f}}).on("touchend.scroll",function(){(e||u)&&(e=u=null)})},destroy:function(){$(this).off("touchstart.scroll touchmove.scroll touchend.scroll")}}),$.fn.on_load=function(t){var e=$.extend({error:$.noop,load:$.noop,done:$.noop},t),u=[];return this.find("img,iframe").each(function(){var i=$(this),f=new $.Deferred;i.on("load",f.resolve).on("error",function(){e.error(i),f.reject()}),u.push(f)}),e.load(!!u.length),u.length?$.when.apply($,u).then(function(){e.done(!0)}):e.done(!1),this};function jquery_resolve(t){var e=jQuery.Deferred();return e.resolve(t),e.promise()}function always(t,e){return is_function(t.finally)?t.finally(e):is_function(t.always)?t.always(e):t}function unpromise(t,e,u){if(t!==undefined){if(is_promise(t))return is_function(t.done)?t=t.done(e):is_function(t.then)&&(t=t.then(e)),is_function(t.catch)&&is_function(u)&&t.catch(u),t;if(t instanceof Array){var i=t.filter(function(D){return D&&(is_function(D.done)||is_function(D.then))});if(i.length){var f=$.when.apply($,t).then(function(){return e([].slice.call(arguments))});return is_function(f.catch)&&(f=f.catch(u)),f}}return e(t)}}function defined(t){return t===undefined?!0:t}$.fn.is_fully_in_viewport=function(){function t(e,u){var i=e.getBoundingClientRect(),f=u[0].getBoundingClientRect(),D=i.top-f.top,p=i.bottom-f.top,h=u.height();return p>0&&D<=h}return root.IntersectionObserver?function(e){var u=this[0],i=jQuery.Deferred(),f=new root.IntersectionObserver(function(D){i.resolve(D[0].isIntersecting&&D[0].ratio===1),f.unobserve(u)},{root:e[0]});return f.observe(u),i.promise()}:function(e){return jquery_resolve(t(this[0],e))}}();var entity_re=/(&(?:[a-z\d]+|#\d+|#x[a-f\d]+);)/i,space_re=/\s/,combine_chr_re=/(.(?:[\u0300-\u036F]|[\u1AB0-\u1abE]|[\u1DC0-\u1DF9]|[\u1DFB-\u1DFF]|[\u20D0-\u20F0]|[\uFE20-\uFE2F])+)/,astral_symbols_re=/([\uD800-\uDBFF][\uDC00-\uDFFF])/,emoji_re=/(\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC3B\u200D\u2744|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F?|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD]))/,mobile_re=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i,tablet_re=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,format_split_re=/(\[\[(?:-?[@!gbiusor])*;[^;]*;[^\]]*\](?:[^\]\\]*(?:\\\\)*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]?)/i,format_parts_re=/\[\[((?:-?[@!gbiusor])*);([^;]*);([^;\]]*);?([^;\]]*);?([^\]]*)\]([^\]\\]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]+)\]?/gi,format_re=/\[\[((?:-?[@!gbiusor])*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]?/gi,format_exist_re=/\[\[((?:-?[@!gbiusor])*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)\]/gi,format_full_re=/^(\[\[(?:(?:-?[@!gbiusor])*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\])([^\]]*\\\][^\]]*|[^\]]*|[^[]*\[[^\]]*)(\])$/i,format_begin_re=/(\[\[(?:-?[@!gbiusor])*;[^;]*;[^\]]*\])/i,format_start_re=/^(\[\[(?:-?[@!gbiusor])*;[^;]*;[^\]]*\])/i,format_end_re=/\[\[(?:-?[@!gbiusor])*;[^;]*;[^\]]*\]?$/i,self_closing_re=/^(?:\[\[)?[^;]*@[^;]*;/,color_re=/^(?:#([0-9a-f]{3}|[0-9a-f]{4}|[0-9a-f]{6}|[0-9a-f]{8})|rgba?\([^)]+\)|hsla?\([^)]+\))$/i,url_re=/(\b(?:file|ftp|https?):\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'\\<>\][)])+)/gi,url_nf_re=/\b(?![^"\s[\]]*])(https?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'\\<>\][)])+)/gi,email_re=/((([^<>('")[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))/g,url_full_re=/^(https?:\/\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\s"'<>\\\][)])+)$/gi,email_full_re=/^((([^<>('")[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))$/g,command_re=/((?:"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'|`[^`\\]*(?:\\[\S\s][^`\\]*)*`|\/[^\/\\]*(?:\\[\S\s][^\/\\]*)*\/[gimsuy]*(?=\s|$)|(?:\\\s|\S))+)(?=\s|$)/gi,extended_command_re=/^\s*((terminal|cmd)::([a-z_]+)\(([\s\S]*)\))\s*$/,format_exec_split_re=/(\[\[(?:-?[@!gbiusor])*;[^\]]+\](?:\\[[\]]|[^\]])*\]|\[\[[\s\S]+?\]\])/,format_exec_re=/(\[\[[\s\S]+?\]\])/,float_re=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/,re_re=/^\/((?:\\\/|[^/]|\[[^\]]*\/[^\]]*\])+)\/([gimsuy]*)$/,string_re=/("(?:[^"\\]|\\(?:\\\\)*"|\\\\)*"|'(?:[^'\\]|\\(?:\\\\)*'|\\\\)*'|`(?:[^`\\]|\\(?:\\\\)*`|\\\\)*`)/,unclosed_strings_re=/^(?=((?:[^"']+|"[^"\\]*(?:\\[^][^"\\]*)*"|'[^'\\]*(?:\\[^][^'\\]*)*')*))\1./,broken_image='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 14"><title id="title2">rounded</title><path id="terminal-broken-image" d="m 14,10 h 2 v 1 a 3,3 0 0 1 -3,3 H 3 A 3,3 0 0 1 0,11 H 4.5 A 1.00012,1.00012 0 0 0 5.207,10.707 L 6.5,9.414 7.793,10.707 a 0.99963,0.99963 0 0 0 1.41406,0 l 2.36719,-2.36719 1.80127,1.44092 A 0.99807,0.99807 0 0 0 14,10 Z M 16,3 V 8 H 14.35059 L 12.12451,6.21924 A 0.99846,0.99846 0 0 0 10.793,6.293 L 8.5,8.586 7.207,7.293 a 0.99962,0.99962 0 0 0 -1.41406,0 L 4.08594,9 H 0 V 3 A 3,3 0 0 1 3,0 h 10 a 3,3 0 0 1 3,3 z M 6,4.5 A 1.5,1.5 0 1 0 4.5,6 1.5,1.5 0 0 0 6,4.5 Z" /></svg>',use_broken_image='<svg class="terminal-broken-image" role="presentation" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 14" xmlns:xlink="http://www.w3.org/1999/xlink"><use xlink:href="#terminal-broken-image"/></svg>',animation_supported=function(){if(typeof document>"u")return!1;var t=!1,e="Webkit Moz O ms Khtml".split(" "),u=document.createElement("div");if(u.style.animationName&&(t=!0),t===!1)for(var i=0;i<e.length;i++){var f=e[i]+"AnimationName";if(u.style[f]!==undefined){t=!0;break}}return u=null,t}(),agent=(root.navigator||window.navigator).userAgent,is_IE=/MSIE|Trident/.test(agent)||/rv:11.0/i.test(agent),is_IEMobile=/IEMobile/.test(agent),is_ch_unit_supported=function(){if(is_IE&&!is_IEMobile)return!1;if(typeof document>"u")return!0;var t=document.createElement("div");return t.style.width="1ch",t.style.width==="1ch"}(),is_css_variables_supported=root.CSS&&root.CSS.supports&&root.CSS.supports("(--fake-var: 0)"),is_android=navigator.userAgent.toLowerCase().indexOf("android")!==-1,is_key_native=function(){if(!("KeyboardEvent"in root&&"key"in root.KeyboardEvent.prototype))return!1;var e=root.KeyboardEvent.prototype,u=Object.getOwnPropertyDescriptor(e,"key").get;return!!u.toString().match(/\[native code\]/)}(),is_browser=function(){try{return this===window}catch{return!1}}(),is_mobile=function(t){var e=!1;return(mobile_re.test(t)||tablet_re.test(t.substr(0,4)))&&(e=!0),navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1?!0:e}(navigator.userAgent||navigator.vendor||root.opera),ch_unit_bug=!1;is_browser&&$(function(){function t(f){return f[0].getBoundingClientRect().width}var e='<span style="font-family: monospace;visibility:hidden;',u=$(e+'width:1ch;overflow: hidden">&nbsp;</span>');u.appendTo("body");var i=$(e+'">&nbsp;</span>').appendTo("body");ch_unit_bug=Math.abs(t(u)-t(i))>1e-4,u.remove(),i.remove()});function css(t,e,u){if(t instanceof $.fn.init)t.each(function(){css(this,e,u)});else if($.isPlainObject(e))Object.keys(e).forEach(function(i){t.style.setProperty(i,e[i])});else{if(typeof u>"u")return t.style.getPropertyValue(e);t.style.setProperty(e,u)}}function style_prop(t,e,u){var i=[t+":"+e+"px",t+":calc("+e+"px / var(--pixel-density, 1))"];return u&&(i=i.map(function(f){return f+" !important"})),i.join(";")}function a11y_hide(t){t.attr({role:"presentation","aria-hidden":"true"})}var excepctions=[];function alert_exception(t,e){arguments[0]instanceof $.terminal.Exception&&(t=arguments[0].type,e=arguments[0]);var u=(t?t+": ":"")+exception_message(e);excepctions.indexOf(u)===-1&&(excepctions.push(u),setTimeout(function(){throw e},0))}function generate_id(){var t=Math.random()*46656|0,e=Math.random()*46656|0;return t=("000"+t.toString(36)).slice(-3),e=("000"+e.toString(36)).slice(-3),t+e}function remove(t,e){for(var u in t)e(t[u],u)&&t.splice(u,1)}function scrollbar_event(t,e,u){u=u||1;var i=e.offset().left,f=e.outerWidth()*u;return f<=t.clientX-i}function exception_message(t){return typeof t=="string"?t:typeof t.fileName=="string"?t.fileName+": "+t.message:t.message}function Cycle(){var t=[].slice.call(arguments),e=0;$.extend(this,{get:function(){return t},index:function(){return e},rotate:function(u,i){if(i===undefined)i=e;else if(i===e)return;if(!u){var f=t.filter(function(D){return typeof D<"u"});if(!f.length)return}if(t.length)return t.length===1?t[0]:(e===t.length-1?e=0:++e,typeof t[e]<"u"?t[e]:this.rotate(!0,i))},length:function(){return t.length},remove:function(u){delete t[u]},set:function(u){for(var i=t.length;i--;)if(t[i]===u){e=i;return}this.append(u),e=t.length-1},front:function(){if(t.length){for(var u=e,i=!1;!t[u];)if(u++,u>t.length){if(i)break;u=0,i=!0}return t[u]}},map:function(u){return t.map(function(i,f){return typeof i<"u"?u(i,f):null}).filter(Boolean)},forEach:function(u){return t.forEach(function(i,f){typeof i<"u"&&u(i,f)})},append:function(u){t.push(u)}})}function Stack(t){var e=is_array(t)?t:t?[t]:[];$.extend(this,{data:function(){return e},map:function(u){return $.map(e,u)},size:function(){return e.length},pop:function(){if(e.length===0)return null;var u=e[e.length-1];return e=e.slice(0,e.length-1),u},push:function(u){return e=e.concat([u]),u},top:function(){return e.length>0?e[e.length-1]:null},clone:function(){return new Stack(e.slice(0))}})}function WorkerCache(t){var e=$.extend({validation:$.noop,action:$.noop,onCache:$.noop},t);this._onCache=e.onCache.bind(this),this._action=e.action.bind(this),this._validation=e.validation.bind(this),"Map"in root&&(this._cache=new Map)}WorkerCache.prototype.validate=function(t){var e=this._validation(t),u=e===undefined||e===!0;return u||this._cache.clear(),u},WorkerCache.prototype.clear=function(){this._cache.clear()},WorkerCache.prototype.get=function(t){if(!this._cache)return this._action(t);var e;return this.validate(t)&&this._cache.has(t)?(e=this._cache.get(t),this._onCache({cache:e}),e):(e=this._action(t),this._cache.set(t,e),e)};function History(t,e,u){var i=!0,f="";typeof t=="string"&&t!==""&&(f=t+"_"),f+="commands";var D;u?D=[]:(D=$.Storage.get(f),D=D?JSON.parse(D):[]);var p=D.length-1;$.extend(this,{append:function(h){i&&D[D.length-1]!==h&&(D.push(h),e&&D.length>e&&(D=D.slice(-e)),p=D.length-1,u||$.Storage.set(f,JSON.stringify(D)))},set:function(h){is_array(h)&&(D=h,u||$.Storage.set(f,JSON.stringify(D)))},data:function(){return D},reset:function(){p=D.length-1},last:function(){return D[D.length-1]},end:function(){return p===D.length-1},position:function(){return p},current:function(){return D[p]},next:function(){var h=p;if(p<D.length-1&&++p,h!==p)return D[p]},previous:function(){var h=p;if(p>0&&--p,h!==p)return D[p]},clear:function(){D=[],this.purge()},enabled:function(){return i},enable:function(){i=!0},purge:function(){u||$.Storage.remove(f)},disable:function(){i=!1},toggle:function(h){typeof h>"u"?i=!i:i=h}})}function OutputLines(t){this._settings=t,this._lines=[],this._snapshot=[]}OutputLines.prototype.make_snapshot=function(t){this._snapshot.push(t)},OutputLines.prototype.get_partial=function(){if(!this._snapshot.length)return[];var t=this._snapshot[this._snapshot.length-1];return t},OutputLines.prototype.update_snapshot=function(t,e){this._snapshot[t]=e},OutputLines.prototype.limit_snapshot=function(t){this._snapshot=this._snapshot.slice(t)},OutputLines.prototype.clear_snapshot=function(){this._snapshot=[]},OutputLines.prototype.get_snapshot=function(){return this._snapshot.reduce(function(t,e){return e?t.concat(e):t},[]).join(`
`)},OutputLines.prototype.join=function(){var t=[].slice.call(arguments);return t.some(is_function)?function(){return t.reduce(function(e,u){return is_function(e)&&(e=e()),is_function(u)&&(u=u()),is_promise(e)||is_promise(u)?$.when(e,u).then(function(i,f){return i+f}):u})}:t.some(is_promise)?t.reduce(function(e,u){return $.when(e,u).then(function(i,f){return i+f})}):t.join("")},OutputLines.prototype.import=function(t){this._lines=t},OutputLines.prototype.push=function(t){var e=t[0],u=t[1];if(this.has_newline())this._lines.push(t);else{var i=this.last_line();i[0]=this.join(i[0],e),i[1].newline=u.newline}},OutputLines.prototype.clear=function(t){this._lines.forEach(function(e,u){var i=e[1];is_function(i.onClear)&&i.onClear.call(self,t(u))}),this._lines=[],this._snapshot=[]},OutputLines.prototype.data=function(){return this._lines.filter(Boolean)},OutputLines.prototype.has_newline=function(){var t=this.last_line();return t?t[1].newline:!0},OutputLines.prototype.unmount=function(t){var e=t.data("index"),u=this._lines[e];if(u){var i=u[1];is_function(i.unmount)&&i.unmount.call(self,t)}},OutputLines.prototype.last_line=function(){var t=this.data(),e=t.length;return t[e-1]},OutputLines.prototype.update=function(t,e,u){if(e===null)delete this._lines[t],delete this._snapshot[t];else return this._lines[t][0]=e,u&&(this._lines[t][1]=$.extend(this._lines[t][1],u)),this._lines[t][1]},OutputLines.prototype.length=function(){return this._lines.length},OutputLines.prototype.valid_index=function(t){return!!this._lines[t]},OutputLines.prototype.render=function(t,e){var u=this._settings(),i=[];if(this._snapshot=[],u.outputLimit>=0){var f;u.outputLimit===0?f=t:f=u.outputLimit,this._lines.forEach(function(p,h){var g=p[0],y=p[1];i.push({value:g,index:h,options:y})});var D=i.length-f-1;i=i.slice(D)}else i=this._lines.map(function(p,h){return{value:p[0],index:h,options:p[1]}});return e(i)};function FormatBuffer(t){this._options=t,"Map"in root&&(this._format_cache=new Map),this._output_buffer=[]}FormatBuffer.NEW_LINE=1,FormatBuffer.prototype.format=function(e,u,i){var f=this._format_cache&&this._settings.useCache;if(f){var D=JSON.stringify([e,this._settings]);if(this._format_cache.has(D))return this._format_cache.get(D)}var p={line:$.terminal.format(e,this._settings),raw:i,newline:u};return f&&this._format_cache.set(D,p),p},FormatBuffer.prototype.empty=function(){return!this._output_buffer.length},FormatBuffer.prototype.append=function(t,e,u,i){if(this._settings=$.extend({useCache:!0},this._options(u)),this._output_buffer.push(FormatBuffer.NEW_LINE),t instanceof Array)for(var f=0,D=t.length;f<D;++f)if(t[f]===""||t[f]==="\r")this._output_buffer.push({line:"",raw:""});else{var p=this.format(t[f],f===D-1,i[f]);this._output_buffer.push(p)}else u.raw?this._output_buffer.push({line:t,raw:i}):this._output_buffer.push(this.format(t,!1,i));this._output_buffer.push({finalize:u.finalize,index:e,raw:u.raw,newline:u.newline})},FormatBuffer.prototype.clear_cache=function(){this._format_cache&&this._format_cache.clear()},FormatBuffer.prototype.output=function(){return this._output_buffer.slice()},FormatBuffer.prototype.is_empty=function(){return!this._output_buffer.length},FormatBuffer.prototype.clear=function(){this._output_buffer=[]},FormatBuffer.prototype.forEach=function(t){for(var e=0;e<this._output_buffer.length;){var u=this._output_buffer[e++];u===FormatBuffer.NEW_LINE?t():t(u)}},FormatBuffer.prototype.flush=function(t){this.forEach(t),this.clear()};function with_prompt(t,e,u){function i(h){var g=$.terminal.escape_brackets("[ERR]> ");e("[[;red;]"+g+"]"),alert_exception("Prompt",h)}function f(h){e(h),D.resolve()}var D=new $.Deferred;switch(typeof t){case"string":f(t);break;case"function":try{var p=t.call(u,function(h){f(h)});typeof p=="string"&&f(p),p&&p.then&&p.then(f).catch(i)}catch(h){i(h)}break}return D.promise()}var cmd_index=0;$.cmd={defaults:{mask:!1,caseSensitiveSearch:!0,historySize:60,prompt:"> ",enabled:!0,history:!0,onPositionChange:$.noop,onCommandChange:$.noop,inputStyle:"textarea",mobileDelete:is_mobile,onPaste:$.noop,clickTimeout:200,holdTimeout:400,holdRepeatTimeout:200,mobileIngoreAutoSpace:[],repeatTimeoutKeys:[],tabindex:1,tabs:4}},$.fn.cmd=function(t){var e=$.extend({},$.cmd.defaults,t);function u(s){return e.mobileIngoreAutoSpace.length&&e.mobileIngoreAutoSpace.indexOf(s)!==-1&&is_android}var i=this,f=i.data("cmd");if(f)return f;var D=cmd_index++;i.addClass("cmd");var p=$('<div class="cmd-wrapper"/>').appendTo(i);p.append('<span class="cmd-prompt"></span>'),p.append('<div class="cmd-cursor-line"><span></span><span class="cmd-cursor"><span data-text class="end"><span>&nbsp;</span></span></span><span></span></div>');var h=p.find(".cmd-cursor-line");a11y_hide(h);var g;is_mobile?(g=function(){var s=$('<div class="cmd-editable" contenteditable/>').attr({autocapitalize:"off",autocorrect:"off",spellcheck:"false",tabindex:e.tabindex}).insertAfter(i);s.on("focus",function(){i.enable()}).on("blur",function(){i.disable()});var v,_={$node:s,val:function(B){if(typeof B>"u")return s.text();s.html(B)},reset:function(){clearTimeout(v),v=setTimeout(function(){s.css({top:"",bottom:""})},100)},focus:function(){css(s[0],{top:"calc(var(--terminal-scroll, 0) * 1px)"}),_.reset()},blur:function(){s.css({top:"100%",bottom:0}).blur(),window.getSelection().removeAllRanges(),_.reset()}};return _}(),i.addClass("cmd-mobile")):(g=function(){var s=generate_id(),v=$("<textarea>").attr({autocapitalize:"off",spellcheck:"false",id:s,tabindex:e.tabindex}).addClass("cmd-clipboard").appendTo(i);return v.before('<label class="visually-hidden" for="'+s+'">Clipboard textarea for jQuery Terminal</label>'),{$node:v,val:function(_){return typeof _>"u"?v.val():v.val(_)}}}(),g.val(" ")),e.width&&i.width(e.width);var y,F,L,M,N,R=0,z,te=i.find(".cmd-prompt"),A=!1,E="",C=null,Y,w="",ie,ue="",I=0,pe,ae,G=0,ne,ee,Z=i.find(".cmd-cursor"),Ee,Pe,ke=0,Ze="\uFFFF",Me=/\uFFFF$/,Te=/^\uFFFF$/;function _e(s){var v=$(s.target);if(v.is("span,img,a"))return v=v.closest("[data-text]"),v.index()+v.parent("span").prevAll().find("[data-text]").length+v.closest('[role="presentation"]').prevUntil(".cmd-prompt").find("[data-text]").length;if(v.is('div[role="presentation"]')){var _=!v.next().length;return v.find("[data-text]").length+v.prevUntil(".cmd-prompt").find("[data-text]").length-(_?0:1)}}var Ft={SPACEBAR:" ",UP:"ArrowUP",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight",DEL:"Delete",MULTIPLY:"*",DIVIDE:"/",SUBTRACT:"-",ADD:"+"};function Lt(s){var v=s.key.toUpperCase();return Ft[v]?Ft[v]:v}function nr(s){if(s.key){var v=Lt(s).toUpperCase();if(v==="CONTROL")return"CTRL";var _=[];return s.ctrlKey&&_.push("CTRL"),s.metaKey&&v!=="META"&&_.push("META"),s.shiftKey&&v!=="SHIFT"&&_.push("SHIFT"),s.altKey&&v!=="ALT"&&_.push("ALT"),_.length&&v===" "&&(v="SPACEBAR"),s.key&&_.push(v),_.join("+")}}var He={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},ce;for(ce=1;ce<25;ce++)He[111+ce]="F"+ce;var It="";for(ce=65;ce<91;ce++)It=String.fromCharCode(ce),He[ce]=[It.toLowerCase(),It.toUpperCase()];var Et={};Object.keys(He).forEach(function(s){is_array(He[s])?He[s].forEach(function(v){Et[v.toUpperCase()]=s}):Et[He[s].toUpperCase()]=s});var We,Dt={"ALT+D":ut({clipboard:!0}),"HOLD+ALT+D":ut({clipboard:!0,hold:!0}),"HOLD+DELETE":ut({clipboard:!1,hold:!0}),"HOLD+SHIFT+DELETE":ut({clipboard:!1,hold:!0}),ENTER:function(){ee&&w&&!e.mask&&(is_function(e.historyFilter)&&e.historyFilter(w)||e.historyFilter instanceof RegExp&&w.match(e.historyFilter)||!e.historyFilter)&&ee.append(w);var s=w;is_mobile||g.$node.blur(),ee.reset(),i.set(""),g.val(""),Ke="",d=!0;var v;return e.commands&&(v=e.commands.call(i,s)),is_function(pe)&&(v&&is_function(v.then)?v.then(function(){we()}):we()),is_mobile||g.$node.focus(),!1},"SHIFT+ENTER":function(){return i.insert(`
`),!0},BACKSPACE:Pt,"SHIFT+BACKSPACE":Pt,TAB:function(){i.insert("	")},"CTRL+D":function(){return i.delete(1),!1},DELETE:function(){return i.delete(1),!0},"HOLD+ARROWUP":Yt,ARROWUP:Yt,"CTRL+ARROWUP":$t,"CTRL+P":$t,ARROWDOWN:Qt,"HOLD+ARROWDOWN":Qt,"CTRL+N":kt,"CTRL+ARROWDOWN":kt,ARROWLEFT:dt,"HOLD+ARROWLEFT":debounce(dt,10),"CTRL+B":dt,"CTRL+ARROWLEFT":function(){var s=I-1,v=0;w[s]===" "&&--s;for(var _=s;_>0;--_)if(w[_]===" "&&w[_+1]!==" "){v=_+1;break}else if(w[_]===`
`&&w[_+1]!==`
`){v=_;break}i.position(v)},"CTRL+R":function(){return A?et(!0):(Y=pe,ft(),ie=w,i.set(""),xe(),A=!0),!1},"CTRL+G":function(){if(A)return pe=Y,we(),i.set(ie),xe(),A=!1,E="",!1},ARROWRIGHT:At,"HOLD+ARROWRIGHT":debounce(At,10),"CTRL+F":At,"CTRL+ARROWRIGHT":function(){w[I]===" "&&++I;var s=/\S[\n\s]{2,}|[\n\s]+\S?/,v=w.slice(I).match(s);!v||v[0].match(/^\s+$/)?i.position(bare_text(w).length):v[0][0]!==" "?I+=v.index+1:(I+=v.index+v[0].length-1,v[0][v[0].length-1]!==" "&&--I),xe()},F12:Qe,END:me(!0),"CTRL+END":me(),"CTRL+E":me(),HOME:Bt(!0),"CTRL+HOME":Bt(),"CTRL+A":Bt(),"SHIFT+INSERT":mt,"CTRL+SHIFT+T":Qe,"CTRL+W":ot({clipboard:!0,hold:!1}),"CTRL+BACKSPACE":ot({clipboard:!0,hold:!1}),"HOLD+BACKSPACE":ot({clipboard:!1,hold:!0}),"HOLD+SHIFT+BACKSPACE":ot({clipboard:!1,hold:!0}),"CTRL+H":function(){return w!==""&&I>0&&i.delete(-1),!1},"CTRL+X":Qe,"CTRL+C":function(){return get_selected_html()===""},"CTRL+T":Qe,"CTRL+Y":function(){ue!==""&&i.insert(ue)},"CTRL+V":mt,"META+V":mt,"CTRL+K":function(){var s=text(w).length;return s>I&&(ue=i.delete(s-I),text_to_clipboard(g.$node,ue)),!1},"CTRL+U":function(){return w!==""&&I!==0&&(ue=i.delete(-I),text_to_clipboard(g.$node,ue)),!1},"CTRL+TAB":function(){return!1},"META+`":Qe,"META+R":Qe,"META+L":Qe};function ut(s){return s=s||{},s.hold&&!e.mobileDelete?function(){return i.delete(1),!1}:function(){var _=/ *[^ ]+ *(?= )|[^ ]+$/,B=w.slice(I),U=B.match(_);return U&&(ue=U[0],s.clipboard&&text_to_clipboard(g.$node,ue)),i.set(w.slice(0,I)+w.slice(I).replace(_,""),!0),!1}}function ot(s){return s=s||{},s.hold&&!e.mobileDelete?function(){i.delete(-1)}:function(){if(w!==""&&I!==0){var _=w.slice(0,I).match(/([^ ]* *$)/);_[0].length&&(ue=i.delete(-_[0].length),s.clipboard&&text_to_clipboard(g.$node,ue))}return!1}}function Qe(){return!0}function mt(){return g.val(""),ke=0,i.isenabled()&&!g.$node.is(":focus")&&g.$node.trigger("focus",[!0]),g.$node.one("input",wt),!0}function wt(){if(ke++>0)return;function s(){g.val(w),r()}function v(_){i.insert(_),s()}i.isenabled()&&i.oneTime(100,function(){var _=g.val().replace(/\r/g,"");if(is_function(e.onPaste)){var B=e.onPaste.call(i,{target:i,text:_});if(B!==undefined){B&&is_function(B.then||B.done)?(B.then||B.done).call(B,v):typeof B=="string"?v(B):B===!1&&s();return}}v(_)})}function $t(){return Ae?(ie=w,i.set(ee.current())):i.set(ee.previous()),Ae=!1,!1}function kt(){return ee.end()?(Ae=!0,i.set(ie)):i.set(ee.next()),!1}function at(s){return s.match(/\n/)}function jt(s,v){var _=s.split(`
`).map(function(U){return $.terminal.length(U)});v&&(_[0]+=v);var B=_.filter(function(U){return U>=y});return!!B.length}function Vt(s){var v=L,_=$.terminal.split_equal(v+s,y),B=new RegExp("^"+$.terminal.escape_regex(v));return _=_.map($.terminal.unescape_brackets),_[0]=_[0].replace(B,""),_}function Yt(){var s=$.terminal.substring(w,0,I),v=i.column(),_=i.find(".cmd-cursor-line"),B=_.prevUntil("span").length;if(B===1&&v<=z)return i.position(0),!1;if(B===0)return $t();if(at(s)||jt(s,z)){var U=_.prev(),q=U.is(".cmd-end-line"),re=Vt(w);U=re[B-1];var oe=re[B].substring(v).length,X;return oe>0?(X=v,B-1===0&&(X-=z),X=v+U.substring(X).length,q&&++X):X=v+1,i.position(-X,!0),!1}else return $t()}function Qt(){var s=$.terminal.substring(w,I);if(at(s)||jt(s)){var v=Vt(w),_=i.column(),B=i.find(".cmd-cursor-line"),U=B.prevUntil("span"),q=U.length,re=B.is(".cmd-end-line"),oe=B.next().is(".cmd-end-line"),X=v[q+1];if(!X)return kt();var fe=v[q].substring(_).length,le;return fe===0?(le=X.length,oe&&le++):(le=Math.min(_,X.length)+fe,q===0&&(le+=z),re&&(le+=1)),i.position(le,!0),!1}else return kt()}function Pt(){A?(E=E.slice(0,-1),ft()):w!==""&&I>0&&i.delete(-1),i.oneTime(1,function(){d=!0})}function dt(){I>0&&i.position(-1,!0)}function At(){return I<bare_text(w).length&&i.position(1,!0),!1}function Bt(s){function v(){i.position(0)}return s?function(){if(w.match(/\n/)){var _=w.substring(0,i.position());i.position(_.lastIndexOf(`
`)+1)}else v()}:v}function me(s){function v(){i.position(text(w).length)}return s?function(){if(w.match(/\n/)){for(var _=w.split(`
`),B=i.position(),U=0,q=0;q<_.length;++q)if(U+=_[q].length,U>B){i.position(U+q);return}}v()}:v}function Gt(){var s=g.$node,v=s.is(":focus");ae?i.oneTime(10,function(){!s.is(":focus")&&ae&&s.trigger("focus",[!0])}):v&&!ae&&s.trigger("blur",[!0])}function Xt(){if(animation_supported){var s=window.getComputedStyle(Z[0]),v=s.getPropertyValue("--animation");v=v.replace(/^\s*|\s*$/g,"");var _=i.attr("class");if(_.match(/-animation/)&&(_=_.replace(/[a-z]+-animation/g,"")),v&&!v.match(/blink/)){var B=v.replace(/terminal-/,"")+"-animation";_.match(B)||(_+=" "+B)}_=_.replace(/\s+/g," "),_!==i.attr("class").replace(/\s+/g," ")&&i.attr("class",_)}}function r(s){i.isenabled()&&i.oneTime(10,function(){!is_mobile&&g.val()!==w&&!s&&g.val(" "+w),ae&&i.oneTime(10,function(){try{var v=is_mobile?I:I+1;g.$node.caret()!==v&&g.$node.caret(v)}catch{}})})}if(animation_supported&&!is_android)Ee=function(s){s?Z.addClass("cmd-blink"):Z.removeClass("cmd-blink")},Pe=function(){var s=Z.clone();s.insertBefore(Z),Z.remove(),Z=s};else{var st=!1;Ee=function(s){s&&!st?(st=!0,Z.addClass("cmd-inverted cmd-blink"),i.everyTime(500,"blink",Tt)):st&&!s&&(st=!1,i.stopTime("blink",Tt),Z.removeClass("cmd-inverted cmd-blink"))},Pe=function(){Ee(!1),Ee(!0)}}function Tt(){Z.toggleClass("cmd-inverted")}function ft(){pe="(reverse-i-search)`"+E+"': ",we()}function ir(){pe=Y,A=!1,C=null,E=""}function et(s){var v=ee.data(),_,B,U=v.length;if(s&&C>0&&(U-=C),E.length>0)for(var q=E.length;q>0;q--){B=$.terminal.escape_regex(E.slice(0,q)),e.caseSensitiveSearch?_=new RegExp(B):_=new RegExp(B,"i");for(var re=U;re--;)if(_.test(v[re])){C=v.length-re,i.position(v[re].indexOf(B)),i.set(v[re],!0),xe(),E.length!==q&&(E=E.slice(0,q),ft());return}}E=""}function ht(){var s=i.find(".cmd-prompt"),v=s.html();s.html("<span>&nbsp;</span>");var _=s.find("span").get(0).getBoundingClientRect().width;return s.html(v),_}function tt(s){var v=i.width();return Math.floor(v/s)}function rt(s){function v(o){return $.terminal.split_equal(o,y)}function _(o){var a=[];return o.forEach(function(l,c){$.terminal.strip(l).match(Te)?(a[c]=!1,c>0&&(a[c-1]+=Ze)):a[c]=o[c]}),a.filter(function(l){return l!==!1})}var B=te.find(".cmd-line"),U;B.length?U=B.nextUntil(".cmd-line").text():U=te.text(),U=U.replace("\u200B",""),U=$.terminal.escape_brackets(U);var q=St(),re=new RegExp("^"+q+$.terminal.escape_regex(U)),oe;if(s.match(/\n/)){for(var X=s.split(`
`),fe=y-z-1,le=0;le<X.length-1;++le)X[le]+=Ze;for(strlen(X[0])>fe?(oe=v(U+X[0]),oe[0]=oe[0].replace(re,""),oe=_(oe)):oe=[X[0]],le=1;le<X.length;++le)if(strlen(X[le])>y){var ge=v(X[le]);le<X.length-1&&(ge=_(ge)),oe=oe.concat(ge)}else oe.push(X[le])}else oe=v(q+U+s,y),oe[0]=oe[0].replace(re,"");if(oe.length>1){var n=$.terminal.length(oe[oe.length-1]);n===y&&oe.push("")}return oe}var vt=new WorkerCache({validation:function(s){var v=!1;return(!this._previous_value||this._previous_value===s)&&(!this._cols||this._cols===y)&&(v=!0),this._previous_value=s,this._cols=y,v},action:rt});function qe(s){return vt.get(s)}function nt(s,v){try{s=$.terminal.escape_formatting(s);var _=$.extend({},e,{unixFormattingEscapeBrackets:!0,position:I,command:!0}),B=$.terminal.apply_formatters(s,_),U=$.terminal.normalize(B[0]),q=$.terminal.length(U);return v||(G=B[1],G>q&&(G=q)),U}catch(re){return alert_exception("[Formatting]",re.stack),s}}function Je(s,v){var _=$.terminal.encode(Ue(s),{tabs:e.tabs,before:v});return $.terminal.format(_,{charWidth:e.charWidth,allowedAttributes:e.allowedAttributes||[]})}function Ue(s){return $.terminal.partition(s).join("")}function ze(s,v){return $.terminal.length(s,v)}function _t(s){var v=strlen(text(s));return v>0&&v>y-z-1||s.match(/\n/)}function gt(s,v,_){return $.terminal.substring(s,v,_)}function zt(s){return $.terminal.is_formatting(s)?s.replace(format_parts_re,"$4").match(/^emoji /):!1}var xe=function(){var s=Z.prev(),v=Z.next(),_=Z.parent();function B(X,fe){var le=X.match(Me);le&&(X=X.replace(Me," ")),_.toggleClass("cmd-end-line",!!le);var ge=!1,n=$.extend({prompt:"",last:!1},fe),o=n.position,a=ze(X),l=n.prompt,c;if(o===a)s.html(Je(X)),c="&nbsp;",q(),v.html("");else if(o===0)s.html(""),c=gt(X,0,1),Z.html(Je(c)),v.html(Je(gt(X,1),l+c));else{var x=$.terminal.substring(X,0,o);s.html(Je(x,l)),c=gt(X,o,o+1);var k=(l+x).replace(/^.*\t/,"");Z.html(Je(c,k)),o===a-1?(ge=!0,v.html("")):(c.match(/\t/)?k="":k+=c,v.html(Je(gt(X,o+1),k)))}if(ch_unit_bug)if(typeof wcwidth<"u"){var T=strlen(text(c));T===1&&zt(c)&&(T=2),Z.width(F*T)}else Z.width(F);Z.toggleClass("cmd-end-line",ge),Xt();var O=$.terminal.length(Z.text());if(O>1){var S=Z.find("[data-text]")[0];S.style.setProperty("--length",O)}Pe()}function U(X,fe){var le=X.match(Me),ge='<div role="presentation" aria-hidden="true"';return le&&(X=X.replace(Me," "),ge+=' class="cmd-end-line"'),ge+=">"+Je(X,fe||"")+"</div>",ge}function q(){Z.html('<span data-text class="end"><span>&nbsp;<span></span>')}function re(X){var fe=_;$.each(X,function(le,ge){fe=$(U(ge)).insertAfter(fe)})}function oe(X){$.each(X,function(fe,le){_.before(U(le,fe===0?M:""))})}return function(){var X;switch(typeof e.mask){case"boolean":X=e.mask?w.replace(/./g,"*"):w;break;case"string":X=w.replace(/./g,e.mask);break}var fe=nt(X),le;ze(fe)===text(X).length?le=I:le=G;var ge;if(p.css({display:"none"}),p.find("div:not(.cmd-cursor-line)").remove(),s.html(""),_t(fe)){var n=fe.match(/\t/g),o=fe;n&&(fe=fe.replace(/\t/g,"\0\0\0\0"));var a=qe(fe);n&&(a=$.map(a,function(b){return b.replace(/\x00\x00\x00\x00/g,"	")}));var l=ze(a[0]);if(!(l===0&&a.length===1))if(le<l)B(a[0],{length:a.length,position:le,prompt:M}),re(a.slice(1));else if(le===l)_.before(U(a[0],M)),B(a[1]||"",{length:a.length,position:0,last:a.length<=2}),a.length>2&&re(a.slice(2));else{var c=a.slice(-1)[0],x=ze(o),k=x-le,T=ze(c),O=0;if(k===-1&&(k=0),k<=T)oe(a.slice(0,-1)),T===k?O=0:O=T-k,B(c,{length:a.length,position:O,last:!0});else{var S,H;for(O=le,ge=0;ge<a.length;++ge){var j=$.terminal.length(a[ge]);if(O>j)O-=j;else break}if(H=a[ge],S=ge,O===ze(H)&&(O=0,H=a[++S],H===undefined)){var J=$.terminal.defaults.strings.redrawError;throw new Error(J)}B(H,{length:a.length,position:O}),oe(a.slice(0,S)),re(a.slice(S+1))}}i.find(".cmd-cursor-line ~ div:last-of-type").append("<span></span>")}else fe===""?(s.html(""),q(),v.html("")):B(fe,{length:1,position:le});var se=_.prevUntil(".cmd-prompt").length;is_css_variables_supported?i[0].style.setProperty("--cursor-line",se):g.$node.css("top",se*14+"px"),p.css({display:""})}}(),Nt=function(){function s(_,B){var U=$.extend({},e,{position:B,command:!0});return $.terminal.apply_formatters(_,U)[1]}function v(_,B,U){var q=s(U,B);if(q===_){var re=s(U,B+1);return re>_?0:1}else return q<_?1:-1}return function(_,B){if(B===0)return 0;_=bare_text(_);var U=_.length,q=$.terminal.escape_brackets(w),re=binary_search(0,U,B,v,[q]),oe=$.terminal.split_characters(_);if(U>oe.length){for(var X=0,fe=0;fe<oe.length;++fe)if(X+=oe[fe].length,X>=re)return X}return re}}();function St(){return R?new Array(R+1).join("\uFFFF"):""}var $e,we=function(){function s(_){if(!_)return N=0,z=R,_;var B=St(),U=B+_,q=$.terminal.split_equal(U,y);q=q.map(function(fe){return fe.replace(/^\uFFFF+/,"")}),q=q.map(function(fe){return $.terminal.have_formatting(fe)?$.terminal.format_split(fe).map(function(le){return $.terminal.is_formatting(le)?le:"[[;;]"+$.terminal.escape_brackets(le)+"]"}).join(""):"[[;;]"+$.terminal.escape_brackets(fe)+"]"});var re={charWidth:e.charWidth};M=q[q.length-1];var oe=$.terminal.encode(q[q.length-1],{tabs:e.tabs}),X=$.terminal.format(oe,re);return N=strlen(text(oe)),z=N+R,q.slice(0,-1).map(function(fe){return fe=$.terminal.encode(fe,{tabs:e.tabs}),'<span class="cmd-line">'+$.terminal.format(fe,re)+"</span>"}).concat([X]).join(`
`)}function v(_,B){_&&((B&&B.formatters||!B)&&(_=$.terminal.apply_formatters(_,{prompt:!0}),_=$.terminal.normalize(_)),_=crlf(_));var U=s(_);if(L=_,U=U||$.terminal.format("[[;;]\u200B]"),te.html()!==U){te.html(U);var q=te.find("> span span");g.$node.attr("data-cmd-prompt",te.text()),is_ch_unit_supported&&(te.hide(),q.each(function(){var re=$(this),oe=strlen(re.text());oe===0?re.css("width",1):re.css("width",oe+"ch")}),te.show())}}return function(_){$e&&$e.set&&($e.set=$.noop,$e=null);var B=$e={set:v};with_prompt(pe,function(U){B.set(U,_)},i)}}();function yt(){is_function(e.onCommandChange)&&e.onCommandChange.call(i,w)}function xt(s,v,_){var B=s.substring(0,v);if(v===0||!s.length)return 0;var U=/\n?([^\n]*)$/,q=B.match(U),re=q[1].length;return!at(B)&&(_||jt(B,z))&&(re+=z),re===0?re:(re%=y,re===0?y:re)}$.extend(i,{option:function(s,v){return typeof v>"u"?e[s]:(e[s]=v,i)},name:function(s){if(s!==undefined){ne=s;var v=ee&&ee.enabled()||!ee;return ee=new History(ne,e.historySize,e.history==="memory"),v||ee.disable(),i}else return ne},purge:function(){return ee.clear(),i},history:function(){return ee},delete:function(s,v){var _,B;return s===0?"":(s<0?I>0&&(_=w.slice(0,I).slice(s),B=bare_text(w),B=B.slice(0,I+s)+B.slice(I,B.length),v||i.position(I+s)):w!==""&&(B=text(w),I<B.length&&(_=B.slice(I).slice(0,s),B=B.slice(0,I)+B.slice(I+s,B.length))),_&&(w=B),xe(),r(),yt(),_)},set:function(s,v,_){if(s!==undefined){var B=s!==w;w=s,v||i.position(bare_text(w).length),xe(),r(),!_&&B&&yt()}return i},keymap:function(s,v){function _(B,U){var q=Dt[B];return is_function(q)&&(q=q.bind(i)),function(re){return U.call(i,re,q)}}if(s===null)return We=Dt,i;if(typeof s>"u")return We;if(typeof s=="string")if(typeof v>"u"){if(We[s])return We[s];if(Dt[s])return Dt[s]}else We[s]=_(s,v);else return We=$.extend({},We||Dt,$.omap(s||{},_)),i},insert:function(s,v){var _=bare_text(w),B=bare_text(s).length;return I===_.length?s=_+s:I===0?s=s+_:s=_.slice(0,I)+s+_.slice(I),w=s,v||i.position(B,!0,!0),r(),xe(),yt(),i},get:function(){return w},commands:function(s){return s&&(e.commands=s,i)},destroy:function(){return Ie.unbind("keypress.cmd",Ht),Ie.unbind("keydown.cmd",pt),Ie.unbind("input.cmd",Re),i.stopTime("blink",Tt),i.find(".cmd-wrapper").remove(),i.find(".cmd-prompt, .cmd-clipboard, .cmd-editable").remove(),i.removeClass("cmd").removeData("cmd").off(".cmd"),i},display_column:function(s){var v=nt(w);return v=$.terminal.strip(v),xt(v,G,s)},column:function(s){return xt(w,I,s)},line:function(){var s=w.substring(0,I);return I===0||!w.length?0:s.split(/\n/).length-1},__set_prompt_margin:function(s){R=s,z=N+R},prompt:function(s,v){if(s===!0)return L;if(s===undefined)return pe;var _=s!==pe;if(typeof s=="string"||typeof s=="function")pe=s;else throw new Error("prompt must be a function or string");return _&&(we(v),xe()),i},kill_text:function(){return ue},position:function(s,v,_){if(typeof s=="number"){var B=I,U=bare_text(w).length;return v?I+=s:s<0?I=0:s>U?I=U:I=s,B!==I&&(xe(),!_&&is_function(e.onPositionChange)&&e.onPositionChange(I,G),r(!0)),i}else return I},refresh:function(){return we(),xe(),r(!0),i},display_position:function(s,v){if(s===undefined)return G;var _=nt($.terminal.escape_formatting(w),!0),B=ze(_),U=bare_text(w).length,q;if(v?q=G+s:s>B?q=B:q=s,B===U)return G=q,i.position(q);if(B===q)return G=q,i.position(U);var re=Nt(w,q);return re!==-1&&(G=q,i.position(re)),i},visible:function(){var s=i.visible;return function(){return s.apply(i,[]),xe(),we(),i}}(),show:function(){var s=i.show;return function(){return s.apply(i,[]),xe(),we(),i}}(),resize:function(s){F=ht();var v;return typeof s=="number"?v=s:v=tt(F),(y!==v||arguments[0]===!0)&&(y=v,we(),xe()),i},clear_cache:"Map"in root?function(){vt.clear()}:function(){return i},invoke_key:function(s){ae||warn('invoke_key("'+s+'") called on disabled terminal');var v=s.toUpperCase().split("+"),_=v.pop(),B=v.indexOf("CTRL")!==-1,U=v.indexOf("SHIFT")!==-1,q=v.indexOf("ALT")!==-1,re=v.indexOf("META")!==-1,oe=$.Event("keydown",{ctrlKey:B,shiftKey:U,altKey:q,metaKey:re,which:Et[_],key:_}),X=$(document.documentElement||window);return X.trigger(oe),oe=$.Event("keypress"),oe.key=_,oe.which=oe.keyCode=0,X.trigger(oe),i},clip:function(){return g},enable:function(s){if(!ae){ae=!0,i.addClass("enabled");try{g.$node.is(":focus")||g.$node.focus(),g.$node.caret(I)}catch{}Ee(!0),!s&&is_function(pe)&&we(),Xt(),r()}return Gt(),i},isenabled:function(){return ae},disable:function(s){return ae=!1,i.removeClass("enabled"),Ee(!1),s||Gt(),i},mask:function(s){return typeof s>"u"?e.mask:(e.mask=s,xe(),i)}}),i.name(e.name||e.prompt||""),F=ht(),y=tt(F),e.prompt!==!1&&(pe=e.prompt,we()),e.enabled===!0&&i.enable(),e.history||ee.disable();var Ae=!0,Rt=!1,it=!1,lt=!1,Ge=!1,ct=!1,d=!0,Ne=!1,Oe=!1,ye=!1,Fe=!1,Ce,Ke="",Se;function Mt(s){return s.key.toUpperCase()==="BACKSPACE"||s.which===8}function de(s){return s.key&&s.key.length===1&&!s.ctrlKey}function K(s){var v=["HOLD+SHIFT+BACKSPACE","HOLD+BACKSPACE"];return v.indexOf(s)!==-1&&e.mobileDelete||e.repeatTimeoutKeys.indexOf(s)!==-1}function Zt(s){return s.which===35||s.which===36||s.which===37||s.which===38||s.which===39||s.which===40||s.which===13||s.which===27}var Le=!1;function pt(s){""+s.key+s.fake+s.which;var v;Oe=(s.key||"").toLowerCase()==="process"||s.which===0,it=Ge&&lt&&!Mt(s);var _=typeof s.key<"u",B=String(s.key).toLowerCase(),U=B==="unidentified";try{s.fake||(lt=de(s),ct=!U,Ne=_&&Mt(s))}catch{}if(U){d=!0;return}!s.fake&&_&&["meta","os"].indexOf(B)===-1&&(d=!1),Ge=!0,g.$node.off("input",wt);var q=nr(s);if(is_function(e.keydown)&&(_&&(s.key=Lt(s)),v=e.keydown.call(i,s),v!==undefined))return v||(Ce=!0),v;if(q!==Se&&ve(),ae||q==="CTRL+C"&&is_terminal_selected(i)){if(ye){if(Se=q,q="HOLD+"+q,Fe)return;e.holdRepeatTimeout>0&&K(q)&&(Fe=!0,i.oneTime(e.holdRepeatTimeout,"delay",function(){Fe=!1}))}else i.oneTime(e.holdTimeout,"hold",function(){ye=!0}),Se=q;if(!s.fake&&is_android){if(Le)return ve(),Le=!1,!1;u(q)?Le=!0:u(Se)&&(Le=!1)}if(Pe(),Ce=["CTRL+V","META+V"].indexOf(q)!==-1,q==="ENTER"&&(Ae=!0),A&&Zt(s))ir(),we(),s.which===27&&i.set(""),xe(),s.which===13&&pt.call(this,s);else if(is_function(We[q])){if(v=We[q](s),v===!0)return;if(v!==undefined)return v}else{if(s.altKey)return;Rt=!1;return}}}function ve(){i.stopTime("hold"),i.stopTime("delay"),Fe=ye=!1}var Ie=$(document.documentElement||window);i.keymap(e.keymap||{});function Ht(s){""+s.key+s.fake,ve();var v;if(s.fake||(Ge=!1),!((s.ctrlKey||s.metaKey)&&!s.altKey)&&!Rt){if(is_function(e.keypress)&&(v=e.keypress.call(i,s),v!==undefined))return v||(Ce=!0),v;if(ae){if(s.fake)return;var _;if(is_key_native){_=s.key;var B=_.toUpperCase();Ft[B]&&(_=Ft[B])}if((!_||ct)&&(_=String.fromCharCode(s.which)),$.inArray(s.which,[13,0,8])>-1)return s.keyCode===123?void 0:!1;_&&(!s.ctrlKey||s.ctrlKey&&s.ctrlKey)&&(!(s.altKey&&s.which===100)||s.altKey)&&!it&&(A?(E+=_,et(),ft()):_.length===1&&i.insert(_))}}}function Ct(s,v,_){var B=$.Event(s);B.which=_,B.key=v,B.fake=!0,Ie.trigger(B)}var Ve=!1;function je(){Ke=w,Ce=!1,d=!0}function Re(){""+d+Oe+Ge+it+Ce+lt+ct+Ne;var s=g.val();if(is_mobile||(s=s.replace(/^ /,"")),d||Oe||(Ge||it)&&!Ce&&(lt||ct)&&!Ne){if(s&&s===w){is_android&&d&&Ct("keydown","Enter",13),je();return}var v=I;if(d){var _=Ke;Ne=_.slice(0,_.length-1).length===s.length}if(Ve){Ve=!1,g.val(w);return}if(A)E=s,et(),ft();else{var B=s.slice(I);if(B.length===1||Ne){var U=get_next_character(B);if(u(U)&&(Ve=!0),d){var q;Ne?q=8:q=B.toUpperCase().charCodeAt(0),Ct("keydown",Ne?"Backspace":B,q)}Ge&&!Ne&&Ct("keypress",U,B.charCodeAt(0))}if(Ne){Ke=w;return}if(Ce){Ce=!1;return}i.set(s)}Ne?i.position(v-1):i.position(v+Math.abs(s.length-Ke.length))}je()}return Ie.bind("keypress.cmd",Ht),Ie.bind("keydown.cmd",pt),Ie.bind("keyup.cmd",ve),Ie.bind("input.cmd",Re),function(){if(is_mobile){$(i[0]).add(g.$node).on("touchstart.cmd",function(){i.isenabled()?g.blur():g.focus()}),i.disable();return}var s=!1,v=0;i.on("mousedown.cmd",function(){s=!0}).on("mouseup.cmd",function(_){function B(){var oe=$(_.target),X=oe.is(".cmd-prompt");!X&&re&&get_selected_html()===""&&ae&&(oe.is(".cmd")?i.position(text(w).length):i.display_position(_e(_))),v=0}var U;if(_.originalEvent===undefined?U=_.button:U=_.originalEvent.button,U===0&&get_selected_html()===""){var q="click_"+D;if(++v===1){var re=s;ae?e.clickTimeout===0?B():i.oneTime(e.clickTimeout,q,B):v=0}else i.stopTime(q),v=0}s=!1})}(),i.data("cmd",i),"KeyboardEvent"in window&&"key"in window.KeyboardEvent.prototype||setTimeout(function(){throw new Error("key event property not supported try https://github.com/inexorabletash/polyfill/blob/master/keyboard.js")},0),i};var strlen=function(){return typeof wcwidth>"u"?function(t){return t=t.replace(/\u200B/g,""),$.terminal.length(t)}:wcwidth}();function count_selfclosing_formatting(t){var e=0;if($.terminal.have_formatting(t)){var u=new RegExp(format_parts_re.source,"i");$.terminal.format_split(t).forEach(function(i){if($.terminal.is_formatting(i)){var f=i.match(u);f&&f[1].match(/@/)&&f[6]===""&&e++}})}return e}var entities={"&amp;":"&","&lt;":"<","&gt;":">","&Agrave;":"\xC0","&Aacute;":"\xC1","&Acirc;":"\xC2","&Atilde;":"\xC3","&Auml;":"\xC4","&Aring;":"\xC5","&AElig;":"\xC6","&Ccedil;":"\xC7","&Egrave;":"\xC8","&Eacute;":"\xC9","&Ecirc;":"\xCA","&Euml;":"\xCB","&Igrave;":"\xCC","&Iacute;":"\xCD","&Icirc;":"\xCE","&Iuml;":"\xCF","&ETH;":"\xD0","&Ntilde;":"\xD1","&Ograve;":"\xD2","&Oacute;":"\xD3","&Ocirc;":"\xD4","&Otilde;":"\xD5","&Ouml;":"\xD6","&Oslash;":"\xD8","&Ugrave;":"\xD9","&Uacute;":"\xDA","&Ucirc;":"\xDB","&Uuml;":"\xDC","&Yacute;":"\xDD","&THORN;":"\xDE","&szlig;":"\xDF","&agrave;":"\xE0","&aacute;":"\xE1","&acirc;":"\xE2","&atilde;":"\xE3","&auml;":"\xE4","&aring;":"\xE5","&aelig;":"\xE6","&ccedil;":"\xE7","&egrave;":"\xE8","&eacute;":"\xE9","&ecirc;":"\xEA","&euml;":"\xEB","&igrave;":"\xEC","&iacute;":"\xED","&icirc;":"\xEE","&iuml;":"\xEF","&eth;":"\xF0","&ntilde;":"\xF1","&ograve;":"\xF2","&oacute;":"\xF3","&ocirc;":"\xF4","&otilde;":"\xF5","&ouml;":"\xF6","&oslash;":"\xF8","&ugrave;":"\xF9","&uacute;":"\xFA","&ucirc;":"\xFB","&uuml;":"\xFC","&yacute;":"\xFD","&thorn;":"\xFE","&yuml;":"\xFF","&nbsp;":"\xA0","&iexcl;":"\xA1","&cent;":"\xA2","&pound;":"\xA3","&curren;":"\xA4","&yen;":"\xA5","&brvbar;":"\xA6","&sect;":"\xA7","&uml;":"\xA8","&copy;":"\xA9","&ordf;":"\xAA","&laquo;":"\xAB","&not;":"\xAC","&shy;":"\xAD","&reg;":"\xAE","&macr;":"\xAF","&deg;":"\xB0","&plusmn;":"\xB1","&sup2;":"\xB2","&sup3;":"\xB3","&acute;":"\xB4","&micro;":"\xB5","&para;":"\xB6","&cedil;":"\xB8","&sup1;":"\xB9","&ordm;":"\xBA","&raquo;":"\xBB","&frac14;":"\xBC","&frac12;":"\xBD","&frac34;":"\xBE","&iquest;":"\xBF","&times;":"\xD7","&divide;":"\xF7","&forall;":"\u2200","&part;":"\u2202","&exist;":"\u2203","&empty;":"\u2205","&nabla;":"\u2207","&isin;":"\u2208","&notin;":"\u2209","&ni;":"\u220B","&prod;":"\u220F","&sum;":"\u2211","&minus;":"\u2212","&lowast;":"\u2217","&radic;":"\u221A","&prop;":"\u221D","&infin;":"\u221E","&ang;":"\u2220","&and;":"\u2227","&or;":"\u2228","&cap;":"\u2229","&cup;":"\u222A","&int;":"\u222B","&there4;":"\u2234","&sim;":"\u223C","&cong;":"\u2245","&asymp;":"\u2248","&ne;":"\u2260","&equiv;":"\u2261","&le;":"\u2264","&ge;":"\u2265","&sub;":"\u2282","&sup;":"\u2283","&nsub;":"\u2284","&sube;":"\u2286","&supe;":"\u2287","&oplus;":"\u2295","&otimes;":"\u2297","&perp;":"\u22A5","&sdot;":"\u22C5","&Alpha;":"\u0391","&Beta;":"\u0392","&Gamma;":"\u0393","&Delta;":"\u0394","&Epsilon;":"\u0395","&Zeta;":"\u0396","&Eta;":"\u0397","&Theta;":"\u0398","&Iota;":"\u0399","&Kappa;":"\u039A","&Lambda;":"\u039B","&Mu;":"\u039C","&Nu;":"\u039D","&Xi;":"\u039E","&Omicron;":"\u039F","&Pi;":"\u03A0","&Rho;":"\u03A1","&Sigma;":"\u03A3","&Tau;":"\u03A4","&Upsilon;":"\u03A5","&Phi;":"\u03A6","&Chi;":"\u03A7","&Psi;":"\u03A8","&Omega;":"\u03A9","&alpha;":"\u03B1","&beta;":"\u03B2","&gamma;":"\u03B3","&delta;":"\u03B4","&epsilon;":"\u03B5","&zeta;":"\u03B6","&eta;":"\u03B7","&theta;":"\u03B8","&iota;":"\u03B9","&kappa;":"\u03BA","&lambda;":"\u03BB","&mu;":"\u03BC","&nu;":"\u03BD","&xi;":"\u03BE","&omicron;":"\u03BF","&pi;":"\u03C0","&rho;":"\u03C1","&sigmaf;":"\u03C2","&sigma;":"\u03C3","&tau;":"\u03C4","&upsilon;":"\u03C5","&phi;":"\u03C6","&chi;":"\u03C7","&psi;":"\u03C8","&omega;":"\u03C9","&thetasym;":"\u03D1","&upsih;":"\u03D2","&piv;":"\u03D6","&OElig;":"\u0152","&oelig;":"\u0153","&Scaron;":"\u0160","&scaron;":"\u0161","&Yuml;":"\u0178","&fnof;":"\u0192","&circ;":"\u02C6","&tilde;":"\u02DC","&ensp;":"\u2002","&emsp;":"\u2003","&thinsp;":"\u2009","&zwnj;":"\u200C","&zwj;":"\u200D","&lrm;":"\u200E","&rlm;":"\u200F","&ndash;":"\u2013","&mdash;":"\u2014","&lsquo;":"\u2018","&rsquo;":"\u2019","&sbquo;":"\u201A","&ldquo;":"\u201C","&rdquo;":"\u201D","&bdquo;":"\u201E","&dagger;":"\u2020","&Dagger;":"\u2021","&bull;":"\u2022","&hellip;":"\u2026","&permil;":"\u2030","&prime;":"\u2032","&Prime;":"\u2033","&lsaquo;":"\u2039","&rsaquo;":"\u203A","&oline;":"\u203E","&euro;":"\u20AC","&trade;":"\u2122","&larr;":"\u2190","&uarr;":"\u2191","&rarr;":"\u2192","&darr;":"\u2193","&harr;":"\u2194","&crarr;":"\u21B5","&lceil;":"\u2308","&rceil;":"\u2309","&lfloor;":"\u230A","&rfloor;":"\u230B","&loz;":"\u25CA","&spades;":"\u2660","&clubs;":"\u2663","&hearts;":"\u2665","&diams;":"\u2666"};function render_entities(t){return t.replace(/&#(x?)([0-9]+);/g,function(e,u,i){return i=parseInt(i,u?16:10),String.fromCharCode(i)}).replace(/(&[^;]+;)/g,function(e,u){return entities[u]||u})}function bare_text(t){return t.match(/&/)?render_entities(safe(t)):t}function text(t){return bare_text($.terminal.strip(t))}function amp(t){return t.replace(/&(?!#[0-9]+;|#x[0-9a-f]+;|[a-z]+;)/gi,"&amp;")}function safe(t){return t.match(/[<>&]/)?amp(t).replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function crlf(t){return t.replace(/\r/g,"")}function char_len(t){return entity_re.test(t)?1:t.length}function make_re_fn(t){return function(u){var i=u.match(t);if(starts_with(i))return i[1]}}function starts_with(t){return t&&t.index===0}function is_simple_text(t){for(var e=[entity_re,emoji_re,combine_chr_re,astral_symbols_re],u=0;u<e.length;++u)if(e[u].test(t))return!1;return!0}function make_next_char_fun(t){var e=[];return[entity_re,emoji_re,combine_chr_re].forEach(function(u){u.test(t)&&e.push(make_re_fn(u))}),astral_symbols_re.test(t)&&e.push(function(i){var f=i.match(astral_symbols_re);if(starts_with(f)){var D=i.match(combine_chr_re);return D&&D.index===1?i.slice(0,3):f[1]}}),function(i){for(var f=0;f<e.length;++f){var D=e[f],p=D(i);if(p)return p}return i[0]}}function get_next_character(t){var e=t.match(entity_re);if(starts_with(e))return e[1];var u=t.match(combine_chr_re);if(starts_with(u))return u[1];var i=t.match(emoji_re);if(starts_with(i))return i[1];if(t.charCodeAt(0)<255)return t[0];var f=t.match(astral_symbols_re);return starts_with(f)?(u=t.match(combine_chr_re),u&&u.index===1?t.slice(0,3):t.slice(0,2)):t[0]}function normalize_position(t,e){if(e===0)return e;t=$.terminal.strip(t);var u=$.terminal.split_characters(t).reduce(function(i,f){if(typeof i=="number")return i;var D=i.length+char_len(f);return D>=e?i.position+1:{position:i.position+1,length:D}},{position:0,length:0});return typeof u=="number"?u:u.position}function style_to_string(t){return Object.keys(t).map(function(e){return e+":"+t[e]}).join(";")}function escape_html_attr(t){return t.replace(/"/g,"&quot;")}function char_width_object(t,e){var u={};return t===0?u.width="1px":is_ch_unit_supported?u.width=t+"ch":is_css_variables_supported?u["--length"]=t:e.charWidth&&(u.width=e.charWidth*t+"px"),u}function char_width_prop(t,e){return style_to_string(char_width_object(t,e))}function extra_css(t,e){if(typeof wcwidth<"u"){var u=bare_text(t),i=strlen(u);if(i>1&&i!==$.terminal.length(u))return char_width_object(i,e)}}function wide_characters(t,e){if(typeof wcwidth<"u"){var u=bare_text(t),i=$.terminal.split_characters(u);if(i.length===1)return t;var f=i.map(function(h){return{len:strlen(h),chr:h}}).reduce(function(h,g){var y=h[h.length-1];return y?y.len!==g.len?h.concat([{sum:g.len,len:g.len,specs:[g]}]):(h.pop(),h.concat([{sum:y.sum+g.len,len:y.len,specs:y.specs.concat(g)}])):[{sum:g.len,specs:[g],len:g.len}]},[]);return f.map(function(h){if(h.len===1)return D(h);var g=char_width_prop(h.sum,e);return h.sum===i.length||!g.length?"<span>"+D(h)+"</span>":h.specs.length>1?p(g,h.specs.map(function(y){return p(char_width_prop(y.len),y.chr)}).join("")):p(g,D(h))}).join("")}function D(h){return h.specs.map(function(g){return g.chr}).join("")}function p(h,g){return'<span style="'+h+'">'+g+"</span>"}return t}function binary_search(t,e,u,i,f){var D=e-t,p=t+Math.floor(D/2),h=[u,p].concat(f),g=i.apply(null,h);return g===0?p:g>0&&D>1?binary_search(p,e,u,i,f):g<0&&D>1?binary_search(t,p,u,i,f):-1}function is_terminal_selected(t){if(is_function(window.getSelection)){var e=window.getSelection();if(e.toString()){var u=e.getRangeAt(0).startContainer.parentNode,i=$(u).closest(".terminal");return i.length&&(t&&i.find(".cmd").is(t)||!t)}}}function get_selected_html(){var t="";if(is_function(window.getSelection)){var e=window.getSelection();if(e.rangeCount){for(var u=document.createElement("div"),i=0,f=e.rangeCount;i<f;++i)u.appendChild(e.getRangeAt(i).cloneContents());t=u.innerHTML}}return t}function with_selection(t){var e="",u=[];if(is_function(window.getSelection)){var i=window.getSelection();if(i.rangeCount){for(var f=document.createElement("div"),D=0,p=i.rangeCount;D<p;++D){var h=i.getRangeAt(D).cloneRange();u.push(h),f.appendChild(h.cloneContents())}e=f.innerHTML}}return t(e),u.length&&(i.removeAllRanges(),u.forEach(function(g){i.addRange(g)})),e!==""}function process_selected_line(){var t=$(this),e=t.text();return t.hasClass("cmd-end-line")&&(e+=`
`),e}function process_div(t){return $(t).find("> div, > span").map(process_selected_line).get().join(`
`).replace(/\n$/,"")}function process_selected_html(t){var e,u="",i=$("<div>"+t+"</div>");t.match(/<\/div>/)&&(e=i.find("div[data-index]").map(function(){return process_div(this)}).get().join(`
`),!e&&t.match(/style="width: 100%;?"/)&&(e=process_div(i)),u=e);var f=i.find(".cmd-prompt");f.length&&(u.length&&(u+=`
`),u+=f.text());var D=i.find('[role="presentation"]');return D.length&&(u+=D.map(process_selected_line).get().join("")),!u.length&&t&&(u=i.text()),u.replace(/\xA0/g," ")}var support_copy=function(){return typeof document>"u"||!is_function(document.queryCommandSupported)?!1:document.queryCommandSupported("copy")}(),text_to_clipboard;support_copy?text_to_clipboard=function(e,u){var i=e.val(),f=e.is(":focus"),D=e.caret();if(window.navigator&&window.navigator.clipboard)navigator.clipboard.writeText(u);else if(f)e.val(u).focus(),e[0].select(),document.execCommand("copy"),e.val(i),e.caret(D);else{var p=$("<textarea/>").css({position:"fixed",top:0,left:0}).appendTo("body");p.val(u).focus(),p[0].select(),document.execCommand("copy"),p.blur(),p.remove()}return!0}:text_to_clipboard=$.noop;var get_textarea_selection=function(){function t(){return""}if(typeof document>"u")return t;var e=document.createElement("textarea"),u="selectionStart"in e;return e=null,u?function(i){var f=i.selectionEnd-i.selectionStart;return i.value.substr(i.selectionStart,f)}:document.selection?function(){var i=document.selection.createRange();return i.text()}:t}();function clear_textarea_selection(t){t.selectionStart=t.selectionEnd=0}function common_string(t,e,u){if(!e.length)return"";for(var i=string_case(t),f=[],D=t.length;D<e[0].length;++D){for(var p=!1,h=e[0].charAt(D),g=h.toLowerCase(),y=1;y<e.length;++y){p=!0;var F=e[y].charAt(D),L=F.toLowerCase();if(h!==F)if(u||i==="mixed"){p=!1;break}else if(g===L)if(i==="lower")h=h.toLowerCase();else if(i==="upper")h=h.toUpperCase();else{p=!1;break}else{p=!1;break}}if(p)f.push(h);else break}return t+f.join("")}function trigger_terminal_change(t){terminals.forEach(function(e){e.settings().onTerminalChange.call(e,t)})}var select=function(){if(root.getSelection){var t=root.getSelection();return t.setBaseAndExtent?function(e,u){var i=root.getSelection();i.setBaseAndExtent(e,0,u,1)}:function(e,u){var i=root.getSelection(),f=document.createRange();f.setStart(e,0),f.setEnd(u,u.childNodes.length),i.removeAllRanges(),i.addRange(f)}}else return $.noop}();function process_command(t,e){var u=t.trim(),i=u.match(command_re)||[];if(i.length){var f=i.shift(),D=$.map(i,function(g){return g.match(/^["']/)?(g=g.replace(/\n/g,"\\u0000\\u0000\\u0000\\u0000"),g=e(g),g.replace(/\x00\x00\x00\x00/g,`
`)):e(g)}),p=$.map(i,function(g){var y=g.match(/^(['"`]).*\1$/);return y&&y[1]||""}),h=u.slice(f.length).trim();return{command:t,name:f,args:D,args_quotes:p,rest:h}}else return{command:t,name:"",args:[],args_quotes:[],rest:""}}function on_height_change(t){var e=window.visualViewport.scale,u=Math.round(window.visualViewport.height*e);t(u),window.visualViewport.addEventListener("resize",function(){var i=window.visualViewport.scale,f=Math.round(window.visualViewport.height*i);u!==f&&(u=f,t(u))})}$.terminal={version:"2.44.1",date:"Tue, 08 Oct 2024 20:29:53 +0000",color_names:["transparent","currentcolor","black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","rebeccapurple"],Cycle,History,Stack,valid_color:function(e){return e.match(color_re)?!0:$.inArray(e.toLowerCase(),$.terminal.color_names)!==-1},unclosed_strings:function(e){return!!e.match(unclosed_strings_re)},escape_regex:function(e){if(typeof e=="string"){var u=/([-\\^$[\]()+{}?*.|])/g;return e.replace(u,"\\$1")}},have_formatting:function(e){return typeof e=="string"&&!!e.match(format_exist_re)},is_formatting:function(e){return typeof e=="string"&&!!e.match(format_full_re)},is_extended_command:function(e){return typeof e=="string"&&e.match(format_exec_re)&&!$.terminal.is_formatting(e)},each_extended_command:function(t,e){var u=t.split(format_exec_split_re);return $.map(u,function(i){if($.terminal.is_extended_command(i)){var f=i.replace(/^\[\[|\]\]$/g,"");return e(f)||""}return i}).join("")},format_split:function(e){return e.split(format_split_re).filter(Boolean)},tracking_replace:function(e,u,i,f){if(!(u instanceof RegExp))throw new Error("tracking_replace: Second argument need to be RegExp");function D(z,te,A){return z.slice(te,A)}function p(z){return $.terminal.strip(z).length}var h="",g,y=0,F,L=f,M;for(u.lastIndex=0;g=u.exec(e);){if(u.global){var N=p(D(e,0,u.lastIndex));M=N-p(g[0])}else M=g.index,N=M+p(g[0]);if(y<M&&(h+=D(e,y,M)),y=N,typeof i=="function"?F=i.apply(null,g):F=i.replace(/\$(\$|\d)/g,function(z,te){return te==="$"?"$":g[te]}),h+=F,M<f){var R=p(F);R+=count_selfclosing_formatting(F),N<f?L=Math.max(0,L+R-p(g[0])):L+=R-(f-M)}if(!u.global)break}return y<p(e)&&(h+=D(e,y)),e===h?[e,f]:[h,L]},iterate_formatting:function(e,u){function i(_e){return _e===" "||_e==="	"||_e===`
`}function f(_e){return te&&e.slice(_e-6,_e)==="&nbsp;"||i(e[_e-1])}function D(_e){return te?e.slice(_e).match(entity_re):null}function p(_e){return e[_e]==="["&&e[_e+1]==="["}function h(_e){return e[_e-1]!=="\\"&&e[_e]==="\\"&&e[_e+1]==="]"}function g(_e){return e[_e]==="]"||e[_e]==="["}function y(_e){return Z&&!Ee&&(e[_e]!=="]"&&!ee||!z)||E&&!A}var F=make_next_char_fun(e);function L(){var _e=F(ne);return _e.length>1&&$.terminal.length(ne)>1?_e.length-1:0}function M(){return f(G)&&(Z||Ee)&&(w===-1&&ue!==G||w!==-1)}var N=!1;function R(){return G===e.length-1&&!N?N=!0:N=A&&!!ne.match(/^.]$/),N}for(var z=$.terminal.have_formatting(e),te=entity_re.test(e),A="",E=!1,C=0,Y,w=-1,ie=-1,ue,I=0,pe=0,ae=/(&[^;]+);$/,G=0;G<e.length;G++){var ne=e.slice(G),ee=!1;Y=ne.match(format_start_re),Y?(A=Y[1],E=!1):A?e[G]==="]"&&(ee=E,E?(A="",E=!1):E=!0):E=!0;var Z=A&&E||!A,Ee=p(G);M()&&(w=G,ie=C);var Pe=g(G);if(pe=0,Z)if(e[G]==="&"){if(Y=D(G),Y){G+=Y[1].length-2;continue}++C,++I}else h(G)?(++C,++I,pe=1,G+=1):(!Pe||!z||E&&!A)&&(++C,++I);if(y(G)){strlen(e[G])===2&&I++;var ke=F(ne),Ze=ke.length;ke===";"&&(Y=e.slice(0,G+1).match(ae),Y&&(pe=Y[1].length,Ze=pe+1));var Me={last:R(),count:C,index:G-pe,formatting:A,length:I,text:E,size:Ze,space:w,space_count:ie},Te=u(Me);if(Te===!1)break;if(Te&&(Te.count!==undefined&&(C=Te.count),Te.length!==undefined&&(I=Te.length),Te.space!==undefined&&(ue=w,w=Te.space),Te.index!==undefined)){G=Te.index;continue}}else G===e.length-1&&!N&&u({last:!0,count:C+1,index:G,formatting:A,length:0,text:E,space:w});E&&(G+=L())}},partition:function(e,u){var i=$.extend({wrap:!0},u);if(!$.terminal.have_formatting(e)){var f=$.terminal.split_characters(e);return f.map(p)}var D=[];function p(g){return g.match(/\\$/)&&(g+="\\"),"[[;;]"+g+"]"}function h(g){return $.terminal.is_formatting(g)?g.match(/\\]$/)&&(g=g.replace(/\\]/g,"\\\\]")):i.wrap&&(g=p(g)),g}return $.terminal.iterate_formatting(e,function(y){if(y.text){var F=[];y.formatting&&F.push(y.formatting),F.push(e.substring(y.index,y.index+y.size)),y.formatting&&F.push("]"),D.push(h(F.join("")))}}),D},substring:function(e,u,i){var f=$.terminal.split_characters(e);if(!f.slice(u,i).length)return"";if(!$.terminal.have_formatting(e))return f.slice(u,i).join("");var D=0,p,h="",g="",y,F=1;return $.terminal.iterate_formatting(e,function(M){u&&M.count===u+1&&(D=M.index,M.formatting&&(h=M.formatting)),i&&M.count===i&&(g=M.formatting,y=M.index,F=M.size),M.count===i+1&&(p=M.index,M.formatting&&(p=y+F))}),u&&!D?"":(p===undefined&&(p=e.length),e=h+e.slice(D,p),g&&(e=e.replace(/(\[\[^\]]+)?\]$/,""),e+="]"),e)},normalize:function(e){return e=e.replace(format_re,function(i,f,D){if(f.match(self_closing_re)&&D==="")return"[["+f+"] ]";if(D==="")return"";function p(L){return L.replace(/\\\]/g,"&#93;").replace(/\n/g,"\\n").replace(/&nbsp;/g," ")}f=p(f);var h=f.match(/;/g).length;if(h>=4){var g=f.split(/;/),y=g.slice(0,4).join(";"),F=g.slice(4).join(";");return"[["+y+";"+(F||D)+"]"+D+"]"}else h===2?h=";;":h===3&&(h=";");return f+=h+p(D),"[["+f+"]"+D+"]"}),$.terminal.amp(e)},split_equal:function(e,u,i){typeof i=="boolean"&&(i={keepWords:i});for(var f=$.extend({trim:!1,keepWords:!1},i),D="",p=[],h=$.terminal.normalize(e).split(/\n/g),g=$.terminal.have_formatting(e),y=0,F=h.length;y<F;++y){if(h[y]===""){p.push("");continue}var L=h[y],M=make_next_char_fun(L),N=0,R,z=L.length,te=/\[\[[^\]]+\](?:[^\][]|\\\])+\]$/.test(L),A=/^(&nbsp;|\s)/.test(L);if(!g&&z<u){p.push(L);continue}$.terminal.iterate_formatting(L,function(C){var Y,w;if(C.length>=u||C.last||C.length===u-1&&strlen(L[C.index+1])===2){var ie=!1;if(f.keepWords&&C.space!==-1){var ue=text(L).substring(C.space_count);ue=ue.slice(0,u).replace(/\s+$/,"");var I=strlen(ue);(space_re.test(ue)||I<u)&&(ie=!0)}var pe=C.index+C.size;te&&(pe+=1);var ae;if(f.keepWords&&C.space!==-1&&pe!==z&&ie?(R=L.slice(N,C.space),ae=C.space-1):(w=L.slice(C.index),Y=M(w),R=L.slice(N,C.index)+Y,C.last&&te&&Y!=="]"&&(R+="]"),ae=C.index+Y.length-1),(f.trim||f.keepWords)&&(R=R.replace(/(&nbsp;|\s)+$/g,"")),!A&&!D&&(R=R.replace(/^(&nbsp;|\s)+/g,"")),N=(ae||C.index)+1,D){var G=/^[^\]]*\]/.test(R);R=D+R,G&&(D="")}var ne=R.match(format_re);if(ne){var ee=ne[ne.length-1];ee[ee.length-1]!=="]"?(D=ee.match(format_begin_re)[1],R+="]"):format_end_re.test(R)&&(R=R.replace(format_end_re,""),D=ee.match(format_begin_re)[1])}return p.push(R),{index:ae,length:0,space:-1}}})}return p},amp,encode:function(e,u){var i=$.extend({tabs:4,before:""},u);return safe(e).replace(/ /g,"&nbsp;").split(`
`).map(function(f){var D=f.split(/((?:\[\[[^\]]+\])?\t(?:\])?)/);return D=D.filter(Boolean),D.map(function(p,h){return p.match(/\t/)?p.replace(/\t([^\t]*)$/,function(g,y){if(h!==0&&D[h-1].match(/\t\]?$/)){var F=new Array(i.tabs+1).join("&nbsp;");return F+y}else{var L=D.slice(h-1,h).join("");i.before&&h<=1&&(L=i.before+L);var M=$.terminal.length(L),N=i.tabs-M%i.tabs;return N===0&&(N=4),new Array(N+1).join("&nbsp;")+y}}):p}).join("")}).join(`
`)},nested_formatting:function(e){if(!$.terminal.have_formatting(e))return e;var u=[],i=/((?:\[\[(?:[^\][]|\\\])+\])?(?:[^\][]|\\\])*\]?)/,f=/\[\[([^\][]+)\][\s\S]*/,D=/^\[\[([^;]*);([^;]*);([^\]]*)\]/,p=3,h=5;function g(A,E,C){return C.indexOf(A)===E}function y(A,E){return A=F(A),E?$.extend(E,A):A}function F(A){var E={};return A.split(/\s*;\s*/).forEach(function(C){var Y=C.split(":").map(function(ue){return ue.trim()}),w=Y[0],ie=Y[1];E[w]=ie}),E}function L(A){var E=A.slice();return A[h]&&(E[h]=N(A[h])),A[p]&&(E[p]=R(A[p])),E[0]=M(A[0]),E.join(";")}function M(A){var E=A.filter(function(C){return C[0]==="-"}).map(function(C){return C[1]});return A.filter(function(C){return E.indexOf(C)===-1&&E.indexOf(C[1])===-1}).join("")}function N(A){return JSON.stringify(A,function(E,C){return E==="style"?z(C):C})}function R(A){return A.filter(g).join(" ")}function z(A){return Object.keys(A).map(function(E){return E+":"+A[E]}).join(";")}function te(A){function E(G){C[h]||(C[h]={});try{var ne=JSON.parse(G);if(ne.style){var ee=ne.style,Z=C[h].style;ne.style=y(ee,Z),C[h]=$.extend(ne,C[h],{style:y(ee,Z)})}else C[h]=$.extend(ne,C[h])}catch{warn("Invalid JSON "+G)}}var C=[[],"",""];if(!A.length)return C;for(var Y=A.length;Y--;){var w=$.terminal.parse_formatting(A[Y]);if(w.length>5){var ie=w.slice(5).join(";");w=w.slice(0,5).concat(ie)}var ue=w[0].split(/(-?[@!gbiusor])/g).filter(Boolean);ue.forEach(function(G){C[0].indexOf(G)===-1&&C[0].push(G)});for(var I=1;I<w.length;++I){var pe=w[I].trim();if(pe)if(I===p){C[p]||(C[p]=[]);var ae=pe.split(/\s+/);C[p]=C[p].concat(ae)}else I===h?E(pe):C[I]||(C[I]=pe)}}return L(C)}return e.split(i).filter(Boolean).map(function(A){var E;if(A.match(/^\[\[/)&&!$.terminal.is_extended_command(A)){var C=A.replace(f,"$1"),Y=$.terminal.is_formatting(A);A=A.replace(D,""),u.push(C),$.terminal.nested_formatting.__inherit__?E=te(u):E=C,Y?u.pop():A+="]",A="[["+E+"]"+A}else{var w=!1;A.match(/\]/)&&(w=!0),u.length&&($.terminal.nested_formatting.__inherit__?E=te(u):E=u[u.length-1],A="[["+E+"]"+A),w?u.pop():u.length&&(A+="]")}return A}).join("")},using_xml_formatter:function(){if(!("xml_formatter"in $.terminal))return!1;var e=$.terminal.defaults.formatters;return e.includes($.terminal.xml_formatter)},escape_formatting:function(e){var u=$.terminal.escape_brackets(e);return $.terminal.using_xml_formatter()&&(u=safe(u)),u},apply_formatters:function(e,u){if(e==="")return u&&typeof u.position=="number"?["",u.position]:"";function i(R,z,te,A){!R.__no_warn__&&$.terminal.length(te)!==$.terminal.length(A)&&warn("Your formatter["+z+"] change length of the string, you should use [regex, replacement] formatter or function  that return [replacement, position] instead")}function f(R){if(!u||!R)return!0;var z=["echo","command","prompt"],te=z.some(function(C){return R[C]===!0});if(!te)return!0;for(var A=z.length;A--;){var E=z[A];if(R[E]===!0&&u[E]===!0)return!0}return!1}u=u||{};var D=u.formatters||$.terminal.defaults.formatters,p=0;function h(R,z){var te=$.extend({},u,{position:z[1]}),A=R(z[0],te);return typeof A=="string"?(i(R,p-1,A,z[0]),typeof A=="string"?[A,te.position]:z):is_array(A)&&A.length===2?A:z}var g;typeof u.position=="number"?g=[e,u.position]:g=[e,0];try{var y=D.reduce(function(R,z){if(p++,typeof z=="function"&&z.__meta__)return h(z,R);var te=0,A=!1,E=$.terminal.format_split(R[0]),C=E.map(function(ae){var G,ne=text(ae).length;R[1]<te+ne&&!A?(G=R[1]-te,A=!0):A?G=-1:G=R[1];var ee=te,Z;if(te+=ne,$.terminal.is_formatting(ae))return A?[ae,G]:[ae,-1];if(is_array(z)){var Ee=z[2]||{};if(Z=[ae,G<0?0:G],Z[0].match(z[0])&&f(z[2]))if(Ee.loop)for(;Z[0].match(z[0]);)Z=$.terminal.tracking_replace(Z[0],z[0],z[1],Z[1]);else Z=$.terminal.tracking_replace(Z[0],z[0],z[1],Z[1]);if(G<0)return[Z[0],-1]}else typeof z=="function"&&(Z=h(z,[ae,G]));if(typeof Z<"u"){Z[1]!==-1&&(Z[1]+=ee);var Pe=text(Z[0]).length;return Z}return[ae,-1]}),Y=C.filter(function(ae){return ae[1]!==-1})[0],w=C.map(function(ae){return ae[0]}).join(""),ie;typeof Y>"u"?ie=R[1]:ie=Y[1];var ue=text(w).length;if(ue+=count_selfclosing_formatting(w),ie>ue&&(ie=ue),w===R[0])return R;var I=$.terminal.strip(R[0]),pe=$.terminal.strip(w);return I===pe?[w,R[1]]:[w,ie]},g);if(typeof u.position=="number"){var F=$.terminal.strip(y[0]).length;if($.terminal.length(y[0])<F){var L=y[1];L=normalize_position(y[0],L);var M=$.terminal.length(y[0]);L>M&&(L=M),y[1]=L}return y}else return y[0]}catch(R){var N="Error in formatter ["+(p-1)+"]";throw D.splice(p-1),new $.terminal.Exception("formatting",N,R.stack)}},escape_brackets:function(e){return e.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;").replace(/\\/g,"&#92;")},unescape_brackets:function(e){return e.replace(/&#91;/g,"[").replace(/&#93;/g,"]").replace(/&#92;/g,"\\")},length:function(e,u){return e?$.terminal.split_characters(u?e:text(e)).length:0},split_characters:function(e){if(is_simple_text(e))return e.split("");for(var u=[],i=make_next_char_fun(e);e.length;){var f=i(e);e=e.slice(f.length),u.push(f)}return u},columns:function(e,u,i){e=e.map(function(N){return typeof N!="string"?String(N):N});var f=e.map(function(N){return $.terminal.strip(N)}),D=f.map(function(N){return strlen(N)});typeof i>"u"&&(i=4);var p=Math.max.apply(null,D)+i,h=Math.floor(u/p)-1;if(h<1)return e.join(`
`);for(var g=[],y=0,F=e.length;y<F;y+=h){var L=e.slice(y,y+h),M=L.pop();g.push(L.reduce(function(N,R){var z=$.terminal.strip(R),te=new Array(p-z.length+1).join(" ");return N.push(R+te),N},[]).join("")+M)}return g.join(`
`)},strip:function(e){return $.terminal.have_formatting(e)?$.terminal.format_split(e).map(function(u){return $.terminal.is_formatting(u)?(u=u.replace(format_parts_re,"$6"),u.replace(/\\([[\]])/g,function(i,f){return f})):u}).join(""):e},active:function(){return terminals.front()},last_id:function(){var e=terminals.length();return e-1},parse_argument:function(e,u){function i(D){return D.split(string_re).map(function(p){if(p.match(/^['"`]/)){if(p==='""'||p==="''"||p==="``")return"";var h=p[0],g=new RegExp("(\\\\\\\\(?:\\\\\\\\)*)"+h,"g");p=p.replace(g,"$1").replace(/^[`'"]|[`'"]$/g,""),h==="'"&&(p=p.replace(/"/g,'\\"'))}return p='"'+p+'"',JSON.parse(p)}).join("")}if(u===!1)return e[0]==="'"&&e[e.length-1]==="'"?e.replace(/^'|'$/g,""):e[0]==="`"&&e[e.length-1]==="`"?e.replace(/^`|`$/g,""):e[0]==='"'&&e[e.length-1]==='"'?e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"):e.match(/\/.*\/[gimy]*$/)?e:e.match(/['"`]]/)?i(e):e.replace(/\\ /g," ");if(e==="true")return!0;if(e==="false")return!1;var f=e.match(re_re);return f?new RegExp(f[1],f[2]):e.match(/['"`]/)?i(e):e.match(/^-?[0-9]+n?$/)?e.match(/n$/)?BigInt(e.replace(/n$/,"")):parseInt(e,10):e.match(float_re)?parseFloat(e):e.replace(/\\(['"() ])/g,"$1")},parse_arguments:function(e){return $.map(e.match(command_re)||[],$.terminal.parse_argument)},split_arguments:function(e){return $.map(e.match(command_re)||[],function(u){return $.terminal.parse_argument(u,!1)})},parse_command:function(e){return process_command(e,$.terminal.parse_argument)},split_command:function(e){return process_command(e,function(u){return $.terminal.parse_argument(u,!1)})},parse_options:function t(e,u){var i=$.extend({},{boolean:[]},u);if(typeof e=="string")return t($.terminal.split_arguments(e),u);var f={_:[]};function D(h){this.value=h}var p=e.reduce(function(h,g){var y=typeof g=="string"?g:"";if(y.match(/^--?[^-]/)&&h instanceof D&&(f[h.value]=!0),y.match(/^--[^-]/)){var F=y.replace(/^--/,"");if(i.boolean.indexOf(F)===-1)return new D(F);f[F]=!0}else if(y.match(/^-[^-]/)){var L=y.replace(/^-/,"").split("");if(i.boolean.indexOf(L.slice(-1)[0])===-1)var M=L.pop();if(L.forEach(function(N){f[N]=!0}),M)return new D(M)}else h instanceof D?f[h.value]=g:g&&f._.push(g);return null},null);return p instanceof D&&(f[p.value]=!0),f},parse_formatting:function(t){var e=$.terminal.unescape_brackets(t).split(";"),u=4;if(e.length>=5){var i=$.terminal.escape_brackets(e[u]);e[u]=i}return e},extended_command:function extended_command(term,string,options){var settings=$.extend({invokeMethods:!1},options),deferred=new $.Deferred;try{change_hash=!1;var m=string.match(extended_command_re);if(m)if(!settings.invokeMethods)warn("To invoke terminal or cmd methods you need to enable invokeMethods option"),deferred.reject();else{string=m[1];var obj=m[2]==="terminal"?term:term.cmd(),fn=m[3];try{var args=eval("["+m[4]+"]");if(!obj[fn])term.error("Unknow function "+fn);else{var ret=obj[fn].apply(term,args);if(ret&&ret.then)return ret}deferred.resolve()}catch(t){term.error("Invalid invocation in "+$.terminal.escape_brackets(string)),deferred.reject()}}else return term.exec(string,!0).done(function(){change_hash=!0})}catch(t){deferred.reject()}return deferred.promise()},iterator:function(t){function e(D){return $.terminal.is_formatting(D)&&D.match(/\]\\\]/)&&(D=D.replace(/\]\\\]/g,"]\\\\]")),D}if(typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"){var u=$.terminal.length(t),i=0,f={};return f[Symbol.iterator]=function(){return{next:function(){if(i<u){var D=$.terminal.substring(t,i,i+1);return i++,{value:e(D)}}else return{done:!0}}}},f}},formatter:new function(){try{this[Symbol.split]=function(t){return $.terminal.format_split(t)},this[Symbol.match]=function(t){return t.match(format_re)},this[Symbol.replace]=function(t,e){return t.replace(format_parts_re,e)},this[Symbol.search]=function(t){return t.search(format_re)}}catch{}},process_formatting:function(t){return $.terminal.format_split(t).map(function(e){if($.terminal.is_formatting(e)){for(var u=e.match(new RegExp(format_parts_re,"i")),i=u.pop(),f=1;f<=2;++f)$.terminal.valid_color(u[f])||(u[f]="");return u.slice(1,4).concat(i)}else return["","","",e]})},new_formatter:function(t){$.terminal.defaults.formatters.unshift(t)},remove_formatter:function(t){remove($.terminal.defaults.formatters,function(e){return e===t})}},function(){function t(i,f){return i===""?f:i.replace(/&#93;/g,"]").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function e(i){return i.match(/^\.{1,2}\//)||i.match(/^\//)||!(i.match(/\//)||i.match(/^[^:]+:/))}function u(i,f){return function(D){if(f.anyLinks)return!0;var p=i(D);return p||warn("Invalid URL "+D+" only http(s) ftp and path are allowed"),p}}$.terminal.format=function(f,D){var p=$.extend({},{linksNoReferrer:!1,linksNoFollow:!1,allowedAttributes:[],charWidth:undefined,escape:!0,anyLinks:!1},D||{}),h=u(function(E){return E.match(/^((https?|file|ftp):\/\/|\.{0,2}\/)/)||e(E)},p),g=u(function(E){return E.match(/^(https?:|file:|blob:|data:)/)||e(E)},p);function y(E){return E.length&&p.allowedAttributes.length?E.filter(function(C){if(C==="data-text")return!1;for(var Y=!1,w=p.allowedAttributes,ie=0;ie<w.length;++ie)if(w[ie]instanceof RegExp){if(w[ie].test(C)){Y=!0;break}}else if(w[ie]===C){Y=!0;break}return Y}):[]}function F(E,C,Y){if(C&&Y.length){var w,ie=Y.map(function(ue){if(C[ue]===null)return"";if(C[ue]===!0)return ue;var I=escape_html_attr(C[ue]);return ue==="style"&&(E&&(I=I?E+";"+I:E),w=!0),ue+'="'+I+'"'}).filter(Boolean);return ie.length?(!w&&E&&ie.push('style="'+E+'"'),ie.join(" ")):""}return E?'style="'+E+'"':""}function L(){var E=["noopener"];return p.linksNoReferrer&&E.unshift("noreferrer"),p.linksNoFollow&&E.unshift("nofollow"),E}var M=L().join(" ");function N(E,C,Y){if(E.match(email_re))return'<a href="mailto:'+E+'"';var w=["<a"];return E&&h(E)&&w.push('href="'+E+'"'),C?(Y.includes("target")&&C.target===undefined&&(C.target="_blank"),Y.includes("rel")&&C.rel===undefined&&(C.rel=M)):(w.push('rel="'+M+'"'),w.push('target="_blank"')),w.join(" ")}function R(E,C){var Y="<img";return g(E)&&(Y+=' src="'+E+'"',C&&(Y+=' alt="'+C+'"')),Y}function z(E){for(var C=0,Y=!1;C<E.length;){if(E[C]==="&")Y=!0;else{if(E[C]===";"&&!Y)return C;E[C]===";"&&(Y=!1)}C++}return-1}function te(E,C,Y,w,ie,ue,I){var pe,ae=[];if(ue.match(/;/))try{var G=z(ue);if(G!==-1){var ne=ue.substring(G+1);ne=ne.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">"),ne.match(/^\s*\{[^}]*\}\s*$/)&&(pe=JSON.parse(ne),ae=y(Object.keys(pe)),ue=ue.substring(0,G))}}catch{}if(I===""&&!C.match(/@/))return"";I=safe(I),I=I.replace(/\\\]/g,"&#93;"),p.escape&&(I=I.replace(/\\\\/g,"\\"));var ee={};C.indexOf("b")!==-1&&(ee["font-weight"]="bold");var Z=[];C.indexOf("u")!==-1&&Z.push("underline"),C.indexOf("s")!==-1&&Z.push("line-through"),C.indexOf("o")!==-1&&Z.push("overline"),Z.length&&(ee["text-decoration"]=Z.join(" ")),C.indexOf("i")!==-1&&(ee["font-style"]="italic"),C.indexOf("r")!==-1&&(ie.trim()?ie+=" terminal-inverted":ie="terminal-inverted"),$.terminal.valid_color(Y)&&($.extend(ee,{color:Y,"--color":Y,"--original-color":Y}),C.indexOf("!")!==-1&&(ee["--link-color"]=Y),C.indexOf("g")!==-1&&(ee["text-shadow"]="0 0 5px "+Y)),$.terminal.valid_color(w)&&$.extend(ee,{"background-color":w,"--background":w});var Ee=t(ue,I),Pe=extra_css(I,p);Pe&&(I=wide_characters(I,p),$.extend(ee,Pe));var ke,Ze=style_to_string(ee);C.indexOf("!")!==-1?ke=N(Ee,pe,ae):C.indexOf("@")!==-1?ke=R(Ee,I):ke="<span";var Me=F(Ze,pe,ae);return Me&&(ke+=" "+Me),ie!==""&&(ke+=' class="'+ie+'"'),C.indexOf("!")!==-1?ke+=" data-text>"+I+"</a>":C.indexOf("@")!==-1?ke+=" data-text/>":ke+=' data-text="'+Ee+'"><span>'+I+"</span></span>",ke}if(typeof f=="string"){var A=$.terminal.format_split(f);return f=$.map(A,function(E){if(E==="")return E;if($.terminal.is_formatting(E))return E=E.replace(/\[\[[^\]]+\]/,function(ie){return ie.replace(/&nbsp;/g," ")}),E.replace(format_parts_re,te);E=safe(E),E=E.replace(/\\\]/,"&#93;");var C=t(E),Y=extra_css(E,p),w;return Y?(E=wide_characters(E,p),w='<span style="'+style_to_string(Y)+'"'):w="<span",w+' data-text="'+C+'">'+E+"</span>"}).join(""),f.replace(/<span><br\s*\/?><\/span>/gi,"<br/>")}else return""}}(),$.terminal.Exception=function t(e,u,i){arguments.length===1?(this.message=arguments[0],this.type="TERMINAL"):(this.type=e,this.message=u,i&&(this.stack=i))},$.terminal.Exception.prototype=new Error,$.terminal.Exception.prototype.toString=function(){return this.message+`
`+this.stack},$.fn.visible=function(){return this.css("visibility","visible")},$.fn.hidden=function(){return this.css("visibility","hidden")};var warnings=[];function warn(t){t="[jQuery Terminal] "+t,warnings.indexOf(t)===-1&&(warnings.push(t),console?console.warn?console.warn(t):console.log&&console.log(t):setTimeout(function(){throw new Error("WARN: "+t)},0))}var ids={};$.jrpc=function(t,e,u,i,f){var D=new $.Deferred,p;$.isPlainObject(t)?p=t:p={url:t,method:e,params:u,success:i,error:f};function h(F){return typeof F.id=="number"&&(typeof F.result<"u"||typeof F.error<"u")}ids[p.url]=ids[p.url]||0;var g={jsonrpc:"2.0",method:p.method,params:p.params,id:++ids[p.url]};function y(F,L,M,N){h(F)||p.method==="system.describe"?(p.success&&p.success(F,M,N),D.resolve(F)):(p.error&&p.error(N,"Invalid JSON-RPC"),D.reject({message:"Invalid JSON-RPC",response:L}))}return $.ajax({url:p.url,beforeSend:function(L,M){is_function(p.request)&&p.request(L,g),M.data=JSON.stringify(g)},success:function(L,M,N){var R=N.getResponseHeader("Content-Type");R.match(/(application|text)\/json/)||warn("Response Content-Type is neither application/json nor text/json");var z;try{z=JSON.parse(L)}catch(A){if(p.error)p.error(N,"Invalid JSON",A);else throw new $.terminal.Exception("JSON","Invalid JSON",A.stack);D.reject({message:"Invalid JSON",response:L});return}if(is_function(p.response)&&p.response(N,z),is_function(p.intercept)){var te=p.intercept(g,z);if(te)return unpromise(te,function(A){var E=JSON.stringify(A);y(A,E,M,N)})}y(z,L,M,N)},error:p.error,contentType:"application/json",dataType:"text",async:!0,cache:!1,type:"POST"}),D.promise()},$.rpc=function(t,e,u){var i=new $.Deferred;function f(p){p.error?i.reject(p.error):i.resolve(p.result)}function D(p,h,g){i.reject({message:g})}return $.jrpc(t,e,u,f,D),i.promise()};function terminal_ready(t){return!!(t.closest("body").length&&t.is(":visible")&&t.find(".cmd-prompt").length)}function format_stack_trace(t){return t=$.terminal.escape_brackets(t),t.split(/\n/g).map(function(e){return"[[;;;terminal-error]"+e.replace(url_re,function(u){return"]"+u+"[[;;;terminal-error]"})+"]"}).join(`
`)}function get_char_size(t){var e;if(terminal_ready(t)){var u=t.find(".cmd-prompt").clone().css({visiblity:"hidden",position:"absolute"});u.appendTo(t.find(".cmd")).html("&nbsp;").wrap('<div class="cmd-wrapper"/>'),e={width:u.width(),height:u.height()},u.parent().remove()}else{var i=$('<div class="terminal terminal-temp"><div class="terminal-wrapper"><div class="terminal-output"><div><div class="terminal-line" style="float: left"><span>&nbsp;</span></div></div></div><div class="terminal-pixel"></div></div>').appendTo("body");if(i.addClass(t.attr("class")).attr("id",t.attr("id")),t){var f=t.attr("style");f&&(f=f.split(/\s*;\s*/).filter(function(p){return!p.match(/display\s*:\s*none/i)}).join(";"),i.attr("style",f))}var D=i.find(".terminal-line");e={width:D.width(),height:D.height()},i.remove()}return e}function aproximation(t){return t-Math.floor(t)>.9?Math.ceil(t):Math.floor(t)}function get_num_chars(t,e){var u=t.find(".terminal-fill").width(),i=Math.floor(u/e.width);return i||1e3}function get_num_rows(t,e){var u=t.find(".terminal-fill"),i=u.height();return aproximation(i/e.height)}function all(t,e){var u=t.filter(function(i){return i[e]()===i});return u.length===t.length}function string_case(t){var e=t.split("");return all(e,"toLowerCase")?"lower":all(e,"toUpperCase")?"upper":"mixed"}function same_case(t){return string_case(t)!=="mixed"}function is_function(t){return get_type(t)==="function"}function is_string(t){return get_type(t)==="string"}function is_object(t){return t&&typeof t=="object"}function is_promise(t){return is_object(t)&&is_function(t.then||t.done)}function is_big_int(t){return typeof t=="bigint"}function is_deferred(t){return is_promise(t)&&is_function(t.promise)}Array.isArray||(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"});function is_array(t){return Array.isArray(t)}function have_custom_font(t){var e=$(t).css("--font");if(!e)return!1;var u=Array.from(document.fonts.keys()),i=u.find(function(f){return f.family===e});return!!i}function get_type(t){return typeof t=="function"?"function":t===null?t+"":Array.isArray(t)?"array":t instanceof String?"string":typeof t=="object"?"object":typeof t}var version_set=!$.terminal.version.match(/^\{\{/),copyright="Copyright (c) 2011-2024 Jakub T. Jankiewicz <https://jcubic.pl/me>",version_string=version_set?" v. "+$.terminal.version:" ",reg=new RegExp(" {"+version_string.length+"}$"),name_ver="jQuery Terminal Emulator"+(version_set?version_string:""),signatures=[["jQuery Terminal","(c) 2011-2024 jcubic"],[name_ver,copyright.replace(/^Copyright | *<.*>/g,"")],[name_ver,copyright.replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\/ / _ \\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\  / // / /__","\\___/____ \\\\__/____/_/ \\__ / /_/____/_//_/_/_/_/_/  \\/\\__\\_\\___/","         \\/          /____/                                   ".replace(reg," ")+version_string,copyright],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__","\\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/","          \\/              /____/                                          ".replace(reg,"")+version_string,copyright]];$.terminal.nested_formatting.__meta__=!0,$.terminal.nested_formatting.__inherit__=!0,$.terminal.nested_formatting.__no_warn__=!0,$.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,maskChar:"*",wrap:!0,checkArity:!0,raw:!1,tabindex:1,invokeMethods:!1,exceptionHandler:null,pauseEvents:!0,softPause:!1,mousewheel:null,touchscroll:null,memory:!1,cancelableAjax:!0,processArguments:!0,execAnimation:!1,execAnimationDelay:100,execHistory:!1,linksNoReferrer:!1,externalPause:!0,useCache:!0,anyLinks:!1,linksNoFollow:!1,processRPCResponse:null,completionEscape:!0,mobileDelete:is_mobile,convertLinks:!0,errorOnAbort:!0,extra:{},tabs:4,historySize:60,scrollObject:null,historyState:!1,importHistory:!1,historyFilter:null,echoCommand:!0,scrollOnEcho:!0,login:null,outputLimit:-1,formatters:[$.terminal.nested_formatting],unixFormatting:{escapeBrackets:!1,ansiParser:{},ansiArt:!1},onAjaxError:null,pasteImage:!0,scrollBottomOffset:20,wordAutocomplete:!0,caseSensitiveAutocomplete:!0,caseSensitiveSearch:!0,clickTimeout:200,holdTimeout:400,holdRepeatTimeout:200,repeatTimeoutKeys:[],mobileIngoreAutoSpace:[],request:$.noop,response:$.noop,describe:"procs",onRPCError:null,keymap:null,doubleTab:null,doubleTabEchoCommand:!1,completion:!1,onInit:$.noop,onClear:$.noop,onBlur:$.noop,onFocus:$.noop,onTerminalChange:$.noop,onExit:$.noop,onPush:$.noop,onPop:$.noop,keypress:$.noop,keydown:$.noop,renderHandler:null,onAfterRedraw:$.noop,onEchoCommand:$.noop,onPaste:$.noop,onFlush:$.noop,onBeforeCommand:null,onAfterCommand:null,onBeforeEcho:null,onAfterEcho:null,onBeforeLogin:null,onAfterLogout:null,onBeforeLogout:null,onCommandChange:null,onPositionChange:null,allowedAttributes:["title","target","rel",/^aria-/,"id",/^data-/],strings:{comletionParameters:"From version 1.0.0 completion function need to have two arguments",wrongPasswordTryAgain:"Wrong username or password try again!",wrongPassword:"Wrong username or password!",ajaxAbortError:"Error while aborting ajax call!",wrongArity:"Wrong number of arguments. Function '%s' expects %s got %s!",commandNotFound:"Command '%s' Not Found!",oneRPCWithIgnore:"You can use only one rpc with describe == false or rpc without system.describe",oneInterpreterFunction:"You can't use more than one function (rpc without system.describe or with option describe == false counts as one)",loginFunctionMissing:"You didn't specify a login function",noTokenError:"Access denied (no token)",serverResponse:"Server responded",wrongGreetings:"Wrong value of greetings parameter",notWhileLogin:"You can't call `%s' function while in login",loginIsNotAFunction:"Authenticate must be a function",canExitError:"You can't exit from main interpreter",invalidCompletion:"Invalid completion",invalidSelector:"Sorry, but terminal said that you use invalid selector!",invalidTerminalId:"Invalid Terminal ID",login:"login",password:"password",recursiveLoop:"Recursive loop in echo detected, skip",notAString:"%s function: argument is not a string",redrawError:"Internal error, wrong position in cmd redraw",invalidStrings:"Command %s have unclosed strings",invalidMask:"Invalid mask used only string or boolean allowed",defunctTerminal:"You can't call method on terminal that was destroyed",abortError:"Abort with CTRL+D",timeoutError:"Signal timed out"}};var requests=[],abort_controllers=[],terminals=new Cycle,save_state=[],hash_commands,change_hash=!1,fire_hash_change=!0,first_instance=!0;$.fn.terminal=function(t,e){function u(n){n&&(this.storage={}),this.set=function(o,a){n?this.storage[o]=a:$.Storage.set(o,a)},this.get=function(o){return n?this.storage[o]:$.Storage.get(o)},this.remove=function(o){n?delete this.storage[o]:$.Storage.remove(o)}}function i(n){if($.terminal.unclosed_strings(n)){var o=$.terminal.escape_brackets(n),a=sprintf(me().invalidStrings,"`"+o+"`");throw new $.terminal.Exception(a)}else return is_function(d.processArguments)?process_command(n,d.processArguments):d.processArguments?$.terminal.parse_command(n):$.terminal.split_command(n)}var f=!1;function D(n,o){return o=o||{},$.terminal.Animation&&n instanceof $.terminal.Animation?(n.start(r),!1):is_function(d.renderHandler)?f?n:unpromise(n,function(a){try{f=!0;var l=d.renderHandler.call(r,a,o,r);if(l===!1)return!1;var c=is_promise(l);return c?always(l,function(){f=!1}):typeof l=="string"||y(l)?l:a}catch(x){return["[[;red;]"+x.message+"]",format_stack_trace(x.stack)].join(`
`)}finally{c||(f=!1)}}):n}function p(n,o){if(y(n)){var a=$.extend({},o,{raw:!0,finalize:function(l){l.find(".terminal-render-item").replaceWith(n),o&&is_function(o.finalize)&&o.finalize(l,r)}});return['<div class="terminal-render-item"/>',a]}}function h(n,o){var a=p(n,o);if(a)return r.echo.apply(r,a),!0}function g(n){return qe.find("[data-index="+n+"]")}function y(n){return n instanceof $.fn.init||n instanceof Element}function F(n){n=D(n),n!==!1&&(h(n)||(is_string(n)?r.echo(n):is_array(n)?r.echo($.map(n,function(o){return JSON.stringify(o)}).join(" ")):typeof n=="object"?r.echo(JSON.stringify(n)):r.echo(n)))}function L(n,o){var a=/(.*):([0-9]+):([0-9]+)$/,l=n.match(a);l&&(r.pause(d.softPause),$.get(l[1],function(c){var x=l[1],k=c.split(`
`),T=+l[2]-1,O=T>2?T-2:0,S=k.slice(O,T+3).map(function(H,j){var J="["+(T+j-1)+"]: ",se=o-J.length-4;return H.length>se&&(H=H.substring(0,se)+"..."),(T>2?j===2:j===T)&&(H="[[;#f00;]"+$.terminal.escape_brackets(H)+"]"),J+H}).filter(Boolean).join(`
`);S.length&&(r.echo("[[b;white;]"+x+"]"),r.echo(S).resume())},"text"))}function M(n){if(is_function(d.onRPCError))d.onRPCError.call(r,n);else if(r.error("&#91;RPC&#93; "+n.message),n.error&&n.error.message){n=n.error;var o="	"+n.message;n.file&&(o+=' in file "'+n.file.replace(/.*\//,"")+'"'),n.at&&(o+=" at line "+n.at),r.error(o)}}function N(n,o){var a;d.rpc&&(a=function(){return d.rpc.apply(r,arguments)});var l=function(c,x){r.pause(d.softPause),$.jrpc({url:n,method:c,params:x,request:function(k,T){try{d.request.call(r,k,T,r)}catch(O){C(O,"USER")}},intercept:a,response:function(k,T){try{d.response.call(r,k,T,r)}catch(O){C(O,"USER")}},success:function(T){T.error?M(T.error):is_function(d.processRPCResponse)?d.processRPCResponse.call(r,T.result,r):T.result!==null&&F(T.result),r.resume()},error:z})};return function(c,x){if(c!==""){try{c=i(c)}catch(T){C(T,"TERMINAL (get_processed_command)");return}if(!o||c.name==="help")l(c.name,c.args);else{var k=x.token(!0);k?l(c.name,[k].concat(c.args)):x.error("&#91;AUTH&#93; "+me().noTokenError)}}}}function R(n,o,a,l){return function(c,x){if(c!==""){var k;try{k=i(c)}catch(H){is_function(d.exception)?d.exception(H,r):r.error("Error: "+(H.message||H));return}var T=n[k.name],O=get_type(T);if(O==="function")if(o&&T.length!==k.args.length)r.error("&#91;Arity&#93; "+sprintf(me().wrongArity,k.name,T.length,k.args.length));else return T.apply(r,k.args);else if(O==="object"||O==="string"){var S=[];O==="object"&&(S=Object.keys(T),T=R(T,o,a)),x.push(T,{prompt:k.name+"> ",name:k.name,completion:O==="object"?S:undefined})}else is_function(l)?l(c,r):is_function(d.onCommandNotFound)?d.onCommandNotFound.call(r,c,r):x.error(sprintf(me().commandNotFound,k.name))}}}function z(n,o,a){r.resume(),is_function(d.onAjaxError)?d.onAjaxError.call(r,n,o,a):o!=="abort"&&r.error("&#91;AJAX&#93; "+o+" - "+me().serverResponse+`:
`+$.terminal.escape_brackets(n.responseText))}function te(n,o,a){function l(T){T.error?M(T.error):is_function(d.processRPCResponse)?d.processRPCResponse.call(r,T.result,r):F(T.result),r.resume()}function c(T,O){try{d.request.call(r,T,O,r)}catch(S){C(S,"USER")}}function x(T,O){try{d.response.call(r,T,O,r)}catch(S){C(S,"USER")}}function k(T){var O=T;if(d.describe!==!1&&d.describe!==""&&d.describe.split(".").forEach(function(j){O=O[j]}),O&&O.length){var S={};$.each(O,function(j,J){$.isPlainObject(J)&&typeof J.name=="string"&&(S[J.name]=function(){var se=o&&J.name!=="help",b=Array.prototype.slice.call(arguments),P=b.length+(se?1:0);if(d.checkArity&&J.params&&J.params.length!==P)r.error("&#91;Arity&#93; "+sprintf(me().wrongArity,J.name,J.params.length,P));else{if(r.pause(d.softPause),se){var W=r.token(!0);W?b=[W].concat(b):r.error("&#91;AUTH&#93; "+me().noTokenError)}$.jrpc({url:n,method:J.name,params:b,request:c,response:x,success:l,error:z})}})});var H=typeof o=="string"?o:"login";S.help=S.help||function(j){if(typeof j>"u"){var J=O.map(function(P){return P.name}).join(", ")+", help";r.echo("Available commands: "+J)}else{var se=!1;if($.each(O,function(P,W){if(W.name===j){se=!0;var Q="";if(Q+="[[bu;;]"+W.name+"]",W.params){var V=W.params;o&&W.name!==H&&(V=V.slice(1)),Q+=" "+V.join(" ")}return W.help&&(Q+=`
`+W.help),r.echo(Q),!1}}),!se)if(j==="help")r.echo(`[[bu;;]help] [method]
display help for the method or list of methods if not specified`);else{var b="Method `"+j+"' not found ";r.error(b)}}},a(S)}else a(null)}return $.jrpc({url:n,method:"system.describe",params:[],success:k,request:c,response:x,error:function(){a(null)}})}function A(n,o,a){a=a||$.noop;var l=get_type(n),c,x={},k=0,T;if(l==="array")c={},function S(H,j){if(H.length){var J=H[0],se=H.slice(1),b=get_type(J);b==="string"?d.describe===!1?(++k===1?T=N(J,o):r.error(me().oneRPCWithIgnore),S(se,j)):(r.pause(d.softPause),te(J,o,function(P){P?$.extend(c,P):++k===1?T=N(J,o):r.error(me().oneRPCWithIgnore),r.resume(),S(se,j)})):b==="function"?(T?r.error(me().oneInterpreterFunction):T=J,S(se,j)):b==="object"&&($.extend(c,J),S(se,j))}else j()}(n,function(){a({interpreter:R(c,!1,o,T&&T.bind(r)),completion:Object.keys(c)})});else if(l==="string")d.describe===!1?(c={interpreter:N(n,o)},Array.isArray(d.completion)&&(c.completion=d.completion),a(c)):(r.pause(d.softPause),te(n,o,function(S){S?(x.interpreter=R(S,!1,o),x.completion=Object.keys(S)):x.interpreter=N(n,o),a(x),r.resume()}));else if(l==="object")a({interpreter:R(n,d.checkArity,o),completion:Object.keys(n)});else{if(l==="undefined")n=$.noop;else if(l!=="function"){var O=l+" is invalid interpreter value";throw new $.terminal.Exception(O)}a({interpreter:n,completion:d.completion})}}function E(n,o){var a=get_type(o)==="boolean"?"login":o;return function(l,c,x){r.pause(d.softPause),$.jrpc({url:n,method:a,params:[l,c],request:function(k,T){try{d.request.call(r,k,T,r)}catch(O){C(O,"USER")}},response:function(k,T){try{d.response.call(r,k,T,r)}catch(O){C(O,"USER")}},success:function(T){!T.error&&T.result?x(T.result):x(null),r.resume()},error:z})}}function C(n,o,a){is_function(d.exceptionHandler)?d.exceptionHandler.call(r,n,o):(r.exception(n,o),a||setTimeout(function(){throw n},0))}function Y(n){function o(l,c,x,k,T,O,S){function H(b,P){return"[["+[c+(b||""),x,k,T,P||O].join(";")+"]"}function j(b){return"]"+H("!",b)+b+"]"+H()}if(!c.match(/!/)){var J=S.match(email_full_re)||S.match(url_full_re);if(J)return H("!",J[1])+S+"]";if(S.match(email_re)||S.match(url_nf_re)){var se=S.replace(email_re,j).replace(url_nf_re,j);return H("",O)+se+"]"}}return l}function a(l){return l.replace(email_re,"[[!;;]$1]").replace(url_nf_re,"[[!;;]$1]")}return $.terminal.have_formatting(n)?$.terminal.format_split(n).map(function(l){return $.terminal.is_formatting(l)?l.replace(format_parts_re,o):a(l)}).join(""):a(n)}function w(n,o){return(strlen(text(n))>o.cols||n.match(/\n/))&&(d.wrap===!0&&o.wrap===undefined||d.wrap===!1&&o.wrap===!0)}var ie;"Map"in root&&(ie=new Map);function ue(n,o,a){return a.exec||o.options.clear_exec?$.terminal.each_extended_command(n,function(l){if(a.exec){o.options.exec=!1,o.options.clear_exec=!0;var c=l.trim();rt&&rt===c?(rt="",r.error(me().recursiveLoop)):(rt=c,$.terminal.extended_command(r,l,{invokeMethods:a.invokeMethods}).then(function(){rt=""}))}}):n}function I(n){try{var o=!is_function(n.value),a=$.extend({exec:!0,raw:!1,finalize:$.noop,useCache:o,invokeMethods:!1,formatters:!0,convertLinks:d.convertLinks},n.options||{}),l=X(n.value);if(l&&is_function(l.then))return l.then(function(J){I($.extend(n,{value:J,options:a}))});if(l!==""){if(!a.raw){if(d.useCache&&a.useCache){var c=l;if(ie&&ie.has(c)){var x=ie.get(c);return Oe.append(x.input,n.index,a,x.raw),!0}}if(a.formatters)try{l=$.terminal.apply_formatters(l,$.extend(d,{echo:!0}))}catch(J){C(J,"FORMATTING")}if(l=ue(l,n,a),l==="")return;a.convertLinks&&(l=Y(l));var k=l;l=crlf($.terminal.normalize(l)),l=$.terminal.encode(l,{tabs:d.tabs});var T,O,S=a.cols=r.cols();w(l,a)?(T=$.terminal.split_equal(l,S,{keepWords:a.keepWords,trim:!0}),O=$.terminal.split_equal(k,S,{keepWords:a.keepWords,trim:!0})):l.match(/\n/)&&(T=l.split(/\n/),O=l.split(/\n/))}}else k="";var H=T||l,j=O||k;ie&&c&&o&&ie.set(c,{input:H,raw:j}),Oe.append(H,n.index,a,j)}catch(J){Oe.clear(),is_function(d.exceptionHandler)?d.exceptionHandler.call(r,J,"TERMINAL"):alert_exception("[Internal Exception(process_line)]",J)}return!0}function pe(n){if(n=$.extend({},{update:!1,scroll:!0},n||{}),!n.update){K.resize(Ue);var o=qe.empty().detach()}try{Oe.clear(),unpromise(ye.render(r.rows(),function(a){return a.map(I)}),function(){r.flush(n),n.update||K.before(o),ce("onAfterRedraw")})}catch(a){is_function(d.exceptionHandler)?d.exceptionHandler.call(r,a,"TERMINAL (redraw)"):alert_exception("[redraw]",a)}}function ae(){if(d.outputLimit>=0){var n;d.outputLimit===0?n=r.rows():n=d.outputLimit;var o=qe.find("> div > div");if(o.length+1>n){var a=o.length-n+1,l=o.slice(0,a),c=l.parent();l.remove(),c.each(function(){var x=$(this);x.is(":empty")&&(ye.unmount(x),x.remove())}),ye.limit_snapshot(a)}}}function G(){d.greetings===undefined?r.echo(r.signature,{finalize:a11y_hide,formatters:!1}):d.greetings&&(is_string(d.greetings)?r.echo(d.greetings):is_function(d.greetings)?r.echo(function(){try{var n=new $.Deferred,o=d.greetings.call(r,n.resolve);return o&&n.resolve(o),n.promise()}catch(a){d.greetings=null,C(a,"greetings")}}):r.error(me().wrongGreetings))}function ne(n){var o=K.mask();switch(typeof o){case"string":return n.replace(/./g,o);case"boolean":return o?n.replace(/./g,d.maskChar):$.terminal.escape_formatting(n)}throw new $.terminal.Exception(me().invalidMask)}function ee(n){typeof n>"u"&&(n=r.get_command());var o=K.prompt(!0);n=ne(n);var a={exec:!1,formatters:!1,convertLinks:!1,finalize:function(c){a11y_hide(c.addClass("terminal-command")),ce("onEchoCommand",[c,n])}};n=$.terminal.apply_formatters(n,{command:!0}),r.echo(o+n,a)}function Z(){return Ve.outerWidth()!==r.outerWidth()}function Ee(n){var o=terminals.get()[n[0]];if(!o)throw new $.terminal.Exception(me().invalidTerminalId);var a=n[1];if(save_state[a])o.import_view(save_state[a]);else{change_hash=!1;var l=n[2];l&&o.exec(l).done(function(){change_hash=!0,save_state[a]=o.export_view()})}}var Pe=["AbortError","TimeoutError"];function ke(n){return function(o){Pe.includes(o.name)&&!d.errorOnAbort||r.error("["+n+"] "+(o.message||o)).resume()}}function Ze(){change_hash&&(fire_hash_change=!1,location.hash="#"+JSON.stringify(hash_commands),setTimeout(function(){fire_hash_change=!0},100))}var Me=!0,Te=[];function _e(n,o,a){function l(){(d.historyState||d.execHash&&a)&&(save_state.length?r.save_state(null):r.save_state())}function c(){a||(change_hash=!0,d.historyState&&r.save_state(n,!1),change_hash=se)}function x(){J.resolve(),ce("onAfterCommand",[n])}function k(P,W){typeof P<"u"&&F(P),x(),W&&r.resume()}function T(P){return is_function(P.done||P.then)&&xe}var O=ke("Command");function S(P){O(P),abort_controllers=[]}function H(){var P=j.interpreter.call(r,n,r);if(c(),P)return Je||(T(P)?Se=!0:is_promise(P)&&r.pause(d.softPause)),Je=!1,is_function(P.done||P.then)?unpromise(P,function(W){k(W,!0),abort_controllers=[]},S):$.when(P).done(k).catch(S);if(a&&K.refresh(),Se?Te.push(function(){x()}):x(),a)return J.promise()}Me&&(Me=!1,l());try{if(ce("onBeforeCommand",[n])===!1)return;a?(rt=n.trim(),tt=$.terminal.split_command(rt)):tt=$.terminal.split_command(n),Qe()||a&&(is_function(d.historyFilter)&&d.historyFilter(n)||n.match(d.historyFilter))&&K.history().append(n);var j=de.top();!o&&d.echoCommand&&ee(n);var J=new $.Deferred,se=change_hash;if(n.match(/^\s*login\s*$/)&&r.token(!0))c(),r.level()>1?r.logout(!0):r.logout(),x();else if(d.exit&&n.match(/^\s*exit\s*$/)&&!Ae){c();var b=r.level();(b===1&&r.get_token()||b>1)&&(r.get_token(!0)&&r.set_token(undefined,!0),r.pop()),x()}else if(d.clear&&n.match(/^\s*clear\s*$/)&&!Ae)c(),r.clear(),x();else return H();return J.promise()}catch(P){if(C(P,"USER",a),r.resume(),a)throw P}}function Ft(){ce("onBeforeLogout",[],!0)!==!1&&(Lt(),ce("onAfterlogout",[],!0),r.login(U,!0,ut))}function Lt(){var n=r.prefix_name(!0)+"_";Fe.remove(n+"token"),Fe.remove(n+"login")}function nr(n){var o=r.prefix_name()+"_interpreters",a=Fe.get(o);a?a=JSON.parse(a):a=[],$.inArray(n,a)===-1&&(a.push(n),Fe.set(o,JSON.stringify(a)))}function He(n){var o=de.top(),a=r.prefix_name(!0);Qe()||nr(a);var l=r.login_name(!0);K.name(a+(l?"_"+l:""));var c=o.prompt;is_function(c)&&(c=fe(c));var x=is_function(o.prompt);(x||c!==K.prompt())&&(x&&K.prompt(""),K.prompt(o.prompt)),typeof o.history<"u"&&r.history().toggle(o.history),$.isPlainObject(o.keymap)&&K.keymap(null).keymap($.extend({},ge,$.omap(o.keymap,function(k,T){return function(){var O=[].slice.call(arguments);try{return T.apply(r,O)}catch(S){C(S,"USER KEYMAP")}}}))),K.set(""),!n&&is_function(o.onStart)&&o.onStart.call(r,r)}function ce(n,o,a){o=(o||[]).concat([r]);var l=de&&de.top();if(l&&is_function(l[n])&&!a)try{return l[n].apply(r,o)}catch(c){delete l[n],C(c,n)}else if(is_function(d[n]))try{return d[n].apply(r,o)}catch(c){d[n]=null,C(c,n)}}var It=function(){function n(o){if(!o)try{return r.scroll_to(r.find(".cmd-cursor-line")),!0}catch{return!0}}return typeof global<"u"&&typeof global.it=="function"?n:debounce(n,100,{leading:!0,trailing:!1})}();function Et(){var n=r.find(".cmd-cursor-line");return n.is_fully_in_viewport(r).then(It)}function We(n){if(typeof history<"u"&&history.replaceState){var o="#"+JSON.stringify(n),a=location.href.replace(/#.*$/,o);history.replaceState(null,"",a)}}function Dt(){if(fire_hash_change&&d.execHash)try{if(location.hash){var n=location.hash.replace(/^#/,"");hash_commands=JSON.parse(decodeURIComponent(n))}else hash_commands=[];hash_commands.length?Ee(hash_commands[hash_commands.length-1]):save_state[0]&&r.import_view(save_state[0])}catch(o){C(o,"TERMINAL")}}function ut(){He(),St.resolve(),G()}function ot(){ye.length&&et.length&&$.when.apply($,et);function n(){Rt=$.noop,!o&&r.enabled()&&r.resume(!0)}var o=!1;if(is_function(d.onInit)){Rt=function(){o=!0};var a;try{a=d.onInit.call(r,r)}catch(l){C(l,"OnInit")}finally{is_promise(a)?a.then(n).catch(function(l){C(l,"OnInit"),n()}):n()}}first_instance&&(first_instance=!1,$(window).on("hashchange",Dt))}function Qe(){return Ae||K.mask()!==!1}function mt(n){var o,a=de.top();if(is_function(a.keydown)){if(o=a.keydown.call(r,n,r),o!==undefined)return o}else if(is_function(d.keydown)&&(o=d.keydown.call(r,n,r),o!==undefined))return o}var wt={"CTRL+D":function(n,o){return Ae||(K.get()===""?de.size()>1||is_function(U)?r.pop(""):r.resume():o()),!1},"CTRL+C":function(){return with_selection(function(n){if(n===""){var o=r.get_command(),a=r.get_position();o=o.slice(0,a)+"^C"+o.slice(a+2),ee(o),r.set_command("")}else{var l=r.find("textarea");text_to_clipboard(l,process_selected_html(n))}}),!1},"CTRL+L":function(){return r.clear(),!1},TAB:function(n,o){var a=de.top(),l,c;typeof a.caseSensitiveAutocomplete<"u"?c=a.caseSensitiveAutocomplete:c=d.caseSensitiveAutocomplete,d.completion&&get_type(d.completion)!=="boolean"&&a.completion===undefined?l=d.completion:l=a.completion,l==="settings"&&(l=d.completion);function x(S){S=S.slice(),r.before_cursor(!1).match(/\s/)||(d.clear&&$.inArray("clear",S)===-1&&S.push("clear"),d.exit&&$.inArray("exit",S)===-1&&S.push("exit")),r.complete(S,{echo:!0,word:d.wordAutocomplete,escape:d.completionEscape,caseSensitive:c,echoCommand:d.doubleTabEchoCommand,doubleTab:d.doubleTab})}if(l)switch(get_type(l)){case"function":var k=r.before_cursor(d.wordAutocomplete);if(l.length===3){var T=new Error(me().comletionParameters);return C(T,"USER"),!1}var O=l.call(r,k,x);unpromise(O,x,ke("Completion"));break;case"array":x(l);break;default:throw new $.terminal.Exception(me().invalidCompletion)}else o();return!1},"CTRL+V":function(n,o){return o(n),r.oneTime(200,function(){r.scroll_to_bottom()}),!0},"CTRL+TAB":function(){if(terminals.length()>1)return r.focus(!1),!1},PAGEDOWN:function(){r.scroll(r.height())},PAGEUP:function(){r.scroll(-r.height())}};function $t(n){var o,a;if(xe)return!1;if(r.enabled())if(r.paused()){if(!d.pauseEvents&&(o=mt(n),o!==undefined))return o;if(n.which===68&&n.ctrlKey){if(d.pauseEvents&&(o=mt(n),o!==undefined))return o;if(r.abort(),requests.length){for(a=requests.length;a--;){var l=requests[a];if(l.readyState!==4)try{l.abort()}catch{is_function(d.exceptionHandler)?d.exceptionHandler.call(r,n,"AJAX ABORT"):r.error(me().ajaxAbortError)}}requests=[]}r.resume()}return!1}else{if(o=mt(n),o!==undefined)return o;n.which!==9&&(vt=0)}}function kt(n){var o=de.top();if(Ce&&(!Se||!d.pauseEvents)){if(is_function(o.keypress))return o.keypress.call(r,n,r);if(is_function(d.keypress))return d.keypress.call(r,n,r)}}function at(n,o){return function(l,c){var x=$.terminal.apply_formatters(l,{animation:!0});x=$.terminal.normalize(x);var k=!1;if(c&&typeof c.keepWords<"u"&&(k=c.keepWords),o)var T=$.terminal.split_equal(x,r.cols(),{keepWords:k});var O=xe;xe=!0;var S=r.get_prompt(),H=0,j=$.terminal.length(x);if(j>0){var J="";c.prompt?J=$.terminal.apply_formatters(c.prompt,{prompt:!0}):r.set_prompt("");var se=r.is_bottom(),b=0;if(o)var P=T.map(function(he){return{formatted:he,chars:$.terminal.partition(he,{wrap:!1}),len:$.terminal.length(he)}});else var W=$.terminal.partition(x,{wrap:!1});var Q,V=setInterval(function(){var he,be,De;if(Nt){r.skip_stop();var qt=$.terminal.substring(x,H,j);J+=qt,K.prompt(J,{formatters:!1}),Q=!0}else{if(o?(he=P[b].formatted,be=P[b].chars,De=P[b].len):(he=x,be=W,De=j),De===0)K.prompt("");else{var Be=be[H];if(c.mask){var Ye=K.mask();typeof Ye=="string"?Be=Ye:Ye&&(Be=d.maskChar)}J+=Be,K.prompt(J,{formatters:!1}),se&&(Be===`
`||!r.is_bottom())&&r.scroll_to_bottom(),H++}if(H===De&&o){var Ot=r.last_index();b===P.length-1?r.set_prompt(S):r.set_prompt("");var Wt=!!qe.find(".partial").length;r.echo(he,$.extend({},c,{formatters:!1,finalize:null,typing:!1})),P[b].index=Ot+1,J="",++b,H=0}}if(Q||(o?Q=b===P.length:Q=H===j),Q){if(clearInterval(V),Wt||c.newline===!1){var Ut=r.last_index(),ur=qe.find('[data-index="'+Ut+'"]');c.finalize(ur)}else o&&P.forEach(function(bt){typeof bt.index<"u"&&r.remove_line(bt.index)}),n(l,S,c);O||(xe=!1)}},c.delay)}}}var jt=at(function(n,o,a){r.set_prompt(n),a.finalize()},!0),Vt=function(){var n=at(function(o,a,l){r.set_prompt(a),r.insert(o),l.finalize()});return function(o,a,l){return n(a,$.extend({},l,{prompt:o+r.get_command()}))}}(),Yt=at(function(n,o,a){r.set_prompt(o),r.echo(n,$.extend({},a,{typing:!1}))},!0),Qt=function(){var n=at(function(o,a,l){r.set_prompt(a),with_prompt(a,function(c){var x=ne(o);c=$.terminal.apply_formatters(c,{prompt:!0}),x=$.terminal.apply_formatters(x,{command:!0});var k=c+x;l=$.extend({},l,{typing:!1,formatters:!1,convertLinks:!1}),r.echo(k,l)},r)});return function(o,a,l){return n(a,$.extend({},l,{prompt:o,mask:!0}))}}();function Pt(n,o,a){return function(c,x){var k=new $.Deferred;return $e(function(){var O=$.extend({typing:!1,delay:d.execAnimationDelay},x);if(O.typing){if(typeof c!="string")return k.reject(n+": Typing animation require string");if(typeof O.delay!="number"||isNaN(O.delay))return k.reject(n+": Invalid argument, delay need to be a number");var S=r.typing(n,O.delay,c,O);S.then(function(){k.resolve()})}else o(c,O);is_function(a)&&a(c,O)}),x&&x.typing?k.promise():r}}function dt(n,o,a){var l=ce("onBeforeLogin",[n,o]);return unpromise(defined(l),a,"validate_login")}function At(n,o,a,l){d.history&&K.history().disable();var c=r.level();T();function x(){for(;r.level()>c;)r.pop(undefined,!0);d.history&&K.history().enable()}function k(S,H){var j=r.prefix_name(!0)+"_";Fe.set(j+"token",H),Fe.set(j+"login",S)}function T(){var S=r.prefix_name(!0)+"_";Fe.remove(S+"token"),Fe.remove(S+"login")}function O(S,H,j){we(function(){var se;H?(x(),k(S,H),Ae=!1,ce("onAfterLogin",[S,H]),se=a):(o?(j||r.error(me().wrongPasswordTryAgain),r.pop(undefined,!0).set_mask(!1)):(Ae=!1,j||r.error(me().wrongPassword),r.pop(undefined,!0).pop(undefined,!0)),se=l),r.paused()&&r.resume(),is_function(se)&&se(),r.off("terminal.autologin")})}r.on("terminal.autologin",function(S,H,j,J){dt(H,j,function(se){se!==!1&&O(H,j,J)})}),r.push(function(S){r.set_mask(d.maskChar).push(function(H){try{dt(S,H,function(j){if(j===!1){x();return}r.pause();try{var J=[S,H,function(b,P){O(S,b,P)}],se=n.apply(r,J);unpromise(se,function(b){O(S,b)},function(b){r.pop(undefined,!0).pop(undefined,!0),r.error(b.message),is_function(l)&&l(),r.paused()&&r.resume(),r.off("terminal.autologin")})}catch(b){C(b,"AUTH")}})}catch(j){C(j,"AUTH")}},{prompt:me().password+": ",name:"password"})},{prompt:me().login+": ",name:"login"})}function Bt(n){return function(o){n.add(o)}}function me(){return $.extend({},$.terminal.defaults.strings,d&&d.strings||{})}function Gt(n,o){return parseInt(n.getPropertyValue(o),10)||0}function Xt(){var n=window.getComputedStyle(Ve[0]);function o(k){return Gt(n,"padding-"+k)}var a=o("left"),l=o("right"),c=o("top"),x=o("bottom");return{top:c,left:a,right:l,bottom:x}}var r=this;if(this.length>1)return this.each(function(){$.fn.terminal.call($(this),t,$.extend({name:r.selector},e))});var st;if(r.is("body,html")){if(r.hasClass("full-screen-terminal")){var Tt=r.find("> .terminal").data("terminal");if(Tt)return Tt}st=r,r=$("<div/>").appendTo("body"),$("body").addClass("full-screen-terminal")}else if(r.data("terminal"))return r.data("terminal");var ft=$.omap({id:function(){return nt},clear:function(){return ce("onClear")!==!1&&(Oe.clear(),ye.clear(function(n){return g(n)}),qe[0].innerHTML="",r.prop({scrollTop:0})),r},export_view:function(){var n=ce("onExport");return n=n||{},$.extend({},{focus:Ce,mask:K.mask(),prompt:r.get_prompt(),command:r.get_command(),position:K.position(),lines:clone(ye.data()),interpreters:de.clone(),history:K.history().data},n)},import_view:function(n){if(Ae)throw new Error(sprintf(me().notWhileLogin,"import_view"));return ce("onImport",[n]),$e(function(){var a=r.is_bottom();r.set_prompt(n.prompt),r.set_command(n.command),K.position(n.position),K.mask(n.mask),n.focus&&r.focus(),ye.import(clone(n.lines).filter(function(l){return l[0]})),n.interpreters instanceof Stack&&(de=n.interpreters),d.importHistory&&K.history().set(n.history),pe(),a&&r.scroll_to_bottom()}),r},save_state:function(n,o,a){if(typeof a<"u"?save_state[a]=r.export_view():save_state.push(r.export_view()),Array.isArray(hash_commands)||(hash_commands=[]),n!==undefined&&!o){var l=[nt,save_state.length-1,n];hash_commands.push(l),Ze()}return r},exec:function(n,o,a){function l(k){c.history&&K.history().append(n);var T=_e(n,k,!0);unpromise(T,function(){tt=null,x.resolve()},function(){tt=null,x.reject()})}o&&typeof o=="object"&&(a=o,o=null);var c=$.extend({deferred:null,silent:!1,history:!1,typing:!1,delay:d.execAnimationDelay},a);o===null&&(o=c.silent),is_deferred(c.deferred)||(c.deferred=new $.Deferred);var x=c.deferred;return we(function(){if(Array.isArray(n))(function S(){var H=n.shift();H?r.exec(H,o,a).done(S):x.resolve()})();else if(Se)ct.push([n,o,c]);else if(c.typing&&!o){var T=c.delay;Se=!0;var O=r.typing("enter",T,n,{delay:T});O.then(function(){Se=!1,l(!0)}),x.then(function(){Se=!1})}else l(o)}),x.promise()},autologin:function(n,o,a){return r.trigger("terminal.autologin",[n,o,a]),r},login:function(n,o,a,l){if(gt.push([].slice.call(arguments)),Ae)throw new Error(sprintf(me().notWhileLogin,"login"));if(!is_function(n))throw new Error(me().loginIsNotAFunction);if(Ae=!0,r.token()&&r.level()===1&&!Mt)Ae=!1,r.logout(!0);else{var c=r.token(!0),x=r.login_name(!0);c&&x?(Ae=!1,r.pause(),dt(x,c,function(k){k!==!1?is_function(a)&&a():(r.resume(),At(n,o,a,l))})):At(n,o,a,l)}return r},settings:function(){return d},before_cursor:function(n){var o=K.position(),a=K.get().slice(0,o),l=a.split(/\s/),c;if(n)if(l.length===1)c=l[0];else{var x=a.match(/(\\?")/g),k=x?x.filter(function(S){return!S.match(/^\\/)}).length:0;x=a.match(/'/g);var T=x?x.length:0;if(T%2===1)c=a.match(/('[^']*)$/)[0];else if(k%2===1)c=a.match(/("(?:[^"]|\\")*)$/)[0];else for(c=l[l.length-1],_=l.length-1;_>0;_--){var O=l[_-1];if(O[O.length-1]==="\\")c=l[_-1]+" "+c;else break}}else c=a;return c},complete:function(n,o){o=$.extend({word:!0,echo:!1,escape:!0,echoCommand:!1,caseSensitive:!0,doubleTab:null},o||{});var a=o.caseSensitive,l=r.before_cursor(o.word).replace(/\\"/g,'"'),c=!1;if(o.word&&(l.match(/^"/)?c='"':l.match(/^'/)&&(c="'"),c&&(l=l.replace(/^["']/,""))),vt%2===0)_t=r.before_cursor(o.word);else{var x=r.before_cursor(o.word);if(x!==_t)return}var k=$.terminal.escape_regex(l);o.escape&&(k=k.replace(/(\\+)(["'() ])/g,function(W,Q,V){return V.match(/[()]/)?Q+"\\?\\"+V:Q+"?"+V}));function T(W){return c==='"'&&(W=W.replace(/"/g,'\\"')),!c&&o.escape&&(W=W.replace(/(["'() ])/g,"\\$1")),W}function O(){for(var W=[],Q=n.length;Q--;)if(n[Q].match(/\n/)&&o.word&&warn("If you use commands with newlines you should use word option for complete or wordAutocomplete terminal option"),H.test(n[Q])){var V=T(n[Q]);!a&&same_case(V)&&(l.toLowerCase()===l?V=V.toLowerCase():l.toUpperCase()===l&&(V=V.toUpperCase())),W.push(V)}return W}var S=a?"":"i",H=new RegExp("^"+k,S),j=O();function J(W,Q){var V=r.get_command(),he=r.get_position(),be=new RegExp("^"+W,"i"),De=V.slice(0,he),Be=V.slice(he),Ye=Q.replace(be,"")+(c||"");r.set_command(De+Ye+Be),r.set_position((De+Ye).length)}if(j.length===1)return o.escape?J(k,j[0]):r.insert(j[0].replace(H,"")+(c||"")),_t=r.before_cursor(o.word),!0;if(j.length>1)if(++vt>=2){if(vt=0,o.echo){if(is_function(o.doubleTab)){o.echoCommand&&ee();var se=o.doubleTab.call(r,l,j,ee);return typeof se>"u"?!0:se}else if(o.doubleTab!==!1){ee();var b=j.slice().reverse().join("		");r.echo($.terminal.escape_brackets(b),{keepWords:!0,formatters:!1})}return!0}}else{var P=common_string(T(l),j,a);if(P)return J(k,P),_t=r.before_cursor(o.word),!0}},commands:function(){return de.top().interpreter},set_interpreter:function(n,o){var a=$.Deferred();function l(){r.pause(d.softPause),A(n,o,function(c){r.resume();var x=de.top();$.extend(x,c),He(!0),a.resolve()})}return is_function(o)?r.login(o,!0,l):get_type(n)==="string"&&o?r.login(E(n,o),!0,l):l(),a.promise()},greetings:function(){return G(),r},paused:function(){return Se},pause:function(n){return we(function(){Rt(),Se=!0,K.disable(n||is_android),n||K.find(".cmd-prompt").hidden(),ce("onPause")}),r},resume:function(n){return we(function(){Se=!1,Ce&&terminals.front()===r&&K.enable(n),K.find(".cmd-prompt").visible();var a=ct;ct=[];for(var l=0;l<a.length;++l)r.exec.apply(r,a[l]);r.trigger("resume");var c=Te.shift();c&&c(),ce("onResume")!==!1&&r.scroll_to_bottom()}),r},signal:function(){var n=new AbortController;return abort_controllers.push(n),n.signal},timeout:function(n){var o=new AbortController,a=new Error(me().timeoutError);a.name="TimeoutError",abort_controllers.push(o);var l=o.signal;return setTimeout(function(){l.aborted||o.abort(a)},n),l},abort:function(n){if(abort_controllers.length){var o=new Error(n||me().abortError);o.name="AbortError";for(var a=abort_controllers.length;a--;){var l=abort_controllers[a];l.signal.aborted||l.abort(o)}abort_controllers=[]}return r},skip:function(){return Nt=!0,r},skip_stop:function(){return Nt=!1,r},animating:function(){return xe},cols:function(){return d.numChars?d.numChars:((!Ue||Ue===1e3)&&(Ue=get_num_chars(r,Re)),Ue)},rows:function(){return d.numRows?d.numRows:(ze||(ze=get_num_rows(r,Re)),ze)},history:function(){return K.history()},geometry:function(){var n=Xt();return{terminal:{padding:{left:n.left,right:n.right,top:n.top,bottom:n.bottom},width:it+n.left+n.right,height:lt+n.top+n.bottom},density:je,char:Re,cols:this.cols(),rows:this.rows()}},history_state:function(n){function o(){d.historyState=!0,save_state.length?terminals.length()>1&&r.save_state(null):r.save_state()}return n?typeof window.setImmediate>"u"?setTimeout(o,0):setImmediate(o):d.historyState=!1,r},clear_history_state:function(){return hash_commands=[],save_state=[],r},next:function(){if(terminals.length()===1)return r;terminals.front().disable();var n=terminals.rotate().enable(),o=n.offset().top-50;$("html,body").animate({scrollTop:o},500);try{trigger_terminal_change(n)}catch(a){C(a,"onTerminalChange")}return n},focus:function(n,o){return we(function(){if(terminals.length()===1)n===!1?r.disable(o):r.enable(o);else if(n===!1)r.next();else{var l=terminals.front();if(l!==r&&(terminals.forEach(function(c){c!==r&&c.enabled()&&c.disable(o)}),!o))try{trigger_terminal_change(r)}catch(c){C(c,"onTerminalChange")}terminals.set(r),r.enable(o)}}),r},blur:function(n){return this.focus(!1,n)},freeze:function(n){return $e(function(){n?(r.disable(),Ke=!0):(Ke=!1,r.enable())}),r},frozen:function(){return Ke},enable:function(n){return!Ce&&!Ke&&(Ue===undefined&&r.resize(),we(function(){var a;!n&&!Ce&&ce("onFocus"),(!n&&a===undefined||n)&&(Ce=!0,r.paused()||K.enable(!0))})),r},clear_cache:"Map"in root?function(){return Oe.clear_cache(),ie.clear(),K.clear_cache(),r}:function(){return r},disable:function(n){return we(function(){var a;!n&&Ce&&(a=ce("onBlur")),(!n&&a===undefined||n)&&(Ce=!1,K.disable())}),r},enabled:function(){return Ce},signature:function(){for(var n=r.cols(),o=signatures.length;o--;){var a=signatures[o].map(function(l){return l.length});if(Math.max.apply(null,a)<=n)return signatures[o].join(`
`).replace(/\s+$/m,"")+`
`}return""},version:function(){return $.terminal.version},cmd:function(){return K},get_command:function(){return K.get()},enter:Pt("enter",ee),set_command:function(n,o){return $e(function(){typeof n!="string"&&(n=JSON.stringify(n)),K.set(n,undefined,o)}),r},set_position:function(n,o){return $e(function(){K.position(n,o)}),r},get_position:function(){return K.position()},insert:function(n,o){if(typeof n=="string"){var a,l={stay:!1,typing:!1,delay:100};is_object(o)||(o={stay:o}),a=$.extend(l,o);var c=new $.Deferred;return $e(function(){function k(){(d.scrollOnEcho||T)&&r.scroll_to_bottom()}var T=r.is_bottom();if(a.typing){var O=a.delay,S=r.typing("insert",O,n,d);S.then(function(){k(),c.resolve()})}else K.insert(n,d.stay),k()}),a.typing?c.promise():r}else throw new Error(sprintf(me().notAString,"insert"))},set_prompt:Pt("prompt",function(n){is_function(n)?K.prompt(function(o){return n.call(r,o,r)}):K.prompt(n)},function(n){de.top().prompt=n}),get_prompt:function(){return de.top().prompt},set_mask:function(n){return $e(function(){K.mask(n===!0?d.maskChar:n)}),r},get_mask:function(){return K.mask()},get_output:function(n){return n?ye.data():ye.get_snapshot()},resize:function(n,o){if(!r.is(":visible"))r.stopTime("resize"),r.oneTime(500,"resize",function(){r.resize(n,o)});else{if(n&&o&&(r.width(n),r.height(o)),n=r.width(),o=r.height(),typeof d.numChars<"u"||typeof d.numRows<"u"){typeof d.numChars<"u"&&(K.resize(d.numChars),r.refresh()),ce("onResize");return}var a=get_num_chars(r,Re),l=get_num_rows(r,Re);if(a!==Ue||l!==ze){r.clear_cache();var c=a!==Ue;Ue=a,ze=l,c&&(K.resize(Ue),r.refresh()),ce("onResize")}}return r},refresh:function(){return Re.width!==0&&css(r[0],{"--char-width":Re.width,"--pixel-density":je}),r.clear_cache(),_t&&K.resize(),pe({scroll:!1,update:!0}),r},flush:function(n){return n=$.extend({},{update:!1,scroll:!0},n||{}),$e(function(){try{if(Oe.is_empty())return r;var a=r.is_bottom(),l=d.scrollOnEcho&&n.scroll||a,c,x=!0,k=!1,T=$(),O,S=[];n.update||(T=r.find(".partial"),O=ye.get_partial()),Oe.flush(function(b){if(!b)T.length?x&&(x=!1,k=!0,c=T):(c=$("<div/>"),O=[]);else if(is_function(b.finalize)){if(n.update&&b.raw===!0&&b.newline)return;if(l&&c.find("img").on("load",function(){r.scroll_to_bottom()}),n.update){ye.update_snapshot(b.index,O);var P=g(b.index);P.html()!==c.html()&&P.replaceWith(c)}else c.appendTo(qe),T.length||ye.make_snapshot(O);c.attr("data-index",b.index),k=!b.newline,c.toggleClass("partial",k),S.push({node:c,finalize:b.finalize}),k?T=c:b.newline&&T.length&&(c=$("<div/>"),T=$())}else{var W=b.line,Q;typeof b.raw=="string"&&(k?O[O.length-1]+=b.raw:O.push(b.raw)),k?(Q=c.children().last().append(W),k=!1):(Q=$("<div/>").html(W),b.newline&&Q.addClass("cmd-end-line"),c.append(Q)),Q.css("width","100%")}}),T=r.find(".partial");var H=$.terminal.length(O[O.length-1]);H%=r.cols(),S.forEach(function(b){b.finalize(b.node)});var j;if(T.length===0)css(K[0],{"--prompt-offset":"",top:""}),K.__set_prompt_margin(0),j=r.find(".terminal-output div:last-child div:last-child"),j.css("display")==="inline-block"&&j.css({width:"100%",display:""});else if(O.length){j=T.children().last();var J=j[0].getBoundingClientRect(),se=is_ch_unit_supported?H+"ch":H+"px";css(K[0],{top:-J.height/je+"px","--prompt-offset":se}),K.__set_prompt_margin(H)}ae(),ce("onFlush"),r.stopTime("flush").oneTime(10,"flush",function(){var b=r.find(".cmd-cursor"),P=r.find(".cmd").offset(),W=r.offset(),Q=qe.height(),V=K.height();css(r[0],{"--terminal-height":r.height(),"--terminal-x":P.left-W.left,"--terminal-y":P.top-W.top,"--terminal-scroll":ve.prop("scrollTop"),"--cmd-top":Q,"--cmd-height":V}),Ce&&!is_mobile&&!n.update&&(b.hide(),setTimeout(function(){b.show()}))}),c.on_load({done:function(){l&&r.scroll_to_bottom()}})}catch(b){if(is_function(d.exceptionHandler))try{d.exceptionHandler.call(r,b,"TERMINAL (Flush)")}catch(P){d.exceptionHandler=$.noop,alert_exception("[exceptionHandler]",P)}else alert_exception("[Flush]",b)}finally{Oe.clear()}}),r},update:function(n,o,a){return $e(function(){if(n<0&&(n=ye.length()+n),!ye.valid_index(n))r.error("Invalid line number "+n);else if(o===null)ye.update(n,null),g(n).remove();else{if(o=D(o,{update:!0,line:n}),o===!1)return r;unpromise(o,function(c){var x=p(c,a);x&&(c=x[0],a=x[1]),a=ye.update(n,c,a);var k=I({value:c,index:n,options:a});unpromise(k,function(){r.flush({scroll:!1,update:!0})})})}}),r},remove_line:function(n){return r.update(n,null)},last_index:function(){return ye.length()-1},echo:function(n,o,a){var l=arguments.length>0,c=a||new $.Deferred;function x(){ht=!1;var H=et;et=[];for(var j=0;j<H.length;++j)r.echo.apply(r,H[j])}function k(H){x(),C(H,"ECHO",!0)}function T(H){try{var j=$.extend({flush:!0,exec:!0,raw:d.raw,finalize:$.noop,unmount:$.noop,delay:d.execAnimationDelay,ansi:!1,typing:!1,externalPause:!0,keepWords:!1,invokeMethods:d.invokeMethods,onClear:null,formatters:!0,allowedAttributes:d.allowedAttributes,newline:!0},o||{}),J=d.externalPause&&j.externalPause;if(function(W){y(H)||(j.finalize=function(Q){j.raw&&Q.addClass("raw"),j.ansi&&Q.addClass("ansi");try{is_function(W)&&W.call(r,Q),Q.on_load({error:function(V){V.replaceWith(use_broken_image),J&&r.resume()},done:function(V){V&&J&&r.resume()},load:function(V){V&&J&&r.pause()}})}catch(V){C(V,"USER:echo(finalize)"),W=null}})}(j.finalize),j.flush&&(Oe.empty()||r.flush()),ce("onBeforeEcho",[H])===!1)return;if(j.typing){if(typeof H!="string")return c.reject("echo: Typing animation require string or promise that resolve to string");if(typeof j.delay!="number"||isNaN(j.delay))return c.reject("echo: Invalid argument, delay need to be a number");var se=r.typing("echo",j.delay,H,j);se.then(function(){c.resolve()});return}var b;if(typeof H=="function")b=H.bind(r);else if(typeof H>"u"){if(l)return r;b=""}else{var P=D(H);if(P===!1)return r;b=P}is_promise(b)&&(ht=!0),unpromise(b,function(W){if(!(typeof W>"u"||is_promise(P)&&W===!1)&&!h(W,j)){var Q=ye.length(),V=ye.has_newline();V||Q--,!j.newline&&W[W.length-1]===`
`&&(W=W.slice(0,-1),j.newline=!0);var he=I({value:W,options:j,index:Q});is_promise(he)&&(ht=!0),ye.push([W,j]),unpromise(he,function(){var be=r.find(".partial").length,De=j.flush&&be;j.flush&&(r.flush(),be&&r.oneTime(1,"echo",function(){var Be=ye.last_line();Be&&r.update(-1,Be[0],Be[1]),x()}),ce("onAfterEcho",[H])),De||x()},k)}},k)}catch(W){is_function(d.exceptionHandler)?d.exceptionHandler.call(r,W,"TERMINAL (echo)"):alert_exception("[Terminal.echo]",W)}}var O=o&&o.typing;if(ht&&!f){var S=[n,o];O&&S.push(c),et.push(S)}else T(n);return O?c.promise():r},animation:function(n){if(is_function(n)){xe=!0;var o=r.get_prompt();return r.set_prompt(""),unpromise(n(),function(){r.set_prompt(o),xe=!1})}return $.when()},delay:function(n){var o=new $.Deferred;return setTimeout(function(){o.resolve()},n),o.promise()},typing:function(n,o,a,l){var c=new $.Deferred,x,k;typeof l=="object"?(k=l.finalize||$.noop,x=$.extend({},l,{delay:o,finalize:T})):(k=l||$.noop,x={delay:o,finalize:T});function T(){c.resolve(),is_function(k)&&k.apply(r,arguments)}var O=["prompt","echo","enter","insert"];function S(){return O.indexOf(n)>=0}return $e(function(){S()?n==="prompt"?jt(a,x):n==="echo"?Yt(a,x):n==="enter"?with_prompt(r.get_prompt(),function(j){Qt(j,a,x)},r):n==="insert"&&with_prompt(r.get_prompt(),function(j){Vt(j,a,x)},r):c.reject("Invalid type only `echo` and `prompt` are supported")}),c.promise()},error:function(n,o){o=$.extend({},o,{raw:!1,formatters:!1});function a(l){typeof l!="string"&&(l=String(l));var c=$.terminal.escape_brackets(l).replace(/\\$/,"&#92;").replace(url_re,"]$1[[;;;terminal-error]");return"[[;;;terminal-error]"+c+"]"}return typeof n=="function"?r.echo(function(){return a(n.call(r))},o):n&&n.then?(n.then(function(l){r.echo(a(l))}).catch(ke("Echo Error")),r):r.echo(a(n),o)},exception:function(n,o){var a=exception_message(n);if(o&&(a="&#91;"+o+"&#93;: "+a),a&&r.error(a,{finalize:function(c){c.addClass("terminal-exception terminal-message")},keepWords:!0}),typeof n.fileName=="string"){var l=r.paused();l||r.pause(d.softPause),$.get(n.fileName,function(c){var x=n.lineNumber-1,k=c.split(`
`)[x];k&&r.error("["+n.lineNumber+"]: "+k),l||r.resume()},"text")}return n.stack&&r.echo(format_stack_trace(n.stack),{finalize:function(c){c.addClass("terminal-exception terminal-stack-trace")},formatters:!1}),r},scroll:function(n){var o;return n=Math.round(n),r.prop,n>ve.prop("scrollTop")&&n>0&&ve.prop("scrollTop",0),o=ve.prop("scrollTop"),ve.scrollTop(o+n),r},logout:function(n){if(Ae)throw new Error(sprintf(me().notWhileLogin,"logout"));return $e(function(){if(n){var a=gt.pop();r.set_token(undefined,!0),r.login.apply(r,a)}else if(de.size()===1&&r.token())r.logout(!0);else for(;de.size()>1;)r.token()?r.logout(!0).pop().pop():r.pop()}),r},token:function(n){return Fe.get(r.prefix_name(n)+"_token")},set_token:function(n,o){var a=r.prefix_name(o)+"_token";return typeof n>"u"?Fe.remove(a):Fe.set(a,n),r},get_token:function(n){return r.token(n)},login_name:function(n){return Fe.get(r.prefix_name(n)+"_login")},name:function(){return de.top().name},prefix_name:function(n,o){var a=(d.name?d.name+"_":"")+nt;if(n&&de.size()>1){var l=de.map(function(c){return c.name||""}).slice(1,o).join("_");l&&(a+="_"+l)}return a},read:function(n,o,a){var l;if(typeof arguments[1]=="object"?l=$.extend({typing:!1,delay:d.execAnimationDelay,success:$.noop,cancel:$.noop},arguments[1]):l={typing:!1,success:o||$.noop,cancel:a||$.noop},l.signal||(l.signal=r.signal()),l.typing){var c=r.get_prompt();return l.typing=!1,r.typing("prompt",l.delay,n).then(function(){return r.set_prompt(c).read(n,l)})}Je=!0;var x=jQuery.Deferred();if(l.signal.aborted)return x.reject(),x.promise();r.push(function(S){x.resolve(S),is_function(l.success)&&l.success(S),T()},{name:"read",history:!1,prompt:n||"",onStart:function(){l.signal.addEventListener("abort",O)},keymap:{"CTRL+D":function(){return r.abort(),!1}}});function k(S){x.reject(S),is_function(l.cancel)&&l.cancel()}function T(){r.pop(),d.history&&K.history().enable()}function O(){T(),k(l.signal.reason)}return d.history&&K.history().disable(),is_function(l.onReady)&&l.onReady.call(r),x.promise()},push:function(n,o){return we(function(){o=o||{};var l={infiniteLogin:!1},c=$.extend({},l,o);!c.name&&tt&&(c.name=tt.name),c.prompt===undefined&&(c.prompt=(c.name||">")+" ");var x=de.top();x&&(x.mask=K.mask());var k=Se;function T(){ce("onPush",[x,de.top()]),He()}A(n,o.login,function(O){if(de.push($.extend({},O,c)),c.completion===!0&&(Array.isArray(O.completion)?de.top().completion=O.completion:O.completion||(de.top().completion=!1)),c.login){var S,H=get_type(c.login);H==="function"?(S=c.infiniteLogin?$.noop:r.pop,r.login(c.login,c.infiniteLogin,T,S)):(get_type(n)==="string"&&H==="string"||H==="boolean")&&(S=c.infiniteLogin?$.noop:r.pop,r.login(E(n,c.login),c.infiniteLogin,T,S))}else T();!k&&r.enabled()&&r.resume()})}),r},pop:function(n,o){n!==undefined&&ee(n);var a=r.token(!0),l;if(de.size()===1)l=de.top(),d.login?(o||ce("onPop",[l,null]),Ft(),ce("onExit")):r.error(me().canExitError);else{a&&Lt();var c=de.pop();if(l=de.top(),He(),r.set_mask(l.mask),o||ce("onPop",[c,l]),Ae&&r.get_prompt()!==me().login+": "&&(Ae=!1),is_function(c.onExit))try{c.onExit.call(r,r)}catch(x){c.onExit=$.noop,C(x,"onExit")}}return r},option:function(n,o){if(typeof o>"u"){if(typeof n=="string")return d[n];typeof n=="object"&&$.each(n,function(a,l){d[a]=l})}else d[n]=o,n.match(/^num(Chars|Rows)$/)&&pe();return r},invoke_key:function(n){return K.invoke_key(n),r},keymap:function(n,o){if(arguments.length===0)return K.keymap();if(typeof o>"u"){if(typeof n=="string")return K.keymap(n);$.isPlainObject(n)&&(n=$.extend({},ge,$.omap(n||{},function(l,c){return ge[l]?function(x,k){return c.call(r,x,function(){return ge[l](x,k)})}:c.bind(r)})),K.keymap(null).keymap(n))}else if(typeof o=="function"){var a=n;ge[a]?K.keymap(a,function(l,c){return o.call(r,l,function(){return ge[a](l,c)})}):K.keymap(a,o.bind(r))}},level:function(){return de.size()},reset:function(){return $e(function(){for(r.clear();de.size()>1;)de.pop();He(),G(),ot()}),r},purge:function(){return $e(function(){var o=r.prefix_name()+"_",a=Fe.get(o+"interpreters");a&&$.each(JSON.parse(a),function(l,c){Fe.remove(c+"_commands"),Fe.remove(c+"_token"),Fe.remove(c+"_login")}),K.purge(),Fe.remove(o+"interpreters")}),r},destroy:function(){return $e(function(){K.destroy().remove(),r.resizer("unbind"),r.touch_scroll("unbind"),Ht.resizer("unbind").remove(),Ct.resizer("unbind").remove(),$(document).unbind(".terminal_"+r.id()),$(window).unbind(".terminal_"+r.id()),r.unbind("click mousedown mouseup"),r.removeData("terminal").removeClass("terminal").unbind(".terminal"),d.width&&r.css("width",""),d.height&&r.css("height",""),$(window).off("blur",oe).off("focus",q),r.find(".terminal-fill, .terminal-font, .terminal-font-forcer").remove(),r.stopTime(),terminals.remove(nt),Le&&(Le.unobserve?Le.unobserve(r[0]):clearInterval(Le));var o=r.find(".terminal-scroll-marker");if(xt&&xt.unobserve(o[0]),o.remove(),pt&&pt.disconnect(),terminals.length()||$(window).off("hashchange"),is_mobile&&r.off(["touchstart.terminal","touchmove.terminal","touchend.terminal"].join(" ")),qe.remove(),ve.remove(),st){var a=$(st);a.attr("class")==="full-screen-terminal"?a.removeAttr("class"):a.removeClass("full-screen-terminal"),r.remove()}Ne=!0}),r},scroll_to:function(n){var o=ve.scrollTop()-r.offset().top+$(n).offset().top;return ve.scrollTop(o),r},scroll_to_bottom:function(){var n;return r.prop?n=ve.prop("scrollHeight"):n=ve.attr("scrollHeight"),ve.scrollTop(n),r},is_bottom:function(){if(d.scrollBottomOffset===-1)return!1;if(typeof yt=="boolean")return yt;var n,o,a;n=ve[0].scrollHeight,o=ve[0].scrollTop,a=ve[0].offsetHeight;var l=n-d.scrollBottomOffset;return o+a>l},duplicate:function(){var n=$(r);return $.extend(n,ft)},get_output_buffer:function(n){var o=$.extend({html:!1},n),a=[],l=!1;return Oe.forEach(function(c){if(c)if(is_function(c.finalize))l=!c.newline;else{var x;if(o.html?x=c.line:x=c.raw,l){var k=a.length-1;a[k]+=x}else a.push(x)}}),o.html?a.map(function(c){return"<div>"+c+"</div>"}).join(`
`):a.join(`
`)},clear_buffer:function(){return Oe.clear(),r}},function(n,o){return function(){if(Ne&&!d.exceptionHandler)throw new $.terminal.Exception(me().defunctTerminal);try{return o.apply(r,[].slice.apply(arguments))}catch(a){if(n!=="exec"&&n!=="resume"&&C(a,a.type||"TERMINAL",!0),!d.exceptionHandler)throw a}}});if($.extend(r,ft),r.length===0){var ir=sprintf(me().invalidSelector);throw new $.terminal.Exception(ir)}r.data("terminal",r);var et=[],ht=!1,tt,rt,vt=0,qe,nt=terminals.length(),Je=!1,Ue,ze,_t,gt=new Stack,zt=new DelayQueue,xe=!1,Nt=!1,St=new DelayQueue,$e=Bt(St),we=Bt(zt),yt,xt,Ae=!1,Rt=$.noop,it,lt,Ge,ct=[],d=$.extend({},$.terminal.defaults,{name:r.selector,exit:!!(e&&e.login||!e)},e||{});typeof d.width=="number"&&r.width(d.width),typeof d.height=="number"&&r.height(d.height),delete d.formatters;var Ne=!1,Oe=new FormatBuffer(function(n){return{linksNoReferrer:d.linksNoReferrer,linksNoFollow:d.linksNoFollow,anyLinks:d.anyLinks,charWidth:Re.width,useCache:d.useCache,escape:!1,allowedAttributes:n.allowedAttributes||[]}}),ye=new OutputLines(function(){return d}),Fe=new u(d.memory),Ce=d.enabled,Ke=!1,Se=!1,Mt=!0,de,K,Zt,Le,pt;d.ignoreSystemDescribe===!0&&(d.describe=!1),$(document).bind("ajaxSend.terminal_"+r.id(),function(n,o){requests.push(o)});var ve=$('<div class="terminal-scroller"/>').appendTo(r),Ie=$('<div class="terminal-wrapper"/>').appendTo(ve);$(broken_image).hide().appendTo(Ie);var Ht=$('<div class="terminal-font">&nbsp;</div>').appendTo(r),Ct=$('<div class="terminal-pixel"/>').appendTo(r),Ve=$('<div class="terminal-fill"/>').appendTo(ve);qe=$("<div>").addClass("terminal-output").attr("role","log").appendTo(Ie),r.addClass("terminal");var je=re(),Re=get_char_size(r),s=!terminal_ready(r);d.login&&ce("onBeforeLogin")===!1&&(Mt=!1);var v;if(typeof t=="string")v=t;else if(is_array(t)){for(var _=0,B=t.length;_<B;++_)if(typeof t[_]=="string"){v=t[_];break}}var U;is_function(d.login)?U=d.login:v&&(typeof d.login=="string"||d.login===!0)&&(U=E(v,d.login)),terminals.append(r);function q(){Zt&&(r.focus(),r.scroll_to_bottom())}function re(){var n=Ct[0].getBoundingClientRect();return n.width||1}function oe(){Zt=Ce,r.disable().find(".cmd textarea").trigger("blur",[!0])}function X(n){if(is_function(n)&&(n=n()),n&&is_function(n.then))return n.then(X);if(get_type(n)!=="string")if(is_function(d.parseObject)){var o=d.parseObject(n);get_type(o)==="string"&&(n=o)}else if(is_array(n))n=$.terminal.columns(n,r.cols(),d.tabs);else{var a=is_big_int(n);n=String(n),a&&(n+="n")}return n}function fe(n){if(n.proxy)return n;var o=function(a){return n.call(r,a,r)};return o.proxy=!0,o}function le(n){n=n.originalEvent;function o(S,H){return S.type.indexOf(H)!==-1}function a(S){r.echo('<img src="'+S+'"/>',{raw:!0})}function l(S){var H=window.URL||window.webkitURL;return H.createObjectURL(S)}function c(S,H){if(H)S instanceof Blob?a(l(S)):typeof S=="string"&&(S.match(/^(data:|blob:)/)?a(S):r.insert(S));else{var j={target:r};typeof S=="string"?j.text=S:S instanceof Blob&&(j.image=l(S));var J=ce("onPaste",[j]);if(J){if(is_function(J.then||J.done))return(J.then||J.done).call(J,function(se){c(se,!0)});c(J,!0)}else J!==!1&&c(j.image||j.text,!0)}}if(n.clipboardData&&r.enabled()){var x=n.clipboardData.items;if(x)for(var k=0;k<x.length;k++)if(o(x[k],"image")&&d.pasteImage){var T=x[k].getAsFile();c(T)}else o(x[k],"text/plain")&&x[k].getAsString(function(S){c(S.replace(/\r/g,""))});else if(n.clipboardData.getData){var O=n.clipboardData.getData("text/plain");c(O.replace(/\r/g,""))}return!1}}$(document).on("paste.terminal_"+r.id(),le);var ge=$.extend({},wt,$.omap(d.keymap||{},function(n,o){return wt[n]?function(a,l){return o.call(r,a,function(){return wt[n](a,l)})}:o.bind(r)}));return A(t,d.login,function(n){(d.completion&&typeof d.completion!="boolean"||!d.completion)&&(n.completion="settings");var o=d.prompt;is_function(o)&&(o=fe(o)),de=new Stack($.extend({},d.extra,{name:d.name,prompt:o,keypress:d.keypress,keydown:d.keydown,resize:d.onResize,greetings:d.greetings,mousewheel:d.mousewheel,history:d.history,keymap:ge},n)),K=$("<div/>").appendTo(Ie).cmd({tabindex:d.tabindex,mobileDelete:d.mobileDelete,mobileIngoreAutoSpace:d.mobileIngoreAutoSpace,prompt:U?!1:o,history:d.memory?"memory":d.history,historyFilter:d.historyFilter,historySize:d.historySize,caseSensitiveSearch:d.caseSensitiveSearch,onPaste:d.onPaste,width:"100%",enabled:!1,charWidth:Re.width,keydown:$t,keymap:ge,clickTimeout:d.clickTimeout,holdTimeout:d.holdTimeout,holdRepeatTimeout:d.holdRepeatTimeout,repeatTimeoutKeys:d.repeatTimeoutKeys,allowedAttributes:d.allowedAttributes,keypress:kt,tabs:d.tabs,onPositionChange:function(){var b=[].slice.call(arguments);Et(),ce("onPositionChange",b)},onCommandChange:function(b){it!==Ve.width()&&r.resizer(),ce("onCommandChange",[b]),Et()},commands:_e});function a(b){if(!is_mobile&&(b=b.originalEvent,b&&b.isTrusted)){var P=document.elementFromPoint(b.clientX,b.clientY);!$(P).closest(".terminal").length&&r.enabled()&&r.disable()}}r.oneTime(100,function(){$(document).bind("click.terminal_"+r.id(),a).bind("contextmenu.terminal_"+r.id(),a)});var l=$(window);if(document.addEventListener("resume",function(){r.disable()}),is_mobile)(function(){r.addClass("terminal-mobile");var b,P,W,Q=3,V=K.clip(),he=200,be;V.$node.off("touchstart.cmd"),r.on("touchstart.terminal",function(De){if(De=De.originalEvent,window.touch_event=De,De.target.tagName.toLowerCase()!=="a"&&!Ke&&De.touches.length===1){W=r.enabled();var Be=De.touches[0];b={x:Be.clientX,y:Be.clientY},be=setTimeout(function(){b=null},he)}}).on("touchmove.terminal",function(De){if(De.touches.length===1&&b){var Be=De.touches[0],Ye=Math.abs(Be.clientX-b.x),Ot=Math.abs(Be.clientY-b.y);(Ye>Q||Ot>Q)&&(P=!0)}}).on("touchend.terminal",function(){b&&(clearTimeout(be),P||(W?(V.blur(),r.disable()):(V.focus(),r.focus(),setTimeout(function(){r.scroll_to_bottom()},100)))),P=!1,b=null})})(),"visualViewport"in window&&on_height_change(function(b){css(document.documentElement,{"--terminal-force-height":b+"px"})});else{l.on("focus.terminal_"+r.id(),q).on("blur.terminal_"+r.id(),oe);var c;(function(){var b=0,P,W="click_"+r.id(),Q=r.find(".cmd textarea");function V(){if(P.is(".terminal")||P.is(".terminal-scroller")||P.is(".terminal-wrapper")){var De=r.get_command().length;r.set_position(De)}else P.closest(".cmd-prompt").length&&r.set_position(0);Q.is(":focus")||Q.focus(),he()}function he(){b=0,P=null}var be=".terminal-output textarea,.terminal-output input";r.mousedown(function(De){scrollbar_event(De,Ve,je)||(P=$(De.target))}).mouseup(function(){if(c){c=!1;return}if(P&&P.closest(be).length)Ce&&r.disable();else if(get_selected_html()===""&&P)if(++b===1){if(!Ke)if(!Ce)r.focus(),r.scroll_to_bottom();else{var De=d.clickTimeout;r.oneTime(De,W,V);return}}else r.stopTime(W);he()}).dblclick(function(){he(),r.stopTime(W)})})(),function(){var b=K.clip().$node;function P(Q){return Q.type==="mousedown"&&Q.buttons===2||Q.type==="contextmenu"}var W;"oncontextmenu"in window?W="contextmenu.terminal":W="mousedown.terminal",r.on(W,function(Q){if(c=get_selected_html()===""&&P(Q)&&!Q.ctrlKey,c){var V=$(Q.target);if(V.is("img,value,audio,object,canvas,a"))return;r.enabled()||r.enable();var he=K.offset(),be=K[0].getBoundingClientRect(),De=r.offset(),Be=De.top-he.top,Ye=Math.max(Q.pageY-he.top-20,Be),Ot=Q.pageX-he.left-20,Wt=4*14,qt=5*14,Ut=r[0].getBoundingClientRect(),ur=Ve.outerWidth()*je,bt=Ye+be.top+Wt;bt=bt-Ut.height-Ut.top;var er=Ot+be.left+qt;er=er-ur-Ut.left,bt>0&&(Wt-=Math.ceil(bt)),er>0&&(qt-=Math.ceil(er)),b.attr("style",[style_prop("left",Ot,!0),style_prop("top",Ye,!0),style_prop("width",qt,!0),style_prop("height",Wt,!0)].join(";")),b.is(":focus")||b.focus(),r.stopTime("textarea"),r.oneTime(100,"textarea",function(){var ar={left:"",top:"",width:"",height:""};if(!is_css_variables_supported){var _r=r.find(".cmd .cmd-cursor-line").prevUntil(".cmd-prompt").length;ar.top=_r*14+"px"}b.css(ar)}),r.stopTime("selection"),r.everyTime(20,"selection",function(){b[0].selection!==b[0].value&&get_textarea_selection(b[0])&&(clear_textarea_selection(b[0]),select(r.find(".terminal-output")[0],r.find(".cmd div:last-of-type")[0]),r.stopTime("selection"))})}})}(),r.on("scroll",function(){var b=r.find("textarea"),P=r[0].getBoundingClientRect(),W=r[0].scrollHeight,Q=ve.scrollTop(),V=W-(Q+P.height);V===0?b.css("top",""):b.css("top",-V)})}r.on("click","a",function(b){var P=$(this);if(P.closest(".terminal-exception").length){var W=P.attr("href");W.match(/:[0-9]+$/)&&(b.preventDefault(),L(W,r.cols()))}Ce&&r.find(".cmd textarea").focus()});function x(){var b=Re.width;Re=get_char_size(r),b!==Re.width&&K.option("charWidth",Re.width).refresh()}k();function k(){if(r.is(":visible")){var b=Ve.width(),P=Ve.height();je=re(),Ge!==je&&css(r[0],{"--pixel-density":je}),s&&(s=!terminal_ready(r),s||(Re=get_char_size(r),x())),(lt!==P||it!==b||je!==Ge)&&r.resize(),lt=P,it=b,Ge=je}}function T(){var b={prefix:"terminal-"};r.resizer("unbind").resizer(k,b),Ht.resizer("unbind").resizer(function(){x(),r.resize()},b),Ct.resizer("unbind").resizer(function(){je=re(),r.refresh()},b),$('<div class="terminal-font-forcer terminal-hidden">x<div>').appendTo(r)}function O(b){yt=b[0].intersectionRatio>=.9}function S(){if(window.IntersectionObserver){var b=$('<div class="terminal-scroll-marker"/>').appendTo(ve),P=b;if(d.scrollBottomOffset!==-1){var W=style_prop("height",d.scrollBottomOffset);P=$('<div style="'+W+'"/>').appendTo(b)}xt=new IntersectionObserver(O,{root:ve[0],rootMargin:"0px",threshold:1}),xt.observe(P[0])}}S(),r.is(":visible")&&T();function H(){Le&&(Le.unobserve?Le.unobserve(r[0]):clearInterval(Le));var b=r.enabled(),P=r.is(":visible");b&&!P&&r.disable(),P?T():Ie.css("visibility","hidden");function W(){r.is(":visible")&&!P?(P=!0,T(),x(),k(),b&&r.enable(),Ie.css("visibility","")):P&&!r.is(":visible")&&(P=!1,b=$.terminal.active()===r&&r.enabled(),r.disable(),Ie.css("visibility","hidden"))}window.IntersectionObserver&&r.css("position")!=="fixed"?(Le=new IntersectionObserver(W,{root:null}),Le.observe(r[0])):Le=setInterval(W,100)}var j=!!r.closest("body").length,J=window.MutationObserver||window.WebKitMutationObserver;J&&(pt=new J(function(){r.closest("body").length?(j||(r.scroll_to_bottom(),H(),k()),j=!0):j&&(j=!1)}),pt.observe(document.body,{childList:!0})),j&&H(),document.fonts&&document.fonts.ready?document.fonts.ready.then(function(){have_custom_font(r)&&(x(),r.resize()),zt.resolve()}):zt.resolve(),Ce&&r.is(":visible")&&!is_mobile?r.focus(undefined,!0):r.disable(),is_function(U)?(r.login(U,!0,ut),St.resolve(),ot()):(ut(),ot());function se(b,P){var W=terminals.get()[b[0]],Q=$.Deferred();if(W&&nt===W.id())return b[2]?Se?(Te.push(function(){return W.exec(b[2],P).done(function(){W.save_state(b[2],!0,b[1]),Q.resolve()})}),Q.promise()):W.exec(b[2],P).done(function(){W.save_state(b[2],!0,b[1])}):(Q.resolve(),Q.promise())}d.execHash&&location.hash?setTimeout(function(){try{var b=location.hash.replace(/^#/,"");hash_commands=JSON.parse(decodeURIComponent(b)),b.match(/\[/)||We(hash_commands);var P=0,W={typing:d.execAnimation,history:d.execHistory,delay:d.execAnimationDelay};(function Q(){var V=hash_commands[P++];V?se(V,W).done(Q):change_hash=!0})()}catch{}}):change_hash=!0,function(){var b=!1;$(document).bind("keydown.terminal_"+r.id(),function(V){V.shiftKey&&(b=!0)}).bind("keyup.terminal_"+r.id(),function(V){(V.shiftKey||V.which===16)&&(b=!1)});function P(V,he){if(!b){var be=de.top(),De;if(is_function(be.mousewheel)?De=be.mousewheel(V,he,r):is_function(d.mousewheel)&&(De=d.mousewheel(V,he,r)),De===!0)return;if((Z()||De===!1)&&!V.ctrlKey&&(V.stopPropagation(),V.preventDefault()),De===!1)return!1;he>0?r.scroll(-40):r.scroll(40)}}if($.event.special.mousewheel)ve.on("mousewheel",P);else{var W,Q=document.createElement("div");"onwheel"in Q?W="wheel":document.onmousewheel!==undefined?W="mousewheel":W="DOMMouseScroll",Q=null,r.on(W,function(V){var he;W==="mousewheel"?he=-1/40*V.originalEvent.wheelDelta:he=V.originalEvent.deltaY||V.originalEvent.detail,P(V,-he)})}ve.touch_scroll(function(V){var he=V.current.clientY-V.previous.clientY,be,De=de.top();if(is_function(De.touchscroll)?be=De.touchscroll(V,he,r):is_function(d.touchscroll)&&(be=d.touchscroll(V,he,r)),css(r[0],{"--terminal-scroll":ve.prop("scrollTop")}),be!==!0)return!1})}()}),r}})});export default br();
