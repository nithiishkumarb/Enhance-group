import{e as R,j as L}from"./chunk-Z4H5XVQJ.js";var U=R((Xe,H)=>{L();var u=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},E=-1,C=1,m=0;u.Diff=function(e,t){return[e,t]};u.prototype.diff_main=function(e,t,n,r){typeof r>"u"&&(this.Diff_Timeout<=0?r=Number.MAX_VALUE:r=new Date().getTime()+this.Diff_Timeout*1e3);var s=r;if(e==null||t==null)throw new Error("Null input. (diff_main)");if(e==t)return e?[new u.Diff(m,e)]:[];typeof n>"u"&&(n=!0);var i=n,l=this.diff_commonPrefix(e,t),o=e.substring(0,l);e=e.substring(l),t=t.substring(l),l=this.diff_commonSuffix(e,t);var a=e.substring(e.length-l);e=e.substring(0,e.length-l),t=t.substring(0,t.length-l);var h=this.diff_compute_(e,t,i,s);return o&&h.unshift(new u.Diff(m,o)),a&&h.push(new u.Diff(m,a)),this.diff_cleanupMerge(h),h};u.prototype.diff_compute_=function(e,t,n,r){var s;if(!e)return[new u.Diff(C,t)];if(!t)return[new u.Diff(E,e)];var i=e.length>t.length?e:t,l=e.length>t.length?t:e,o=i.indexOf(l);if(o!=-1)return s=[new u.Diff(C,i.substring(0,o)),new u.Diff(m,l),new u.Diff(C,i.substring(o+l.length))],e.length>t.length&&(s[0][0]=s[2][0]=E),s;if(l.length==1)return[new u.Diff(E,e),new u.Diff(C,t)];var a=this.diff_halfMatch_(e,t);if(a){var h=a[0],g=a[1],f=a[2],c=a[3],v=a[4],p=this.diff_main(h,f,n,r),d=this.diff_main(g,c,n,r);return p.concat([new u.Diff(m,v)],d)}return n&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,r):this.diff_bisect_(e,t,r)};u.prototype.diff_lineMode_=function(e,t,n){var r=this.diff_linesToChars_(e,t);e=r.chars1,t=r.chars2;var s=r.lineArray,i=this.diff_main(e,t,!1,n);this.diff_charsToLines_(i,s),this.diff_cleanupSemantic(i),i.push(new u.Diff(m,""));for(var l=0,o=0,a=0,h="",g="";l<i.length;){switch(i[l][0]){case C:a++,g+=i[l][1];break;case E:o++,h+=i[l][1];break;case m:if(o>=1&&a>=1){i.splice(l-o-a,o+a),l=l-o-a;for(var f=this.diff_main(h,g,!1,n),c=f.length-1;c>=0;c--)i.splice(l,0,f[c]);l=l+f.length}a=0,o=0,h="",g="";break}l++}return i.pop(),i};u.prototype.diff_bisect_=function(e,t,n){for(var r=e.length,s=t.length,i=Math.ceil((r+s)/2),l=i,o=2*i,a=new Array(o),h=new Array(o),g=0;g<o;g++)a[g]=-1,h[g]=-1;a[l+1]=0,h[l+1]=0;for(var f=r-s,c=f%2!=0,v=0,p=0,d=0,D=0,_=0;_<i&&!(new Date().getTime()>n);_++){for(var b=-_+v;b<=_-p;b+=2){var S=l+b,w;b==-_||b!=_&&a[S-1]<a[S+1]?w=a[S+1]:w=a[S-1]+1;for(var y=w-b;w<r&&y<s&&e.charAt(w)==t.charAt(y);)w++,y++;if(a[S]=w,w>r)p+=2;else if(y>s)v+=2;else if(c){var T=l+f-b;if(T>=0&&T<o&&h[T]!=-1){var M=r-h[T];if(w>=M)return this.diff_bisectSplit_(e,t,w,y,n)}}}for(var A=-_+d;A<=_-D;A+=2){var T=l+A,M;A==-_||A!=_&&h[T-1]<h[T+1]?M=h[T+1]:M=h[T-1]+1;for(var F=M-A;M<r&&F<s&&e.charAt(r-M-1)==t.charAt(s-F-1);)M++,F++;if(h[T]=M,M>r)D+=2;else if(F>s)d+=2;else if(!c){var S=l+f-A;if(S>=0&&S<o&&a[S]!=-1){var w=a[S],y=l+w-S;if(M=r-M,w>=M)return this.diff_bisectSplit_(e,t,w,y,n)}}}}return[new u.Diff(E,e),new u.Diff(C,t)]};u.prototype.diff_bisectSplit_=function(e,t,n,r,s){var i=e.substring(0,n),l=t.substring(0,r),o=e.substring(n),a=t.substring(r),h=this.diff_main(i,l,!1,s),g=this.diff_main(o,a,!1,s);return h.concat(g)};u.prototype.diff_linesToChars_=function(e,t){var n=[],r={};n[0]="";function s(a){for(var h="",g=0,f=-1,c=n.length;f<a.length-1;){f=a.indexOf(`
`,g),f==-1&&(f=a.length-1);var v=a.substring(g,f+1);(r.hasOwnProperty?r.hasOwnProperty(v):r[v]!==void 0)?h+=String.fromCharCode(r[v]):(c==i&&(v=a.substring(g),f=a.length),h+=String.fromCharCode(c),r[v]=c,n[c++]=v),g=f+1}return h}var i=4e4,l=s(e);i=65535;var o=s(t);return{chars1:l,chars2:o,lineArray:n}};u.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var r=e[n][1],s=[],i=0;i<r.length;i++)s[i]=t[r.charCodeAt(i)];e[n][1]=s.join("")}};u.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),s=r,i=0;n<s;)e.substring(i,s)==t.substring(i,s)?(n=s,i=n):r=s,s=Math.floor((r-n)/2+n);return s};u.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),s=r,i=0;n<s;)e.substring(e.length-s,e.length-i)==t.substring(t.length-s,t.length-i)?(n=s,i=n):r=s,s=Math.floor((r-n)/2+n);return s};u.prototype.diff_commonOverlap_=function(e,t){var n=e.length,r=t.length;if(n==0||r==0)return 0;n>r?e=e.substring(n-r):n<r&&(t=t.substring(0,n));var s=Math.min(n,r);if(e==t)return s;for(var i=0,l=1;;){var o=e.substring(s-l),a=t.indexOf(o);if(a==-1)return i;l+=a,(a==0||e.substring(s-l)==t.substring(0,l))&&(i=l,l++)}};u.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||r.length*2<n.length)return null;var s=this;function i(p,d,D){for(var _=p.substring(D,D+Math.floor(p.length/4)),b=-1,S="",w,y,T,M;(b=d.indexOf(_,b+1))!=-1;){var A=s.diff_commonPrefix(p.substring(D),d.substring(b)),F=s.diff_commonSuffix(p.substring(0,D),d.substring(0,b));S.length<F+A&&(S=d.substring(b-F,b)+d.substring(b,b+A),w=p.substring(0,D-F),y=p.substring(D+A),T=d.substring(0,b-F),M=d.substring(b+A))}return S.length*2>=p.length?[w,y,T,M,S]:null}var l=i(n,r,Math.ceil(n.length/4)),o=i(n,r,Math.ceil(n.length/2)),a;if(!l&&!o)return null;o?l?a=l[4].length>o[4].length?l:o:a=o:a=l;var h,g,f,c;e.length>t.length?(h=a[0],g=a[1],f=a[2],c=a[3]):(f=a[0],c=a[1],h=a[2],g=a[3]);var v=a[4];return[h,g,f,c,v]};u.prototype.diff_cleanupSemantic=function(e){for(var t=!1,n=[],r=0,s=null,i=0,l=0,o=0,a=0,h=0;i<e.length;)e[i][0]==m?(n[r++]=i,l=a,o=h,a=0,h=0,s=e[i][1]):(e[i][0]==C?a+=e[i][1].length:h+=e[i][1].length,s&&s.length<=Math.max(l,o)&&s.length<=Math.max(a,h)&&(e.splice(n[r-1],0,new u.Diff(E,s)),e[n[r-1]+1][0]=C,r--,r--,i=r>0?n[r-1]:-1,l=0,o=0,a=0,h=0,s=null,t=!0)),i++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),i=1;i<e.length;){if(e[i-1][0]==E&&e[i][0]==C){var g=e[i-1][1],f=e[i][1],c=this.diff_commonOverlap_(g,f),v=this.diff_commonOverlap_(f,g);c>=v?(c>=g.length/2||c>=f.length/2)&&(e.splice(i,0,new u.Diff(m,f.substring(0,c))),e[i-1][1]=g.substring(0,g.length-c),e[i+1][1]=f.substring(c),i++):(v>=g.length/2||v>=f.length/2)&&(e.splice(i,0,new u.Diff(m,g.substring(0,v))),e[i-1][0]=C,e[i-1][1]=f.substring(0,f.length-v),e[i+1][0]=E,e[i+1][1]=g.substring(v),i++),i++}i++}};u.prototype.diff_cleanupSemanticLossless=function(e){function t(v,p){if(!v||!p)return 6;var d=v.charAt(v.length-1),D=p.charAt(0),_=d.match(u.nonAlphaNumericRegex_),b=D.match(u.nonAlphaNumericRegex_),S=_&&d.match(u.whitespaceRegex_),w=b&&D.match(u.whitespaceRegex_),y=S&&d.match(u.linebreakRegex_),T=w&&D.match(u.linebreakRegex_),M=y&&v.match(u.blanklineEndRegex_),A=T&&p.match(u.blanklineStartRegex_);return M||A?5:y||T?4:_&&!S&&w?3:S||w?2:_||b?1:0}for(var n=1;n<e.length-1;){if(e[n-1][0]==m&&e[n+1][0]==m){var r=e[n-1][1],s=e[n][1],i=e[n+1][1],l=this.diff_commonSuffix(r,s);if(l){var o=s.substring(s.length-l);r=r.substring(0,r.length-l),s=o+s.substring(0,s.length-l),i=o+i}for(var a=r,h=s,g=i,f=t(r,s)+t(s,i);s.charAt(0)===i.charAt(0);){r+=s.charAt(0),s=s.substring(1)+i.charAt(0),i=i.substring(1);var c=t(r,s)+t(s,i);c>=f&&(f=c,a=r,h=s,g=i)}e[n-1][1]!=a&&(a?e[n-1][1]=a:(e.splice(n-1,1),n--),e[n][1]=h,g?e[n+1][1]=g:(e.splice(n+1,1),n--))}n++}};u.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/;u.whitespaceRegex_=/\s/;u.linebreakRegex_=/[\r\n]/;u.blanklineEndRegex_=/\n\r?\n$/;u.blanklineStartRegex_=/^\r?\n\r?\n/;u.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,n=[],r=0,s=null,i=0,l=!1,o=!1,a=!1,h=!1;i<e.length;)e[i][0]==m?(e[i][1].length<this.Diff_EditCost&&(a||h)?(n[r++]=i,l=a,o=h,s=e[i][1]):(r=0,s=null),a=h=!1):(e[i][0]==E?h=!0:a=!0,s&&(l&&o&&a&&h||s.length<this.Diff_EditCost/2&&l+o+a+h==3)&&(e.splice(n[r-1],0,new u.Diff(E,s)),e[n[r-1]+1][0]=C,r--,s=null,l&&o?(a=h=!0,r=0):(r--,i=r>0?n[r-1]:-1,a=h=!1),t=!0)),i++;t&&this.diff_cleanupMerge(e)};u.prototype.diff_cleanupMerge=function(e){e.push(new u.Diff(m,""));for(var t=0,n=0,r=0,s="",i="",l;t<e.length;)switch(e[t][0]){case C:r++,i+=e[t][1],t++;break;case E:n++,s+=e[t][1],t++;break;case m:n+r>1?(n!==0&&r!==0&&(l=this.diff_commonPrefix(i,s),l!==0&&(t-n-r>0&&e[t-n-r-1][0]==m?e[t-n-r-1][1]+=i.substring(0,l):(e.splice(0,0,new u.Diff(m,i.substring(0,l))),t++),i=i.substring(l),s=s.substring(l)),l=this.diff_commonSuffix(i,s),l!==0&&(e[t][1]=i.substring(i.length-l)+e[t][1],i=i.substring(0,i.length-l),s=s.substring(0,s.length-l))),t-=n+r,e.splice(t,n+r),s.length&&(e.splice(t,0,new u.Diff(E,s)),t++),i.length&&(e.splice(t,0,new u.Diff(C,i)),t++),t++):t!==0&&e[t-1][0]==m?(e[t-1][1]+=e[t][1],e.splice(t,1)):t++,r=0,n=0,s="",i="";break}e[e.length-1][1]===""&&e.pop();var o=!1;for(t=1;t<e.length-1;)e[t-1][0]==m&&e[t+1][0]==m&&(e[t][1].substring(e[t][1].length-e[t-1][1].length)==e[t-1][1]?(e[t][1]=e[t-1][1]+e[t][1].substring(0,e[t][1].length-e[t-1][1].length),e[t+1][1]=e[t-1][1]+e[t+1][1],e.splice(t-1,1),o=!0):e[t][1].substring(0,e[t+1][1].length)==e[t+1][1]&&(e[t-1][1]+=e[t+1][1],e[t][1]=e[t][1].substring(e[t+1][1].length)+e[t+1][1],e.splice(t+1,1),o=!0)),t++;o&&this.diff_cleanupMerge(e)};u.prototype.diff_xIndex=function(e,t){var n=0,r=0,s=0,i=0,l;for(l=0;l<e.length&&(e[l][0]!==C&&(n+=e[l][1].length),e[l][0]!==E&&(r+=e[l][1].length),!(n>t));l++)s=n,i=r;return e.length!=l&&e[l][0]===E?i:i+(t-s)};u.prototype.diff_prettyHtml=function(e){for(var t=[],n=/&/g,r=/</g,s=/>/g,i=/\n/g,l=0;l<e.length;l++){var o=e[l][0],a=e[l][1],h=a.replace(n,"&amp;").replace(r,"&lt;").replace(s,"&gt;").replace(i,"&para;<br>");switch(o){case C:t[l]='<ins style="background:#e6ffe6;">'+h+"</ins>";break;case E:t[l]='<del style="background:#ffe6e6;">'+h+"</del>";break;case m:t[l]="<span>"+h+"</span>";break}}return t.join("")};u.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==C&&(t[n]=e[n][1]);return t.join("")};u.prototype.diff_text2=function(e){for(var t=[],n=0;n<e.length;n++)e[n][0]!==E&&(t[n]=e[n][1]);return t.join("")};u.prototype.diff_levenshtein=function(e){for(var t=0,n=0,r=0,s=0;s<e.length;s++){var i=e[s][0],l=e[s][1];switch(i){case C:n+=l.length;break;case E:r+=l.length;break;case m:t+=Math.max(n,r),n=0,r=0;break}}return t+=Math.max(n,r),t};u.prototype.diff_toDelta=function(e){for(var t=[],n=0;n<e.length;n++)switch(e[n][0]){case C:t[n]="+"+encodeURI(e[n][1]);break;case E:t[n]="-"+e[n][1].length;break;case m:t[n]="="+e[n][1].length;break}return t.join("	").replace(/%20/g," ")};u.prototype.diff_fromDelta=function(e,t){for(var n=[],r=0,s=0,i=t.split(/\t/g),l=0;l<i.length;l++){var o=i[l].substring(1);switch(i[l].charAt(0)){case"+":try{n[r++]=new u.Diff(C,decodeURI(o))}catch{throw new Error("Illegal escape in diff_fromDelta: "+o)}break;case"-":case"=":var a=parseInt(o,10);if(isNaN(a)||a<0)throw new Error("Invalid number in diff_fromDelta: "+o);var h=e.substring(s,s+=a);i[l].charAt(0)=="="?n[r++]=new u.Diff(m,h):n[r++]=new u.Diff(E,h);break;default:if(i[l])throw new Error("Invalid diff operation in diff_fromDelta: "+i[l])}}if(s!=e.length)throw new Error("Delta length ("+s+") does not equal source text length ("+e.length+").");return n};u.prototype.match_main=function(e,t,n){if(e==null||t==null||n==null)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1};u.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),s=this;function i(w,y){var T=w/t.length,M=Math.abs(n-y);return s.Match_Distance?T+M/s.Match_Distance:M?1:T}var l=this.Match_Threshold,o=e.indexOf(t,n);o!=-1&&(l=Math.min(i(0,o),l),o=e.lastIndexOf(t,n+t.length),o!=-1&&(l=Math.min(i(0,o),l)));var a=1<<t.length-1;o=-1;for(var h,g,f=t.length+e.length,c,v=0;v<t.length;v++){for(h=0,g=f;h<g;)i(v,n+g)<=l?h=g:f=g,g=Math.floor((f-h)/2+h);f=g;var p=Math.max(1,n-g+1),d=Math.min(n+g,e.length)+t.length,D=Array(d+2);D[d+1]=(1<<v)-1;for(var _=d;_>=p;_--){var b=r[e.charAt(_-1)];if(v===0?D[_]=(D[_+1]<<1|1)&b:D[_]=(D[_+1]<<1|1)&b|((c[_+1]|c[_])<<1|1)|c[_+1],D[_]&a){var S=i(v,_-1);if(S<=l)if(l=S,o=_-1,o>n)p=Math.max(1,2*n-o);else break}}if(i(v+1,n)>l)break;c=D}return o};u.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(var n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t};u.prototype.patch_addContext_=function(e,t){if(t.length!=0){if(e.start2===null)throw Error("patch not initialized");for(var n=t.substring(e.start2,e.start2+e.length1),r=0;t.indexOf(n)!=t.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,n=t.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var s=t.substring(e.start2-r,e.start2);s&&e.diffs.unshift(new u.Diff(m,s));var i=t.substring(e.start2+e.length1,e.start2+e.length1+r);i&&e.diffs.push(new u.Diff(m,i)),e.start1-=s.length,e.start2-=s.length,e.length1+=s.length+i.length,e.length2+=s.length+i.length}};u.prototype.patch_make=function(e,t,n){var r,s;if(typeof e=="string"&&typeof t=="string"&&typeof n>"u")r=e,s=this.diff_main(r,t,!0),s.length>2&&(this.diff_cleanupSemantic(s),this.diff_cleanupEfficiency(s));else if(e&&typeof e=="object"&&typeof t>"u"&&typeof n>"u")s=e,r=this.diff_text1(s);else if(typeof e=="string"&&t&&typeof t=="object"&&typeof n>"u")r=e,s=t;else if(typeof e=="string"&&typeof t=="string"&&n&&typeof n=="object")r=e,s=n;else throw new Error("Unknown call format to patch_make.");if(s.length===0)return[];for(var i=[],l=new u.patch_obj,o=0,a=0,h=0,g=r,f=r,c=0;c<s.length;c++){var v=s[c][0],p=s[c][1];switch(!o&&v!==m&&(l.start1=a,l.start2=h),v){case C:l.diffs[o++]=s[c],l.length2+=p.length,f=f.substring(0,h)+p+f.substring(h);break;case E:l.length1+=p.length,l.diffs[o++]=s[c],f=f.substring(0,h)+f.substring(h+p.length);break;case m:p.length<=2*this.Patch_Margin&&o&&s.length!=c+1?(l.diffs[o++]=s[c],l.length1+=p.length,l.length2+=p.length):p.length>=2*this.Patch_Margin&&o&&(this.patch_addContext_(l,g),i.push(l),l=new u.patch_obj,o=0,g=f,a=h);break}v!==C&&(a+=p.length),v!==E&&(h+=p.length)}return o&&(this.patch_addContext_(l,g),i.push(l)),i};u.prototype.patch_deepCopy=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],s=new u.patch_obj;s.diffs=[];for(var i=0;i<r.diffs.length;i++)s.diffs[i]=new u.Diff(r.diffs[i][0],r.diffs[i][1]);s.start1=r.start1,s.start2=r.start2,s.length1=r.length1,s.length2=r.length2,t[n]=s}return t};u.prototype.patch_apply=function(e,t){if(e.length==0)return[t,[]];e=this.patch_deepCopy(e);var n=this.patch_addPadding(e);t=n+t+n,this.patch_splitMax(e);for(var r=0,s=[],i=0;i<e.length;i++){var l=e[i].start2+r,o=this.diff_text1(e[i].diffs),a,h=-1;if(o.length>this.Match_MaxBits?(a=this.match_main(t,o.substring(0,this.Match_MaxBits),l),a!=-1&&(h=this.match_main(t,o.substring(o.length-this.Match_MaxBits),l+o.length-this.Match_MaxBits),(h==-1||a>=h)&&(a=-1))):a=this.match_main(t,o,l),a==-1)s[i]=!1,r-=e[i].length2-e[i].length1;else{s[i]=!0,r=a-l;var g;if(h==-1?g=t.substring(a,a+o.length):g=t.substring(a,h+this.Match_MaxBits),o==g)t=t.substring(0,a)+this.diff_text2(e[i].diffs)+t.substring(a+o.length);else{var f=this.diff_main(o,g,!1);if(o.length>this.Match_MaxBits&&this.diff_levenshtein(f)/o.length>this.Patch_DeleteThreshold)s[i]=!1;else{this.diff_cleanupSemanticLossless(f);for(var c=0,v,p=0;p<e[i].diffs.length;p++){var d=e[i].diffs[p];d[0]!==m&&(v=this.diff_xIndex(f,c)),d[0]===C?t=t.substring(0,a+v)+d[1]+t.substring(a+v):d[0]===E&&(t=t.substring(0,a+v)+t.substring(a+this.diff_xIndex(f,c+d[1].length))),d[0]!==E&&(c+=d[1].length)}}}}}return t=t.substring(n.length,t.length-n.length),[t,s]};u.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,n="",r=1;r<=t;r++)n+=String.fromCharCode(r);for(var r=0;r<e.length;r++)e[r].start1+=t,e[r].start2+=t;var s=e[0],i=s.diffs;if(i.length==0||i[0][0]!=m)i.unshift(new u.Diff(m,n)),s.start1-=t,s.start2-=t,s.length1+=t,s.length2+=t;else if(t>i[0][1].length){var l=t-i[0][1].length;i[0][1]=n.substring(i[0][1].length)+i[0][1],s.start1-=l,s.start2-=l,s.length1+=l,s.length2+=l}if(s=e[e.length-1],i=s.diffs,i.length==0||i[i.length-1][0]!=m)i.push(new u.Diff(m,n)),s.length1+=t,s.length2+=t;else if(t>i[i.length-1][1].length){var l=t-i[i.length-1][1].length;i[i.length-1][1]+=n.substring(0,l),s.length1+=l,s.length2+=l}return n};u.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,n=0;n<e.length;n++)if(!(e[n].length1<=t)){var r=e[n];e.splice(n--,1);for(var s=r.start1,i=r.start2,l="";r.diffs.length!==0;){var o=new u.patch_obj,a=!0;for(o.start1=s-l.length,o.start2=i-l.length,l!==""&&(o.length1=o.length2=l.length,o.diffs.push(new u.Diff(m,l)));r.diffs.length!==0&&o.length1<t-this.Patch_Margin;){var h=r.diffs[0][0],g=r.diffs[0][1];h===C?(o.length2+=g.length,i+=g.length,o.diffs.push(r.diffs.shift()),a=!1):h===E&&o.diffs.length==1&&o.diffs[0][0]==m&&g.length>2*t?(o.length1+=g.length,s+=g.length,a=!1,o.diffs.push(new u.Diff(h,g)),r.diffs.shift()):(g=g.substring(0,t-o.length1-this.Patch_Margin),o.length1+=g.length,s+=g.length,h===m?(o.length2+=g.length,i+=g.length):a=!1,o.diffs.push(new u.Diff(h,g)),g==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(g.length))}l=this.diff_text2(o.diffs),l=l.substring(l.length-this.Patch_Margin);var f=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);f!==""&&(o.length1+=f.length,o.length2+=f.length,o.diffs.length!==0&&o.diffs[o.diffs.length-1][0]===m?o.diffs[o.diffs.length-1][1]+=f:o.diffs.push(new u.Diff(m,f))),a||e.splice(++n,0,o)}}};u.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")};u.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var n=e.split(`
`),r=0,s=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<n.length;){var i=n[r].match(s);if(!i)throw new Error("Invalid patch string: "+n[r]);var l=new u.patch_obj;for(t.push(l),l.start1=parseInt(i[1],10),i[2]===""?(l.start1--,l.length1=1):i[2]=="0"?l.length1=0:(l.start1--,l.length1=parseInt(i[2],10)),l.start2=parseInt(i[3],10),i[4]===""?(l.start2--,l.length2=1):i[4]=="0"?l.length2=0:(l.start2--,l.length2=parseInt(i[4],10)),r++;r<n.length;){var o=n[r].charAt(0);try{var a=decodeURI(n[r].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+a)}if(o=="-")l.diffs.push(new u.Diff(E,a));else if(o=="+")l.diffs.push(new u.Diff(C,a));else if(o==" ")l.diffs.push(new u.Diff(m,a));else{if(o=="@")break;if(o!=="")throw new Error('Invalid patch mode "'+o+'" in: '+a)}r++}}return t};u.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0};u.patch_obj.prototype.toString=function(){var e,t;this.length1===0?e=this.start1+",0":this.length1==1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?t=this.start2+",0":this.length2==1?t=this.start2+1:t=this.start2+1+","+this.length2;for(var n=["@@ -"+e+" +"+t+` @@
`],r,s=0;s<this.diffs.length;s++){switch(this.diffs[s][0]){case C:r="+";break;case E:r="-";break;case m:r=" ";break}n[s+1]=r+encodeURI(this.diffs[s][1])+`
`}return n.join("").replace(/%20/g," ")};H.exports=u;H.exports.diff_match_patch=u;H.exports.DIFF_DELETE=E;H.exports.DIFF_INSERT=C;H.exports.DIFF_EQUAL=m});var z=R((et,q)=>{L();function N(e){return e&&typeof e=="object"&&!Array.isArray(e)&&e!==null}q.exports=function e(t,n){return N(t)&&N(n)&&Object.keys(n).forEach(r=>{N(n[r])?((!t[r]||!N(t[r]))&&(t[r]=n[r]),e(t[r],n[r])):Object.assign(t,{[r]:n[r]})}),t}});var Y=R((nt,W)=>{L();W.exports=function(t,n,r=!1){let s=null,i=!0;return(...l)=>{let o=r&&i,a=()=>{t.apply(this,l),s=null};o&&(i=!1,a()),s||(s=setTimeout(a,n))}}});var Q=R((it,j)=>{L();j.exports=function(t,n){let r;return(...s)=>{let i=this;clearTimeout(r),r=setTimeout(()=>t.apply(i,s),n)}}});var J=R((lt,Z)=>{L();Z.exports=function(t=""){return t.replace(/\r\n/g,`
`)}});var X=R((at,K)=>{L();K.exports=function(t,n,r,s){let i=r-t,l=t+i/2;return`M ${t} ${n} C ${l},${n} ${l},${s} ${r},${s}`}});var $=R((gt,x)=>{L();x.exports={DIFF_EQUAL:0,DIFF_DELETE:-1,DIFF_INSERT:1,EDITOR_RIGHT:"right",EDITOR_LEFT:"left",RTL:"rtl",LTR:"ltr",SVG_NS:"http://www.w3.org/2000/svg",DIFF_GRANULARITY_SPECIFIC:"specific",DIFF_GRANULARITY_BROAD:"broad"}});var ne=R((ft,te)=>{L();var ee=$();te.exports=function(t,n){let{mode:r}=t.options;return n===ee.EDITOR_LEFT&&t.options.left.mode!==null&&(r=t.options.left.mode),n===ee.EDITOR_RIGHT&&t.options.right.mode!==null&&(r=t.options.right.mode),r}});var se=R((vt,ie)=>{L();var re=$();ie.exports=function(t,n){let{theme:r}=t.options;return n===re.EDITOR_LEFT&&t.options.left.theme!==null&&(r=t.options.left.theme),n===re.EDITOR_RIGHT&&t.options.right.theme!==null&&(r=t.options.right.theme),r}});var oe=R((mt,le)=>{L();le.exports=function(t,n){return t.ace.getSession().doc.getLine(n)}});var he=R((dt,ae)=>{L();ae.exports=function(t){return document.getElementById(t.options.left.id).offsetHeight}});var ue=R((Lt,ge)=>{L();ge.exports=function(t){let n=document.createElement("div"),r={class:t.className,style:`top:${t.topOffset}px`,title:t.tooltip,"data-diff-index":t.diffIndex};for(let s in r)n.setAttribute(s,r[s]);return n.innerHTML=t.arrowContent,n}});var ce=R((Et,fe)=>{L();fe.exports=function(t,n){let r=Math.random().toString(36).substr(2,5),s=`js-${n}-${r}`,i=t.querySelector(`.${n}`);if(i)return i.id=i.id||s,i.id;let l=document.createElement("div");return t.appendChild(l),l.className=n,l.id=s,l.id}});var pe=R((Ct,ve)=>{L();function Pe(e,t,n,r){let s=e==="document"?document:document.querySelector(e);s.addEventListener(t,i=>{let l=s.querySelectorAll(n),{target:o}=i;for(let a=0,h=l.length;a<h;a+=1){let g=o,f=l[a];for(;g&&g!==s;)g===f&&r.call(f,i),g=g.parentNode}})}ve.exports={on:Pe}});var Ke=R((It,$e)=>{L();var Ge=U(),Ae=z(),me=Y(),Be=Q(),_e=J(),de=X(),be=ne(),Le=se(),ke=oe(),Ve=he(),we=ue(),B=ce(),Ee=pe(),I=$(),P;function Ue(e){if(e.Range)return e.Range;let t=e.acequire||e.require;return t?t("ace/range"):!1}function G(e={}){if(!(this instanceof G))return new G(e);let t=this,n=()=>window?window.ace:void 0;t.options=Ae({ace:n(),mode:null,theme:null,element:null,diffGranularity:I.DIFF_GRANULARITY_BROAD,lockScrolling:!1,showDiffs:!0,showConnectors:!0,maxDiffs:5e3,left:{id:null,content:null,mode:null,theme:null,editable:!0,copyLinkEnabled:!0},right:{id:null,content:null,mode:null,theme:null,editable:!0,copyLinkEnabled:!0},classes:{gutterID:"acediff__gutter",diff:"acediff__diffLine",connector:"acediff__connector",newCodeConnectorLink:"acediff__newCodeConnector",newCodeConnectorLinkContent:"&#8594;",deletedCodeConnectorLink:"acediff__deletedCodeConnector",deletedCodeConnectorLinkContent:"&#8592;",copyRightContainer:"acediff__copy--right",copyLeftContainer:"acediff__copy--left"},connectorYOffset:0},e);let{ace:r}=t.options;if(!r){let s="No ace editor found nor supplied - `options.ace` or `window.ace` is missing";return console.error(s),new Error(s)}if(P=Ue(r),!P){let s="Could not require Range module for Ace. Depends on your bundling strategy, but it usually comes with Ace itself. See https://ace.c9.io/api/range.html, open an issue on GitHub ace-diff/ace-diff";return console.error(s),new Error(s)}if(t.options.element===null){let s="You need to specify an element for Ace-diff - `options.element` is missing";return console.error(s),new Error(s)}if(t.options.element instanceof HTMLElement?t.el=t.options.element:t.el=document.body.querySelector(t.options.element),!t.el){let s=`Can't find the specified element ${t.options.element}`;return console.error(s),new Error(s)}t.options.left.id=B(t.el,"acediff__left"),t.options.classes.gutterID=B(t.el,"acediff__gutter"),t.options.right.id=B(t.el,"acediff__right"),t.el.innerHTML=`<div class="acediff__wrap">${t.el.innerHTML}</div>`,t.editors={left:{ace:r.edit(t.options.left.id),markers:[],lineLengths:[]},right:{ace:r.edit(t.options.right.id),markers:[],lineLengths:[]},editorHeight:null},t.editors.left.ace.getSession().setMode(be(t,I.EDITOR_LEFT)),t.editors.right.ace.getSession().setMode(be(t,I.EDITOR_RIGHT)),t.editors.left.ace.setReadOnly(!t.options.left.editable),t.editors.right.ace.setReadOnly(!t.options.right.editable),t.editors.left.ace.setTheme(Le(t,I.EDITOR_LEFT)),t.editors.right.ace.setTheme(Le(t,I.EDITOR_RIGHT)),t.editors.left.ace.setValue(_e(t.options.left.content),-1),t.editors.right.ace.setValue(_e(t.options.right.content),-1),t.editors.editorHeight=Ve(t),setTimeout(()=>{t.lineHeight=t.editors.left.ace.renderer.lineHeight,qe(t),je(t),He(t),t.diff()},1)}G.prototype={setOptions(e){Ae(this.options,e),this.diff()},getNumDiffs(){return this.diffs.length},getEditors(){return{left:this.editors.left.ace,right:this.editors.right.ace}},diff(){let e=new Ge,t=this.editors.left.ace.getSession().getValue(),n=this.editors.right.ace.getSession().getValue(),r=e.diff_main(n,t);e.diff_cleanupSemantic(r),this.editors.left.lineLengths=Ce(this.editors.left),this.editors.right.lineLengths=Ce(this.editors.right);let s=[],i={left:0,right:0};r.forEach((l,o,a)=>{let h=l[0],g=l[1];a[o+1]&&g.endsWith(`
`)&&a[o+1][1].startsWith(`
`)&&(g+=`
`,r[o][1]=g,r[o+1][1]=r[o+1][1].replace(/^\n/,"")),g.length!==0&&(h===I.DIFF_EQUAL?(i.left+=g.length,i.right+=g.length):h===I.DIFF_DELETE?(s.push(Me(this,I.DIFF_DELETE,i.left,i.right,g)),i.right+=g.length):h===I.DIFF_INSERT&&(s.push(Me(this,I.DIFF_INSERT,i.left,i.right,g)),i.left+=g.length))},this),this.diffs=Je(this,s),!(this.diffs.length>this.options.maxDiffs)&&(Oe(this),Ne(this))},destroy(){let e=this.editors.left.ace.getValue();this.editors.left.ace.destroy();let t=this.editors.left.ace.container,n=t.cloneNode(!1);n.textContent=e,t.parentNode.replaceChild(n,t);let r=this.editors.right.ace.getValue();this.editors.right.ace.destroy(),t=this.editors.right.ace.container,n=t.cloneNode(!1),n.textContent=r,t.parentNode.replaceChild(n,t),document.getElementById(this.options.classes.gutterID).innerHTML="",Fe()}};var Fe=()=>{};function qe(e){e.editors.left.ace.getSession().on("changeScrollTop",me(()=>{Ie(e)},16)),e.editors.right.ace.getSession().on("changeScrollTop",me(()=>{Ie(e)},16));let t=e.diff.bind(e);e.editors.left.ace.on("change",t),e.editors.right.ace.on("change",t),e.options.left.copyLinkEnabled&&Ee.on(`#${e.options.classes.gutterID}`,"click",`.${e.options.classes.newCodeConnectorLink}`,r=>{De(e,r,I.LTR)}),e.options.right.copyLinkEnabled&&Ee.on(`#${e.options.classes.gutterID}`,"click",`.${e.options.classes.deletedCodeConnectorLink}`,r=>{De(e,r,I.RTL)});let n=Be(()=>{e.editors.availableHeight=document.getElementById(e.options.left.id).offsetHeight,e.diff()},250);window.addEventListener("resize",n),Fe=()=>{window.removeEventListener("resize",n)}}function De(e,t,n){let r=parseInt(t.target.getAttribute("data-diff-index"),10),s=e.diffs[r],i,l,o,a,h,g;n===I.LTR?(i=e.editors.left,l=e.editors.right,o=s.leftStartLine,a=s.leftEndLine,h=s.rightStartLine,g=s.rightEndLine):(i=e.editors.right,l=e.editors.left,o=s.rightStartLine,a=s.rightEndLine,h=s.leftStartLine,g=s.leftEndLine);let f="";for(let v=o;v<a;v+=1)f+=`${ke(i,v)}
`;let c=l.ace.getSession().getScrollTop();l.ace.getSession().replace(new P(h,0,g,0),f),l.ace.getSession().setScrollTop(parseInt(c,10)),e.diff()}function Ce(e){let t=e.ace.getSession().doc.getAllLines(),n=[];return t.forEach(r=>{n.push(r.length+1)}),n}function Se(e,t,n,r,s){let i=e.editors[t];r<n&&(r=n);let l=`${s} ${r>n?"lines":"targetOnly"}`;i.markers.push(i.ace.session.addMarker(new P(n,0,r-1,1),l,"fullLine"))}function Ie(e){Oe(e),Ne(e),Ye(e)}function Oe(e){e.editors.left.markers.forEach(t=>{e.editors.left.ace.getSession().removeMarker(t)},e),e.editors.right.markers.forEach(t=>{e.editors.right.ace.getSession().removeMarker(t)},e)}function ze(e,t,n,r,s){let i=e.editors.left.ace.getSession().getScrollTop(),l=e.editors.right.ace.getSession().getScrollTop();e.connectorYOffset=1;let o=-1,a=t*e.lineHeight-i+.5,h=e.gutterWidth+1,g=r*e.lineHeight-l+.5,f=-1,c=n*e.lineHeight-i+e.connectorYOffset+.5,v=e.gutterWidth+1,p=s*e.lineHeight-l+e.connectorYOffset+.5,d=de(o,a,h,g),D=de(v,p,f,c),_=`L${h},${g} ${v},${p}`,b=`L${f},${c} ${o},${a}`,S=`${d} ${_} ${D} ${b}`,w=document.createElementNS(I.SVG_NS,"path");w.setAttribute("d",S),w.setAttribute("class",e.options.classes.connector),e.gutterSVG.appendChild(w)}function We(e,t,n){if(t.leftEndLine>t.leftStartLine&&e.options.left.copyLinkEnabled){let r=we({className:e.options.classes.newCodeConnectorLink,topOffset:t.leftStartLine*e.lineHeight,tooltip:"Copy to right",diffIndex:n,arrowContent:e.options.classes.newCodeConnectorLinkContent});e.copyRightContainer.appendChild(r)}if(t.rightEndLine>t.rightStartLine&&e.options.right.copyLinkEnabled){let r=we({className:e.options.classes.deletedCodeConnectorLink,topOffset:t.rightStartLine*e.lineHeight,tooltip:"Copy to left",diffIndex:n,arrowContent:e.options.classes.deletedCodeConnectorLinkContent});e.copyLeftContainer.appendChild(r)}}function Ye(e){let t=e.editors.left.ace.getSession().getScrollTop(),n=e.editors.right.ace.getSession().getScrollTop();e.copyRightContainer.style.cssText=`top: ${-t}px`,e.copyLeftContainer.style.cssText=`top: ${-n}px`}function Me(e,t,n,r,s){let i={},l=/^\n/.test(s);if(t===I.DIFF_INSERT){var o=Te(e.editors.left,n,s),a=ye(e.editors.right,r),h=O(e.editors.right,a);let v=O(e.editors.left,o.startLine);var g=O(e.editors.left,o.startLine);let p=a;g===0&&l&&(l=!1),o.startChar===0&&V(e.editors.right,r,l)&&(p=a+1);var f=o.startLine===o.endLine,c=0;(o.startChar>0||f&&s.length<v)&&h>0&&o.startChar<v&&c++,i={leftStartLine:o.startLine,leftEndLine:o.endLine+1,rightStartLine:p,rightEndLine:p+c}}else{var o=Te(e.editors.right,r,s),a=ye(e.editors.left,n),h=O(e.editors.left,a);let D=O(e.editors.right,o.startLine);var g=O(e.editors.right,o.startLine);let b=a;g===0&&l&&(l=!1),o.startChar===0&&V(e.editors.left,n,l)&&(b=a+1);var f=o.startLine===o.endLine,c=0;(o.startChar>0||f&&s.length<D)&&h>0&&o.startChar<D&&c++,i={leftStartLine:b,leftEndLine:b+c,rightStartLine:o.startLine,rightEndLine:o.endLine+1}}return i}function Te(e,t,n){let r={startLine:0,startChar:0,endLine:0,endChar:0},s=t+n.length,i=0,l=!1,o=!1;e.lineLengths.forEach((h,g)=>{i+=h,!l&&t<i&&(r.startLine=g,r.startChar=t-i+h,l=!0),!o&&s<=i&&(r.endLine=g,r.endChar=s-i+h,o=!0)}),r.startChar>0&&O(e,r.startLine)===r.startChar&&(r.startLine++,r.startChar=0),r.endChar===0&&r.endLine--;let a=/\n$/.test(n);return r.startChar>0&&a&&r.endLine++,r}function O(e,t){return ke(e,t).length}function ye(e,t){let n=e.ace.getSession().doc.getAllLines(),r=0,s=0;for(let i=0;i<n.length;i+=1)if(s+=n[i].length+1,t<=s){r=i;break}return r}function V(e,t,n){let r=e.ace.getSession().doc.getAllLines(),s=0;for(let i=0;i<r.length;i+=1){s+=r[i].length+1;let l=s;if(n&&(l-=1),t===l)break}return V}function He(e){e.gutterHeight=document.getElementById(e.options.classes.gutterID).clientHeight,e.gutterWidth=document.getElementById(e.options.classes.gutterID).clientWidth;let t=Re(e,I.EDITOR_LEFT),n=Re(e,I.EDITOR_RIGHT),r=Math.max(t,n,e.gutterHeight);e.gutterSVG=document.createElementNS(I.SVG_NS,"svg"),e.gutterSVG.setAttribute("width",e.gutterWidth),e.gutterSVG.setAttribute("height",r),document.getElementById(e.options.classes.gutterID).appendChild(e.gutterSVG)}function Re(e,t){return(t===I.EDITOR_LEFT?e.editors.left:e.editors.right).ace.getSession().getLength()*e.lineHeight}function je(e){e.copyRightContainer=document.createElement("div"),e.copyRightContainer.setAttribute("class",e.options.classes.copyRightContainer),e.copyLeftContainer=document.createElement("div"),e.copyLeftContainer.setAttribute("class",e.options.classes.copyLeftContainer),document.getElementById(e.options.classes.gutterID).appendChild(e.copyRightContainer),document.getElementById(e.options.classes.gutterID).appendChild(e.copyLeftContainer)}function Qe(e){document.getElementById(e.options.classes.gutterID).removeChild(e.gutterSVG),He(e)}function Ze(e){e.copyLeftContainer.innerHTML="",e.copyRightContainer.innerHTML=""}function Je(e,t){let n=[];function r(i){return e.options.diffGranularity===I.DIFF_GRANULARITY_SPECIFIC?i<1:i<=1}t.forEach((i,l)=>{if(l===0){n.push(i);return}let o=!1;for(let a=0;a<n.length;a+=1)if(r(Math.abs(i.leftStartLine-n[a].leftEndLine))&&r(Math.abs(i.rightStartLine-n[a].rightEndLine))){n[a].leftStartLine=Math.min(i.leftStartLine,n[a].leftStartLine),n[a].rightStartLine=Math.min(i.rightStartLine,n[a].rightStartLine),n[a].leftEndLine=Math.max(i.leftEndLine,n[a].leftEndLine),n[a].rightEndLine=Math.max(i.rightEndLine,n[a].rightEndLine),o=!0;break}o||n.push(i)});let s=[];return n.forEach(i=>{i.leftStartLine===i.leftEndLine&&i.rightStartLine===i.rightEndLine||s.push(i)}),s}function Ne(e){Qe(e),Ze(e),e.diffs.forEach((t,n)=>{e.options.showDiffs&&(Se(e,I.EDITOR_LEFT,t.leftStartLine,t.leftEndLine,e.options.classes.diff),Se(e,I.EDITOR_RIGHT,t.rightStartLine,t.rightEndLine,e.options.classes.diff),e.options.showConnectors&&ze(e,t.leftStartLine,t.leftEndLine,t.rightStartLine,t.rightEndLine),We(e,t,n))},e)}$e.exports=G});export default Ke();
