import{Ba as v,Bb as H,Ga as A,Ya as W,mb as Z,ya as P}from"./chunk-2KNKNWMU.js";import{C as T,d as N,va as F,w as k}from"./chunk-YRZDTKHG.js";import{a,j as y}from"./chunk-Z4H5XVQJ.js";y();var d=function(e){return e.roadmap="roadmap",e.satellite="satellite",e.hybrid="hybrid",e.terrain="terrain",e}(d||{}),pe=new Map([[d.roadmap,"widgets.maps.google-map-type-roadmap"],[d.satellite,"widgets.maps.google-map-type-satelite"],[d.hybrid,"widgets.maps.google-map-type-hybrid"],[d.terrain,"widgets.maps.google-map-type-terrain"]]),Y={gmApiKey:"AIzaSyDoEx2kaGz3PxwbI9T7ccTSg5xjdw8Nw8Q",gmDefaultMapType:d.roadmap},s=function(e){return e.openStreetMapnik="OpenStreetMap.Mapnik",e.openStreetHot="OpenStreetMap.HOT",e.esriWorldStreetMap="Esri.WorldStreetMap",e.esriWorldTopoMap="Esri.WorldTopoMap",e.esriWorldImagery="Esri.WorldImagery",e.cartoDbPositron="CartoDB.Positron",e.cartoDbDarkMatter="CartoDB.DarkMatter",e}(s||{}),ue=new Map([[s.openStreetMapnik,"widgets.maps.openstreet-provider-mapnik"],[s.openStreetHot,"widgets.maps.openstreet-provider-hot"],[s.esriWorldStreetMap,"widgets.maps.openstreet-provider-esri-street"],[s.esriWorldTopoMap,"widgets.maps.openstreet-provider-esri-topo"],[s.esriWorldImagery,"widgets.maps.openstreet-provider-esri-imagery"],[s.cartoDbPositron,"widgets.maps.openstreet-provider-cartodb-positron"],[s.cartoDbDarkMatter,"widgets.maps.openstreet-provider-cartodb-dark-matter"]]),V={mapProvider:s.openStreetMapnik,useCustomProvider:!1,customProviderTileUrl:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},g=function(e){return e.hereNormalDay="HERE.normalDay",e.hereNormalNight="HERE.normalNight",e.hereHybridDay="HERE.hybridDay",e.hereTerrainDay="HERE.terrainDay",e}(g||{}),de=new Map([[g.hereNormalDay,"widgets.maps.here-map-normal-day"],[g.hereNormalNight,"widgets.maps.here-map-normal-night"],[g.hereHybridDay,"widgets.maps.here-map-hybrid-day"],[g.hereTerrainDay,"widgets.maps.here-map-terrain-day"]]),U={mapProviderHere:g.hereNormalDay,credentials:{useV3:!0,app_id:"AhM6TzD9ThyK78CT3ptx",app_code:"p6NPiITB3Vv0GMUFnkLOOg",apiKey:"kVXykxAfZ6LS4EbCTO02soFVfjA7HoBzNVVH9u7nzoE"}},X={mapImageUrl:"data:image/svg+xml;base64,PHN2ZyBpZD0ic3ZnMiIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTAwIiB3aWR0aD0iMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogPGcgaWQ9ImxheWVyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtOTUyLjM2KSI+CiAgPHJlY3QgaWQ9InJlY3Q0Njg0IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBoZWlnaHQ9Ijk5LjAxIiB3aWR0aD0iOTkuMDEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB5PSI5NTIuODYiIHg9Ii40OTUwNSIgc3Ryb2tlLXdpZHRoPSIuOTkwMTAiIGZpbGw9IiNlZWUiLz4KICA8dGV4dCBpZD0idGV4dDQ2ODYiIHN0eWxlPSJ3b3JkLXNwYWNpbmc6MHB4O2xldHRlci1zcGFjaW5nOjBweDt0ZXh0LWFuY2hvcjptaWRkbGU7dGV4dC1hbGlnbjpjZW50ZXIiIGZvbnQtd2VpZ2h0PSJib2xkIiB4bWw6c3BhY2U9InByZXNlcnZlIiBmb250LXNpemU9IjEwcHgiIGxpbmUtaGVpZ2h0PSIxMjUlIiB5PSI5NzAuNzI4MDkiIHg9IjQ5LjM5NjQ3NyIgZm9udC1mYW1pbHk9IlJvYm90byIgZmlsbD0iIzY2NjY2NiI+PHRzcGFuIGlkPSJ0c3BhbjQ2OTAiIHg9IjUwLjY0NjQ3NyIgeT0iOTcwLjcyODA5Ij5JbWFnZSBiYWNrZ3JvdW5kIDwvdHNwYW4+PHRzcGFuIGlkPSJ0c3BhbjQ2OTIiIHg9IjQ5LjM5NjQ3NyIgeT0iOTgzLjIyODA5Ij5pcyBub3QgY29uZmlndXJlZDwvdHNwYW4+PC90ZXh0PgogIDxyZWN0IGlkPSJyZWN0NDY5NCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgaGVpZ2h0PSIxOS4zNiIgd2lkdGg9IjY5LjM2IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgeT0iOTkyLjY4IiB4PSIxNS4zMiIgc3Ryb2tlLXdpZHRoPSIuNjM5ODYiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+Cg==",imageEntityAlias:"",imageUrlAttribute:""},f=function(e){return e.roadmap="roadmap",e.satellite="satellite",e.hybrid="hybrid",e}(f||{}),ge=new Map([[f.roadmap,"widgets.maps.tencent-map-type-roadmap"],[f.satellite,"widgets.maps.tencent-map-type-satelite"],[f.hybrid,"widgets.maps.tencent-map-type-hybrid"]]),Q={tmApiKey:"84d6d83e0e51e481e50454ccbe8986b",tmDefaultMapType:f.roadmap},p=function(e){return e.google="google-map",e.openstreet="openstreet-map",e.here="here",e.image="image-map",e.tencent="tencent-map",e}(p||{}),me=new Map([[p.google,"widgets.maps.map-provider-google"],[p.openstreet,"widgets.maps.map-provider-openstreet"],[p.here,"widgets.maps.map-provider-here"],[p.image,"widgets.maps.map-provider-image"],[p.tencent,"widgets.maps.map-provider-tencent"]]),O=a(a(a(a(a({provider:p.openstreet},Y),V),U),X),Q),_={latKeyName:"latitude",lngKeyName:"longitude",xPosKeyName:"xPos",yPosKeyName:"yPos",defaultZoomLevel:null,defaultCenterPosition:"0,0",disableScrollZooming:!1,disableDoubleClickZooming:!1,disableZoomControl:!1,fitMapBounds:!0,useDefaultCenterPosition:!1,mapPageSize:16384},K={normalizationStep:1e3,latKeyName:"latitude",lngKeyName:"longitude",showTooltip:!0,tooltipColor:"#fff",tooltipFontColor:"#000",tooltipOpacity:1,useTooltipFunction:!1,tooltipPattern:"<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}",tooltipFunction:null,autocloseTooltip:!0},m=function(e){return e.click="click",e.hover="hover",e}(m||{}),fe=new Map([[m.click,"widgets.maps.show-tooltip-action-click"],[m.hover,"widgets.maps.show-tooltip-action-hover"]]),q={markerOffsetX:.5,markerOffsetY:1,posFunction:"return {x: origXPos, y: origYPos};",draggableMarker:!1,showLabel:!0,useLabelFunction:!1,label:"${entityName}",labelFunction:null,showTooltip:!0,showTooltipAction:m.click,autocloseTooltip:!0,useTooltipFunction:!1,tooltipPattern:"<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}",tooltipFunction:null,tooltipOffsetX:0,tooltipOffsetY:-1,color:"#FE7569",useColorFunction:!1,colorFunction:null,useMarkerImageFunction:!1,markerImage:null,markerImageSize:34,markerImageFunction:null,markerImages:[]},ee={rotationAngle:0,showLabel:!0,useLabelFunction:!1,label:"${entityName}",labelFunction:null,useMarkerImageFunction:!1,markerImage:null,markerImageSize:34,markerImageFunction:null,markerImages:[]},j={showPolygon:!1,polygonKeyName:"perimeter",editablePolygon:!1,showPolygonLabel:!1,usePolygonLabelFunction:!1,polygonLabel:"${entityName}",polygonLabelFunction:null,showPolygonTooltip:!1,showPolygonTooltipAction:m.click,autoClosePolygonTooltip:!0,usePolygonTooltipFunction:!1,polygonTooltipPattern:"<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",polygonTooltipFunction:null,polygonColor:"#3388ff",polygonOpacity:.2,usePolygonColorFunction:!1,polygonColorFunction:null,polygonStrokeColor:"#3388ff",polygonStrokeOpacity:1,polygonStrokeWeight:3,usePolygonStrokeColorFunction:!1,polygonStrokeColorFunction:null},z={showCircle:!1,circleKeyName:"perimeter",editableCircle:!1,showCircleLabel:!1,useCircleLabelFunction:!1,circleLabel:"${entityName}",circleLabelFunction:null,showCircleTooltip:!1,showCircleTooltipAction:m.click,autoCloseCircleTooltip:!0,useCircleTooltipFunction:!1,circleTooltipPattern:"<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",circleTooltipFunction:null,circleFillColor:"#3388ff",circleFillColorOpacity:.2,useCircleFillColorFunction:!1,circleFillColorFunction:null,circleStrokeColor:"#3388ff",circleStrokeOpacity:1,circleStrokeWeight:3,useCircleStrokeColorFunction:!1,circleStrokeColorFunction:null},h=function(e){return e.arrowHead="arrowHead",e.dash="dash",e}(h||{}),be=new Map([[h.arrowHead,"widgets.maps.decorator-symbol-arrow-head"],[h.dash,"widgets.maps.decorator-symbol-dash"]]),te={strokeWeight:2,strokeOpacity:1},oe={color:null,strokeWeight:2,strokeOpacity:1,useColorFunction:!1,colorFunction:null,usePolylineDecorator:!1,decoratorSymbol:h.arrowHead,decoratorSymbolSize:10,useDecoratorCustomColor:!1,decoratorCustomColor:"#000",decoratorOffset:"20px",endDecoratorOffset:"20px",decoratorRepeat:"20px"},re={showPoints:!1,pointColor:null,useColorPointFunction:!1,colorPointFunction:null,pointSize:10,usePointAsAnchor:!1,pointAsAnchorFunction:null,pointTooltipOnRightPanel:!0},ne={useClusterMarkers:!1,zoomOnClick:!0,maxZoom:null,maxClusterRadius:80,animate:!0,spiderfyOnMaxZoom:!1,showCoverageOnHover:!0,chunkedLoading:!1,removeOutsideVisibleBounds:!0,useIconCreateFunction:!1,clusterMarkerFunction:null},ae={snappable:!1,initDragMode:!1,hideAllControlButton:!1,hideDrawControlButton:!1,hideEditControlButton:!1,hideRemoveControlButton:!1},ye=a(a(a(a(a(a(a(a({},O),_),q),j),z),te),ne),ae),he=a(a(a(a(a(a(a({},O),K),ee),oe),re),j),z);y();function ke(e,t,o){return(o-e)/(t-e)}function Te(e,t,o,n,r){return{[o]:e[o]+(t[o]-e[o])*r,[n]:e[n]+(t[n]-e[n])*r}}function Pe(e,t,o,n){if(P(e)||P(t))return 0;let r=-Math.atan2(t[o]-e[o],t[n]-e[n]);return r=r*180/Math.PI,parseInt(r.toFixed(2),10)}function ve(e){if(typeof e=="string"){let t=e.split(",");if(t.length===2)return[Number(t[0]),Number(t[1])]}return typeof e=="object"?e:[0,0]}var E={},ie=e=>new N(t=>{let o=document.createElement("img");o.style.position="absolute",o.style.left="-99999px",o.style.top="-99999px",o.onload=()=>{t.next(o),document.body.removeChild(o),t.complete()},o.onerror=n=>{t.error(n),document.body.removeChild(o),t.complete()},document.body.appendChild(o),o.src=e}),le=e=>ie(e).pipe(T(t=>t.width/t.height)),Le=(e,t)=>{if(t?.length){let o=W(t),n=E[o];return n?k(n):e.transform(t,{asString:!0,ignoreLoadingImage:!0}).pipe(F(r=>{let i=r;return le(i).pipe(T(l=>(n={url:i,aspect:l},E[o]=n,n)))}))}else return k(null)},I=/<link-act name=['"]([^['"]*)['"]>([^<]*)<\/link-act>/g,x=/<button-act name=['"]([^['"]*)['"]>([^<]*)<\/button-act>/g;function B(e,t){return`<a href="javascript:void(0);" class="tb-custom-action" data-action-name="${e}">${t}</a>`}function R(e,t){return`<button mat-button class="tb-custom-action" data-action-name="${e}">${t}</button>`}function se(e,t,o){let n="";try{o&&(e=o(e)),e=Z(t.$datasource,e);let r=/\${([^}]*)}/g.exec(e);for(;r!==null;){let G=r[0],u=r[1],L=2,w=u.split(":");if(w.length>1&&(u=w[0],L=parseFloat(w[1])),u.startsWith("#")){let D=u.substring(1),S=Math.floor(Number(D));String(S)===D&&S>=0&&(u=t.$datasource.dataKeys[S].label)}let C=t[u]||"",M;A(C)?M=H(C,L):M=C,e=e.replace(G,M),r=/\${([^}]*)}/g.exec(e)}let i,l,c,b;for(r=I.exec(e);r!==null;)[i,c,l]=r,b=B(c,l),e=e.replace(i,b),r=I.exec(e);for(r=x.exec(e);r!==null;)[i,c,l]=r,b=R(c,l),e=e.replace(i,b),r=x.exec(e);n=e}catch(r){console.log(r,e)}return n}function ce(e,t){t&&(e=t(e));let o,n,r,i,l=I.exec(e);for(;l!==null;)[o,r,n]=l,i=B(r,n),e=e.replace(o,i),l=I.exec(e);for(l=x.exec(e);l!==null;)[o,r,n]=l,i=R(r,n),e=e.replace(o,i),l=x.exec(e);return e}var De={translateFn:null,translate(e,t){if(this.translateFn)return this.translateFn(e,t);throw console.error("Translate not assigned"),Error("Translate not assigned")},parseTemplate(e,t,o=!1){return se(o?this.translate(e):e,t,this.translate.bind(this))},prepareProcessPattern(e,t=!1){return ce(t?this.translate(e):e,this.translate.bind(this))},setTranslate(e){this.translateFn=e}};function Ne(e,t,o=[],n){let r;if(e&&v(t))try{r=t.execute(...o),(!v(r)||r==="")&&(r=n)}catch(i){r=n,console.log("error in external function:",i)}else r=n;return r}function Fe(e,t){let o=e/t;return o<0?o=0:o>1&&(o=1),o}function Ae(e){return $(`
    <div style="
          z-index: 12;
          position: absolute;
          top: 0;
          bottom: 0;
          left: 0;
          right: 0;
          flex-direction: column;
          align-content: center;
          align-items: center;
          justify-content: center;
          display: flex;
          background: rgba(255,255,255,0.7);
          font-size: 16px;
          font-family: Roboto;
          font-weight: 400;
          text-transform:  uppercase;
        ">
        <span>${e}</span>
    </div>
  `)}function We(e,t,o,n=0){let r=o.lng-n,i=t.lng+n,l=o.lat-n,c=t.lat+n;return e.lng>r?e.lng=r:e.lng<i&&(e.lng=i),e.lat>l?e.lat=l:e.lat<c&&(e.lat=c),e}export{d as a,pe as b,Y as c,s as d,ue as e,V as f,g,de as h,U as i,X as j,f as k,ge as l,Q as m,p as n,me as o,O as p,_ as q,K as r,m as s,fe as t,q as u,ee as v,j as w,z as x,h as y,be as z,oe as A,re as B,ne as C,ae as D,ye as E,he as F,ke as G,Te as H,Pe as I,ve as J,Le as K,De as L,Ne as M,Fe as N,Ae as O,We as P};
