import{a as ia,b as wn,c as na,d as ra,e as oa,f as aa,g as la,h as ma,i as pa}from"./chunk-573O3SQ7.js";import{Fa as ht,Na as Et,f as ea,ha as hn,w as ta}from"./chunk-DKZ3CIFV.js";import"./chunk-UKY6W7HD.js";import"./chunk-TOCE5N7N.js";import"./chunk-YBTMWC55.js";import"./chunk-6OEMGNUI.js";import"./chunk-K5GEWY3U.js";import"./chunk-FTP7ICHS.js";import{$k as Qo,Aa as je,Ad as _i,Bm as Be,Ch as vn,Da as hi,Dj as Uo,Eh as wo,Fa as un,Fj as Ko,Ga as bi,Gh as $t,Gl as $o,Hj as Ho,Hl as Yo,Ia as cn,Ih as Go,Ja as xi,Jk as Xt,Ka as Ti,Kl as Wo,Ma as qo,Na as R,Oc as Cn,Pb as fn,Qb as gn,Qh as Ft,Rb as Oo,Sb as Lo,Sc as nt,Vj as vt,Wc as rt,Wh as mt,Xh as Yt,Yc as Ce,Yl as Xo,Zh as Wt,_k as zo,_l as Zo,al as Jo,cb as ko,db as Bo,de as A,g as ee,gd as Vt,he as J,ic as Ro,ie as Lt,je as yn,ka as sn,l as on,la as Vo,m as Ze,ma as dn,mb as ue,mj as jo,n as et,o as an,oj as Si,p as tt,pl as It,q as Do,tc as St,uc as Pn,ve as Po}from"./chunk-OROXDDCC.js";import{Q as lt}from"./chunk-6ASH6TVK.js";import"./chunk-JRGJBYKK.js";import{Dc as it,Ec as ve,Fa as Oi,Fc as D,Ga as Li,I as Ct,Jc as vi,Kc as pn,Lc as G,Mc as j,Nb as X,Rc as O,Sc as Q,Tc as de,Ub as Ge,Vc as ae,Yb as _e,Yc as k,ad as te,bd as Jt,cc as Z,fc as Se,gc as L,hc as He,jc as c,lc as yi,mc as F,nc as _,oc as ln,sa as Bi,sc as Ht,uc as ge,vc as zt,wc as S,xc as Qt,yc as mn,zc as M}from"./chunk-K2POHFPS.js";import"./chunk-JIUP6ZA4.js";import{A as E,J as So,K as Fo,M as Io,N as Eo,Y as We,a as fe,ab as Kt,bb as Mo,ca as xt,cb as No,db as rn,fa as Ut,jc as Xe,m as gi,ob as ki,pb as Ao,y as me,z as V}from"./chunk-7OOXQFUB.js";import{Ba as I,Da as Rn,Eb as Dt,Fa as Ci,Ha as _o,ab as nn,q as W}from"./chunk-2KNKNWMU.js";import{h as yt}from"./chunk-LKJAU4TK.js";import{Ac as n,Bc as g,C as Zi,Cc as Co,Dc as yo,E as lo,Ea as ce,Ec as qi,Fc as pe,Ga as Qe,Ic as Y,Jb as we,Kc as v,Lb as fo,Lc as vo,Ma as uo,Mc as ho,Nc as h,Pb as r,Pc as bo,Qb as y,Rc as De,Sc as Ve,Ta as T,Tc as qe,Ua as Je,Xc as $e,Yc as m,Zc as q,_c as f,bb as co,cb as ne,cc as N,db as re,dd as Te,gd as Ye,hd as xe,ib as di,ic as C,id as Fe,ie as z,jb as Le,jd as Gt,je as B,ke as en,lb as gt,ld as xo,le as tn,nc as p,nd as s,oc as go,od as d,oe as To,pc as Ke,pd as le,pe as jt,q as ft,qa as mo,r as ct,sd as Ot,ua as po,uc as Vi,ue as ke,w as Ln,wc as ui,xc as ci,ya as so,yc as fi,zc as o}from"./chunk-YRZDTKHG.js";import{a as Wi,b as Xi,j as b}from"./chunk-Z4H5XVQJ.js";b();b();b();var Gn=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.emptyConfigForm}onConfigurationSet(e){this.emptyConfigForm=this.fb.group({})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-node-empty-config"]],features:[N],decls:1,vars:0,template:function(a,l){a&1&&g(0,"div")},encapsulation:2});let t=i;return t})();b();b();b();var $a=()=>({maxWidth:"820px"});function Ya(t,i){if(t&1&&(g(0,"div",3),s(1,"translate")),t&2){let u=v();h("tb-help-popup",u.popupHelpLink),h("trigger-text",d(1,3,"rule-node-config.key-val.see-examples")),p("tb-help-popup-style",xe(5,$a))}}var he=(()=>{let i=class i{constructor(){this.textAlign="left"}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=T({type:i,selectors:[["tb-example-hint"]],inputs:{hintText:"hintText",popupHelpLink:"popupHelpLink",textAlign:"textAlign"},decls:5,vars:10,consts:[[1,"tb-form-hint","tb-primary-fill","flex","justify-between","gap-5",3,"hidden"],[1,"w-full",3,"innerHTML"],["class","flex shrink-0","hintMode","","tb-help-popup-placement","right","trigger-style","letter-spacing:0.25px; font-size:12px",3,"tb-help-popup","tb-help-popup-style","trigger-text",4,"ngIf"],["hintMode","","tb-help-popup-placement","right","trigger-style","letter-spacing:0.25px; font-size:12px",1,"flex","shrink-0",3,"tb-help-popup","tb-help-popup-style","trigger-text"]],template:function(a,l){a&1&&(o(0,"div",0),g(1,"div",1),s(2,"translate"),s(3,"safe"),C(4,Ya,2,6,"div",2),n()),a&2&&(p("hidden",!l.hintText),r(),go("text-align",l.textAlign),p("innerHTML",le(3,7,d(2,5,l.hintText),"html"),we),r(3),p("ngIf",l.popupHelpLink))},dependencies:[B,_i,lt,E],encapsulation:2});let t=i;return t})();var Wa=()=>({standalone:!0});function Xa(t,i){if(t&1&&(o(0,"mat-option",15),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.telemetryTypeTranslationsMap.get(u))," ")}}function Za(t,i){t&1&&(o(0,"div",12),s(1,"translate"),o(2,"mat-slide-toggle",16),m(3),s(4,"translate"),n()()),t&2&&(h("tb-hint-tooltip-icon",d(1,2,"rule-node-config.send-attributes-updated-notification-hint")),r(3),f(" ",d(4,4,"rule-node-config.send-attributes-updated-notification")," "))}function el(t,i){t&1&&(o(0,"div",12),s(1,"translate"),o(2,"mat-slide-toggle",17),m(3),s(4,"translate"),n()()),t&2&&(h("tb-hint-tooltip-icon",d(1,2,"rule-node-config.notify-device-on-update-hint")),r(3),f(" ",d(4,4,"rule-node-config.notify-device")," "))}var jn=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.attributeScopeMap=xt,this.attributeScopes=Object.keys(xt),this.telemetryTypeTranslationsMap=Ut}configForm(){return this.attributesConfigForm}onConfigurationSet(e){this.attributesConfigForm=this.fb.group({scope:[e?e.scope:null,[c.required]],notifyDevice:[e?e.notifyDevice:!0,[]],sendAttributesUpdatedNotification:[e?e.sendAttributesUpdatedNotification:!1,[]],updateAttributesOnlyOnValueChange:[e?e.updateAttributesOnlyOnValueChange:!1,[]]}),this.attributesConfigForm.get("scope").valueChanges.pipe(fe(this.destroyRef)).subscribe(a=>{a!==xt.SHARED_SCOPE&&this.attributesConfigForm.get("notifyDevice").patchValue(!1,{emitEvent:!1}),a===xt.CLIENT_SCOPE&&this.attributesConfigForm.get("sendAttributesUpdatedNotification").patchValue(!1,{emitEvent:!1}),this.attributesConfigForm.get("updateAttributesOnlyOnValueChange").patchValue(!1,{emitEvent:!1})})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-attributes-config"]],features:[N],decls:31,vars:24,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-panel","stroked"],[3,"hintText"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields"],[1,"flex"],["required","","matInput","","formControlName","scope",1,"tb-entity-type-select"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","readonly","","disabled","",3,"ngModel","ngModelOptions"],["type","button","matSuffix","","mat-icon-button","","aria-label","Copy","ngxClipboard","",3,"cbContent","matTooltip"],["aria-hidden","false","aria-label","help-icon"],[1,"tb-settings"],["translate",""],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","updateAttributesOnlyOnValueChange",1,"mat-slide"],["class","tb-form-row no-border no-padding",3,"tb-hint-tooltip-icon",4,"ngIf"],[3,"value"],["formControlName","sendAttributesUpdatedNotification",1,"mat-slide"],["formControlName","notifyDevice",1,"mat-slide"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),g(2,"tb-example-hint",2),o(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),m(6),s(7,"translate"),n(),o(8,"mat-select",5),C(9,Xa,3,4,"mat-option",6),n()(),o(10,"mat-form-field",4)(11,"mat-label"),m(12),s(13,"translate"),n(),g(14,"input",7),o(15,"button",8),s(16,"translate"),o(17,"mat-icon",9),m(18,"content_copy "),n()()()()(),o(19,"section",1)(20,"mat-expansion-panel",10)(21,"mat-expansion-panel-header")(22,"mat-panel-title",11),m(23,"rule-node-config.advanced-settings"),n()(),o(24,"div",12),s(25,"translate"),o(26,"mat-slide-toggle",13),m(27),s(28,"translate"),n()(),C(29,Za,5,6,"div",14)(30,el,5,6,"div",14),n()()()),a&2&&(p("formGroup",l.attributesConfigForm),r(2),p("hintText","rule-node-config.attributes-scope-hint"),r(4),q(d(7,13,"rule-node-config.attributes-scope")),r(3),p("ngForOf",l.attributeScopes),r(3),q(d(13,15,"rule-node-config.attributes-scope-value")),r(2),p("ngModel",l.attributesConfigForm.get("scope").value)("ngModelOptions",xe(23,Wa)),r(),h("matTooltip",d(16,17,"rule-node-config.attributes-scope-value-copy")),p("cbContent",l.attributesConfigForm.get("scope").value),r(9),h("tb-hint-tooltip-icon",d(25,19,l.attributesConfigForm.get("updateAttributesOnlyOnValueChange").value?"rule-node-config.update-attributes-only-on-value-change-hint-enabled":"rule-node-config.update-attributes-only-on-value-change-hint")),r(3),f(" ",d(28,21,"rule-node-config.update-attributes-only-on-value-change")," "),r(2),p("ngIf",l.attributesConfigForm.get("scope").value!==l.attributeScopeMap.CLIENT_SCOPE),r(),p("ngIf",l.attributesConfigForm.get("scope").value===l.attributeScopeMap.SHARED_SCOPE))},dependencies:[z,B,_e,Z,R,k,O,ae,te,X,ee,ue,Ze,et,tt,Vt,L,F,_,D,Ht,S,M,V,Ce,he,E],encapsulation:2});let t=i;return t})();b();b();var Ri=rn/Kt,Re=function(t){return t.ON_EVERY_MESSAGE="ON_EVERY_MESSAGE",t.DEDUPLICATE="DEDUPLICATE",t.WEBSOCKETS_ONLY="WEBSOCKETS_ONLY",t.ADVANCED="ADVANCED",t.SKIP="SKIP",t}(Re||{}),xn=new Map([[Re.ON_EVERY_MESSAGE,"rule-node-config.save-time-series.strategy-type.every-message"],[Re.DEDUPLICATE,"rule-node-config.save-time-series.strategy-type.deduplicate"],[Re.WEBSOCKETS_ONLY,"rule-node-config.save-time-series.strategy-type.web-sockets-only"],[Re.SKIP,"rule-node-config.save-time-series.strategy-type.skip"]]),Fi={type:Re.ON_EVERY_MESSAGE},Un={timeseries:Fi,latest:Fi,webSockets:Fi};b();b();var dt=function(t){return t.CUSTOMER="CUSTOMER",t.TENANT="TENANT",t.RELATED="RELATED",t.ALARM_ORIGINATOR="ALARM_ORIGINATOR",t.ENTITY="ENTITY",t}(dt||{}),da=new Map([[dt.CUSTOMER,"rule-node-config.originator-customer"],[dt.TENANT,"rule-node-config.originator-tenant"],[dt.RELATED,"rule-node-config.originator-related"],[dt.ALARM_ORIGINATOR,"rule-node-config.originator-alarm-originator"],[dt.ENTITY,"rule-node-config.originator-entity"]]),ua=new Map([[dt.CUSTOMER,"rule-node-config.originator-customer-desc"],[dt.TENANT,"rule-node-config.originator-tenant-desc"],[dt.RELATED,"rule-node-config.originator-related-entity-desc"],[dt.ALARM_ORIGINATOR,"rule-node-config.originator-alarm-originator-desc"],[dt.ENTITY,"rule-node-config.originator-entity-by-name-pattern-desc"]]),Mi=[We.createdTime,We.name,{value:"type",name:"rule-node-config.profile-name",keyName:"originatorProfileName"},We.firstName,We.lastName,We.email,We.title,We.country,We.state,We.city,We.address,We.address2,We.zip,We.phone,We.label,{value:"id",name:"rule-node-config.id",keyName:"id"},{value:"additionalInfo",name:"rule-node-config.additional-info",keyName:"additionalInfo"}],ca=new Map([["type","profileName"],["createdTime","createdTime"],["name","name"],["firstName","firstName"],["lastName","lastName"],["email","email"],["title","title"],["country","country"],["state","state"],["city","city"],["address","address"],["address2","address2"],["zip","zip"],["phone","phone"],["label","label"],["id","id"],["additionalInfo","additionalInfo"]]),Tt=function(t){return t.CIRCLE="CIRCLE",t.POLYGON="POLYGON",t}(Tt||{}),Tn=new Map([[Tt.CIRCLE,"rule-node-config.perimeter-circle"],[Tt.POLYGON,"rule-node-config.perimeter-polygon"]]),Oe=function(t){return t.MILLISECONDS="MILLISECONDS",t.SECONDS="SECONDS",t.MINUTES="MINUTES",t.HOURS="HOURS",t.DAYS="DAYS",t}(Oe||{}),Ni=new Map([[Oe.MILLISECONDS,"rule-node-config.time-unit-milliseconds"],[Oe.SECONDS,"rule-node-config.time-unit-seconds"],[Oe.MINUTES,"rule-node-config.time-unit-minutes"],[Oe.HOURS,"rule-node-config.time-unit-hours"],[Oe.DAYS,"rule-node-config.time-unit-days"]]),qt=function(t){return t.METER="METER",t.KILOMETER="KILOMETER",t.FOOT="FOOT",t.MILE="MILE",t.NAUTICAL_MILE="NAUTICAL_MILE",t}(qt||{}),_n=new Map([[qt.METER,"rule-node-config.range-unit-meter"],[qt.KILOMETER,"rule-node-config.range-unit-kilometer"],[qt.FOOT,"rule-node-config.range-unit-foot"],[qt.MILE,"rule-node-config.range-unit-mile"],[qt.NAUTICAL_MILE,"rule-node-config.range-unit-nautical-mile"]]),st=function(t){return t.ID="ID",t.TITLE="TITLE",t.COUNTRY="COUNTRY",t.STATE="STATE",t.CITY="CITY",t.ZIP="ZIP",t.ADDRESS="ADDRESS",t.ADDRESS2="ADDRESS2",t.PHONE="PHONE",t.EMAIL="EMAIL",t.ADDITIONAL_INFO="ADDITIONAL_INFO",t}(st||{}),fa=new Map([[st.ID,"rule-node-config.entity-details-id"],[st.TITLE,"rule-node-config.entity-details-title"],[st.COUNTRY,"rule-node-config.entity-details-country"],[st.STATE,"rule-node-config.entity-details-state"],[st.CITY,"rule-node-config.entity-details-city"],[st.ZIP,"rule-node-config.entity-details-zip"],[st.ADDRESS,"rule-node-config.entity-details-address"],[st.ADDRESS2,"rule-node-config.entity-details-address2"],[st.PHONE,"rule-node-config.entity-details-phone"],[st.EMAIL,"rule-node-config.entity-details-email"],[st.ADDITIONAL_INFO,"rule-node-config.entity-details-additional_info"]]),bt=function(t){return t.FIRST="FIRST",t.LAST="LAST",t.ALL="ALL",t}(bt||{}),Pi=new Map([[bt.FIRST,"rule-node-config.first"],[bt.LAST,"rule-node-config.last"],[bt.ALL,"rule-node-config.all"]]),ga=new Map([[bt.FIRST,"rule-node-config.first-mode-hint"],[bt.LAST,"rule-node-config.last-mode-hint"],[bt.ALL,"rule-node-config.all-mode-hint"]]),Ii=function(t){return t.ASC="ASC",t.DESC="DESC",t}(Ii||{}),Ae=function(t){return t.ATTRIBUTES="ATTRIBUTES",t.LATEST_TELEMETRY="LATEST_TELEMETRY",t.FIELDS="FIELDS",t}(Ae||{}),Pt=new Map([[Ae.ATTRIBUTES,"rule-node-config.attributes"],[Ae.LATEST_TELEMETRY,"rule-node-config.latest-telemetry"],[Ae.FIELDS,"rule-node-config.fields"]]),Ca=new Map([[Ae.ATTRIBUTES,"rule-node-config.add-mapped-attribute-to"],[Ae.LATEST_TELEMETRY,"rule-node-config.add-mapped-latest-telemetry-to"],[Ae.FIELDS,"rule-node-config.add-mapped-fields-to"]]),ya=new Map([[Ii.ASC,"rule-node-config.ascending"],[Ii.DESC,"rule-node-config.descending"]]),Ei=function(t){return t.STANDARD="STANDARD",t.FIFO="FIFO",t}(Ei||{}),va=new Map([[Ei.STANDARD,"rule-node-config.sqs-queue-standard"],[Ei.FIFO,"rule-node-config.sqs-queue-fifo"]]),ha=["anonymous","basic","cert.PEM"],ba=new Map([["anonymous","rule-node-config.credentials-anonymous"],["basic","rule-node-config.credentials-basic"],["cert.PEM","rule-node-config.credentials-pem"]]),xa=["sas","cert.PEM"],Ta=new Map([["sas","rule-node-config.credentials-sas"],["cert.PEM","rule-node-config.credentials-pem"]]),Hn=function(t){return t.GET="GET",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE",t}(Hn||{}),_a=["US-ASCII","ISO-8859-1","UTF-8","UTF-16BE","UTF-16LE","UTF-16"],Sa=new Map([["US-ASCII","rule-node-config.charset-us-ascii"],["ISO-8859-1","rule-node-config.charset-iso-8859-1"],["UTF-8","rule-node-config.charset-utf-8"],["UTF-16BE","rule-node-config.charset-utf-16be"],["UTF-16LE","rule-node-config.charset-utf-16le"],["UTF-16","rule-node-config.charset-utf-16"]]),H=function(t){return t.CUSTOM="CUSTOM",t.ADD="ADD",t.SUB="SUB",t.MULT="MULT",t.DIV="DIV",t.SIN="SIN",t.SINH="SINH",t.COS="COS",t.COSH="COSH",t.TAN="TAN",t.TANH="TANH",t.ACOS="ACOS",t.ASIN="ASIN",t.ATAN="ATAN",t.ATAN2="ATAN2",t.EXP="EXP",t.EXPM1="EXPM1",t.SQRT="SQRT",t.CBRT="CBRT",t.GET_EXP="GET_EXP",t.HYPOT="HYPOT",t.LOG="LOG",t.LOG10="LOG10",t.LOG1P="LOG1P",t.CEIL="CEIL",t.FLOOR="FLOOR",t.FLOOR_DIV="FLOOR_DIV",t.FLOOR_MOD="FLOOR_MOD",t.ABS="ABS",t.MIN="MIN",t.MAX="MAX",t.POW="POW",t.SIGNUM="SIGNUM",t.RAD="RAD",t.DEG="DEG",t}(H||{}),wi=new Map([[H.CUSTOM,{value:H.CUSTOM,name:"Custom Function",description:"Use this function to specify complex mathematical expression.",minArgs:1,maxArgs:16}],[H.ADD,{value:H.ADD,name:"Addition",description:"x + y",minArgs:2,maxArgs:2}],[H.SUB,{value:H.SUB,name:"Subtraction",description:"x - y",minArgs:2,maxArgs:2}],[H.MULT,{value:H.MULT,name:"Multiplication",description:"x * y",minArgs:2,maxArgs:2}],[H.DIV,{value:H.DIV,name:"Division",description:"x / y",minArgs:2,maxArgs:2}],[H.SIN,{value:H.SIN,name:"Sine",description:"Returns the trigonometric sine of an angle in radians.",minArgs:1,maxArgs:1}],[H.SINH,{value:H.SINH,name:"Hyperbolic sine",description:"Returns the hyperbolic sine of an argument.",minArgs:1,maxArgs:1}],[H.COS,{value:H.COS,name:"Cosine",description:"Returns the trigonometric cosine of an angle in radians.",minArgs:1,maxArgs:1}],[H.COSH,{value:H.COSH,name:"Hyperbolic cosine",description:"Returns the hyperbolic cosine of an argument.",minArgs:1,maxArgs:1}],[H.TAN,{value:H.TAN,name:"Tangent",description:"Returns the trigonometric tangent of an angle in radians",minArgs:1,maxArgs:1}],[H.TANH,{value:H.TANH,name:"Hyperbolic tangent",description:"Returns the hyperbolic tangent of an argument",minArgs:1,maxArgs:1}],[H.ACOS,{value:H.ACOS,name:"Arc cosine",description:"Returns the arc cosine of an argument",minArgs:1,maxArgs:1}],[H.ASIN,{value:H.ASIN,name:"Arc sine",description:"Returns the arc sine of an argument",minArgs:1,maxArgs:1}],[H.ATAN,{value:H.ATAN,name:"Arc tangent",description:"Returns the arc tangent of an argument",minArgs:1,maxArgs:1}],[H.ATAN2,{value:H.ATAN2,name:"2-argument arc tangent",description:"Returns the angle theta from the conversion of rectangular coordinates (x, y) to polar coordinates (r, theta)",minArgs:2,maxArgs:2}],[H.EXP,{value:H.EXP,name:"Exponential",description:"Returns Euler's number e raised to the power of an argument",minArgs:1,maxArgs:1}],[H.EXPM1,{value:H.EXPM1,name:"Exponential minus one",description:"Returns Euler's number e raised to the power of an argument minus one",minArgs:1,maxArgs:1}],[H.SQRT,{value:H.SQRT,name:"Square",description:"Returns the correctly rounded positive square root of an argument",minArgs:1,maxArgs:1}],[H.CBRT,{value:H.CBRT,name:"Cube root",description:"Returns the cube root of an argument",minArgs:1,maxArgs:1}],[H.GET_EXP,{value:H.GET_EXP,name:"Get exponent",description:"Returns the unbiased exponent used in the representation of an argument",minArgs:1,maxArgs:1}],[H.HYPOT,{value:H.HYPOT,name:"Square root",description:"Returns the square root of the squares of the arguments",minArgs:2,maxArgs:2}],[H.LOG,{value:H.LOG,name:"Logarithm",description:"Returns the natural logarithm of an argument",minArgs:1,maxArgs:1}],[H.LOG10,{value:H.LOG10,name:"Base 10 logarithm",description:"Returns the base 10 logarithm of an argument",minArgs:1,maxArgs:1}],[H.LOG1P,{value:H.LOG1P,name:"Logarithm of the sum",description:"Returns the natural logarithm of the sum of an argument",minArgs:1,maxArgs:1}],[H.CEIL,{value:H.CEIL,name:"Ceiling",description:"Returns the smallest (closest to negative infinity) of an argument",minArgs:1,maxArgs:1}],[H.FLOOR,{value:H.FLOOR,name:"Floor",description:"Returns the largest (closest to positive infinity) of an argument",minArgs:1,maxArgs:1}],[H.FLOOR_DIV,{value:H.FLOOR_DIV,name:"Floor division",description:"Returns the largest (closest to positive infinity) of the arguments",minArgs:2,maxArgs:2}],[H.FLOOR_MOD,{value:H.FLOOR_MOD,name:"Floor modulus",description:"Returns the floor modulus of the arguments",minArgs:2,maxArgs:2}],[H.ABS,{value:H.ABS,name:"Absolute",description:"Returns the absolute value of an argument",minArgs:1,maxArgs:1}],[H.MIN,{value:H.MIN,name:"Min",description:"Returns the smaller of the arguments",minArgs:2,maxArgs:2}],[H.MAX,{value:H.MAX,name:"Max",description:"Returns the greater of the arguments",minArgs:2,maxArgs:2}],[H.POW,{value:H.POW,name:"Raise to a power",description:"Returns the value of the first argument raised to the power of the second argument",minArgs:2,maxArgs:2}],[H.SIGNUM,{value:H.SIGNUM,name:"Sign of a real number",description:"Returns the signum function of the argument",minArgs:1,maxArgs:1}],[H.RAD,{value:H.RAD,name:"Radian",description:"Converts an angle measured in degrees to an approximately equivalent angle measured in radians",minArgs:1,maxArgs:1}],[H.DEG,{value:H.DEG,name:"Degrees",description:"Converts an angle measured in radians to an approximately equivalent angle measured in degrees.",minArgs:1,maxArgs:1}]]),Nt=function(t){return t.MESSAGE_BODY="MESSAGE_BODY",t.MESSAGE_METADATA="MESSAGE_METADATA",t.ATTRIBUTE="ATTRIBUTE",t.TIME_SERIES="TIME_SERIES",t.CONSTANT="CONSTANT",t}(Nt||{}),Rt=function(t){return t.MESSAGE_BODY="MESSAGE_BODY",t.MESSAGE_METADATA="MESSAGE_METADATA",t.ATTRIBUTE="ATTRIBUTE",t.TIME_SERIES="TIME_SERIES",t}(Rt||{}),ye=function(t){return t.DATA="DATA",t.METADATA="METADATA",t}(ye||{}),Fa=new Map([[ye.DATA,"rule-node-config.message-to-metadata"],[ye.METADATA,"rule-node-config.metadata-to-message"]]),jf=new Map([[ye.DATA,"rule-node-config.from-message"],[ye.METADATA,"rule-node-config.from-metadata"]]),Sn=new Map([[ye.DATA,"rule-node-config.message"],[ye.METADATA,"rule-node-config.metadata"]]),Ia=new Map([[ye.DATA,"rule-node-config.message"],[ye.METADATA,"rule-node-config.message-metadata"]]),Ea=new Map([[Nt.MESSAGE_BODY,{name:"rule-node-config.message-body-type",description:"rule-node-config.message-body-type-description"}],[Nt.MESSAGE_METADATA,{name:"rule-node-config.message-metadata-type",description:"rule-node-config.message-metadata-type-description"}],[Nt.ATTRIBUTE,{name:"rule-node-config.attribute-type",description:"rule-node-config.attribute-type-description"}],[Nt.TIME_SERIES,{name:"rule-node-config.time-series-type",description:"rule-node-config.time-series-type-description"}],[Nt.CONSTANT,{name:"rule-node-config.constant-type",description:"rule-node-config.constant-type-description"}]]),Ma=new Map([[Rt.MESSAGE_BODY,{name:"rule-node-config.message-body-type",description:"rule-node-config.message-body-type-result-description"}],[Rt.MESSAGE_METADATA,{name:"rule-node-config.message-metadata-type",description:"rule-node-config.message-metadata-result-description"}],[Rt.ATTRIBUTE,{name:"rule-node-config.attribute-type",description:"rule-node-config.attribute-type-result-description"}],[Rt.TIME_SERIES,{name:"rule-node-config.time-series-type",description:"rule-node-config.time-series-type-result-description"}]]),zn=["x","y","z","a","b","c","d","k","l","m","n","o","p","r","s","t"],li=function(t){return t.SHARED_SCOPE="SHARED_SCOPE",t.SERVER_SCOPE="SERVER_SCOPE",t.CLIENT_SCOPE="CLIENT_SCOPE",t}(li||{}),Qn=function(t){return t.SHARED_SCOPE="SHARED_SCOPE",t.SERVER_SCOPE="SERVER_SCOPE",t}(Qn||{}),Fn=new Map([[li.SHARED_SCOPE,"rule-node-config.shared-scope"],[li.SERVER_SCOPE,"rule-node-config.server-scope"],[li.CLIENT_SCOPE,"rule-node-config.client-scope"]]),Kn=function(t){return t.ON_FIRST_MESSAGE="ON_FIRST_MESSAGE",t.ON_EACH_MESSAGE="ON_EACH_MESSAGE",t}(Kn||{}),Na=new Map([[Kn.ON_EACH_MESSAGE,{value:!0,name:"rule-node-config.presence-monitoring-strategy-on-each-message"}],[Kn.ON_FIRST_MESSAGE,{value:!1,name:"rule-node-config.presence-monitoring-strategy-on-first-message"}]]),Gi=2147483648;var tl=[[["","matSuffix",""]]],il=["[matSuffix]"];function nl(t,i){if(t&1&&(o(0,"mat-label"),m(1),n()),t&2){let u=v();r(),q(u.labelText)}}function rl(t,i){t&1&&g(0,"mat-hint")}function ol(t,i){if(t&1&&(o(0,"mat-error"),m(1),n()),t&2){let u=v();r(),f(" ",u.requiredText," ")}}function al(t,i){if(t&1&&(o(0,"mat-error"),m(1),n()),t&2){let u=v();r(),f(" ",u.minErrorText," ")}}function ll(t,i){if(t&1&&(o(0,"mat-error"),m(1),n()),t&2){let u=v();r(),f(" ",u.maxErrorText," ")}}function ml(t,i){if(t&1&&(o(0,"mat-option",8),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),q(d(2,2,e.timeUnitTranslations.get(u)))}}var ei=class ei{constructor(i,u){this.fb=i,this.destroyRef=u,this.minTime=0,this.subscriptSizing="fixed",this.timeUnits=Object.values(Oe).filter(e=>e!==Oe.MILLISECONDS),this.timeUnitTranslations=Ni,this.timeInputForm=this.fb.group({time:[0],timeUnit:[Oe.SECONDS]}),this.timeIntervalsInSec=new Map([[Oe.DAYS,rn/Kt],[Oe.HOURS,No/Kt],[Oe.MINUTES,Mo/Kt],[Oe.SECONDS,Kt/Kt]]),this.propagateChange=()=>{}}ngOnInit(){if(this.required||this.maxTime){let i=this.timeInputForm.get("time"),u=[c.pattern(/^\d*$/)];this.required&&u.push(c.required),this.maxTime&&u.push(e=>c.max(Math.floor(this.maxTime/this.timeIntervalsInSec.get(this.timeInputForm.get("timeUnit").value)))(e)),I(this.minTime)&&u.push(c.min(this.minTime)),i.setValidators(u),i.updateValueAndValidity({emitEvent:!1})}this.timeInputForm.get("timeUnit").valueChanges.pipe(fe(this.destroyRef)).subscribe(()=>{this.timeInputForm.get("time").updateValueAndValidity({onlySelf:!0}),this.timeInputForm.get("time").markAsTouched({onlySelf:!0})}),this.timeInputForm.valueChanges.pipe(fe(this.destroyRef)).subscribe(i=>{this.updatedModel(i)})}registerOnChange(i){this.propagateChange=i}registerOnTouched(i){}setDisabledState(i){i?this.timeInputForm.disable({emitEvent:!1}):(this.timeInputForm.enable({emitEvent:!1}),this.timeInputForm.invalid&&setTimeout(()=>this.updatedModel(this.timeInputForm.value,!0)))}writeValue(i){i!==this.modelValue&&(I(i)&&_o(i)&&Number(i)!==0?(this.timeInputForm.patchValue(this.parseTime(i),{emitEvent:!1}),this.modelValue=i):(this.timeInputForm.patchValue({time:0,timeUnit:Oe.SECONDS},{emitEvent:!1}),this.modelValue=0))}validate(){return this.timeInputForm.valid?null:{timeInput:!1}}updatedModel(i,u=!1){let e=i.time*this.timeIntervalsInSec.get(i.timeUnit);(this.modelValue!==e||u)&&(this.modelValue=e,this.propagateChange(e))}parseTime(i){for(let[u,e]of this.timeIntervalsInSec){let a=i/e;if(Number.isInteger(a))return{time:a,timeUnit:u}}}};ei.\u0275fac=function(u){return new(u||ei)(y(G),y(Le))},ei.\u0275cmp=T({type:ei,selectors:[["tb-time-unit-input"]],inputs:{labelText:"labelText",required:"required",requiredText:"requiredText",minTime:"minTime",minErrorText:"minErrorText",maxTime:"maxTime",maxErrorText:"maxErrorText",subscriptSizing:"subscriptSizing"},features:[Te([{provide:Se,useExisting:ce(()=>ei),multi:!0},{provide:He,useExisting:ce(()=>ei),multi:!0}])],ngContentSelectors:il,decls:16,vars:7,consts:[[1,"flex","gap-4",3,"formGroup"],["subscriptSizing","dynamic",1,"max-w-66%","flex-full"],[4,"ngIf"],["type","number","min","0","step","1","matInput","","formControlName","time"],["matSuffix",""],[1,"h-fit","max-w-33%","flex-full",3,"subscriptSizing"],["translate",""],["formControlName","timeUnit"],[3,"value"]],template:function(u,e){u&1&&(vo(tl),o(0,"section",0)(1,"mat-form-field",1),C(2,nl,2,1,"mat-label",2),g(3,"input",3),o(4,"div",4),ho(5),n(),C(6,rl,1,0,"mat-hint",2)(7,ol,2,1,"mat-error",2)(8,al,2,1,"mat-error",2)(9,ll,2,1,"mat-error",2),n(),o(10,"mat-form-field",5)(11,"mat-label",6),m(12,"rule-node-config.units"),n(),o(13,"mat-select",7),ci(14,ml,3,4,"mat-option",8,ui),n()()()),u&2&&(p("formGroup",e.timeInputForm),r(2),p("ngIf",e.labelText),r(4),p("ngIf",e.subscriptSizing==="fixed"),r(),p("ngIf",e.timeInputForm.get("time").hasError("required")&&e.requiredText),r(),p("ngIf",e.timeInputForm.get("time").hasError("min")&&e.minErrorText),r(),p("ngIf",e.timeInputForm.get("time").hasError("max")&&e.maxErrorText),r(),p("subscriptSizing",e.subscriptSizing),r(4),fi(e.timeUnits))},dependencies:[B,R,k,O,de,Q,ae,te,X,L,ge,F,_,ve,S,M,V,E],encapsulation:2});var Mt=ei;ft([St(),ct("design:type",Boolean)],Mt.prototype,"required",void 0);ft([Pn(),ct("design:type",Object)],Mt.prototype,"minTime",void 0);ft([Pn(),ct("design:type",Number)],Mt.prototype,"maxTime",void 0);b();b();function pl(t,i){if(t&1&&(o(0,"mat-option",4),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),q(d(2,2,e.PersistenceTypeTranslationMap.get(u)))}}function sl(t,i){if(t&1&&(g(0,"tb-time-unit-input",5),s(1,"translate"),s(2,"translate"),s(3,"translate"),s(4,"translate")),t&2){let u=v();h("labelText",d(1,6,"rule-node-config.save-time-series.deduplication-interval")),h("requiredText",d(2,8,"rule-node-config.save-time-series.deduplication-interval-required")),h("minErrorText",d(3,10,"rule-node-config.save-time-series.deduplication-interval-min-max-range")),h("maxErrorText",d(4,12,"rule-node-config.save-time-series.deduplication-interval-min-max-range")),p("minTime",1)("maxTime",u.maxDeduplicateTime)}}var In=(()=>{let i=class i{constructor(e){this.fb=e,this.persistenceSettingRowForm=this.fb.group({type:[Fi.type],deduplicationIntervalSecs:[{value:60,disabled:!0}]}),this.PersistenceType=Re,this.persistenceStrategies=[Re.ON_EVERY_MESSAGE,Re.DEDUPLICATE,Re.SKIP],this.PersistenceTypeTranslationMap=xn,this.maxDeduplicateTime=Ri,this.propagateChange=()=>{},this.persistenceSettingRowForm.get("type").valueChanges.pipe(fe()).subscribe(()=>this.updatedValidation()),this.persistenceSettingRowForm.valueChanges.pipe(fe()).subscribe(a=>this.propagateChange(a))}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){e?this.persistenceSettingRowForm.disable({emitEvent:!1}):(this.persistenceSettingRowForm.enable({emitEvent:!1}),this.updatedValidation())}validate(){return this.persistenceSettingRowForm.valid?null:{persistenceSettingRow:!1}}writeValue(e){I(e)?this.persistenceSettingRowForm.patchValue(e,{emitEvent:!1}):this.persistenceSettingRowForm.patchValue(Fi)}updatedValidation(){this.persistenceSettingRowForm.get("type").value===Re.DEDUPLICATE?this.persistenceSettingRowForm.get("deduplicationIntervalSecs").enable({emitEvent:!1}):this.persistenceSettingRowForm.get("deduplicationIntervalSecs").disable({emitEvent:!1})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-advanced-persistence-setting-row"]],inputs:{title:"title"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0},{provide:He,useExisting:ce(()=>i),multi:!0}])],decls:10,vars:3,consts:[[1,"tb-form-panel","stroked","no-gap","no-padding-bottom",3,"formGroup"],[1,"tb-form-panel-title","mb-4"],["translate",""],["formControlName","type"],[3,"value"],["required","","formControlName","deduplicationIntervalSecs",3,"labelText","requiredText","minErrorText","maxErrorText","minTime","maxTime"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),m(2),n(),o(3,"mat-form-field")(4,"mat-label",2),m(5,"rule-node-config.save-time-series.strategy"),n(),o(6,"mat-select",3),ci(7,pl,3,4,"mat-option",4,ui),n()(),C(9,sl,5,14,"tb-time-unit-input",5),n()),a&2&&(p("formGroup",l.persistenceSettingRowForm),r(2),q(l.title),r(5),fi(l.persistenceStrategies),r(2),Vi(l.persistenceSettingRowForm.get("type").value===l.PersistenceType.DEDUPLICATE?9:-1))},dependencies:[k,O,te,X,F,_,D,S,M,V,Mt,E],encapsulation:2});let t=i;return t})();var En=(()=>{let i=class i{constructor(e){this.fb=e,this.persistenceForm=this.fb.group({timeseries:[null],latest:[null],webSockets:[null]}),this.propagateChange=()=>{},this.persistenceForm.valueChanges.pipe(fe()).subscribe(a=>this.propagateChange(a))}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){e?this.persistenceForm.disable({emitEvent:!1}):this.persistenceForm.enable({emitEvent:!1})}validate(){return this.persistenceForm.valid?null:{persistenceForm:!1}}writeValue(e){this.persistenceForm.patchValue(e,{emitEvent:!1})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-advanced-persistence-settings"]],features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0},{provide:He,useExisting:ce(()=>i),multi:!0}])],decls:8,vars:12,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[3,"hintText","popupHelpLink"],["formControlName","timeseries",3,"title"],["formControlName","latest",3,"title"],["formControlName","webSockets",3,"title"]],template:function(a,l){a&1&&(o(0,"section",0),g(1,"tb-example-hint",1)(2,"tb-advanced-persistence-setting-row",2),s(3,"translate"),g(4,"tb-advanced-persistence-setting-row",3),s(5,"translate"),g(6,"tb-advanced-persistence-setting-row",4),s(7,"translate"),n()),a&2&&(p("formGroup",l.persistenceForm),r(),p("hintText","rule-node-config.save-time-series.advanced-settings-hint")("popupHelpLink","rulenode/save_timeseries_node_advanced"),r(),h("title",d(3,6,"rule-node-config.save-time-series.time-series")),r(2),h("title",d(5,8,"rule-node-config.save-time-series.latest")),r(2),h("title",d(7,10,"rule-node-config.save-time-series.web-sockets")))},dependencies:[F,_,S,M,he,In,E],encapsulation:2});let t=i;return t})();function cl(t,i){if(t&1&&(o(0,"mat-option",5),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),q(d(2,2,e.PersistenceTypeTranslationMap.get(u)))}}function fl(t,i){if(t&1&&(g(0,"tb-time-unit-input",12),s(1,"translate"),s(2,"translate"),s(3,"translate"),s(4,"translate")),t&2){let u=v(2);h("labelText",d(1,6,"rule-node-config.save-time-series.deduplication-interval")),h("requiredText",d(2,8,"rule-node-config.save-time-series.deduplication-interval-required")),h("minErrorText",d(3,10,"rule-node-config.save-time-series.deduplication-interval-min-max-range")),h("maxErrorText",d(4,12,"rule-node-config.save-time-series.deduplication-interval-min-max-range")),p("maxTime",u.maxDeduplicateTime)("minTime",1)}}function gl(t,i){if(t&1&&(o(0,"mat-form-field")(1,"mat-label",9),m(2,"rule-node-config.save-time-series.strategy"),n(),o(3,"mat-select",11),ci(4,cl,3,4,"mat-option",5,ui),n()(),C(6,fl,5,14,"tb-time-unit-input",12)),t&2){let u=v();r(4),fi(u.persistenceStrategies),r(2),Vi(u.timeseriesConfigForm.get("processingSettings.type").value===u.PersistenceType.DEDUPLICATE?6:-1)}}function Cl(t,i){t&1&&g(0,"tb-advanced-persistence-settings",6)}function yl(t,i){t&1&&(o(0,"div",13),s(1,"translate"),o(2,"mat-slide-toggle",14),m(3),s(4,"translate"),n()(),o(5,"tb-time-unit-input",15),s(6,"translate"),s(7,"translate"),s(8,"translate"),o(9,"mat-icon",16),s(10,"translate"),m(11," help "),n()()),t&2&&(h("tb-hint-tooltip-icon",d(1,6,"rule-node-config.use-server-ts-hint")),r(3),f(" ",d(4,8,"rule-node-config.use-server-ts")," "),r(2),h("labelText",d(6,10,"rule-node-config.default-ttl")),h("requiredText",d(7,12,"rule-node-config.default-ttl-required")),h("minErrorText",d(8,14,"rule-node-config.min-default-ttl-message")),r(4),h("matTooltip",d(10,16,"rule-node-config.default-ttl-hint")))}var Jn=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.PersistenceType=Re,this.persistenceStrategies=[Re.ON_EVERY_MESSAGE,Re.DEDUPLICATE,Re.WEBSOCKETS_ONLY],this.PersistenceTypeTranslationMap=xn,this.maxDeduplicateTime=Ri}configForm(){return this.timeseriesConfigForm}validatorTriggers(){return["processingSettings.isAdvanced","processingSettings.type"]}prepareInputConfig(e){let a;if(e?.processingSettings){let l=e?.processingSettings?.type===Re.ADVANCED;a={type:l?Re.ON_EVERY_MESSAGE:e.processingSettings.type,isAdvanced:l,deduplicationIntervalSecs:e.processingSettings?.deduplicationIntervalSecs??60,advanced:l?e.processingSettings:Un}}else a={type:Re.ON_EVERY_MESSAGE,isAdvanced:!1,deduplicationIntervalSecs:60,advanced:Un};return Xi(Wi({},e),{processingSettings:a})}prepareOutputConfig(e){let a;return e.processingSettings.isAdvanced?a=Xi(Wi({},e.processingSettings.advanced),{type:Re.ADVANCED}):a={type:e.processingSettings.type,deduplicationIntervalSecs:e.processingSettings?.deduplicationIntervalSecs},Xi(Wi({},e),{processingSettings:a})}onConfigurationSet(e){this.timeseriesConfigForm=this.fb.group({processingSettings:this.fb.group({isAdvanced:[e?.processingSettings?.isAdvanced??!1],type:[e?.processingSettings?.type??Re.ON_EVERY_MESSAGE],deduplicationIntervalSecs:[{value:e?.processingSettings?.deduplicationIntervalSecs??60,disabled:!0},[c.required,c.max(Ri)]],advanced:[{value:null,disabled:!0}]}),defaultTTL:[e?.defaultTTL??null,[c.required,c.min(0)]],useServerTs:[e?.useServerTs??!1]})}updateValidators(e,a){let l=this.timeseriesConfigForm.get("processingSettings"),x=l.get("isAdvanced").value,$=l.get("type").value;!x&&$===Re.DEDUPLICATE?l.get("deduplicationIntervalSecs").enable({emitEvent:e}):l.get("deduplicationIntervalSecs").disable({emitEvent:e}),x?l.get("advanced").enable({emitEvent:e}):l.get("advanced").disable({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-timeseries-config"]],features:[N],decls:21,vars:13,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],["formGroupName","processingSettings",1,"tb-form-panel","stroked","no-padding-bottom","no-gap"],[1,"mb-4","flex","flex-row","items-center","justify-between"],["translate","",1,"tb-form-panel-title",3,"tb-hint-tooltip-icon"],["appearance","fill","selectMediaBreakpoint","xs","formControlName","isAdvanced"],[3,"value"],["formControlName","advanced",1,"mb-4"],[1,"tb-form-panel","stroked"],[1,"tb-settings"],["translate",""],["matExpansionPanelContent",""],["formControlName","type"],["required","","formControlName","deduplicationIntervalSecs",3,"labelText","requiredText","minErrorText","maxErrorText","maxTime","minTime"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","useServerTs",1,"mat-slide"],["required","","subscriptSizing","dynamic","formControlName","defaultTTL",3,"labelText","requiredText","minErrorText"],["aria-hidden","false","aria-label","help-icon","matSuffix","",1,"mr-2","cursor-pointer",3,"matTooltip"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),s(4,"translate"),m(5," rule-node-config.save-time-series.processing-settings "),n(),o(6,"tb-toggle-select",4)(7,"tb-toggle-option",5),m(8),s(9,"translate"),n(),o(10,"tb-toggle-option",5),m(11),s(12,"translate"),n()()(),C(13,gl,7,1)(14,Cl,1,0,"tb-advanced-persistence-settings",6),n(),o(15,"section",7)(16,"mat-expansion-panel",8)(17,"mat-expansion-panel-header")(18,"mat-panel-title",9),m(19,"rule-node-config.advanced-settings"),n()(),C(20,yl,12,18,"ng-template",10),n()()()),a&2&&(p("formGroup",l.timeseriesConfigForm),r(3),h("tb-hint-tooltip-icon",d(4,7,"rule-node-config.save-time-series.processing-settings-hint")),r(4),p("value",!1),r(),q(d(9,9,"rule-node-config.basic-mode")),r(2),p("value",!0),r(),q(d(12,11,"rule-node-config.advanced-mode")),r(2),Vi(l.timeseriesConfigForm.get("processingSettings.isAdvanced").value?14:13))},dependencies:[Z,k,O,ae,te,X,ee,ue,Ze,et,tt,on,F,_,D,S,M,Qt,V,nt,rt,Ce,Mt,En,E],encapsulation:2});let t=i;return t})();b();function vl(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.timeout-required")," "))}function hl(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-timeout-message")," "))}var $n=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.rpcRequestConfigForm}onConfigurationSet(e){this.rpcRequestConfigForm=this.fb.group({timeoutInSeconds:[e?e.timeoutInSeconds:null,[c.required,c.min(0)]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-rpc-request-config"]],features:[N],decls:7,vars:3,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"mat-block","flex-1"],["translate",""],["type","number","min","0","step","1","matInput","","formControlName","timeoutInSeconds","required",""],[4,"ngIf"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.timeout-sec"),n(),g(4,"input",3),C(5,vl,3,3,"mat-error",4)(6,hl,3,3,"mat-error",4),n()()),a&2&&(p("formGroup",l.rpcRequestConfigForm),r(5),p("ngIf",l.rpcRequestConfigForm.get("timeoutInSeconds").hasError("required")),r(),p("ngIf",l.rpcRequestConfigForm.get("timeoutInSeconds").hasError("min")))},dependencies:[B,R,k,O,Q,L,ge,F,_,D,ve,S,M,V,E],encapsulation:2});let t=i;return t})();b();var bl=["jsFuncComponent"],xl=["tbelFuncComponent"],Da=()=>["msg","metadata","msgType"];function Tl(t,i){t&1&&g(0,"tb-script-lang",8)}function _l(t,i){if(t&1){let u=pe();o(0,"tb-js-func",9,0)(2,"button",10),s(3,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(4,"mat-icon",11),m(5,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(4,Da)),r(2),h("matTooltip",d(3,2,u.testScriptLabel))}}function Sl(t,i){if(t&1){let u=pe();o(0,"tb-js-func",12,1)(2,"button",10),s(3,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(4,"mat-icon",11),m(5,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(6,Da))("disableUndefinedCheck",!0)("scriptLanguage",u.scriptLanguage.TBEL),r(2),h("matTooltip",d(3,4,u.testScriptLabel))}}var Yn=(()=>{let i=class i extends A{constructor(e,a,l){super(),this.fb=e,this.nodeScriptTestService=a,this.translate=l,this.tbelEnabled=Ct(this.store).tbelEnabled,this.scriptLanguage=J,this.changeScript=new gt,this.hasScript=!0,this.testScriptLabel="rule-node-config.test-to-string-function"}configForm(){return this.logConfigForm}onConfigurationSet(e){this.logConfigForm=this.fb.group({scriptLang:[e?e.scriptLang:J.JS,[c.required]],jsScript:[e?e.jsScript:null,[]],tbelScript:[e?e.tbelScript:null,[]]})}validatorTriggers(){return["scriptLang"]}updateValidators(e){let a=this.logConfigForm.get("scriptLang").value;a===J.TBEL&&!this.tbelEnabled&&(a=J.JS,this.logConfigForm.get("scriptLang").patchValue(a,{emitEvent:!1}),setTimeout(()=>{this.logConfigForm.updateValueAndValidity({emitEvent:!0})})),this.logConfigForm.get("jsScript").setValidators(a===J.JS?[c.required]:[]),this.logConfigForm.get("jsScript").updateValueAndValidity({emitEvent:e}),this.logConfigForm.get("tbelScript").setValidators(a===J.TBEL?[c.required]:[]),this.logConfigForm.get("tbelScript").updateValueAndValidity({emitEvent:e})}prepareInputConfig(e){return e&&(e.scriptLang||(e.scriptLang=J.JS)),e}testScript(e){let a=this.logConfigForm.get("scriptLang").value,l=a===J.JS?"jsScript":"tbelScript",x=a===J.JS?"rulenode/log_node_script_fn":"rulenode/tbel/log_node_script_fn",$=this.logConfigForm.get(l).value;this.nodeScriptTestService.testNodeScript($,"string",this.translate.instant("rule-node-config.to-string"),"ToString",["msg","metadata","msgType"],this.ruleNodeId,x,a,e).subscribe(be=>{be&&(this.logConfigForm.get(l).setValue(be),this.changeScript.emit())})}onValidate(){this.logConfigForm.get("scriptLang").value===J.JS&&this.jsFuncComponent.validateOnSubmit()}};i.\u0275fac=function(a){return new(a||i)(y(j),y(ht),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-log-config"]],viewQuery:function(a,l){if(a&1&&(De(bl,5),De(xl,5)),a&2){let x;Ve(x=qe())&&(l.jsFuncComponent=x.first),Ve(x=qe())&&(l.tbelFuncComponent=x.first)}},features:[N],decls:8,vars:7,consts:[["jsFuncComponent",""],["tbelFuncComponent",""],[1,"flex","flex-col",3,"formGroup"],["formControlName","scriptLang",4,"ngIf"],["formControlName","jsScript","functionName","ToString","helpId","rulenode/log_node_script_fn","noValidate","true",3,"functionArgs",4,"ngIf"],["formControlName","tbelScript","functionName","ToString","helpId","rulenode/tbel/log_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage",4,"ngIf"],[1,"flex","flex-row"],["mat-button","","mat-raised-button","","color","primary",3,"click"],["formControlName","scriptLang"],["formControlName","jsScript","functionName","ToString","helpId","rulenode/log_node_script_fn","noValidate","true",3,"functionArgs"],["toolbarSuffixButton","","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"click","matTooltip"],["color","primary",1,"material-icons"],["formControlName","tbelScript","functionName","ToString","helpId","rulenode/tbel/log_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage"]],template:function(a,l){a&1&&(o(0,"section",2),C(1,Tl,1,0,"tb-script-lang",3)(2,_l,6,5,"tb-js-func",4)(3,Sl,6,7,"tb-js-func",5),o(4,"div",6)(5,"button",7),Y("click",function(){return l.testScript()}),m(6),s(7,"translate"),n()()()),a&2&&(p("formGroup",l.logConfigForm),r(),p("ngIf",l.tbelEnabled),r(),p("ngIf",l.logConfigForm.get("scriptLang").value===l.scriptLanguage.JS),r(),p("ngIf",l.logConfigForm.get("scriptLang").value===l.scriptLanguage.TBEL),r(3),f(" ",d(7,5,l.testScriptLabel)," "))},dependencies:[B,vt,Ge,_e,Z,ee,F,_,S,M,It,E],encapsulation:2});let t=i;return t})();b();function Fl(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.customer-name-pattern-required")," "))}var Wn=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.assignCustomerConfigForm}onConfigurationSet(e){this.assignCustomerConfigForm=this.fb.group({customerNamePattern:[e?e.customerNamePattern:null,[c.required,c.pattern(/.*\S.*/)]],createCustomerIfNotExists:[e?e.createCustomerIfNotExists:!1,[]]})}prepareOutputConfig(e){return e.customerNamePattern=e.customerNamePattern.trim(),e}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-assign-to-customer-config"]],features:[N],decls:13,vars:5,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"tb-form-panel","no-padding","no-border"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","customerNamePattern"],[4,"ngIf"],[1,"tb-form-row"],["formControlName","createCustomerIfNotExists",1,"mat-slide"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label",3),m(4,"rule-node-config.customer-name-pattern"),n(),g(5,"input",4),C(6,Fl,3,3,"mat-error",5),o(7,"mat-hint",3),m(8,"rule-node-config.customer-name-pattern-hint"),n()(),o(9,"div",6)(10,"mat-slide-toggle",7),m(11),s(12,"translate"),n()()()()),a&2&&(p("formGroup",l.assignCustomerConfigForm),r(6),p("ngIf",l.assignCustomerConfigForm.get("customerNamePattern").hasError("required")||l.assignCustomerConfigForm.get("customerNamePattern").hasError("pattern")),r(5),f(" ",d(12,3,"rule-node-config.create-customer-if-not-exists")," "))},dependencies:[B,R,k,O,de,Q,ue,L,F,_,D,S,M,V,E],encapsulation:2});let t=i;return t})();b();var Il=["jsFuncComponent"],El=["tbelFuncComponent"],qa=()=>["msg","metadata","msgType"];function Ml(t,i){t&1&&g(0,"tb-script-lang",12)}function Nl(t,i){if(t&1){let u=pe();o(0,"tb-js-func",13,0)(2,"button",14),s(3,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(4,"mat-icon",15),m(5,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(4,qa)),r(2),h("matTooltip",d(3,2,u.testScriptLabel))}}function Al(t,i){if(t&1){let u=pe();o(0,"tb-js-func",16,1)(2,"button",14),s(3,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(4,"mat-icon",15),m(5,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(6,qa))("disableUndefinedCheck",!0)("scriptLanguage",u.scriptLanguage.TBEL),r(2),h("matTooltip",d(3,4,u.testScriptLabel))}}function Dl(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.alarm-type-required")," "))}var Xn=(()=>{let i=class i extends A{constructor(e,a,l,x){super(),this.store=e,this.fb=a,this.nodeScriptTestService=l,this.translate=x,this.tbelEnabled=Ct(this.store).tbelEnabled,this.scriptLanguage=J,this.changeScript=new gt,this.hasScript=!0,this.testScriptLabel="rule-node-config.test-details-function"}configForm(){return this.clearAlarmConfigForm}onConfigurationSet(e){this.clearAlarmConfigForm=this.fb.group({scriptLang:[e?e.scriptLang:J.JS,[c.required]],alarmDetailsBuildJs:[e?e.alarmDetailsBuildJs:null,[]],alarmDetailsBuildTbel:[e?e.alarmDetailsBuildTbel:null,[]],alarmType:[e?e.alarmType:null,[c.required]]})}validatorTriggers(){return["scriptLang"]}updateValidators(e){let a=this.clearAlarmConfigForm.get("scriptLang").value;a===J.TBEL&&!this.tbelEnabled&&(a=J.JS,this.clearAlarmConfigForm.get("scriptLang").patchValue(a,{emitEvent:!1}),setTimeout(()=>{this.clearAlarmConfigForm.updateValueAndValidity({emitEvent:!0})})),this.clearAlarmConfigForm.get("alarmDetailsBuildJs").setValidators(a===J.JS?[c.required]:[]),this.clearAlarmConfigForm.get("alarmDetailsBuildJs").updateValueAndValidity({emitEvent:e}),this.clearAlarmConfigForm.get("alarmDetailsBuildTbel").setValidators(a===J.TBEL?[c.required]:[]),this.clearAlarmConfigForm.get("alarmDetailsBuildTbel").updateValueAndValidity({emitEvent:e})}prepareInputConfig(e){return e&&(e.scriptLang||(e.scriptLang=J.JS)),e}testScript(e){let a=this.clearAlarmConfigForm.get("scriptLang").value,l=a===J.JS?"alarmDetailsBuildJs":"alarmDetailsBuildTbel",x=a===J.JS?"rulenode/clear_alarm_node_script_fn":"rulenode/tbel/clear_alarm_node_script_fn",$=this.clearAlarmConfigForm.get(l).value;this.nodeScriptTestService.testNodeScript($,"json",this.translate.instant("rule-node-config.details"),"Details",["msg","metadata","msgType"],this.ruleNodeId,x,a,e).subscribe(be=>{be&&(this.clearAlarmConfigForm.get(l).setValue(be),this.changeScript.emit())})}onValidate(){this.clearAlarmConfigForm.get("scriptLang").value===J.JS&&this.jsFuncComponent.validateOnSubmit()}};i.\u0275fac=function(a){return new(a||i)(y(gi),y(j),y(ht),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-clear-alarm-config"]],viewQuery:function(a,l){if(a&1&&(De(Il,5),De(El,5)),a&2){let x;Ve(x=qe())&&(l.jsFuncComponent=x.first),Ve(x=qe())&&(l.tbelFuncComponent=x.first)}},features:[N],decls:15,vars:8,consts:[["jsFuncComponent",""],["tbelFuncComponent",""],[1,"flex","flex-col",3,"formGroup"],["formControlName","scriptLang",4,"ngIf"],["formControlName","alarmDetailsBuildJs","functionName","Details","helpId","rulenode/clear_alarm_node_script_fn","noValidate","true",3,"functionArgs",4,"ngIf"],["formControlName","alarmDetailsBuildTbel","functionName","Details","helpId","rulenode/tbel/clear_alarm_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage",4,"ngIf"],[1,"flex","flex-row",2,"padding-bottom","16px"],["mat-button","","mat-raised-button","","color","primary",3,"click"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","alarmType"],[4,"ngIf"],["formControlName","scriptLang"],["formControlName","alarmDetailsBuildJs","functionName","Details","helpId","rulenode/clear_alarm_node_script_fn","noValidate","true",3,"functionArgs"],["toolbarSuffixButton","","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"click","matTooltip"],["color","primary",1,"material-icons"],["formControlName","alarmDetailsBuildTbel","functionName","Details","helpId","rulenode/tbel/clear_alarm_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage"]],template:function(a,l){a&1&&(o(0,"section",2),C(1,Ml,1,0,"tb-script-lang",3)(2,Nl,6,5,"tb-js-func",4)(3,Al,6,7,"tb-js-func",5),o(4,"div",6)(5,"button",7),Y("click",function(){return l.testScript()}),m(6),s(7,"translate"),n()(),o(8,"mat-form-field",8)(9,"mat-label",9),m(10,"rule-node-config.alarm-type"),n(),g(11,"input",10),C(12,Dl,3,3,"mat-error",11),o(13,"mat-hint",9),m(14,"rule-node-config.general-pattern-hint"),n()()()),a&2&&(p("formGroup",l.clearAlarmConfigForm),r(),p("ngIf",l.tbelEnabled),r(),p("ngIf",l.clearAlarmConfigForm.get("scriptLang").value===l.scriptLanguage.JS),r(),p("ngIf",l.clearAlarmConfigForm.get("scriptLang").value===l.scriptLanguage.TBEL),r(3),f(" ",d(7,6,l.testScriptLabel)," "),r(6),p("ngIf",l.clearAlarmConfigForm.get("alarmType").hasError("required")))},dependencies:[B,vt,Ge,_e,Z,R,k,O,de,Q,ee,L,F,_,D,S,M,V,It,E],encapsulation:2});let t=i;return t})();b();var Vl=["jsFuncComponent"],ql=["tbelFuncComponent"],ka=()=>["msg","metadata","msgType"];function kl(t,i){t&1&&(o(0,"mat-checkbox",7),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.overwrite-alarm-details")," "))}function Bl(t,i){t&1&&g(0,"tb-script-lang",14)}function Ol(t,i){if(t&1){let u=pe();o(0,"tb-js-func",15,0)(2,"button",16),s(3,"translate"),Y("click",function(){ne(u);let a=v(2);return re(a.testScript())}),o(4,"mat-icon",17),m(5,"bug_report"),n()()()}if(t&2){let u=v(2);p("functionArgs",xe(4,ka)),r(2),h("matTooltip",d(3,2,u.testScriptLabel))}}function Ll(t,i){if(t&1){let u=pe();o(0,"tb-js-func",18,1)(2,"button",16),s(3,"translate"),Y("click",function(){ne(u);let a=v(2);return re(a.testScript())}),o(4,"mat-icon",17),m(5,"bug_report"),n()()()}if(t&2){let u=v(2);p("functionArgs",xe(6,ka))("disableUndefinedCheck",!0)("scriptLanguage",u.scriptLanguage.TBEL),r(2),h("matTooltip",d(3,4,u.testScriptLabel))}}function Rl(t,i){if(t&1){let u=pe();o(0,"section",8),C(1,Bl,1,0,"tb-script-lang",9)(2,Ol,6,5,"tb-js-func",10)(3,Ll,6,7,"tb-js-func",11),o(4,"div",12)(5,"button",13),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),m(6),s(7,"translate"),n()()()}if(t&2){let u=v();r(),p("ngIf",u.tbelEnabled),r(),p("ngIf",u.createAlarmConfigForm.get("scriptLang").value===u.scriptLanguage.JS),r(),p("ngIf",u.createAlarmConfigForm.get("scriptLang").value===u.scriptLanguage.TBEL),r(3),f(" ",d(7,4,u.testScriptLabel)," ")}}function Pl(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.alarm-type-required")," "))}function wl(t,i){if(t&1&&(o(0,"mat-option",32),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(3);p("value",u),r(),f(" ",d(2,2,e.alarmSeverityTranslationMap.get(u))," ")}}function Gl(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.alarm-severity-required")," "))}function jl(t,i){if(t&1&&(o(0,"mat-form-field",29)(1,"mat-label",20),m(2,"rule-node-config.alarm-severity"),n(),o(3,"mat-select",30),C(4,wl,3,4,"mat-option",31),n(),C(5,Gl,3,3,"mat-error",22),n()),t&2){let u=v(2);r(4),p("ngForOf",u.alarmSeverities),r(),p("ngIf",u.createAlarmConfigForm.get("severity").hasError("required"))}}function Ul(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.alarm-severity-required")," "))}function Kl(t,i){if(t&1&&(o(0,"mat-form-field",19)(1,"mat-label",20),m(2,"rule-node-config.alarm-severity-pattern"),n(),g(3,"input",33),C(4,Ul,3,3,"mat-error",22),g(5,"mat-hint",34),s(6,"translate"),s(7,"safe"),n()),t&2){let u=v(2);r(4),p("ngIf",u.createAlarmConfigForm.get("severity").hasError("required")),r(),p("innerHTML",le(7,4,d(6,2,"rule-node-config.alarm-severity-pattern-hint"),"html"),we)}}function Hl(t,i){if(t&1){let u=pe();o(0,"mat-chip-row",38),Y("removed",function(){let a=ne(u).$implicit,l=v(3);return re(l.removeKey(a,"relationTypes"))}),m(1),o(2,"mat-icon",39),m(3,"close"),n()()}if(t&2){let u=i.$implicit;r(),f(" ",u," ")}}function zl(t,i){if(t&1){let u=pe();o(0,"section")(1,"mat-form-field",35)(2,"mat-label",20),m(3,"rule-node-config.relation-types-list"),n(),o(4,"mat-chip-grid",null,2),C(6,Hl,4,1,"mat-chip-row",36),o(7,"input",37),s(8,"translate"),Y("matChipInputTokenEnd",function(a){ne(u);let l=v(2);return re(l.addKey(a,"relationTypes"))}),n()(),o(9,"mat-hint",20),m(10,"rule-node-config.relation-types-list-hint"),n()()()}if(t&2){let u=$e(5),e=v(2);r(6),p("ngForOf",e.createAlarmConfigForm.get("relationTypes").value),r(),h("placeholder",d(8,5,"rule-node-config.relation-types-list")),p("matChipInputFor",u)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0)}}function Ql(t,i){if(t&1&&(o(0,"section",8)(1,"mat-form-field",19)(2,"mat-label",20),m(3,"rule-node-config.alarm-type"),n(),g(4,"input",21),C(5,Pl,3,3,"mat-error",22),o(6,"mat-hint",20),m(7,"rule-node-config.general-pattern-hint"),n()(),o(8,"mat-checkbox",23),m(9),s(10,"translate"),n(),C(11,jl,6,2,"mat-form-field",24)(12,Kl,8,7,"mat-form-field",25),o(13,"mat-checkbox",26),m(14),s(15,"translate"),n(),C(16,zl,11,7,"section",22),o(17,"mat-checkbox",27),m(18),s(19,"translate"),n(),o(20,"mat-checkbox",28),m(21),s(22,"translate"),n()()),t&2){let u=v();r(5),p("ngIf",u.createAlarmConfigForm.get("alarmType").hasError("required")),r(4),f(" ",d(10,8,"rule-node-config.use-alarm-severity-pattern")," "),r(2),p("ngIf",!u.createAlarmConfigForm.get("dynamicSeverity").value),r(),p("ngIf",u.createAlarmConfigForm.get("dynamicSeverity").value),r(2),f(" ",d(15,10,"rule-node-config.propagate")," "),r(2),p("ngIf",u.createAlarmConfigForm.get("propagate").value===!0),r(2),f(" ",d(19,12,"rule-node-config.propagate-to-owner")," "),r(3),f(" ",d(22,14,"rule-node-config.propagate-to-tenant")," ")}}var Zn=(()=>{let i=class i extends A{constructor(e,a,l,x){super(),this.store=e,this.fb=a,this.nodeScriptTestService=l,this.translate=x,this.alarmSeverities=Object.keys(So),this.alarmSeverityTranslationMap=Io,this.separatorKeysCodes=[13,188,186],this.tbelEnabled=Ct(this.store).tbelEnabled,this.scriptLanguage=J,this.changeScript=new gt,this.hasScript=!0,this.testScriptLabel="rule-node-config.test-details-function"}configForm(){return this.createAlarmConfigForm}onConfigurationSet(e){this.createAlarmConfigForm=this.fb.group({scriptLang:[e?e.scriptLang:J.JS,[c.required]],alarmDetailsBuildJs:[e?e.alarmDetailsBuildJs:null,[]],alarmDetailsBuildTbel:[e?e.alarmDetailsBuildTbel:null,[]],useMessageAlarmData:[e?e.useMessageAlarmData:!1,[]],overwriteAlarmDetails:[e?e.overwriteAlarmDetails:!1,[]],alarmType:[e?e.alarmType:null,[]],severity:[e?e.severity:null,[]],propagate:[e?e.propagate:!1,[]],relationTypes:[e?e.relationTypes:null,[]],propagateToOwner:[e?e.propagateToOwner:!1,[]],propagateToTenant:[e?e.propagateToTenant:!1,[]],dynamicSeverity:!1}),this.createAlarmConfigForm.get("dynamicSeverity").valueChanges.pipe(fe(this.destroyRef)).subscribe(a=>{a?this.createAlarmConfigForm.get("severity").patchValue("",{emitEvent:!1}):this.createAlarmConfigForm.get("severity").patchValue(this.alarmSeverities[0],{emitEvent:!1})})}validatorTriggers(){return["useMessageAlarmData","overwriteAlarmDetails","scriptLang"]}updateValidators(e){let a=this.createAlarmConfigForm.get("useMessageAlarmData").value,l=this.createAlarmConfigForm.get("overwriteAlarmDetails").value;a?(this.createAlarmConfigForm.get("alarmType").setValidators([]),this.createAlarmConfigForm.get("severity").setValidators([])):(this.createAlarmConfigForm.get("alarmType").setValidators([c.required]),this.createAlarmConfigForm.get("severity").setValidators([c.required])),this.createAlarmConfigForm.get("alarmType").updateValueAndValidity({emitEvent:e}),this.createAlarmConfigForm.get("severity").updateValueAndValidity({emitEvent:e});let x=this.createAlarmConfigForm.get("scriptLang").value;x===J.TBEL&&!this.tbelEnabled&&(x=J.JS,this.createAlarmConfigForm.get("scriptLang").patchValue(x,{emitEvent:!1}),setTimeout(()=>{this.createAlarmConfigForm.updateValueAndValidity({emitEvent:!0})}));let $=a===!1||l===!0;this.createAlarmConfigForm.get("alarmDetailsBuildJs").setValidators($&&x===J.JS?[c.required]:[]),this.createAlarmConfigForm.get("alarmDetailsBuildTbel").setValidators($&&x===J.TBEL?[c.required]:[]),this.createAlarmConfigForm.get("alarmDetailsBuildJs").updateValueAndValidity({emitEvent:e}),this.createAlarmConfigForm.get("alarmDetailsBuildTbel").updateValueAndValidity({emitEvent:e})}prepareInputConfig(e){return e&&(e.scriptLang||(e.scriptLang=J.JS)),e}testScript(e){let a=this.createAlarmConfigForm.get("scriptLang").value,l=a===J.JS?"alarmDetailsBuildJs":"alarmDetailsBuildTbel",x=a===J.JS?"rulenode/create_alarm_node_script_fn":"rulenode/tbel/create_alarm_node_script_fn",$=this.createAlarmConfigForm.get(l).value;this.nodeScriptTestService.testNodeScript($,"json",this.translate.instant("rule-node-config.details"),"Details",["msg","metadata","msgType"],this.ruleNodeId,x,a,e).subscribe(be=>{be&&(this.createAlarmConfigForm.get(l).setValue(be),this.changeScript.emit())})}removeKey(e,a){let l=this.createAlarmConfigForm.get(a).value,x=l.indexOf(e);x>=0&&(l.splice(x,1),this.createAlarmConfigForm.get(a).setValue(l,{emitEvent:!0}))}addKey(e,a){let l=e.input,x=e.value;if((x||"").trim()){x=x.trim();let $=this.createAlarmConfigForm.get(a).value;(!$||$.indexOf(x)===-1)&&($||($=[]),$.push(x),this.createAlarmConfigForm.get(a).setValue($,{emitEvent:!0}))}l&&(l.value="")}onValidate(){let e=this.createAlarmConfigForm.get("useMessageAlarmData").value,a=this.createAlarmConfigForm.get("overwriteAlarmDetails").value;(!e||a)&&this.createAlarmConfigForm.get("scriptLang").value===J.JS&&this.jsFuncComponent.validateOnSubmit()}};i.\u0275fac=function(a){return new(a||i)(y(gi),y(j),y(ht),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-create-alarm-config"]],viewQuery:function(a,l){if(a&1&&(De(Vl,5),De(ql,5)),a&2){let x;Ve(x=qe())&&(l.jsFuncComponent=x.first),Ve(x=qe())&&(l.tbelFuncComponent=x.first)}},features:[N],decls:7,vars:7,consts:[["jsFuncComponent",""],["tbelFuncComponent",""],["relationTypesChipList",""],[1,"flex","flex-col",3,"formGroup"],["formControlName","useMessageAlarmData"],["formControlName","overwriteAlarmDetails",4,"ngIf"],["class","flex flex-col",4,"ngIf"],["formControlName","overwriteAlarmDetails"],[1,"flex","flex-col"],["formControlName","scriptLang",4,"ngIf"],["formControlName","alarmDetailsBuildJs","functionName","Details","helpId","rulenode/create_alarm_node_script_fn","noValidate","true",3,"functionArgs",4,"ngIf"],["formControlName","alarmDetailsBuildTbel","functionName","Details","helpId","rulenode/tbel/create_alarm_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage",4,"ngIf"],[1,"flex","flex-row",2,"padding-bottom","16px"],["mat-button","","mat-raised-button","","color","primary",3,"click"],["formControlName","scriptLang"],["formControlName","alarmDetailsBuildJs","functionName","Details","helpId","rulenode/create_alarm_node_script_fn","noValidate","true",3,"functionArgs"],["toolbarSuffixButton","","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"click","matTooltip"],["color","primary",1,"material-icons"],["formControlName","alarmDetailsBuildTbel","functionName","Details","helpId","rulenode/tbel/create_alarm_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage"],["subscriptSizing","dynamic",1,"flex-1"],["translate",""],["required","","matInput","","formControlName","alarmType"],[4,"ngIf"],["formControlName","dynamicSeverity"],["class","flex-1",4,"ngIf"],["class","flex-1","subscriptSizing","dynamic",4,"ngIf"],["formControlName","propagate"],["formControlName","propagateToOwner"],["formControlName","propagateToTenant"],[1,"flex-1"],["formControlName","severity","required",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","formControlName","severity","required",""],[3,"innerHTML"],["floatLabel","always","subscriptSizing","dynamic",1,"mat-block"],[3,"removed",4,"ngFor","ngForOf"],["matInput","","type","text",3,"matChipInputTokenEnd","placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[3,"removed"],["matChipRemove",""]],template:function(a,l){a&1&&(o(0,"section",3)(1,"mat-checkbox",4),m(2),s(3,"translate"),n(),C(4,kl,3,3,"mat-checkbox",5)(5,Rl,8,6,"section",6)(6,Ql,23,16,"section",6),n()),a&2&&(p("formGroup",l.createAlarmConfigForm),r(2),f(" ",d(3,5,"rule-node-config.use-message-alarm-data")," "),r(2),p("ngIf",l.createAlarmConfigForm.get("useMessageAlarmData").value===!0),r(),p("ngIf",l.createAlarmConfigForm.get("useMessageAlarmData").value===!1||l.createAlarmConfigForm.get("overwriteAlarmDetails").value===!0),r(),p("ngIf",l.createAlarmConfigForm.get("useMessageAlarmData").value===!1))},dependencies:[z,B,vt,Ge,_e,je,Z,R,k,O,de,Q,te,X,ee,xi,Ti,hi,bi,L,F,_,D,S,M,V,It,lt,E],encapsulation:2});let t=i;return t})();b();function Jl(t,i){if(t&1&&(o(0,"mat-option",21),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.directionTypeTranslations.get(u))," ")}}function $l(t,i){if(t&1&&(o(0,"mat-form-field",22)(1,"mat-label"),m(2),s(3,"translate"),n(),g(4,"input",23),n()),t&2){let u=v();r(2),q(d(3,1,u.entityTypeNamePatternTranslation.get(u.createRelationConfigForm.get("entityType").value)))}}function Yl(t,i){t&1&&(o(0,"mat-form-field",22)(1,"mat-label",5),m(2,"rule-node-config.profile-name"),n(),g(3,"input",24),n())}function Wl(t,i){t&1&&g(0,"tb-example-hint",25),t&2&&p("hintText","rule-node-config.kv-map-pattern-hint")}function Xl(t,i){t&1&&(o(0,"div",26),s(1,"translate"),o(2,"mat-slide-toggle",27),m(3),s(4,"translate"),n()()),t&2&&(h("tb-hint-tooltip-icon",d(1,2,"rule-node-config.create-entity-if-not-exists-hint")),r(3),f(" ",d(4,4,"rule-node-config.create-entity-if-not-exists")," "))}var ir=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.directionTypes=Object.keys(mt),this.directionTypeTranslations=new Map([[mt.FROM,"rule-node-config.search-direction-from"],[mt.TO,"rule-node-config.search-direction-to"]]),this.entityType=W,this.entityTypeNamePatternTranslation=new Map([[W.DEVICE,"rule-node-config.device-name-pattern"],[W.ASSET,"rule-node-config.asset-name-pattern"],[W.ENTITY_VIEW,"rule-node-config.entity-view-name-pattern"],[W.CUSTOMER,"rule-node-config.customer-title-pattern"],[W.USER,"rule-node-config.user-name-pattern"],[W.DASHBOARD,"rule-node-config.dashboard-name-pattern"],[W.EDGE,"rule-node-config.edge-name-pattern"]]),this.allowedEntityTypes=[W.DEVICE,W.ASSET,W.ENTITY_VIEW,W.TENANT,W.CUSTOMER,W.USER,W.DASHBOARD,W.EDGE]}configForm(){return this.createRelationConfigForm}onConfigurationSet(e){this.createRelationConfigForm=this.fb.group({direction:[e?e.direction:null,[c.required]],entityType:[e?e.entityType:null,[c.required]],entityNamePattern:[e?e.entityNamePattern:null,[]],entityTypePattern:[e?e.entityTypePattern:null,[]],relationType:[e?e.relationType:null,[c.required]],createEntityIfNotExists:[e?e.createEntityIfNotExists:!1,[]],removeCurrentRelations:[e?e.removeCurrentRelations:!1,[]],changeOriginatorToRelatedEntity:[e?e.changeOriginatorToRelatedEntity:!1,[]]})}validatorTriggers(){return["entityType","createEntityIfNotExists"]}updateValidators(e){let a=this.createRelationConfigForm.get("entityType").value;if(a?this.createRelationConfigForm.get("entityNamePattern").setValidators([c.required,c.pattern(/.*\S.*/)]):this.createRelationConfigForm.get("entityNamePattern").setValidators([]),a&&(a===W.DEVICE||a===W.ASSET)){let l=[c.pattern(/.*\S.*/)];this.createRelationConfigForm.get("createEntityIfNotExists").value&&l.push(c.required),this.createRelationConfigForm.get("entityTypePattern").setValidators(l)}else this.createRelationConfigForm.get("entityTypePattern").setValidators([]);this.createRelationConfigForm.get("entityNamePattern").updateValueAndValidity({emitEvent:e}),this.createRelationConfigForm.get("entityTypePattern").updateValueAndValidity({emitEvent:e})}prepareOutputConfig(e){return e.entityNamePattern=e.entityNamePattern?e.entityNamePattern.trim():null,e.entityTypePattern=e.entityTypePattern?e.entityTypePattern.trim():null,e}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-create-relation-config"]],features:[N],decls:36,vars:19,consts:[[1,"tb-form-panel","no-padding","no-border",3,"formGroup"],[1,"tb-form-panel","stroked","no-padding-bottom"],["translate","",1,"tb-form-panel-title"],[1,"flex","flex-col"],["hideRequiredMarker","",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","direction"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","relationType"],[1,"flex","flex-row","gap-4"],["showLabel","","required","","formControlName","entityType",1,"flex-1",3,"allowedEntityTypes"],["class","mat-block flex-1",4,"ngIf"],[3,"hintText",4,"ngIf"],["style","margin-bottom: 18px","class","tb-form-row no-border no-padding",3,"tb-hint-tooltip-icon",4,"ngIf"],[1,"tb-form-panel","stroked","no-padding"],[1,"tb-settings"],[2,"padding","16px"],[1,"tb-form-panel","no-border","no-padding-top"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","removeCurrentRelations",1,"mat-slide"],["formControlName","changeOriginatorToRelatedEntity",1,"mat-slide"],[3,"value"],[1,"mat-block","flex-1"],["required","","matInput","","formControlName","entityNamePattern"],["matInput","","formControlName","entityTypePattern"],[3,"hintText"],[1,"tb-form-row","no-border","no-padding",2,"margin-bottom","18px",3,"tb-hint-tooltip-icon"],["formControlName","createEntityIfNotExists",1,"mat-slide"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2),m(3,"rule-node-config.relation-parameters"),n(),o(4,"div",3)(5,"mat-form-field",4)(6,"mat-label",5),m(7,"relation.direction"),n(),o(8,"mat-select",6),C(9,Jl,3,4,"mat-option",7),n()(),g(10,"tb-relation-type-autocomplete",8),n()(),o(11,"div",1)(12,"div",2),m(13,"rule-node-config.target-entity"),n(),o(14,"div",9),g(15,"tb-entity-type-select",10),C(16,$l,5,3,"mat-form-field",11)(17,Yl,4,0,"mat-form-field",11),n(),C(18,Wl,1,1,"tb-example-hint",12)(19,Xl,5,6,"div",13),n(),o(20,"section",14)(21,"mat-expansion-panel",15)(22,"mat-expansion-panel-header",16)(23,"mat-panel-title",5),m(24,"rule-node-config.advanced-settings"),n()(),o(25,"div",17)(26,"div",18),s(27,"translate"),o(28,"mat-slide-toggle",19),m(29),s(30,"translate"),n()(),o(31,"div",18),s(32,"translate"),o(33,"mat-slide-toggle",20),m(34),s(35,"translate"),n()()()()()()),a&2&&(p("formGroup",l.createRelationConfigForm),r(9),p("ngForOf",l.directionTypes),r(6),p("allowedEntityTypes",l.allowedEntityTypes),r(),p("ngIf",l.createRelationConfigForm.get("entityType").value&&l.createRelationConfigForm.get("entityType").value!==l.entityType.TENANT),r(),p("ngIf",l.createRelationConfigForm.get("entityType").value===l.entityType.DEVICE||l.createRelationConfigForm.get("entityType").value===l.entityType.ASSET),r(),p("ngIf",l.createRelationConfigForm.get("entityType").value===l.entityType.CUSTOMER||l.createRelationConfigForm.get("entityType").value===l.entityType.DEVICE||l.createRelationConfigForm.get("entityType").value===l.entityType.ASSET),r(),p("ngIf",l.createRelationConfigForm.get("entityType").value===l.entityType.CUSTOMER||l.createRelationConfigForm.get("entityType").value===l.entityType.DEVICE||l.createRelationConfigForm.get("entityType").value===l.entityType.ASSET),r(7),h("tb-hint-tooltip-icon",d(27,11,"rule-node-config.remove-current-relations-hint")),r(3),f(" ",d(30,13,"rule-node-config.remove-current-relations")," "),r(2),h("tb-hint-tooltip-icon",d(32,15,"rule-node-config.change-originator-to-related-entity-hint")),r(3),f(" ",d(35,17,"rule-node-config.change-originator-to-related-entity")," "))},dependencies:[z,B,$t,Wt,R,k,O,te,X,ue,Ze,et,tt,L,F,_,D,S,M,V,Ce,he,E],encapsulation:2});let t=i;return t})();b();function Zl(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.period-seconds-required")," "))}function em(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-period-0-seconds-message")," "))}function tm(t,i){if(t&1&&(o(0,"mat-form-field",5)(1,"mat-label",6),m(2,"rule-node-config.period-seconds"),n(),g(3,"input",9),C(4,Zl,3,3,"mat-error",8)(5,em,3,3,"mat-error",8),n()),t&2){let u=v();r(4),p("ngIf",u.msgDelayConfigForm.get("periodInSeconds").hasError("required")),r(),p("ngIf",u.msgDelayConfigForm.get("periodInSeconds").hasError("min"))}}function im(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.period-in-seconds-pattern-required")," "))}function nm(t,i){if(t&1&&(o(0,"mat-form-field",10)(1,"mat-label",6),m(2,"rule-node-config.period-in-seconds-pattern"),n(),g(3,"input",11),C(4,im,3,3,"mat-error",8),o(5,"mat-hint",6),m(6,"rule-node-config.general-pattern-hint"),n()()),t&2){let u=v();r(4),p("ngIf",u.msgDelayConfigForm.get("periodInSecondsPattern").hasError("required"))}}function rm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-pending-messages-required")," "))}function om(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-pending-messages-range")," "))}function am(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-pending-messages-range")," "))}var nr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.msgDelayConfigForm}onConfigurationSet(e){this.msgDelayConfigForm=this.fb.group({useMetadataPeriodInSecondsPatterns:[e?e.useMetadataPeriodInSecondsPatterns:!1,[]],periodInSeconds:[e?e.periodInSeconds:null,[]],periodInSecondsPattern:[e?e.periodInSecondsPattern:null,[]],maxPendingMsgs:[e?e.maxPendingMsgs:null,[c.required,c.min(1),c.max(1e5)]]})}validatorTriggers(){return["useMetadataPeriodInSecondsPatterns"]}updateValidators(e){this.msgDelayConfigForm.get("useMetadataPeriodInSecondsPatterns").value?(this.msgDelayConfigForm.get("periodInSecondsPattern").setValidators([c.required]),this.msgDelayConfigForm.get("periodInSeconds").setValidators([])):(this.msgDelayConfigForm.get("periodInSecondsPattern").setValidators([]),this.msgDelayConfigForm.get("periodInSeconds").setValidators([c.required,c.min(0)])),this.msgDelayConfigForm.get("periodInSecondsPattern").updateValueAndValidity({emitEvent:e}),this.msgDelayConfigForm.get("periodInSeconds").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-msg-delay-config"]],features:[N],decls:16,vars:9,consts:[["periodInSecondsPattern",""],[1,"flex","flex-col",3,"formGroup"],["formControlName","useMetadataPeriodInSecondsPatterns"],["translate","",1,"tb-hint"],["class","mat-block",4,"ngIf","ngIfElse"],[1,"mat-block"],["translate",""],["required","","type","number","min","1","max","100000","step","1","matInput","","formControlName","maxPendingMsgs"],[4,"ngIf"],["required","","type","number","min","0","step","1","matInput","","formControlName","periodInSeconds"],["subscriptSizing","dynamic",1,"mat-block"],["required","","matInput","","formControlName","periodInSecondsPattern"]],template:function(a,l){if(a&1&&(o(0,"section",1)(1,"mat-checkbox",2),m(2),s(3,"translate"),n(),o(4,"div",3),m(5,"rule-node-config.use-metadata-period-in-seconds-patterns-hint"),n(),C(6,tm,6,2,"mat-form-field",4)(7,nm,7,1,"ng-template",null,0,Ot),o(9,"mat-form-field",5)(10,"mat-label",6),m(11,"rule-node-config.max-pending-messages"),n(),g(12,"input",7),C(13,rm,3,3,"mat-error",8)(14,om,3,3,"mat-error",8)(15,am,3,3,"mat-error",8),n()()),a&2){let x=$e(8);p("formGroup",l.msgDelayConfigForm),r(2),f(" ",d(3,7,"rule-node-config.use-metadata-period-in-seconds-patterns")," "),r(4),p("ngIf",l.msgDelayConfigForm.get("useMetadataPeriodInSecondsPatterns").value!==!0)("ngIfElse",x),r(7),p("ngIf",l.msgDelayConfigForm.get("maxPendingMsgs").hasError("required")),r(),p("ngIf",l.msgDelayConfigForm.get("maxPendingMsgs").hasError("min")),r(),p("ngIf",l.msgDelayConfigForm.get("maxPendingMsgs").hasError("max"))}},dependencies:[B,je,R,k,O,de,Q,L,ge,F,_,D,ve,it,S,M,V,E],encapsulation:2});let t=i;return t})();b();function lm(t,i){if(t&1&&(o(0,"mat-option",13),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.directionTypeTranslations.get(u))," ")}}function mm(t,i){if(t&1&&(o(0,"mat-form-field",18)(1,"mat-label"),m(2),s(3,"translate"),n(),g(4,"input",19),n()),t&2){let u=v(2);r(2),q(d(3,1,u.entityTypeNamePatternTranslation.get(u.deleteRelationConfigForm.get("entityType").value)))}}function pm(t,i){t&1&&g(0,"tb-example-hint",20),t&2&&p("hintText","rule-node-config.kv-map-single-pattern-hint")}function sm(t,i){if(t&1&&(o(0,"div")(1,"div",14),g(2,"tb-entity-type-select",15),C(3,mm,5,3,"mat-form-field",16),n(),C(4,pm,1,1,"tb-example-hint",17),n()),t&2){let u=v();r(2),p("allowedEntityTypes",u.allowedEntityTypes),r(),p("ngIf",u.deleteRelationConfigForm.get("entityType").value&&u.deleteRelationConfigForm.get("entityType").value!==u.entityType.TENANT),r(),p("ngIf",u.deleteRelationConfigForm.get("entityType").value&&u.deleteRelationConfigForm.get("entityType").value!==u.entityType.TENANT)}}var rr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.directionTypes=Object.keys(mt),this.directionTypeTranslations=new Map([[mt.FROM,"rule-node-config.del-relation-direction-from"],[mt.TO,"rule-node-config.del-relation-direction-to"]]),this.entityTypeNamePatternTranslation=new Map([[W.DEVICE,"rule-node-config.device-name-pattern"],[W.ASSET,"rule-node-config.asset-name-pattern"],[W.ENTITY_VIEW,"rule-node-config.entity-view-name-pattern"],[W.CUSTOMER,"rule-node-config.customer-title-pattern"],[W.USER,"rule-node-config.user-name-pattern"],[W.DASHBOARD,"rule-node-config.dashboard-name-pattern"],[W.EDGE,"rule-node-config.edge-name-pattern"]]),this.entityType=W,this.allowedEntityTypes=[W.DEVICE,W.ASSET,W.ENTITY_VIEW,W.TENANT,W.CUSTOMER,W.USER,W.DASHBOARD,W.EDGE]}configForm(){return this.deleteRelationConfigForm}onConfigurationSet(e){this.deleteRelationConfigForm=this.fb.group({deleteForSingleEntity:[e?e.deleteForSingleEntity:!1,[]],direction:[e?e.direction:null,[c.required]],entityType:[e?e.entityType:null,[]],entityNamePattern:[e?e.entityNamePattern:null,[]],relationType:[e?e.relationType:null,[c.required]]})}validatorTriggers(){return["deleteForSingleEntity","entityType"]}updateValidators(e){let a=this.deleteRelationConfigForm.get("deleteForSingleEntity").value,l=this.deleteRelationConfigForm.get("entityType").value;a?this.deleteRelationConfigForm.get("entityType").setValidators([c.required]):this.deleteRelationConfigForm.get("entityType").setValidators([]),a&&l&&l!==W.TENANT?this.deleteRelationConfigForm.get("entityNamePattern").setValidators([c.required,c.pattern(/.*\S.*/)]):this.deleteRelationConfigForm.get("entityNamePattern").setValidators([]),this.deleteRelationConfigForm.get("entityType").updateValueAndValidity({emitEvent:!1}),this.deleteRelationConfigForm.get("entityNamePattern").updateValueAndValidity({emitEvent:e})}prepareOutputConfig(e){return e.entityNamePattern=e.entityNamePattern?e.entityNamePattern.trim():null,e}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-delete-relation-config"]],features:[N],decls:18,vars:9,consts:[[1,"tb-form-panel","no-padding","no-border",3,"formGroup"],[1,"tb-form-panel","stroked","no-padding-bottom"],["translate","",1,"tb-form-panel-title"],[1,"flex","flex-col"],["hideRequiredMarker","",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","direction"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","relationType"],[1,"tb-form-panel","stroked"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","deleteForSingleEntity",1,"mat-slide"],[4,"ngIf"],[3,"value"],[1,"flex","flex-row","gap-2.5"],["showLabel","","required","","formControlName","entityType",1,"flex-1",3,"allowedEntityTypes"],["class","mat-block flex-1",4,"ngIf"],[3,"hintText",4,"ngIf"],[1,"mat-block","flex-1"],["required","","matInput","","formControlName","entityNamePattern"],[3,"hintText"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2),m(3,"rule-node-config.relation-parameters"),n(),o(4,"div",3)(5,"mat-form-field",4)(6,"mat-label",5),m(7,"relation.direction"),n(),o(8,"mat-select",6),C(9,lm,3,4,"mat-option",7),n()(),g(10,"tb-relation-type-autocomplete",8),n()(),o(11,"div",9)(12,"div",10),s(13,"translate"),o(14,"mat-slide-toggle",11),m(15),s(16,"translate"),n()(),C(17,sm,5,3,"div",12),n()()),a&2&&(p("formGroup",l.deleteRelationConfigForm),r(9),p("ngForOf",l.directionTypes),r(3),h("tb-hint-tooltip-icon",d(13,5,"rule-node-config.delete-relation-with-specific-entity-hint")),r(3),f(" ",d(16,7,"rule-node-config.delete-relation-with-specific-entity")," "),r(2),p("ngIf",l.deleteRelationConfigForm.get("deleteForSingleEntity").value))},dependencies:[z,B,$t,Wt,R,k,O,te,X,ue,L,F,_,D,S,M,V,Ce,he,E],encapsulation:2});let t=i;return t})();b();var dm=["jsFuncComponent"],um=["tbelFuncComponent"],Ba=()=>["prevMsg","prevMetadata","prevMsgType"];function cm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.message-count-required")," "))}function fm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-message-count-message")," "))}function gm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.generation-frequency-required")," "))}function Cm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-generation-frequency-message")," "))}function ym(t,i){if(t&1&&(o(0,"tb-toggle-select",22)(1,"tb-toggle-option",23),m(2),s(3,"translate"),n(),o(4,"tb-toggle-option",23),m(5),s(6,"translate"),n()()),t&2){let u=v(2);r(),p("value",u.scriptLanguage.TBEL),r(),f(" ",d(3,4,"rule-node-config.script-lang-tbel")," "),r(2),p("value",u.scriptLanguage.JS),r(),f(" ",d(6,6,"rule-node-config.script-lang-js")," ")}}function vm(t,i){if(t&1){let u=pe();o(0,"tb-js-func",18,0),C(2,ym,7,8,"tb-toggle-select",19),o(3,"button",20),s(4,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(5,"mat-icon",21),m(6,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(5,Ba)),r(2),p("ngIf",u.tbelEnabled),r(),h("matTooltip",d(4,3,u.testScriptLabel))}}function hm(t,i){if(t&1){let u=pe();o(0,"tb-js-func",24,1)(2,"tb-toggle-select",22)(3,"tb-toggle-option",23),m(4),s(5,"translate"),n(),o(6,"tb-toggle-option",23),m(7),s(8,"translate"),n()(),o(9,"button",20),s(10,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(11,"mat-icon",21),m(12,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(14,Ba))("disableUndefinedCheck",!0)("scriptLanguage",u.scriptLanguage.TBEL),r(3),p("value",u.scriptLanguage.TBEL),r(),f(" ",d(5,8,"rule-node-config.script-lang-tbel")," "),r(2),p("value",u.scriptLanguage.JS),r(),f(" ",d(8,10,"rule-node-config.script-lang-js")," "),r(2),h("matTooltip",d(10,12,u.testScriptLabel))}}var or=(()=>{let i=class i extends A{constructor(e,a,l){super(),this.fb=e,this.nodeScriptTestService=a,this.translate=l,this.tbelEnabled=Ct(this.store).tbelEnabled,this.scriptLanguage=J,this.changeScript=new gt,this.allowedEntityTypes=[W.DEVICE,W.ASSET,W.ENTITY_VIEW,W.CUSTOMER,W.USER,W.DASHBOARD],this.additionEntityTypes={TENANT:this.translate.instant("rule-node-config.current-tenant"),RULE_NODE:this.translate.instant("rule-node-config.current-rule-node")},this.hasScript=!0,this.testScriptLabel="rule-node-config.test-generator-function"}configForm(){return this.generatorConfigForm}onConfigurationSet(e){this.generatorConfigForm=this.fb.group({msgCount:[e?e.msgCount:null,[c.required,c.min(0)]],periodInSeconds:[e?e.periodInSeconds:null,[c.required,c.min(1)]],originator:[e?e.originator:{id:null,entityType:W.RULE_NODE},[]],scriptLang:[e?e.scriptLang:J.JS,[c.required]],jsScript:[e?e.jsScript:null,[]],tbelScript:[e?e.tbelScript:null,[]]})}validatorTriggers(){return["scriptLang"]}updateValidators(e){let a=this.generatorConfigForm.get("scriptLang").value;a===J.TBEL&&!this.tbelEnabled&&(a=J.JS,this.generatorConfigForm.get("scriptLang").patchValue(a,{emitEvent:!1}),setTimeout(()=>{this.generatorConfigForm.updateValueAndValidity({emitEvent:!0})})),this.generatorConfigForm.get("jsScript").setValidators(a===J.JS?[c.required]:[]),this.generatorConfigForm.get("jsScript").updateValueAndValidity({emitEvent:e}),this.generatorConfigForm.get("tbelScript").setValidators(a===J.TBEL?[c.required]:[]),this.generatorConfigForm.get("tbelScript").updateValueAndValidity({emitEvent:e})}prepareInputConfig(e){return{msgCount:I(e?.msgCount)?e?.msgCount:0,periodInSeconds:I(e?.periodInSeconds)?e?.periodInSeconds:1,originator:{id:I(e?.originatorId)?e?.originatorId:null,entityType:I(e?.originatorType)?e?.originatorType:W.RULE_NODE},scriptLang:I(e?.scriptLang)?e?.scriptLang:J.JS,tbelScript:I(e?.tbelScript)?e?.tbelScript:null,jsScript:I(e?.jsScript)?e?.jsScript:null}}prepareOutputConfig(e){return e.originator?(e.originatorId=e.originator.id,e.originatorType=e.originator.entityType):(e.originatorId=null,e.originatorType=null),delete e.originator,e}testScript(e){let a=this.generatorConfigForm.get("scriptLang").value,l=a===J.JS?"jsScript":"tbelScript",x=a===J.JS?"rulenode/generator_node_script_fn":"rulenode/tbel/generator_node_script_fn",$=this.generatorConfigForm.get(l).value;this.nodeScriptTestService.testNodeScript($,"generate",this.translate.instant("rule-node-config.generator"),"Generate",["prevMsg","prevMetadata","prevMsgType"],this.ruleNodeId,x,a,e).subscribe(be=>{be&&(this.generatorConfigForm.get(l).setValue(be),this.changeScript.emit())})}onValidate(){this.generatorConfigForm.get("scriptLang").value===J.JS&&this.jsFuncComponent.validateOnSubmit()}};i.\u0275fac=function(a){return new(a||i)(y(j),y(ht),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-generator-config"]],viewQuery:function(a,l){if(a&1&&(De(dm,5),De(um,5)),a&2){let x;Ve(x=qe())&&(l.jsFuncComponent=x.first),Ve(x=qe())&&(l.tbelFuncComponent=x.first)}},features:[N],decls:32,vars:12,consts:[["jsFuncComponent",""],["tbelFuncComponent",""],[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-panel","no-padding-bottom","stroked"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields","column-xs"],[1,"flex"],["translate",""],["required","","type","number","min","0","step","1","matInput","","formControlName","msgCount"],[4,"ngIf"],["required","","type","number","min","1","step","1","matInput","","formControlName","periodInSeconds"],["required","true","useAliasEntityTypes","true","formControlName","originator",1,"flex-1",3,"allowedEntityTypes","additionEntityTypes"],[1,"tb-form-panel","stroked"],["expanded","",1,"tb-settings"],["formControlName","jsScript","functionName","Generate","helpId","rulenode/generator_node_script_fn","noValidate","true",3,"functionArgs",4,"ngIf"],["formControlName","tbelScript","functionName","Generate","helpId","rulenode/tbel/generator_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage",4,"ngIf"],[1,"flex","flex-row",2,"padding-bottom","16px"],["mat-button","","mat-raised-button","","color","primary",3,"click"],["formControlName","jsScript","functionName","Generate","helpId","rulenode/generator_node_script_fn","noValidate","true",3,"functionArgs"],["toolbarPrefixButton","","formControlName","scriptLang","appearance","fill",4,"ngIf"],["toolbarSuffixButton","","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"click","matTooltip"],["color","primary",1,"material-icons"],["toolbarPrefixButton","","formControlName","scriptLang","appearance","fill"],[3,"value"],["formControlName","tbelScript","functionName","Generate","helpId","rulenode/tbel/generator_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage"]],template:function(a,l){a&1&&(o(0,"section",2)(1,"div",3)(2,"div",4),m(3,"rule-node-config.generation-parameters"),n(),o(4,"div",5)(5,"mat-form-field",6)(6,"mat-label",7),m(7,"rule-node-config.message-count"),n(),g(8,"input",8),C(9,cm,3,3,"mat-error",9)(10,fm,3,3,"mat-error",9),n(),o(11,"mat-form-field",6)(12,"mat-label",7),m(13,"rule-node-config.generation-frequency-seconds"),n(),g(14,"input",10),C(15,gm,3,3,"mat-error",9)(16,Cm,3,3,"mat-error",9),n()()(),o(17,"div",3)(18,"div",4),m(19,"rule-node-config.originator"),n(),g(20,"tb-entity-select",11),n(),o(21,"div",12)(22,"mat-expansion-panel",13)(23,"mat-expansion-panel-header")(24,"mat-panel-title",7),m(25,"rule-node-config.generator-function"),n()(),C(26,vm,7,6,"tb-js-func",14)(27,hm,13,15,"tb-js-func",15),o(28,"div",16)(29,"button",17),Y("click",function(){return l.testScript()}),m(30),s(31,"translate"),n()()()()()),a&2&&(p("formGroup",l.generatorConfigForm),r(9),p("ngIf",l.generatorConfigForm.get("msgCount").hasError("required")),r(),p("ngIf",l.generatorConfigForm.get("msgCount").hasError("min")),r(5),p("ngIf",l.generatorConfigForm.get("periodInSeconds").hasError("required")),r(),p("ngIf",l.generatorConfigForm.get("periodInSeconds").hasError("min")),r(4),p("allowedEntityTypes",l.allowedEntityTypes)("additionEntityTypes",l.additionEntityTypes),r(6),p("ngIf",l.generatorConfigForm.get("scriptLang").value===l.scriptLanguage.JS),r(),p("ngIf",l.generatorConfigForm.get("scriptLang").value===l.scriptLanguage.TBEL),r(3),f(" ",d(31,10,l.testScriptLabel)," "))},dependencies:[B,Go,vt,Ge,_e,Z,R,k,O,Q,ee,Ze,et,tt,L,ge,F,_,D,ve,S,M,V,nt,rt,E],styles:['@charset "UTF-8";[_nghost-%COMP%]     .mat-button-toggle-group{min-width:120px;height:24px!important}[_nghost-%COMP%]     .mat-button-toggle-group .mat-button-toggle{font-size:0}[_nghost-%COMP%]     .mat-button-toggle-group .mat-button-toggle .mat-button-toggle-button{height:20px!important;line-height:20px!important;border:none!important}[_nghost-%COMP%]     .mat-button-toggle-group .mat-button-toggle .mat-button-toggle-button .mat-button-toggle-label-content{font-size:14px!important;line-height:20px!important}@media screen and (min-width: 599px){[_nghost-%COMP%]     .tb-entity-select{display:flex;flex-direction:row;gap:16px}}[_nghost-%COMP%]     .tb-entity-select tb-entity-type-select{flex:1}[_nghost-%COMP%]     .tb-entity-select tb-entity-autocomplete{flex:1}[_nghost-%COMP%]     .tb-entity-select tb-entity-autocomplete mat-form-field{width:100%!important}']});let t=i;return t})();b();var Oa=t=>({perimeterKeyName:t});function bm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.latitude-field-name-required")," "))}function xm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.longitude-field-name-required")," "))}function Tm(t,i){if(t&1&&(o(0,"mat-option",22),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.perimeterTypeTranslationMap.get(u))," ")}}function _m(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.perimeter-key-name-required")," "))}function Sm(t,i){if(t&1&&(o(0,"mat-form-field",23)(1,"mat-label"),m(2),s(3,"translate"),n(),g(4,"input",24),C(5,_m,3,3,"mat-error",6),o(6,"mat-hint"),m(7),s(8,"translate"),n()()),t&2){let u=v();r(2),q(d(3,3,"rule-node-config.perimeter-key-name")),r(3),p("ngIf",u.geoActionConfigForm.get("perimeterKeyName").hasError("required")),r(2),q(d(8,5,"rule-node-config.perimeter-key-name-hint"))}}function Fm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.circle-center-latitude-required")," "))}function Im(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.circle-center-longitude-required")," "))}function Em(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.range-required")," "))}function Mm(t,i){if(t&1&&(o(0,"mat-option",22),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),f(" ",d(2,2,e.rangeUnitTranslationMap.get(u))," ")}}function Nm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.range-units-required")," "))}function Am(t,i){if(t&1&&(o(0,"div",9)(1,"div",3)(2,"mat-form-field",25)(3,"mat-label"),m(4),s(5,"translate"),n(),g(6,"input",26),C(7,Fm,3,3,"mat-error",6),n(),o(8,"mat-form-field",25)(9,"mat-label"),m(10),s(11,"translate"),n(),g(12,"input",27),C(13,Im,3,3,"mat-error",6),n()(),o(14,"div",3)(15,"mat-form-field",25)(16,"mat-label"),m(17),s(18,"translate"),n(),g(19,"input",28),C(20,Em,3,3,"mat-error",6),n(),o(21,"mat-form-field",25)(22,"mat-label"),m(23),s(24,"translate"),n(),o(25,"mat-select",29),C(26,Mm,3,4,"mat-option",12),n(),C(27,Nm,3,3,"mat-error",6),n()()()),t&2){let u=v();r(4),q(d(5,9,"rule-node-config.circle-center-latitude")),r(3),p("ngIf",u.geoActionConfigForm.get("centerLatitude").hasError("required")),r(3),q(d(11,11,"rule-node-config.circle-center-longitude")),r(3),p("ngIf",u.geoActionConfigForm.get("centerLongitude").hasError("required")),r(4),q(d(18,13,"rule-node-config.range")),r(3),p("ngIf",u.geoActionConfigForm.get("range").hasError("required")),r(3),q(d(24,15,"rule-node-config.range-units")),r(3),p("ngForOf",u.rangeUnits),r(),p("ngIf",u.geoActionConfigForm.get("rangeUnit").hasError("required"))}}function Dm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.polygon-definition-required")," "))}function Vm(t,i){if(t&1&&(o(0,"div",9)(1,"mat-form-field",30)(2,"mat-label",31),m(3,"rule-node-config.polygon-definition"),n(),g(4,"input",32),o(5,"mat-icon",33),s(6,"translate"),m(7," help "),n(),C(8,Dm,3,3,"mat-error",6),n()()),t&2){let u=v();r(5),h("matTooltip",d(6,2,"rule-node-config.polygon-definition-hint")),r(3),p("ngIf",u.geoActionConfigForm.get("polygonsDefinition").hasError("required"))}}function qm(t,i){if(t&1&&(o(0,"tb-toggle-option",22),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",e.presenceMonitoringStrategies.get(u).value),r(),f(" ",d(2,2,e.presenceMonitoringStrategies.get(u).name)," ")}}function km(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-inside-duration-value-required")," "))}function Bm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.time-value-range")," "))}function Om(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.time-value-range")," "))}function Lm(t,i){if(t&1&&(o(0,"mat-option",22),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),f(" ",d(2,2,e.timeUnitsTranslationMap.get(u))," ")}}function Rm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-outside-duration-value-required")," "))}function Pm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.time-value-range")," "))}function wm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.time-value-range")," "))}function Gm(t,i){if(t&1&&(o(0,"mat-option",22),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),f(" ",d(2,2,e.timeUnitsTranslationMap.get(u))," ")}}function jm(t,i){if(t&1&&(o(0,"div")(1,"div",34)(2,"mat-form-field",35)(3,"mat-label",31),m(4,"rule-node-config.min-inside-duration"),n(),g(5,"input",36),C(6,km,3,3,"mat-error",6)(7,Bm,3,3,"mat-error",6)(8,Om,3,3,"mat-error",6),n(),o(9,"mat-form-field",35)(10,"mat-label",31),m(11,"rule-node-config.min-inside-duration-time-unit"),n(),o(12,"mat-select",37),C(13,Lm,3,4,"mat-option",12),n()()(),o(14,"div",34)(15,"mat-form-field",35)(16,"mat-label",31),m(17,"rule-node-config.min-outside-duration"),n(),g(18,"input",38),C(19,Rm,3,3,"mat-error",6)(20,Pm,3,3,"mat-error",6)(21,wm,3,3,"mat-error",6),n(),o(22,"mat-form-field",35)(23,"mat-label",31),m(24,"rule-node-config.min-outside-duration-time-unit"),n(),o(25,"mat-select",39),C(26,Gm,3,4,"mat-option",12),n()()()()),t&2){let u=v();r(6),p("ngIf",u.geoActionConfigForm.get("minInsideDuration").hasError("required")),r(),p("ngIf",u.geoActionConfigForm.get("minInsideDuration").hasError("min")),r(),p("ngIf",u.geoActionConfigForm.get("minInsideDuration").hasError("max")),r(5),p("ngForOf",u.timeUnits),r(6),p("ngIf",u.geoActionConfigForm.get("minOutsideDuration").hasError("required")),r(),p("ngIf",u.geoActionConfigForm.get("minOutsideDuration").hasError("min")),r(),p("ngIf",u.geoActionConfigForm.get("minOutsideDuration").hasError("max")),r(5),p("ngForOf",u.timeUnits)}}var ar=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.perimeterType=Tt,this.perimeterTypes=Object.keys(Tt),this.perimeterTypeTranslationMap=Tn,this.rangeUnits=Object.keys(qt),this.rangeUnitTranslationMap=_n,this.presenceMonitoringStrategies=Na,this.presenceMonitoringStrategyKeys=Array.from(this.presenceMonitoringStrategies.keys()),this.timeUnits=Object.keys(Oe),this.timeUnitsTranslationMap=Ni,this.defaultPaddingEnable=!0}configForm(){return this.geoActionConfigForm}onConfigurationSet(e){this.geoActionConfigForm=this.fb.group({reportPresenceStatusOnEachMessage:[e?e.reportPresenceStatusOnEachMessage:!0,[c.required]],latitudeKeyName:[e?e.latitudeKeyName:null,[c.required]],longitudeKeyName:[e?e.longitudeKeyName:null,[c.required]],perimeterType:[e?e.perimeterType:null,[c.required]],fetchPerimeterInfoFromMessageMetadata:[e?e.fetchPerimeterInfoFromMessageMetadata:!1,[]],perimeterKeyName:[e?e.perimeterKeyName:null,[]],centerLatitude:[e?e.centerLatitude:null,[]],centerLongitude:[e?e.centerLatitude:null,[]],range:[e?e.range:null,[]],rangeUnit:[e?e.rangeUnit:null,[]],polygonsDefinition:[e?e.polygonsDefinition:null,[]],minInsideDuration:[e?e.minInsideDuration:null,[c.required,c.min(1),c.max(2147483647)]],minInsideDurationTimeUnit:[e?e.minInsideDurationTimeUnit:null,[c.required]],minOutsideDuration:[e?e.minOutsideDuration:null,[c.required,c.min(1),c.max(2147483647)]],minOutsideDurationTimeUnit:[e?e.minOutsideDurationTimeUnit:null,[c.required]]})}validatorTriggers(){return["fetchPerimeterInfoFromMessageMetadata","perimeterType"]}updateValidators(e){let a=this.geoActionConfigForm.get("fetchPerimeterInfoFromMessageMetadata").value,l=this.geoActionConfigForm.get("perimeterType").value;a?this.geoActionConfigForm.get("perimeterKeyName").setValidators([c.required]):this.geoActionConfigForm.get("perimeterKeyName").setValidators([]),!a&&l===Tt.CIRCLE?(this.geoActionConfigForm.get("centerLatitude").setValidators([c.required,c.min(-90),c.max(90)]),this.geoActionConfigForm.get("centerLongitude").setValidators([c.required,c.min(-180),c.max(180)]),this.geoActionConfigForm.get("range").setValidators([c.required,c.min(0)]),this.geoActionConfigForm.get("rangeUnit").setValidators([c.required]),this.defaultPaddingEnable=!1):(this.geoActionConfigForm.get("centerLatitude").setValidators([]),this.geoActionConfigForm.get("centerLongitude").setValidators([]),this.geoActionConfigForm.get("range").setValidators([]),this.geoActionConfigForm.get("rangeUnit").setValidators([]),this.defaultPaddingEnable=!0),!a&&l===Tt.POLYGON?this.geoActionConfigForm.get("polygonsDefinition").setValidators([c.required]):this.geoActionConfigForm.get("polygonsDefinition").setValidators([]),this.geoActionConfigForm.get("perimeterKeyName").updateValueAndValidity({emitEvent:e}),this.geoActionConfigForm.get("centerLatitude").updateValueAndValidity({emitEvent:e}),this.geoActionConfigForm.get("centerLongitude").updateValueAndValidity({emitEvent:e}),this.geoActionConfigForm.get("range").updateValueAndValidity({emitEvent:e}),this.geoActionConfigForm.get("rangeUnit").updateValueAndValidity({emitEvent:e}),this.geoActionConfigForm.get("polygonsDefinition").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-gps-geofencing-config"]],features:[N],decls:52,vars:42,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"flex","flex-row","gap-4"],[1,"mat-block","max-w-50%","flex-full"],["matInput","","formControlName","latitudeKeyName","required",""],[4,"ngIf"],["matInput","","formControlName","longitudeKeyName","required",""],["translate","",1,"tb-form-hint","tb-primary-fill"],[1,"flex","flex-col"],["hideRequiredMarker","",1,"mat-block","flex-1"],["formControlName","perimeterType"],[3,"value",4,"ngFor","ngForOf"],[1,"tb-form-row","no-border","no-padding","slide-toggle",3,"tb-hint-tooltip-icon"],["formControlName","fetchPerimeterInfoFromMessageMetadata",1,"mat-slide"],["class","mat-block",4,"ngIf"],["class","flex flex-col",4,"ngIf"],[1,"tb-form-panel","stroked","no-padding-bottom"],[1,"flex","flex-col","items-stretch","justify-between","gt-sm:flex-row","lt-md:gap-4"],[1,"tb-form-panel-title"],["formControlName","reportPresenceStatusOnEachMessage","appearance","fill",1,"fetch-to-data-toggle"],[1,"tb-form-hint","tb-primary-fill"],[3,"value"],[1,"mat-block"],["matInput","","formControlName","perimeterKeyName","required",""],[1,"flex-1"],["type","number","min","-90","max","90","step","0.1","matInput","","formControlName","centerLatitude","required",""],["type","number","min","-180","max","180","step","0.1","matInput","","formControlName","centerLongitude","required",""],["type","number","min","0","step","0.1","matInput","","formControlName","range","required",""],["formControlName","rangeUnit","required",""],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["matInput","","formControlName","polygonsDefinition","required",""],["matSuffix","","aria-hidden","false","aria-label","help-icon","color","primary",1,"margin-8","cursor-pointer",3,"matTooltip"],[1,"flex","flex-col","gt-sm:flex-row","gt-sm:gap-2"],[1,"mat-block","flex-1"],["type","number","step","1","min","1","max","2147483647","matInput","","formControlName","minInsideDuration","required",""],["formControlName","minInsideDurationTimeUnit","required",""],["type","number","step","1","min","1","max","2147483647","matInput","","formControlName","minOutsideDuration","required",""],["formControlName","minOutsideDurationTimeUnit","required",""]],template:function(a,l){a&1&&(o(0,"section",0)(1,"section",1)(2,"div",2),m(3,"rule-node-config.coordinate-field-names"),n(),o(4,"section")(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),m(8),s(9,"translate"),n(),g(10,"input",5),C(11,bm,3,3,"mat-error",6),n(),o(12,"mat-form-field",4)(13,"mat-label"),m(14),s(15,"translate"),n(),g(16,"input",7),C(17,xm,3,3,"mat-error",6),n()(),o(18,"div",8),m(19,"rule-node-config.coordinate-field-hint"),n()()(),o(20,"section",1)(21,"div",2),m(22,"rule-node-config.geofence-configuration"),n(),o(23,"section",9)(24,"mat-form-field",10)(25,"mat-label"),m(26),s(27,"translate"),n(),o(28,"mat-select",11),C(29,Tm,3,4,"mat-option",12),n()(),o(30,"div",13),s(31,"translate"),s(32,"translate"),o(33,"mat-slide-toggle",14),m(34),s(35,"translate"),n()(),C(36,Sm,9,7,"mat-form-field",15)(37,Am,28,17,"div",16)(38,Vm,9,4,"div",16),n()(),o(39,"section",17)(40,"div",18)(41,"div",19),m(42),s(43,"translate"),n(),o(44,"tb-toggle-select",20),C(45,qm,3,4,"tb-toggle-option",12),n()(),o(46,"div",21),m(47),s(48,"translate"),s(49,"translate"),n(),o(50,"section",9),C(51,jm,27,8,"div",6),n()()()),a&2&&(p("formGroup",l.geoActionConfigForm),r(8),q(d(9,18,"rule-node-config.latitude-field-name")),r(3),p("ngIf",l.geoActionConfigForm.get("latitudeKeyName").hasError("required")),r(3),q(d(15,20,"rule-node-config.longitude-field-name")),r(3),p("ngIf",l.geoActionConfigForm.get("longitudeKeyName").hasError("required")),r(3),Ke("no-padding-bottom",!l.defaultPaddingEnable),r(6),q(d(27,22,"rule-node-config.perimeter-type")),r(3),p("ngForOf",l.perimeterTypes),r(),h("tb-hint-tooltip-icon",l.geoActionConfigForm.get("perimeterType").value===l.perimeterType.CIRCLE?le(31,24,"rule-node-config.fetch-circle-parameter-info-from-metadata-hint",Fe(38,Oa,l.geoActionConfigForm.get("perimeterKeyName").valid?l.geoActionConfigForm.get("perimeterKeyName").value:"ss_perimeter")):le(32,27,"rule-node-config.fetch-poligon-parameter-info-from-metadata-hint",Fe(40,Oa,l.geoActionConfigForm.get("perimeterKeyName").valid?l.geoActionConfigForm.get("perimeterKeyName").value:"ss_perimeter"))),r(4),f(" ",d(35,30,"rule-node-config.fetch-perimeter-info-from-metadata")," "),r(2),p("ngIf",l.geoActionConfigForm.get("fetchPerimeterInfoFromMessageMetadata").value),r(),p("ngIf",l.geoActionConfigForm.get("perimeterType").value===l.perimeterType.CIRCLE&&!l.geoActionConfigForm.get("fetchPerimeterInfoFromMessageMetadata").value),r(),p("ngIf",l.geoActionConfigForm.get("perimeterType").value===l.perimeterType.POLYGON&&!l.geoActionConfigForm.get("fetchPerimeterInfoFromMessageMetadata").value),r(4),q(d(43,32,"rule-node-config.presence-monitoring-strategy")),r(3),p("ngForOf",l.presenceMonitoringStrategyKeys),r(2),f(" ",l.geoActionConfigForm.get("reportPresenceStatusOnEachMessage").value===!1?d(48,34,"rule-node-config.presence-monitoring-strategy-on-first-message-hint"):d(49,36,"rule-node-config.presence-monitoring-strategy-on-each-message-hint")," "),r(4),p("ngIf",l.geoActionConfigForm.get("reportPresenceStatusOnEachMessage").value===!1))},dependencies:[z,B,Z,R,k,O,de,Q,ae,te,X,ee,ue,L,ge,F,_,D,ve,it,S,M,V,nt,rt,Ce,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-bottom:18px}']});let t=i;return t})();b();function Um(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.interval-seconds-required")," "))}function Km(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-interval-seconds-message")," "))}function Hm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.output-timeseries-key-prefix-required")," "))}var lr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.msgCountConfigForm}onConfigurationSet(e){this.msgCountConfigForm=this.fb.group({interval:[e?e.interval:null,[c.required,c.min(1)]],telemetryPrefix:[e?e.telemetryPrefix:null,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-msg-count-config"]],features:[N],decls:12,vars:4,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"mat-block"],["translate",""],["required","","type","number","min","1","step","1","matInput","","formControlName","interval"],[4,"ngIf"],["required","","matInput","","formControlName","telemetryPrefix"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.interval-seconds"),n(),g(4,"input",3),C(5,Um,3,3,"mat-error",4)(6,Km,3,3,"mat-error",4),n(),o(7,"mat-form-field",1)(8,"mat-label",2),m(9,"rule-node-config.output-timeseries-key-prefix"),n(),g(10,"input",5),C(11,Hm,3,3,"mat-error",4),n()()),a&2&&(p("formGroup",l.msgCountConfigForm),r(5),p("ngIf",l.msgCountConfigForm.get("interval").hasError("required")),r(),p("ngIf",l.msgCountConfigForm.get("interval").hasError("min")),r(5),p("ngIf",l.msgCountConfigForm.get("telemetryPrefix").hasError("required")))},dependencies:[B,R,k,O,Q,L,ge,F,_,D,ve,S,M,V,E],encapsulation:2});let t=i;return t})();b();var mr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.rpcReplyConfigForm}onConfigurationSet(e){this.rpcReplyConfigForm=this.fb.group({serviceIdMetaDataAttribute:[e?e.serviceIdMetaDataAttribute:null,[]],sessionIdMetaDataAttribute:[e?e.sessionIdMetaDataAttribute:null,[]],requestIdMetaDataAttribute:[e?e.requestIdMetaDataAttribute:null,[]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-rpc-reply-config"]],features:[N],decls:17,vars:2,consts:[[1,"tb-form-panel","stroked","no-padding-bottom",3,"formGroup"],["translate","",1,"tb-form-panel-title"],[3,"hintText"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields","column-xs"],[1,"flex"],["translate",""],["matInput","","formControlName","serviceIdMetaDataAttribute"],["matInput","","formControlName","sessionIdMetaDataAttribute"],["matInput","","formControlName","requestIdMetaDataAttribute"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),m(2,"rule-node-config.reply-routing-configuration"),n(),g(3,"tb-example-hint",2),o(4,"div",3)(5,"mat-form-field",4)(6,"mat-label",5),m(7,"rule-node-config.service-id-metadata-attribute"),n(),g(8,"input",6),n(),o(9,"mat-form-field",4)(10,"mat-label",5),m(11,"rule-node-config.session-id-metadata-attribute"),n(),g(12,"input",7),n(),o(13,"mat-form-field",4)(14,"mat-label",5),m(15,"rule-node-config.request-id-metadata-attribute"),n(),g(16,"input",8),n()()()),a&2&&(p("formGroup",l.rpcReplyConfigForm),r(3),p("hintText","rule-node-config.rpc-reply-routing-configuration-hint"))},dependencies:[R,k,O,L,F,_,S,M,V,he],encapsulation:2});let t=i;return t})();b();b();var zm=(t,i)=>({valText:t,keyText:i});function Qm(t,i){if(t&1&&(o(0,"div",13),m(1),n()),t&2){let u=v();r(),f(" ",u.requiredText," ")}}function Jm(t,i){t&1&&(o(0,"div",13),m(1," rule-node-config.map-fields-required "),n())}function $m(t,i){if(t&1&&(o(0,"div",13),m(1),s(2,"translate"),n()),t&2){let u=v();r(),f(" ",le(2,1,"rule-node-config.key-val.unique-key-value-pair-error",Gt(4,zm,u.valText,u.keyText))," ")}}function Ym(t,i){if(t&1){let u=pe();o(0,"div",14)(1,"mat-form-field",15),g(2,"input",16),n(),o(3,"mat-form-field",15),g(4,"input",16),n(),o(5,"div",17)(6,"button",18),s(7,"translate"),Y("click",function(){let a=ne(u).index,l=v();return re(l.removeKeyVal(a))}),o(8,"mat-icon"),m(9,"delete"),n()()()()}if(t&2){let u=i.$implicit,e=v();r(2),p("placeholder",e.keyText+"*")("formControl",u.get("key")),r(2),p("placeholder",e.valText+"*")("formControl",u.get("value")),r(2),Ke("tb-hidden",e.keyValsFormArray().controls.length===1),h("matTooltip",d(7,8,"rule-node-config.key-val.remove-mapping-entry")),p("disabled",e.disabled)}}function Wm(t,i){if(t&1&&g(0,"tb-example-hint",19),t&2){let u=v();p("hintText",u.hintText)("popupHelpLink",u.popupHelpLink)}}var ni=class ni{constructor(i,u,e){this.injector=i,this.fb=u,this.destroyRef=e,this.propagateChange=()=>{},this.disabled=!1,this.uniqueKeyValuePairValidator=!1,this.required=!1,this.duplicateValuesValidator=a=>a.controls.key.value===a.controls.value.value&&a.controls.key.value&&a.controls.value.value?{uniqueKeyValuePair:!0}:null,this.oneMapRequiredValidator=a=>a.get("keyVals").value.length,this.propagateNestedErrors=a=>{if(this.kvListFormGroup&&this.kvListFormGroup.get("keyVals")&&this.kvListFormGroup.get("keyVals")?.status==="VALID")return null;let l={};if(this.kvListFormGroup&&this.kvListFormGroup.setErrors(null),a instanceof pn||a instanceof ln){if(a.errors)for(let x of Object.keys(a.errors))l[x]=!0;for(let x of Object.keys(a.controls)){let $=this.propagateNestedErrors(a.controls[x]);if($&&Object.keys($).length)for(let be of Object.keys($))l[be]=!0}return l}else if(a.errors)for(let x of Object.keys(a.errors))l[x]=!0;return nn(l,{})?null:l}}ngOnInit(){this.ngControl=this.injector.get(yi),this.ngControl!=null&&(this.ngControl.valueAccessor=this),this.kvListFormGroup=this.fb.group({keyVals:this.fb.array([])},{validators:[this.propagateNestedErrors,this.oneMapRequiredValidator]}),this.kvListFormGroup.valueChanges.pipe(fe(this.destroyRef)).subscribe(()=>{this.updateModel()})}keyValsFormArray(){return this.kvListFormGroup.get("keyVals")}registerOnChange(i){this.propagateChange=i}registerOnTouched(i){}setDisabledState(i){this.disabled=i,this.disabled?this.kvListFormGroup.disable({emitEvent:!1}):this.kvListFormGroup.enable({emitEvent:!1})}writeValue(i){let u=Object.keys(i).map(e=>({key:e,value:i[e]}));if(this.keyValsFormArray().length===u.length)this.keyValsFormArray().patchValue(u,{emitEvent:!1});else{let e=[];u.forEach(a=>{e.push(this.fb.group({key:[a.key,[c.required,c.pattern(/(?:.|\s)*\S(&:.|\s)*/)]],value:[a.value,[c.required,c.pattern(/(?:.|\s)*\S(&:.|\s)*/)]]},{validators:this.uniqueKeyValuePairValidator?[this.duplicateValuesValidator]:[]}))}),this.kvListFormGroup.setControl("keyVals",this.fb.array(e,this.propagateNestedErrors),{emitEvent:!1})}}removeKeyVal(i){this.keyValsFormArray().removeAt(i)}addKeyVal(){this.keyValsFormArray().push(this.fb.group({key:["",[c.required,c.pattern(/(?:.|\s)*\S(&:.|\s)*/)]],value:["",[c.required,c.pattern(/(?:.|\s)*\S(&:.|\s)*/)]]},{validators:this.uniqueKeyValuePairValidator?[this.duplicateValuesValidator]:[]}))}validate(){let i=this.kvListFormGroup.get("keyVals").value;if(!i.length&&this.required)return{kvMapRequired:!0};if(!this.kvListFormGroup.valid)return{kvFieldsRequired:!0};if(this.uniqueKeyValuePairValidator){for(let u of i)if(u.key===u.value)return{uniqueKeyValuePair:!0}}return null}updateModel(){let i=this.kvListFormGroup.get("keyVals").value;if(this.required&&!i.length||!this.kvListFormGroup.valid)this.propagateChange(null);else{let u={};i.forEach(e=>{u[e.key]=e.value}),this.propagateChange(u)}}};ni.\u0275fac=function(u){return new(u||ni)(y(di),y(G),y(Le))},ni.\u0275cmp=T({type:ni,selectors:[["tb-kv-map-config"]],inputs:{disabled:"disabled",uniqueKeyValuePairValidator:"uniqueKeyValuePairValidator",labelText:"labelText",requiredText:"requiredText",keyText:"keyText",keyRequiredText:"keyRequiredText",valText:"valText",valRequiredText:"valRequiredText",hintText:"hintText",popupHelpLink:"popupHelpLink",required:"required"},features:[Te([{provide:Se,useExisting:ce(()=>ni),multi:!0},{provide:He,useExisting:ce(()=>ni),multi:!0}])],decls:22,vars:12,consts:[[1,"tb-form-panel","stroked",3,"formGroup"],[1,"tb-form-row","no-padding","no-border","space-between"],[1,"tb-form-panel-title"],["class","tb-form-panel-hint tb-error","translate","",4,"ngIf"],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-table"],[1,"tb-form-table-header"],[1,"tb-form-table-header-cell","field-space"],[1,"tb-form-table-header-cell","actions-header"],[1,"tb-form-table-body"],["class","tb-form-table-row",4,"ngFor","ngForOf"],["type","button","mat-stroked-button","","color","primary",3,"click"],[3,"hintText","popupHelpLink",4,"ngIf"],["translate","",1,"tb-form-panel-hint","tb-error"],[1,"tb-form-table-row"],["appearance","outline","subscriptSizing","dynamic",1,"tb-inline-field","field-space"],["matInput","",3,"placeholder","formControl"],[1,"tb-form-table-row-cell-buttons"],["type","button","mat-icon-button","","matTooltipPosition","above",3,"click","disabled","matTooltip"],[3,"hintText","popupHelpLink"]],template:function(u,e){u&1&&(o(0,"section",0)(1,"div",1)(2,"div",2),m(3),n(),C(4,Qm,2,1,"div",3)(5,Jm,2,0,"div",3)(6,$m,3,7,"div",3),n(),o(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7),m(11),n(),o(12,"div",7),m(13),n(),g(14,"div",8),n(),o(15,"div",9),C(16,Ym,10,10,"div",10),n()()(),o(17,"div")(18,"button",11),Y("click",function(){return e.addKeyVal()}),m(19),s(20,"translate"),n()(),C(21,Wm,1,2,"tb-example-hint",12),n()),u&2&&(p("formGroup",e.kvListFormGroup),r(3),q(e.labelText),r(),p("ngIf",e.kvListFormGroup.hasError("kvMapRequired")),r(),p("ngIf",e.kvListFormGroup.hasError("required")),r(),p("ngIf",e.kvListFormGroup.hasError("uniqueKeyValuePair")),r(5),q(e.keyText),r(2),q(e.valText),r(3),p("ngForOf",e.keyValsFormArray().controls),r(3),f(" ",d(20,10,"rule-node-config.key-val.add-mapping-entry")," "),r(2),p("ngIf",e.popupHelpLink||e.hintText))},dependencies:[z,B,Ge,_e,Z,R,k,ee,L,F,_,zt,S,V,he,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .field-space[_ngcontent-%COMP%]{flex:1 1 50%}[_nghost-%COMP%]   .actions-header[_ngcontent-%COMP%]{width:40px}']});var ot=ni;ft([St(),ct("design:type",Object)],ot.prototype,"disabled",void 0);ft([St(),ct("design:type",Object)],ot.prototype,"uniqueKeyValuePairValidator",void 0);ft([St(),ct("design:type",Object)],ot.prototype,"required",void 0);function Xm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.custom-table-name-required")," "))}function Zm(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-default-ttl-message")," "))}function ep(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.default-ttl-required")," "))}var pr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.saveToCustomTableConfigForm}onConfigurationSet(e){this.saveToCustomTableConfigForm=this.fb.group({tableName:[e?e.tableName:null,[c.required,c.pattern(/.*\S.*/)]],fieldsMapping:[e?e.fieldsMapping:null,[c.required]],defaultTtl:[e?e.defaultTtl:0,[c.required,c.min(0)]]})}prepareOutputConfig(e){return e.tableName=e.tableName.trim(),e}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-custom-table-config"]],features:[N],decls:24,vars:26,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","tableName"],["aria-hidden","false","aria-label","help-icon","matSuffix","",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"],[4,"ngIf"],["required","","formControlName","fieldsMapping",3,"labelText","requiredText","keyText","keyRequiredText","valText","valRequiredText","hintText"],[1,"mat-block","flex-1"],["type","number","min","0","step","1","matInput","","formControlName","defaultTtl","required",""]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.custom-table-name"),n(),g(4,"input",3),o(5,"mat-icon",4),s(6,"translate"),m(7," help "),n(),C(8,Xm,3,3,"mat-error",5),n(),g(9,"tb-kv-map-config",6),s(10,"translate"),s(11,"translate"),s(12,"translate"),s(13,"translate"),s(14,"translate"),s(15,"translate"),o(16,"mat-form-field",7)(17,"mat-label",2),m(18,"rule-node-config.default-ttl"),n(),g(19,"input",8),o(20,"mat-hint",2),m(21,"rule-node-config.default-ttl-zero-hint"),n(),C(22,Zm,3,3,"mat-error",5)(23,ep,3,3,"mat-error",5),n()()),a&2&&(p("formGroup",l.saveToCustomTableConfigForm),r(5),h("matTooltip",d(6,12,"rule-node-config.custom-table-hint")),r(3),p("ngIf",l.saveToCustomTableConfigForm.get("tableName").hasError("required")||l.saveToCustomTableConfigForm.get("tableName").hasError("pattern")),r(),p("labelText",d(10,14,"rule-node-config.fields-mapping"))("requiredText",d(11,16,"rule-node-config.fields-mapping-required"))("keyText",d(12,18,"rule-node-config.message-field"))("keyRequiredText",d(13,20,"rule-node-config.message-field-required"))("valText",d(14,22,"rule-node-config.table-col"))("valRequiredText",d(15,24,"rule-node-config.table-col-required"))("hintText","rule-node-config.fields-mapping-hint"),r(13),p("ngIf",l.saveToCustomTableConfigForm.get("defaultTtl").hasError("min")),r(),p("ngIf",l.saveToCustomTableConfigForm.get("defaultTtl").hasError("required")))},dependencies:[B,Z,R,k,O,de,Q,ae,ee,L,ge,F,_,D,ve,S,M,V,ot,E],encapsulation:2});let t=i;return t})();b();b();var tp=t=>({inputName:t});function ip(t,i){if(t&1&&(o(0,"mat-option",13),m(1),s(2,"translate"),o(3,"span",3),m(4,"rule-node-config.relations-query-config-direction-suffix"),n()()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.directionTypeTranslations.get(u))," ")}}function np(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-relation-level-error")," "))}function rp(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-relation-level-invalid")," "))}function op(t,i){t&1&&(o(0,"div",14),s(1,"translate"),o(2,"mat-slide-toggle",15),m(3),s(4,"translate"),n()()),t&2&&(h("tb-hint-tooltip-icon",d(1,2,"rule-node-config.last-level-device-relation-tooltip")),r(3),f(" ",d(4,4,"alias.last-level-relation")," "))}var Ki=(()=>{let i=class i extends Xe{get required(){return this.requiredValue}set required(e){this.requiredValue=yt(e)}constructor(e,a){super(),this.fb=e,this.destroyRef=a,this.directionTypes=Object.values(mt),this.directionTypeTranslations=Yt,this.entityType=W,this.propagateChange=null}ngOnInit(){this.deviceRelationsQueryFormGroup=this.fb.group({fetchLastLevelOnly:[!1,[]],direction:[null,[c.required]],maxLevel:[null,[c.min(1)]],relationType:[null],deviceTypes:[null,[c.required]]}),this.deviceRelationsQueryFormGroup.valueChanges.pipe(fe(this.destroyRef)).subscribe(e=>{this.deviceRelationsQueryFormGroup.valid?this.propagateChange(e):this.propagateChange(null)})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){this.disabled=e,this.disabled?this.deviceRelationsQueryFormGroup.disable({emitEvent:!1}):this.deviceRelationsQueryFormGroup.enable({emitEvent:!1})}writeValue(e){this.deviceRelationsQueryFormGroup.reset(e,{emitEvent:!1})}};i.\u0275fac=function(a){return new(a||i)(y(G),y(Le))},i.\u0275cmp=T({type:i,selectors:[["tb-device-relations-query-config"]],inputs:{disabled:"disabled",required:"required"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0}]),N],decls:24,vars:26,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"flex","flex-row","gap-5"],["subscriptSizing","dynamic","hideRequiredMarker","",1,"mat-block","max-w-50%","flex-full",2,"min-width","100px"],["translate",""],["required","","formControlName","direction"],[3,"value",4,"ngFor","ngForOf"],["floatLabel","always",1,"mat-block","max-w-50%","flex-full"],["matInput","","type","text","pattern","[0-9]*","inputmode","numeric","min","1","formControlName","maxLevel",3,"placeholder"],[4,"ngIf"],["class","tb-form-row no-border no-padding last-level-slide-toggle",3,"tb-hint-tooltip-icon",4,"ngIf"],["formControlName","relationType",1,"flex-1"],["required","","formControlName","deviceTypes",3,"label","entityType","emptyInputPlaceholder","filledInputPlaceholder"],["matSuffix","","aria-hidden","false","aria-label","help-icon","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"],[3,"value"],[1,"tb-form-row","no-border","no-padding","last-level-slide-toggle",3,"tb-hint-tooltip-icon"],["formControlName","fetchLastLevelOnly",1,"mat-slide"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label",3),m(4,"relation.direction"),n(),o(5,"mat-select",4),C(6,ip,5,4,"mat-option",5),n()(),o(7,"mat-form-field",6)(8,"mat-label",3),m(9,"rule-node-config.max-relation-level"),n(),g(10,"input",7),s(11,"translate"),C(12,np,3,3,"mat-error",8)(13,rp,3,3,"mat-error",8),n()(),C(14,op,5,6,"div",9),g(15,"tb-relation-type-autocomplete",10),o(16,"tb-entity-subtype-list",11),s(17,"translate"),s(18,"translate"),s(19,"translate"),o(20,"mat-icon",12),s(21,"translate"),s(22,"translate"),m(23,"help"),n()()()),a&2&&(p("formGroup",l.deviceRelationsQueryFormGroup),r(6),p("ngForOf",l.directionTypes),r(4),h("placeholder",d(11,11,"rule-node-config.unlimited-level")),r(2),p("ngIf",l.deviceRelationsQueryFormGroup.get("maxLevel").hasError("min")),r(),p("ngIf",l.deviceRelationsQueryFormGroup.get("maxLevel").invalid),r(),p("ngIf",l.deviceRelationsQueryFormGroup.get("maxLevel").value>1),r(2),p("label",d(17,13,"rule-node-config.device-profiles"))("entityType",l.entityType.DEVICE)("emptyInputPlaceholder",d(18,15,"rule-node-config.add-device-profile"))("filledInputPlaceholder",d(19,17,"rule-node-config.add-device-profile")),r(4),h("matTooltip",le(22,21,"rule-node-config.chip-help",Fe(24,tp,d(21,19,"rule-node-config.device-profile")))))},dependencies:[z,B,Ko,Wt,Z,R,k,O,Q,ae,te,X,ee,ue,L,F,_,D,vi,S,M,V,Ce,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .last-level-slide-toggle[_ngcontent-%COMP%]{margin:8px 0 24px}']});let t=i;return t})();b();function mp(t,i){if(t&1&&(o(0,"mat-option",13),m(1),s(2,"translate"),o(3,"span",4),m(4,"rule-node-config.relations-query-config-direction-suffix"),n()()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.directionTypeTranslations.get(u))," ")}}function pp(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-relation-level-error")," "))}function sp(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-relation-level-invalid")," "))}function dp(t,i){t&1&&(o(0,"div",14),s(1,"translate"),o(2,"mat-slide-toggle",15),m(3),s(4,"translate"),n()()),t&2&&(h("tb-hint-tooltip-icon",d(1,2,"rule-node-config.last-level-relation-tooltip")),r(3),f(" ",d(4,4,"alias.last-level-relation")," "))}var mi=(()=>{let i=class i extends Xe{get required(){return this.requiredValue}set required(e){this.requiredValue=yt(e)}constructor(e,a){super(),this.fb=e,this.destroyRef=a,this.directionTypes=Object.values(mt),this.directionTypeTranslations=Yt,this.propagateChange=null}ngOnInit(){this.relationsQueryFormGroup=this.fb.group({fetchLastLevelOnly:[!1,[]],direction:[null,[c.required]],maxLevel:[null,[c.min(1)]],filters:[null]}),this.relationsQueryFormGroup.valueChanges.pipe(fe(this.destroyRef)).subscribe(e=>{this.relationsQueryFormGroup.valid?this.propagateChange(e):this.propagateChange(null)})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){this.disabled=e,this.disabled?this.relationsQueryFormGroup.disable({emitEvent:!1}):this.relationsQueryFormGroup.enable({emitEvent:!1})}writeValue(e){this.relationsQueryFormGroup.reset(e||{},{emitEvent:!1})}};i.\u0275fac=function(a){return new(a||i)(y(G),y(Le))},i.\u0275cmp=T({type:i,selectors:[["tb-relations-query-config"]],inputs:{disabled:"disabled",required:"required"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0}]),N],decls:22,vars:9,consts:[[1,"tb-form-panel","stroked",3,"formGroup"],["translate","",1,"tb-form-panel-title","tb-required"],[1,"flex","flex-row","gap-4"],["hideRequiredMarker","",1,"mat-block","max-w-50%","flex-full",2,"min-width","100px"],["translate",""],["required","","formControlName","direction"],[3,"value",4,"ngFor","ngForOf"],["floatLabel","always",1,"mat-block","max-w-50%","flex-full"],["matInput","","type","text","pattern","[0-9]*","min","1","inputmode","numeric","formControlName","maxLevel",3,"placeholder"],[4,"ngIf"],["class","tb-form-row no-border no-padding last-level-slide-toggle",3,"tb-hint-tooltip-icon",4,"ngIf"],["translate","",1,"tb-form-panel-title"],["formControlName","filters"],[3,"value"],[1,"tb-form-row","no-border","no-padding","last-level-slide-toggle",3,"tb-hint-tooltip-icon"],["formControlName","fetchLastLevelOnly",1,"mat-slide"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),m(2,"rule-node-config.relations-query"),n(),o(3,"section")(4,"div",2)(5,"mat-form-field",3)(6,"mat-label",4),m(7,"relation.direction"),n(),o(8,"mat-select",5),C(9,mp,5,4,"mat-option",6),n()(),o(10,"mat-form-field",7)(11,"mat-label",4),m(12,"rule-node-config.max-relation-level"),n(),g(13,"input",8),s(14,"translate"),C(15,pp,3,3,"mat-error",9)(16,sp,3,3,"mat-error",9),n()(),C(17,dp,5,6,"div",10),n(),o(18,"section",0)(19,"div",11),m(20,"relation.relation-filters"),n(),g(21,"tb-relation-filters",12),n()()),a&2&&(p("formGroup",l.relationsQueryFormGroup),r(9),p("ngForOf",l.directionTypes),r(4),h("placeholder",d(14,7,"rule-node-config.unlimited-level")),r(2),p("ngIf",l.relationsQueryFormGroup.get("maxLevel").hasError("min")),r(),p("ngIf",l.relationsQueryFormGroup.get("maxLevel").invalid),r(),p("ngIf",l.relationsQueryFormGroup.get("maxLevel").value>1),r(),p("formGroup",l.relationsQueryFormGroup))},dependencies:[z,B,R,k,O,Q,te,X,ue,L,F,_,D,vi,S,M,V,Ce,hn,E],encapsulation:2});let t=i;return t})();b();var fp=["chipList"],gp=["messageTypeAutocomplete"],Cp=["messageTypeInput"],yp=t=>({inputName:t}),vp=t=>({messageType:t});function hp(t,i){if(t&1&&(o(0,"mat-label"),m(1),n()),t&2){let u=v();r(),q(u.label)}}function bp(t,i){if(t&1){let u=pe();o(0,"mat-chip-row",13),Y("removed",function(){let a=ne(u).$implicit,l=v();return re(l.remove(a))}),m(1),o(2,"mat-icon",14),m(3,"close"),n()()}if(t&2){let u=i.$implicit;p("removable",!0),r(),f(" ",u.name," ")}}function xp(t,i){if(t&1&&(o(0,"mat-option",15),g(1,"span",16),s(2,"highlight"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),p("innerHTML",le(2,2,u.name,e.searchText),we)}}function Tp(t,i){t&1&&(o(0,"div")(1,"span",21),m(2,"rule-node-config.no-message-types-found"),n()())}function _p(t,i){if(t&1&&(o(0,"span"),m(1),s(2,"translate"),n()),t&2){let u=v(2);r(),f(" ",le(2,1,"rule-node-config.no-message-type-matching",Fe(4,vp,u.truncate.transform(u.searchText,!0,6,"...")))," ")}}function Sp(t,i){if(t&1){let u=pe();o(0,"mat-option",17)(1,"div",18),Y("click",function(a){return ne(u),re(a.stopPropagation())}),C(2,Tp,3,0,"div",19)(3,_p,3,6,"ng-template",null,3,Ot),o(5,"span")(6,"a",20),Y("click",function(a){ne(u);let l=v();return re(l.createMessageType(a,l.searchText))}),m(7,"rule-node-config.create-new-message-type"),n()()()()}if(t&2){let u=$e(4),e=v();p("value",null),r(2),p("ngIf",!e.textIsNotEmpty(e.searchText))("ngIfElse",u)}}function Fp(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.select-message-types-required")," "))}var Hi=(()=>{let i=class i extends Xe{get required(){return this.requiredValue}set required(e){this.requiredValue=yt(e)}constructor(e,a,l){super(),this.translate=e,this.truncate=a,this.fb=l,this.placeholder="rule-node-config.add-message-type",this.separatorKeysCodes=[13,188,186],this.messageTypes=[],this.messageTypesList=[],this.searchText="",this.propagateChange=x=>{},this.messageTypeConfigForm=this.fb.group({messageType:[null]});for(let x of Object.keys(Lt))this.messageTypesList.push({name:yn.get(Lt[x]),value:x})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}ngOnInit(){this.filteredMessageTypes=this.messageTypeConfigForm.get("messageType").valueChanges.pipe(po(""),Zi(e=>e||""),lo(e=>this.fetchMessageTypes(e)),mo())}setDisabledState(e){this.disabled=e,this.disabled?this.messageTypeConfigForm.disable({emitEvent:!1}):this.messageTypeConfigForm.enable({emitEvent:!1})}writeValue(e){this.searchText="",this.messageTypes.length=0,e&&e.forEach(a=>{let l=this.messageTypesList.find(x=>x.value===a);l?this.messageTypes.push({name:l.name,value:l.value}):this.messageTypes.push({name:a,value:a})})}displayMessageTypeFn(e){return e?e.name:void 0}textIsNotEmpty(e){return e&&e.length>0}createMessageType(e,a){e.preventDefault(),this.transformMessageType(a)}add(e){this.transformMessageType(e.value)}fetchMessageTypes(e){if(this.searchText=e,this.searchText&&this.searchText.length){let a=this.searchText.toUpperCase();return Ln(this.messageTypesList.filter(l=>l.name.toUpperCase().includes(a)))}else return Ln(this.messageTypesList)}transformMessageType(e){if((e||"").trim()){let a,l=e.trim(),x=this.messageTypesList.find($=>$.name===l);x?a={name:x.name,value:x.value}:a={name:l,value:l},a&&this.addMessageType(a)}this.clear("")}remove(e){let a=this.messageTypes.indexOf(e);a>=0&&(this.messageTypes.splice(a,1),this.updateModel())}selected(e){this.addMessageType(e.option.value),this.clear("")}addMessageType(e){this.messageTypes.findIndex(l=>l.value===e.value)===-1&&(this.messageTypes.push(e),this.updateModel())}onFocus(){this.messageTypeConfigForm.get("messageType").updateValueAndValidity({onlySelf:!0,emitEvent:!0})}clear(e=""){this.messageTypeInput.nativeElement.value=e,this.messageTypeConfigForm.get("messageType").patchValue(null,{emitEvent:!0}),setTimeout(()=>{this.messageTypeInput.nativeElement.blur(),this.messageTypeInput.nativeElement.focus()},0)}updateModel(){let e=this.messageTypes.map(a=>a.value);this.required?(this.chipList.errorState=!e.length,this.propagateChange(e.length>0?e:null)):(this.chipList.errorState=!1,this.propagateChange(e))}};i.\u0275fac=function(a){return new(a||i)(y(me),y(Ho),y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-message-types-config"]],viewQuery:function(a,l){if(a&1&&(De(fp,5),De(gp,5),De(Cp,5)),a&2){let x;Ve(x=qe())&&(l.chipList=x.first),Ve(x=qe())&&(l.matAutocomplete=x.first),Ve(x=qe())&&(l.messageTypeInput=x.first)}},inputs:{required:"required",label:"label",placeholder:"placeholder",disabled:"disabled"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0}]),N],decls:20,vars:27,consts:[["chipList",""],["messageTypeInput","","origin","matAutocompleteOrigin"],["messageTypeAutocomplete","matAutocomplete"],["searchNotEmpty",""],[2,"width","100%",3,"formGroup"],[4,"ngIf"],[3,"required"],[3,"removable","removed",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","messageType","matAutocompleteOrigin","",3,"focusin","matChipInputTokenEnd","placeholder","matAutocompleteConnectedTo","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes"],[1,"tb-autocomplete",3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],["aria-hidden","false","aria-label","help-icon","matSuffix","","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"],[3,"removed","removable"],["matChipRemove",""],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["translate","",3,"click"],["translate",""]],template:function(a,l){if(a&1){let x=pe();o(0,"mat-form-field",4),C(1,hp,2,1,"mat-label",5),o(2,"mat-chip-grid",6,0),C(4,bp,4,2,"mat-chip-row",7),o(5,"input",8,1),s(8,"translate"),Y("focusin",function(){return ne(x),re(l.onFocus())})("matChipInputTokenEnd",function(be){return ne(x),re(l.add(be))}),n()(),o(9,"mat-autocomplete",9,2),Y("optionSelected",function(be){return ne(x),re(l.selected(be))}),C(11,xp,3,5,"mat-option",10),s(12,"async"),C(13,Sp,8,3,"mat-option",11),s(14,"async"),n(),o(15,"mat-icon",12),s(16,"translate"),s(17,"translate"),m(18,"help"),n(),C(19,Fp,3,3,"mat-error",5),n()}if(a&2){let x,$=$e(3),be=$e(7),On=$e(10);p("formGroup",l.messageTypeConfigForm),r(),p("ngIf",l.label),r(),p("required",l.required),r(2),p("ngForOf",l.messageTypes),r(),h("placeholder",d(8,14,l.placeholder)),p("matAutocompleteConnectedTo",be)("matAutocomplete",On)("matChipInputFor",$)("matChipInputSeparatorKeyCodes",l.separatorKeysCodes),r(4),p("displayWith",l.displayMessageTypeFn),r(2),p("ngForOf",d(12,16,l.filteredMessageTypes)),r(2),p("ngIf",((x=d(14,18,l.filteredMessageTypes))==null?null:x.length)===0),r(2),h("matTooltip",le(17,22,"rule-node-config.chip-help",Fe(25,yp,d(16,20,"rule-node-config.message-type")))),r(4),p("ngIf",$.errorState)}},dependencies:[z,B,Z,R,k,O,Q,ae,X,ee,sn,dn,Vo,xi,Ti,hi,bi,L,F,_,S,M,V,jt,Cn,E],encapsulation:2});let t=i;return t})();b();function Ep(t,i){if(t&1&&(o(0,"mat-option",12),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u)("disabled",u==="cert.PEM"&&e.disableCertPemCredentials),r(),f(" ",d(2,3,e.credentialsTypeTranslationsMap.get(u))," ")}}function Mp(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.credentials-type-required")," "))}function Np(t,i){}function Ap(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.username-required")," "))}function Dp(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.password-required")," "))}function Vp(t,i){if(t&1&&(o(0,"mat-form-field",4)(1,"mat-label",2),m(2,"rule-node-config.username"),n(),g(3,"input",13),C(4,Ap,3,3,"mat-error",7),n(),o(5,"mat-form-field",4)(6,"mat-label",2),m(7,"rule-node-config.password"),n(),g(8,"input",14)(9,"tb-toggle-password",15),C(10,Dp,3,3,"mat-error",7),n()),t&2){let u=v(2);r(4),p("ngIf",u.credentialsConfigFormGroup.get("username").hasError("required")),r(4),p("required",u.passwordFieldRequired),r(2),p("ngIf",u.credentialsConfigFormGroup.get("password").hasError("required"))}}function qp(t,i){if(t&1){let u=pe();o(0,"div",16),m(1),s(2,"translate"),n(),o(3,"tb-file-input",17),s(4,"translate"),s(5,"translate"),Y("fileNameChanged",function(a){ne(u);let l=v(2);return re(l.credentialsConfigFormGroup.get("caCertFileName").setValue(a))}),n(),o(6,"tb-file-input",18),s(7,"translate"),s(8,"translate"),Y("fileNameChanged",function(a){ne(u);let l=v(2);return re(l.credentialsConfigFormGroup.get("certFileName").setValue(a))}),n(),o(9,"tb-file-input",19),s(10,"translate"),s(11,"translate"),Y("fileNameChanged",function(a){ne(u);let l=v(2);return re(l.credentialsConfigFormGroup.get("privateKeyFileName").setValue(a))}),n(),o(12,"mat-form-field",4)(13,"mat-label",2),m(14,"rule-node-config.private-key-password"),n(),g(15,"input",20)(16,"tb-toggle-password",15),n()}if(t&2){let u=v(2);r(),q(d(2,10,"rule-node-config.credentials-pem-hint")),r(2),h("label",d(4,12,"rule-node-config.ca-cert")),h("dropLabel",d(5,14,"rule-node-config.drop-file")),p("existingFileName",u.credentialsConfigFormGroup.get("caCertFileName").value),r(3),h("label",d(7,16,"rule-node-config.cert")),h("dropLabel",d(8,18,"rule-node-config.drop-file")),p("existingFileName",u.credentialsConfigFormGroup.get("certFileName").value),r(3),h("label",d(10,20,"rule-node-config.private-key")),h("dropLabel",d(11,22,"rule-node-config.drop-file")),p("existingFileName",u.credentialsConfigFormGroup.get("privateKeyFileName").value)}}function kp(t,i){if(t&1&&(o(0,"mat-form-field",4)(1,"mat-label",2),m(2,"rule-node-config.credentials-type"),n(),o(3,"mat-select",5),C(4,Ep,3,5,"mat-option",6),n(),C(5,Mp,3,3,"mat-error",7),n(),o(6,"section",8),C(7,Np,0,0,"ng-template",9)(8,Vp,11,3,"ng-template",10)(9,qp,17,24,"ng-template",11),n()),t&2){let u=v();r(4),p("ngForOf",u.allCredentialsTypes),r(),p("ngIf",u.credentialsConfigFormGroup.get("type").hasError("required")),r(),p("ngSwitch",u.credentialsConfigFormGroup.get("type").value)}}var pi=(()=>{let i=class i extends Xe{get required(){return this.requiredValue}set required(e){this.requiredValue=yt(e)}constructor(e,a){super(),this.fb=e,this.destroyRef=a,this.disableCertPemCredentials=!1,this.passwordFieldRequired=!0,this.allCredentialsTypes=ha,this.credentialsTypeTranslationsMap=ba,this.propagateChange=l=>{}}ngOnInit(){this.credentialsConfigFormGroup=this.fb.group({type:[null,[c.required]],username:[null,[]],password:[null,[]],caCert:[null,[]],caCertFileName:[null,[]],privateKey:[null,[]],privateKeyFileName:[null,[]],cert:[null,[]],certFileName:[null,[]]}),this.credentialsConfigFormGroup.valueChanges.pipe(fe(this.destroyRef)).subscribe(()=>{this.updateView()}),this.credentialsConfigFormGroup.get("type").valueChanges.pipe(fe(this.destroyRef)).subscribe(()=>{this.credentialsTypeChanged()})}ngOnChanges(e){for(let a of Object.keys(e)){let l=e[a];!l.firstChange&&l.currentValue!==l.previousValue&&l.currentValue&&a==="disableCertPemCredentials"&&this.credentialsConfigFormGroup.get("type").value==="cert.PEM"&&setTimeout(()=>{this.credentialsConfigFormGroup.get("type").patchValue("anonymous",{emitEvent:!0})})}}writeValue(e){I(e)&&(this.credentialsConfigFormGroup.reset(e,{emitEvent:!1}),this.updateValidators())}setDisabledState(e){e?this.credentialsConfigFormGroup.disable({emitEvent:!1}):(this.credentialsConfigFormGroup.enable({emitEvent:!1}),this.updateValidators())}updateView(){let e=this.credentialsConfigFormGroup.value,a=e.type;switch(a){case"anonymous":e={type:a};break;case"basic":e={type:a,username:e.username,password:e.password};break;case"cert.PEM":delete e.username;break}this.propagateChange(e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(){}validate(){return this.credentialsConfigFormGroup.valid?null:{credentialsConfig:{valid:!1}}}credentialsTypeChanged(){this.credentialsConfigFormGroup.patchValue({username:null,password:null,caCert:null,caCertFileName:null,privateKey:null,privateKeyFileName:null,cert:null,certFileName:null}),this.updateValidators()}updateValidators(e=!1){let a=this.credentialsConfigFormGroup.get("type").value;switch(e&&this.credentialsConfigFormGroup.reset({type:a},{emitEvent:!1}),this.credentialsConfigFormGroup.setValidators([]),this.credentialsConfigFormGroup.get("username").setValidators([]),this.credentialsConfigFormGroup.get("password").setValidators([]),a){case"anonymous":break;case"basic":this.credentialsConfigFormGroup.get("username").setValidators([c.required]),this.credentialsConfigFormGroup.get("password").setValidators(this.passwordFieldRequired?[c.required]:[]);break;case"cert.PEM":this.credentialsConfigFormGroup.setValidators([this.requiredFilesSelected(c.required,[["caCert","caCertFileName"],["privateKey","privateKeyFileName","cert","certFileName"]])]);break}this.credentialsConfigFormGroup.get("username").updateValueAndValidity({emitEvent:e}),this.credentialsConfigFormGroup.get("password").updateValueAndValidity({emitEvent:e}),this.credentialsConfigFormGroup.updateValueAndValidity({emitEvent:e})}requiredFilesSelected(e,a=null){return l=>(a||(a=[Object.keys(l.controls)]),l?.controls&&a.some($=>$.every(be=>!e(l.controls[be])))?null:{notAllRequiredFilesSelected:!0})}};i.\u0275fac=function(a){return new(a||i)(y(G),y(Le))},i.\u0275cmp=T({type:i,selectors:[["tb-credentials-config"]],inputs:{required:"required",disableCertPemCredentials:"disableCertPemCredentials",passwordFieldRequired:"passwordFieldRequired"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0},{provide:He,useExisting:ce(()=>i),multi:!0}]),N,co],decls:9,vars:4,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"tb-credentials-config-panel-group"],["translate",""],["matExpansionPanelContent",""],[1,"mat-block"],["formControlName","type","required",""],[3,"value","disabled",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","flex-col",3,"ngSwitch"],["ngSwitchCase","anonymous"],["ngSwitchCase","basic"],["ngSwitchCase","cert.PEM"],[3,"value","disabled"],["required","","matInput","","formControlName","username"],["type","password","matInput","","formControlName","password",3,"required"],["matSuffix",""],[1,"tb-hint"],["formControlName","caCert","inputId","caCertSelect","noFileText","rule-node-config.no-file",3,"fileNameChanged","existingFileName","label","dropLabel"],["formControlName","cert","inputId","CertSelect","noFileText","rule-node-config.no-file",3,"fileNameChanged","existingFileName","label","dropLabel"],["formControlName","privateKey","inputId","privateKeySelect","noFileText","rule-node-config.no-file",2,"padding-bottom","8px",3,"fileNameChanged","existingFileName","label","dropLabel"],["type","password","matInput","","formControlName","password"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-expansion-panel",1)(2,"mat-expansion-panel-header")(3,"mat-panel-title",2),m(4,"rule-node-config.credentials"),n(),o(5,"mat-panel-description"),m(6),s(7,"translate"),n()(),C(8,kp,10,3,"ng-template",3),n()()),a&2&&(p("formGroup",l.credentialsConfigFormGroup),r(6),f(" ",d(7,2,l.credentialsTypeTranslationsMap.get(l.credentialsConfigFormGroup.get("type").value))," "))},dependencies:[z,B,en,tn,R,k,O,Q,ae,te,X,Ze,et,tt,an,on,L,F,_,D,S,M,Si,V,Xt,E],encapsulation:2});let t=i;return t})();b();function Bp(t,i){t&1&&(o(0,"button",22),s(1,"translate"),o(2,"mat-icon"),m(3,"drag_handle"),n()()),t&2&&h("matTooltip",d(1,1,"action.drag"))}function Op(t,i){if(t&1&&(o(0,"span",23),m(1),n()),t&2){let u=v().$implicit;r(),f("",u.get("name").value,".")}}function Lp(t,i){if(t&1&&(o(0,"mat-option",24),m(1),s(2,"translate"),o(3,"small",25),m(4),s(5,"translate"),n()()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),f(" ",d(2,3,e.argumentTypeMap.get(u).name)," "),r(3),f(" ",d(5,5,e.argumentTypeMap.get(u).description)," ")}}function Rp(t,i){t&1&&(o(0,"mat-error",13),m(1," rule-node-config.argument-source-field-input-required "),n())}function Pp(t,i){t&1&&(o(0,"mat-error",13),m(1," rule-node-config.argument-key-field-input-required "),n())}function wp(t,i){if(t&1&&(o(0,"mat-form-field",26)(1,"mat-label",13),m(2,"rule-node-config.argument-key-field-input"),n(),g(3,"input",27),o(4,"mat-icon",28),s(5,"translate"),m(6," help "),n(),C(7,Pp,2,0,"mat-error",16),n()),t&2){let u=v().$implicit;r(3),p("formControl",u.get("key")),r(),h("matTooltip",d(5,3,"rule-node-config.math-templatization-tooltip")),r(3),p("ngIf",u.get("key").hasError("required"))}}function Gp(t,i){t&1&&(o(0,"mat-error",13),m(1," rule-node-config.constant-value-field-input-required "),n())}function jp(t,i){if(t&1&&(o(0,"mat-form-field",29)(1,"mat-label",13),m(2,"rule-node-config.constant-value-field-input"),n(),g(3,"input",30),C(4,Gp,2,0,"mat-error",16),n()),t&2){let u=v().$implicit;r(3),p("formControl",u.get("key")),r(),p("ngIf",u.get("key").hasError("required"))}}function Up(t,i){if(t&1&&(o(0,"mat-form-field",26)(1,"mat-label",13),m(2,"rule-node-config.default-value-field-input"),n(),g(3,"input",31),n()),t&2){let u=v().$implicit;r(3),p("formControl",u.get("defaultValue"))}}function Kp(t,i){if(t&1&&(o(0,"mat-option",33),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(3);p("value",u),r(),f(" ",d(2,2,e.attributeScopeMap.get(u))," ")}}function Hp(t,i){t&1&&(o(0,"mat-error",13),m(1," rule-node-config.attribute-scope-field-input-required "),n())}function zp(t,i){if(t&1&&(o(0,"mat-form-field",12)(1,"mat-label",13),m(2,"rule-node-config.attribute-scope-field-input"),n(),o(3,"mat-select",14),C(4,Kp,3,4,"mat-option",32),n(),C(5,Hp,2,0,"mat-error",16),n()),t&2){let u=v().$implicit,e=v();r(3),p("formControl",u.get("attributeScope")),r(),p("ngForOf",e.attributeScope),r(),p("ngIf",u.get("attributeScope").hasError("required"))}}function Qp(t,i){if(t&1){let u=pe();o(0,"button",34),s(1,"translate"),Y("click",function(){ne(u);let a=v().index,l=v();return re(l.removeArgument(a))}),o(2,"mat-icon"),m(3,"close"),n()()}t&2&&h("matTooltip",d(1,1,"action.remove"))}function Jp(t,i){if(t&1&&(o(0,"mat-list-item",6)(1,"div",7),C(2,Bp,4,3,"button",8),o(3,"div",9),C(4,Op,2,1,"span",10),o(5,"div",11)(6,"mat-form-field",12)(7,"mat-label",13),m(8,"rule-node-config.argument-source-field-input"),n(),o(9,"mat-select",14)(10,"mat-select-trigger"),m(11),s(12,"translate"),n(),C(13,Lp,6,7,"mat-option",15),n(),C(14,Rp,2,0,"mat-error",16),n(),o(15,"div",17),C(16,wp,8,5,"mat-form-field",18)(17,jp,5,2,"mat-form-field",19)(18,Up,4,1,"mat-form-field",18),n(),C(19,zp,6,3,"mat-form-field",20),n(),C(20,Qp,4,3,"button",21),n()()()),t&2){let u,e=i.$implicit,a=v();p("cdkDragDisabled",a.disabled),r(2),p("ngIf",!a.disabled),r(2),p("ngIf",a.displayArgumentName),r(5),p("formControl",e.get("type")),r(2),f(" ",d(12,12,(u=a.argumentTypeMap.get(e.get("type").value))==null?null:u.name)," "),r(2),p("ngForOf",a.arguments),r(),p("ngIf",e.get("type").hasError("required")),r(2),p("ngIf",e.get("type").value&&e.get("type").value!==a.ArgumentType.CONSTANT),r(),p("ngIf",e.get("type").value===a.ArgumentType.CONSTANT),r(),p("ngIf",e.get("type").value&&e.get("type").value!==a.ArgumentType.CONSTANT),r(),p("ngIf",e.get("type").value===a.ArgumentType.ATTRIBUTE),r(),p("ngIf",!a.disabled)}}function $p(t,i){t&1&&(o(0,"div")(1,"span",35),m(2,"rule-node-config.no-arguments-prompt"),n()())}var zi=(()=>{let i=class i extends Xe{get function(){return this.functionValue}set function(e){e&&this.functionValue!==e&&(this.functionValue=e,this.setupArgumentsFormGroup(!0))}constructor(e,a){super(),this.fb=e,this.destroyRef=a,this.maxArgs=16,this.minArgs=1,this.displayArgumentName=!1,this.mathFunctionMap=wi,this.ArgumentType=Nt,this.attributeScopeMap=Fn,this.argumentTypeMap=Ea,this.arguments=Object.values(Nt),this.attributeScope=Object.values(li),this.propagateChange=null}ngOnInit(){this.argumentsFormGroup=this.fb.group({arguments:this.fb.array([])}),this.argumentsFormGroup.valueChanges.pipe(fe(this.destroyRef)).subscribe(()=>{this.updateModel()}),this.setupArgumentsFormGroup()}onDrop(e){let a=this.argumentsFormArray,l=a.at(e.previousIndex);a.removeAt(e.previousIndex),a.insert(e.currentIndex,l),this.updateArgumentNames()}get argumentsFormArray(){return this.argumentsFormGroup.get("arguments")}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){this.disabled=e,this.disabled?this.argumentsFormGroup.disable({emitEvent:!1}):(this.argumentsFormGroup.enable({emitEvent:!1}),this.argumentsFormArray.controls.forEach(a=>this.updateArgumentControlValidators(a)))}writeValue(e){let a=[];e&&e.forEach((l,x)=>{a.push(this.createArgumentControl(l,x))}),this.argumentsFormGroup.setControl("arguments",this.fb.array(a),{emitEvent:!1}),this.setupArgumentsFormGroup()}removeArgument(e){this.argumentsFormArray.removeAt(e),this.updateArgumentNames()}addArgument(e=!0){let a=this.argumentsFormArray,l=this.createArgumentControl(null,a.length);a.push(l,{emitEvent:e})}validate(){return this.argumentsFormGroup.valid?null:{argumentsRequired:!0}}setupArgumentsFormGroup(e=!1){if(this.function&&(this.maxArgs=this.mathFunctionMap.get(this.function).maxArgs,this.minArgs=this.mathFunctionMap.get(this.function).minArgs,this.displayArgumentName=this.function===H.CUSTOM),this.argumentsFormGroup){for(this.argumentsFormGroup.get("arguments").setValidators([c.minLength(this.minArgs),c.maxLength(this.maxArgs)]);this.argumentsFormArray.length>this.maxArgs;)this.removeArgument(this.maxArgs-1);for(;this.argumentsFormArray.length<this.minArgs;)this.addArgument(e);this.argumentsFormGroup.get("arguments").updateValueAndValidity({emitEvent:!1})}}createArgumentControl(e,a){let l=this.fb.group({type:[e?.type,[c.required]],key:[e?.key,[c.required]],name:[zn[a],[c.required]],attributeScope:[e?.attributeScope??li.SERVER_SCOPE,[c.required]],defaultValue:[e?.defaultValue?e?.defaultValue:null]});return this.updateArgumentControlValidators(l),l.get("type").valueChanges.pipe(fe(this.destroyRef)).subscribe(()=>{this.updateArgumentControlValidators(l),l.get("attributeScope").updateValueAndValidity({emitEvent:!1}),l.get("defaultValue").updateValueAndValidity({emitEvent:!1})}),l}updateArgumentControlValidators(e){let a=e.get("type").value;a===Nt.ATTRIBUTE?e.get("attributeScope").enable({emitEvent:!1}):e.get("attributeScope").disable({emitEvent:!1}),a&&a!==Nt.CONSTANT?e.get("defaultValue").enable({emitEvent:!1}):e.get("defaultValue").disable({emitEvent:!1})}updateArgumentNames(){this.argumentsFormArray.controls.forEach((e,a)=>{e.get("name").setValue(zn[a])})}updateModel(){let e=this.argumentsFormArray.value;!e.length||!this.argumentsFormGroup.valid?this.propagateChange(null):this.propagateChange(e)}};i.\u0275fac=function(a){return new(a||i)(y(G),y(Le))},i.\u0275cmp=T({type:i,selectors:[["tb-arguments-map-config"]],inputs:{disabled:"disabled",function:"function"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0},{provide:He,useExisting:ce(()=>i),multi:!0}]),N],decls:10,vars:10,consts:[[1,"flex","flex-col"],[2,"max-height","500px","overflow","auto"],["cdkDropList","","cdkDropListOrientation","vertical",1,"tb-drop-list","arguments-list",3,"cdkDropListDropped","formGroup","cdkDropListDisabled"],["formArrayName","arguments","cdkDrag","","class","tb-argument tb-draggable","style","height: 100%",3,"cdkDragDisabled",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-button","","mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"click","disabled"],["formArrayName","arguments","cdkDrag","",1,"tb-argument","tb-draggable",2,"height","100%",3,"cdkDragDisabled"],[1,"flex","flex-1","flex-row","items-center","justify-start"],["mat-icon-button","","color","primary","cdkDragHandle","","class","tb-drag-handle handle","style","min-width: 40px; margin: 0","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[1,"flex","flex-1","flex-row","items-center","justify-start","gap-4"],["style","padding: 0 10px; min-width: 20px;",4,"ngIf"],[1,"flex","flex-1","flex-col"],[1,"mat-block"],["translate",""],["required","",3,"formControl"],["style","border-bottom: 1px solid #eee;",3,"value",4,"ngFor","ngForOf"],["translate","",4,"ngIf"],[1,"flex","flex-1","flex-row","xs:flex-col","gt-xs:gap-4"],["floatLabel","always","class","mat-block gt-xs:max-w-50% gt-xs:flex-full",4,"ngIf"],["floatLabel","always","class","mat-block flex-1",4,"ngIf"],["class","mat-block",4,"ngIf"],["mat-icon-button","","color","primary","style","min-width: 40px;","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","color","primary","cdkDragHandle","","matTooltipPosition","above",1,"tb-drag-handle","handle",2,"min-width","40px","margin","0",3,"matTooltip"],[2,"padding","0 10px","min-width","20px"],[2,"border-bottom","1px solid #eee",3,"value"],[2,"display","block","overflow","hidden","text-overflow","ellipsis","white-space","nowrap"],["floatLabel","always",1,"mat-block","gt-xs:max-w-50%","gt-xs:flex-full"],["matInput","","required","",3,"formControl"],["aria-hidden","false","aria-label","help-icon","matSuffix","","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"],["floatLabel","always",1,"mat-block","flex-1"],["matInput","","required","","step","1","min","0","type","number",3,"formControl"],["matInput","","step","1","type","number",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-icon-button","","color","primary","matTooltipPosition","above",2,"min-width","40px",3,"click","matTooltip"],["translate","",1,"tb-prompt","flex","items-center","justify-center"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"mat-list",2),Y("cdkDropListDropped",function($){return l.onDrop($)}),C(3,Jp,21,14,"mat-list-item",3),n()(),C(4,$p,3,0,"div",4),o(5,"button",5),Y("click",function(){return l.addArgument()}),o(6,"mat-icon"),m(7,"add"),n(),m(8),s(9,"translate"),n()()),a&2&&(r(),Ke("readonly",l.disabled),r(),p("formGroup",l.argumentsFormGroup)("cdkDropListDisabled",l.disabled),r(),p("ngForOf",l.argumentsFormArray.controls),r(),p("ngIf",!l.argumentsFormArray.length),r(),p("disabled",l.argumentsFormArray.length>=l.maxArgs),r(3),f(" ",d(9,8,"action.add")," "))},dependencies:[z,B,Ge,_e,Z,R,k,O,Q,ae,te,Jt,X,ee,Oo,Lo,Jo,Qo,zo,L,ge,F,_,D,ve,zt,S,mn,V,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .mat-mdc-list-item.tb-argument[_ngcontent-%COMP%]{border:solid rgba(0,0,0,.25) 1px;border-radius:4px;padding:10px 0;margin-bottom:16px}[_nghost-%COMP%]   .arguments-list[_ngcontent-%COMP%]{padding:0}']});let t=i;return t})();b();var Wp=["operationInput"];function Xp(t,i){if(t&1){let u=pe();o(0,"button",9),Y("click",function(){ne(u);let a=v();return re(a.clear())}),o(1,"mat-icon",10),m(2,"close"),n()()}}function Zp(t,i){if(t&1&&(o(0,"mat-option",11),g(1,"span",12),s(2,"highlight"),o(3,"small",13),m(4),n()()),t&2){let u=i.$implicit,e=v();p("value",u.value),r(),p("innerHTML",le(2,3,u.value+" | "+u.name,e.searchText),we),r(3),f(" ",u.description," ")}}function es(t,i){t&1&&(o(0,"mat-option",11)(1,"span",3),m(2,"rule-node-config.no-option-found"),n()()),t&2&&p("value",null)}var Qi=(()=>{let i=class i{get required(){return this.requiredValue}set required(e){this.requiredValue=yt(e)}constructor(e,a){this.translate=e,this.fb=a,this.searchText="",this.dirty=!1,this.mathOperation=[...wi.values()],this.propagateChange=null}ngOnInit(){this.mathFunctionForm=this.fb.group({operation:[""]}),this.filteredOptions=this.mathFunctionForm.get("operation").valueChanges.pipe(so(e=>{let a;typeof e=="string"&&H[e]?a=H[e]:a=null,this.updateView(a)}),Zi(e=>(this.searchText=e||"",e?this._filter(e):this.mathOperation.slice())))}_filter(e){let a=e.toLowerCase();return this.mathOperation.filter(l=>l.name.toLowerCase().includes(a)||l.value.toLowerCase().includes(a))}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){this.disabled=e,this.disabled?this.mathFunctionForm.disable({emitEvent:!1}):this.mathFunctionForm.enable({emitEvent:!1})}mathFunctionDisplayFn(e){if(e){let a=wi.get(e);return a.value+" | "+a.name}return""}writeValue(e){this.modelValue=e,this.mathFunctionForm.get("operation").setValue(e,{emitEvent:!1}),this.dirty=!0}updateView(e){this.modelValue!==e&&(this.modelValue=e,this.propagateChange(this.modelValue))}onFocus(){this.dirty&&(this.mathFunctionForm.get("operation").updateValueAndValidity({onlySelf:!0}),this.dirty=!1)}clear(){this.mathFunctionForm.get("operation").patchValue(""),setTimeout(()=>{this.operationInput.nativeElement.blur(),this.operationInput.nativeElement.focus()},0)}};i.\u0275fac=function(a){return new(a||i)(y(me),y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-math-function-autocomplete"]],viewQuery:function(a,l){if(a&1&&De(Wp,7),a&2){let x;Ve(x=qe())&&(l.operationInput=x.first)}},inputs:{required:"required",disabled:"disabled"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0}])],decls:12,vars:11,consts:[["operationInput",""],["auto","matAutocomplete"],[1,"mat-block",3,"formGroup"],["translate",""],["type","text","matInput","","formControlName","operation",3,"focusin","required","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],[3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"],[2,"display","block","overflow","hidden","text-overflow","ellipsis","white-space","nowrap"]],template:function(a,l){if(a&1){let x=pe();o(0,"mat-form-field",2)(1,"mat-label",3),m(2,"rule-node-config.functions-field-input"),n(),o(3,"input",4,0),Y("focusin",function(){return ne(x),re(l.onFocus())}),n(),C(5,Xp,3,0,"button",5),o(6,"mat-autocomplete",6,1),C(8,Zp,5,6,"mat-option",7),s(9,"async"),C(10,es,3,1,"mat-option",8),s(11,"async"),n()()}if(a&2){let x,$=$e(7);p("formGroup",l.mathFunctionForm),r(3),p("required",l.required)("matAutocomplete",$),r(2),p("ngIf",l.mathFunctionForm.get("operation").value),r(),p("displayWith",l.mathFunctionDisplayFn),r(2),p("ngForOf",d(9,7,l.filteredOptions)),r(2),p("ngIf",!((x=d(11,9,l.filteredOptions))!=null&&x.length))}},dependencies:[z,B,_e,Z,R,k,O,ae,X,sn,dn,L,F,_,D,S,M,V,jt,Cn],encapsulation:2});let t=i;return t})();b();function is(t,i){if(t&1&&(o(0,"mat-option",8),m(1),n()),t&2){let u=i.$implicit;p("value",u),r(),f(" ",u.name," ")}}function ns(t,i){if(t&1&&(o(0,"button",9),s(1,"translate"),o(2,"mat-icon",10),m(3,"content_copy "),n()()),t&2){let u=v();h("matTooltip",d(1,2,"rule-node-config.copy-message-type")),p("cbContent",u.messageTypeFormGroup.get("messageType").value)}}function rs(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.message-type-value-required")," "))}function os(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.message-type-value-max-length")," "))}var ri=class ri{set required(i){this.requiredValue!==i&&(this.requiredValue=i,this.updateValidators())}get required(){return this.requiredValue}constructor(i){this.fb=i,this.subscriptSizing="fixed",this.messageTypes=[{name:"Post attributes",value:"POST_ATTRIBUTES_REQUEST"},{name:"Post telemetry",value:"POST_TELEMETRY_REQUEST"},{name:"Custom",value:""}],this.propagateChange=()=>{},this.messageTypeFormGroup=this.fb.group({messageTypeAlias:[null,[c.required]],messageType:[{value:null,disabled:!0},[c.maxLength(255)]]}),this.messageTypeFormGroup.get("messageTypeAlias").valueChanges.pipe(fe()).subscribe(u=>this.updateMessageTypeValue(u)),this.messageTypeFormGroup.valueChanges.pipe(fe()).subscribe(()=>this.updateView())}registerOnTouched(i){}registerOnChange(i){this.propagateChange=i}writeValue(i){this.modelValue=i;let u=this.messageTypes.find(e=>e.value===i);u||(u=this.messageTypes.find(e=>e.value==="")),this.messageTypeFormGroup.get("messageTypeAlias").patchValue(u,{emitEvent:!1}),this.messageTypeFormGroup.get("messageType").patchValue(i,{emitEvent:!1})}validate(){return this.messageTypeFormGroup.valid?null:{messageTypeInvalid:!0}}setDisabledState(i){this.disabled=i,i?this.messageTypeFormGroup.disable({emitEvent:!1}):(this.messageTypeFormGroup.enable({emitEvent:!1}),this.messageTypeFormGroup.get("messageTypeAlias").value?.name!=="Custom"&&this.messageTypeFormGroup.get("messageType").disable({emitEvent:!1}))}updateView(){let i=this.messageTypeFormGroup.getRawValue().messageType;this.modelValue!==i&&(this.modelValue=i,this.propagateChange(this.modelValue))}updateValidators(){this.messageTypeFormGroup.get("messageType").setValidators(this.required?[c.required,c.maxLength(255)]:[c.maxLength(255)]),this.messageTypeFormGroup.get("messageType").updateValueAndValidity({emitEvent:!1})}updateMessageTypeValue(i){i?.name!=="Custom"?this.messageTypeFormGroup.get("messageType").disable({emitEvent:!1}):this.messageTypeFormGroup.get("messageType").enable({emitEvent:!1}),this.messageTypeFormGroup.get("messageType").patchValue(i.value??null)}};ri.\u0275fac=function(u){return new(u||ri)(y(G))},ri.\u0275cmp=T({type:ri,selectors:[["tb-output-message-type-autocomplete"]],inputs:{subscriptSizing:"subscriptSizing",disabled:"disabled",required:"required"},features:[Te([{provide:Se,useExisting:ce(()=>ri),multi:!0},{provide:He,useExisting:ce(()=>ri),multi:!0}])],decls:15,vars:14,consts:[[1,"tb-form-row","no-border","no-padding","tb-standard-fields","column-xs",3,"formGroup"],["hideRequiredMarker","",1,"flex",3,"subscriptSizing"],["formControlName","messageTypeAlias"],[3,"value",4,"ngFor","ngForOf"],[1,"flex",3,"subscriptSizing","hideRequiredMarker"],["matInput","","type","text","formControlName","messageType"],["type","button","matSuffix","","mat-icon-button","","aria-label","Copy","ngxClipboard","",3,"cbContent","matTooltip",4,"ngIf"],[4,"ngIf"],[3,"value"],["type","button","matSuffix","","mat-icon-button","","aria-label","Copy","ngxClipboard","",3,"cbContent","matTooltip"],["aria-hidden","false","aria-label","help-icon"]],template:function(u,e){u&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label"),m(3),s(4,"translate"),n(),o(5,"mat-select",2),C(6,is,2,2,"mat-option",3),n()(),o(7,"mat-form-field",4)(8,"mat-label"),m(9),s(10,"translate"),n(),g(11,"input",5),C(12,ns,4,4,"button",6)(13,rs,3,3,"mat-error",7)(14,os,3,3,"mat-error",7),n()()),u&2&&(p("formGroup",e.messageTypeFormGroup),r(),h("subscriptSizing",e.subscriptSizing),r(2),q(d(4,10,"rule-node-config.output-message-type")),r(3),p("ngForOf",e.messageTypes),r(),h("subscriptSizing",e.subscriptSizing),p("hideRequiredMarker",e.messageTypeFormGroup.get("messageType").disabled),r(2),q(d(10,12,"rule-node-config.message-type-value")),r(3),p("ngIf",e.messageTypeFormGroup.get("messageType").value),r(),p("ngIf",e.messageTypeFormGroup.get("messageType").hasError("required")),r(),p("ngIf",e.messageTypeFormGroup.get("messageType").hasError("maxlength")))},dependencies:[z,B,_e,Z,R,k,O,Q,ae,te,X,ee,Vt,L,F,_,S,M,E],encapsulation:2});var wt=ri;ft([St(),ct("design:type",Boolean)],wt.prototype,"disabled",void 0);ft([St(),ct("design:type",Object),ct("design:paramtypes",[Object])],wt.prototype,"required",null);b();var ls=(t,i)=>({keyText:t,valText:i});function ms(t,i){if(t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2){let u=v(2);r(),f(" ",d(2,1,u.keyRequiredText)," ")}}function ps(t,i){if(t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2){let u=v(2);r(),f(" ",d(2,1,u.valRequiredText)," ")}}function ss(t,i){if(t&1){let u=pe();o(0,"div",10)(1,"mat-form-field",11),g(2,"input",12),s(3,"translate"),C(4,ms,3,3,"mat-error",13),n(),o(5,"mat-form-field",11),g(6,"input",12),s(7,"translate"),C(8,ps,3,3,"mat-error",13),n(),o(9,"button",14),s(10,"translate"),s(11,"async"),Y("click",function(){let a=ne(u).index,l=v();return re(l.removeKeyVal(a))}),o(12,"mat-icon"),m(13,"close"),n()()()}if(t&2){let u=i.$implicit,e=v();r(2),h("placeholder",d(3,10,e.keyText)),p("formControl",u.get("key")),r(2),p("ngIf",u.get("key").hasError("required")),r(2),h("placeholder",d(7,12,e.valText)),p("formControl",u.get("value")),r(2),p("ngIf",u.get("value").hasError("required")),r(),Ke("!hidden",e.disabled),h("matTooltip",d(10,14,"rule-node-config.key-val.remove-entry")),p("disabled",d(11,16,e.isLoading$))}}function ds(t,i){if(t&1&&(g(0,"div",15),s(1,"translate"),s(2,"safe")),t&2){let u=v();p("innerHTML",le(2,3,d(1,1,u.hintText),"html"),we)}}var _t=(()=>{let i=class i extends Xe{get required(){return this.requiredValue}set required(e){this.requiredValue=yt(e)}constructor(e,a,l,x){super(),this.translate=e,this.injector=a,this.fb=l,this.destroyRef=x,this.propagateChange=null}ngOnInit(){this.ngControl=this.injector.get(yi),this.ngControl!=null&&(this.ngControl.valueAccessor=this),this.kvListFormGroup=this.fb.group({keyVals:this.fb.array([])}),this.kvListFormGroup.valueChanges.pipe(fe(this.destroyRef)).subscribe(()=>{this.updateModel()})}keyValsFormArray(){return this.kvListFormGroup.get("keyVals")}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){this.disabled=e,this.disabled?this.kvListFormGroup.disable({emitEvent:!1}):this.kvListFormGroup.enable({emitEvent:!1})}writeValue(e){let a=[];if(e)for(let l of Object.keys(e))Object.prototype.hasOwnProperty.call(e,l)&&a.push(this.fb.group({key:[l,[c.required]],value:[e[l],[c.required]]}));this.kvListFormGroup.setControl("keyVals",this.fb.array(a),{emitEvent:!1})}removeKeyVal(e){this.kvListFormGroup.get("keyVals").removeAt(e)}addKeyVal(){this.kvListFormGroup.get("keyVals").push(this.fb.group({key:["",[c.required]],value:["",[c.required]]}))}validate(){let e=this.kvListFormGroup.get("keyVals").value;if(!e.length&&this.required)return{kvMapRequired:!0};if(!this.kvListFormGroup.valid)return{kvFieldsRequired:!0};if(this.uniqueKeyValuePairValidator){for(let a of e)if(a.key===a.value)return{uniqueKeyValuePair:!0}}return null}updateModel(){let e=this.kvListFormGroup.get("keyVals").value;if(this.required&&!e.length||!this.kvListFormGroup.valid)this.propagateChange(null);else{let a={};e.forEach(l=>{a[l.key]=l.value}),this.propagateChange(a)}}};i.\u0275fac=function(a){return new(a||i)(y(me),y(di),y(G),y(Le))},i.\u0275cmp=T({type:i,selectors:[["tb-kv-map-config-old"]],inputs:{disabled:"disabled",uniqueKeyValuePairValidator:"uniqueKeyValuePairValidator",requiredText:"requiredText",keyText:"keyText",keyRequiredText:"keyRequiredText",valText:"valText",valRequiredText:"valRequiredText",hintText:"hintText",required:"required"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0},{provide:He,useExisting:ce(()=>i),multi:!0}]),N],decls:21,vars:26,consts:[[1,"tb-kv-map-config","flex","flex-col",3,"formGroup"],[1,"header","flex","flex-1","flex-row","gap-2"],[1,"cell","tb-required","flex-1"],["innerHTML",fo`&nbsp`,2,"width","52px"],[1,"body"],["class","row flex flex-row items-center justify-start gap-2","formArrayName","keyVals",4,"ngFor","ngForOf"],["class","tb-hint",3,"innerHTML",4,"ngIf"],[3,"error"],[2,"margin-top","16px"],["mat-button","","mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"click","disabled","matTooltip"],["formArrayName","keyVals",1,"row","flex","flex-row","items-center","justify-start","gap-2"],[1,"cell","mat-block","flex-1"],["matInput","","required","",3,"formControl","placeholder"],[4,"ngIf"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"click","disabled","matTooltip"],[1,"tb-hint",3,"innerHTML"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"span",2),m(3),s(4,"translate"),n(),o(5,"span",2),m(6),s(7,"translate"),n(),g(8,"span",3),n(),o(9,"div",4),C(10,ss,14,18,"div",5)(11,ds,3,6,"div",6),n(),g(12,"tb-error",7),o(13,"div",8)(14,"button",9),s(15,"translate"),s(16,"async"),Y("click",function(){return l.addKeyVal()}),o(17,"mat-icon"),m(18,"add"),n(),m(19),s(20,"translate"),n()()()),a&2&&(p("formGroup",l.kvListFormGroup),r(3),q(d(4,13,l.keyText)),r(3),q(d(7,15,l.valText)),r(2),Ke("!hidden",l.disabled),r(2),p("ngForOf",l.keyValsFormArray().controls),r(),p("ngIf",l.hintText),r(),p("error",l.ngControl.hasError("kvMapRequired")||l.ngControl.hasError("uniqueKeyValuePair")?l.ngControl.hasError("kvMapRequired")?l.translate.instant(l.requiredText):l.translate.instant("rule-node-config.key-val.unique-key-value-pair-error",Gt(23,ls,l.translate.instant(l.keyText),l.translate.instant(l.valText))):""),r(2),Ke("!hidden",l.disabled),h("matTooltip",d(15,17,"rule-node-config.key-val.add-entry")),p("disabled",d(16,19,l.isLoading$)),r(5),f(" ",d(20,21,"action.add")," "))},dependencies:[z,B,jo,Ge,_e,Z,R,k,Q,ee,L,F,_,D,zt,S,mn,jt,lt,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-kv-map-config[_ngcontent-%COMP%]{margin-bottom:16px}[_nghost-%COMP%]   .tb-kv-map-config[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px;padding-bottom:5px}[_nghost-%COMP%]   .tb-kv-map-config[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px;color:#757575;font-size:12px;font-weight:700;white-space:nowrap}[_nghost-%COMP%]   .tb-kv-map-config[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .tb-required[_ngcontent-%COMP%]:after{color:#757575;font-size:12px;font-weight:700}[_nghost-%COMP%]   .tb-kv-map-config[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px;padding-bottom:0;max-height:300px;overflow:auto}[_nghost-%COMP%]   .tb-kv-map-config[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}[_nghost-%COMP%]   .tb-kv-map-config[_ngcontent-%COMP%]   tb-error[_ngcontent-%COMP%]{display:block;margin-top:-12px}']});let t=i;return t})();b();function us(t,i){if(t&1&&(o(0,"mat-chip-option",4),m(1),n()),t&2){let u=i.$implicit,e=v();h("selectable",e.chipControlGroup.get("chipControl").value!==u.value),p("value",u.value),r(),q(u.name)}}var Pe=(()=>{let i=class i{constructor(e,a,l){this.fb=e,this.translate=a,this.destroyRef=l,this.translation=Sn,this.propagateChange=()=>{},this.selectOptions=[]}ngOnInit(){this.initOptions(),this.chipControlGroup=this.fb.group({chipControl:[null,[]]}),this.chipControlGroup.get("chipControl").valueChanges.pipe(fe(this.destroyRef)).subscribe(e=>{e&&this.propagateChange(e)})}initOptions(){for(let e of this.translation.keys())this.selectOptions.push({value:e,name:this.translate.instant(this.translation.get(e))})}writeValue(e){this.chipControlGroup.get("chipControl").patchValue(e,{emitEvent:!1})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){e?this.chipControlGroup.disable({emitEvent:!1}):this.chipControlGroup.enable({emitEvent:!1})}};i.\u0275fac=function(a){return new(a||i)(y(G),y(me),y(Le))},i.\u0275cmp=T({type:i,selectors:[["tb-msg-metadata-chip"]],inputs:{labelText:"labelText",translation:"translation"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0}])],decls:5,vars:3,consts:[[1,"tb-form-row","space-between",3,"formGroup"],[1,"fixed-title-width"],["formControlName","chipControl"],["color","primary",3,"selectable","value",4,"ngFor","ngForOf"],["color","primary",3,"selectable","value"]],template:function(a,l){a&1&&(o(0,"div",0)(1,"div",1),m(2),n(),o(3,"mat-chip-listbox",2),C(4,us,2,3,"mat-chip-option",3),n()()),a&2&&(p("formGroup",l.chipControlGroup),r(2),q(l.labelText),r(2),p("ngForOf",l.selectOptions))},dependencies:[z,cn,un,F,_,S,M],encapsulation:2});let t=i;return t})();b();function cs(t,i){t&1&&(o(0,"div",13),m(1," rule-node-config.map-fields-required "),n())}function fs(t,i){if(t&1&&(o(0,"div",13),m(1),n()),t&2){let u=v();r(),f(" ",u.requiredText," ")}}function gs(t,i){if(t&1&&(o(0,"mat-option",21),m(1),n()),t&2){let u=i.$implicit;p("value",u.value),r(),f(" ",u.name," ")}}function Cs(t,i){if(t&1){let u=pe();o(0,"div",14)(1,"mat-form-field",15)(2,"mat-select",16),C(3,gs,2,2,"mat-option",17),n()(),o(4,"mat-form-field",15),g(5,"input",18),n(),o(6,"div",19)(7,"button",20),s(8,"translate"),s(9,"async"),Y("click",function(){let a=ne(u).index,l=v();return re(l.removeKeyVal(a))}),o(10,"mat-icon"),m(11,"delete"),n()()()()}if(t&2){let u=i.$implicit,e=v();r(2),p("placeholder",e.selectText)("formControl",u.get("key")),r(),p("ngForOf",e.filterSelectOptions(u)),r(2),p("placeholder",e.valText)("formControl",u.get("value")),r(2),Ke("tb-hidden",e.keyValsFormArray().controls.length===1),h("matTooltip",d(8,9,"rule-node-config.key-val.remove-mapping-entry")),p("disabled",d(9,11,e.isLoading$))}}var oi=class oi extends Xe{constructor(i,u,e,a){super(),this.translate=i,this.injector=u,this.fb=e,this.destroyRef=a,this.propagateChange=null,this.disabled=!1,this.required=!1,this.oneMapRequiredValidator=l=>l.get("keyVals").value.length,this.propagateNestedErrors=l=>{if(this.svListFormGroup&&this.svListFormGroup.get("keyVals")&&this.svListFormGroup.get("keyVals")?.status==="VALID")return null;let x={};if(this.svListFormGroup&&this.svListFormGroup.setErrors(null),l instanceof pn||l instanceof ln){if(l.errors)for(let $ of Object.keys(l.errors))x[$]=!0;for(let $ of Object.keys(l.controls)){let be=this.propagateNestedErrors(l.controls[$]);if(be&&Object.keys(be).length)for(let On of Object.keys(be))x[On]=!0}return x}else if(l.errors)for(let $ of Object.keys(l.errors))x[$]=!0;return nn(x,{})?null:x}}ngOnInit(){this.ngControl=this.injector.get(yi),this.ngControl!=null&&(this.ngControl.valueAccessor=this),this.svListFormGroup=this.fb.group({keyVals:this.fb.array([])},{validators:[this.propagateNestedErrors,this.oneMapRequiredValidator]}),this.svListFormGroup.valueChanges.pipe(fe(this.destroyRef)).subscribe(()=>{this.updateModel()})}keyValsFormArray(){return this.svListFormGroup.get("keyVals")}registerOnChange(i){this.propagateChange=i}registerOnTouched(i){}setDisabledState(i){this.disabled=i,this.disabled?this.svListFormGroup.disable({emitEvent:!1}):this.svListFormGroup.enable({emitEvent:!1})}writeValue(i){let u=Object.keys(i).map(e=>({key:e,value:i[e]}));if(this.keyValsFormArray().length===u.length)this.keyValsFormArray().patchValue(u,{emitEvent:!1});else{let e=[];u.forEach(a=>{e.push(this.fb.group({key:[a.key,[c.required]],value:[a.value,[c.required,c.pattern(/(?:.|\s)*\S(&:.|\s)*/)]]}))}),this.svListFormGroup.setControl("keyVals",this.fb.array(e,this.propagateNestedErrors),{emitEvent:!1});for(let a of this.keyValsFormArray().controls)this.keyChangeSubscribe(a)}}filterSelectOptions(i){let u=[];for(let a of this.svListFormGroup.get("keyVals").value){let l=this.selectOptions.find(x=>x.value===a.key);l&&u.push(l)}let e=[];for(let a of this.selectOptions)(!I(u.find(l=>l.value===a.value))||a.value===i?.get("key").value)&&e.push(a);return e}removeKeyVal(i){this.keyValsFormArray().removeAt(i)}addKeyVal(){this.keyValsFormArray().push(this.fb.group({key:["",[c.required]],value:["",[c.required,c.pattern(/(?:.|\s)*\S(&:.|\s)*/)]]})),this.keyChangeSubscribe(this.keyValsFormArray().at(this.keyValsFormArray().length-1))}keyChangeSubscribe(i){i.get("key").valueChanges.pipe(fe(this.destroyRef)).subscribe(u=>{let e=ca.get(u);i.get("value").patchValue(this.targetKeyPrefix+e[0].toUpperCase()+e.slice(1))})}validate(){return!this.svListFormGroup.get("keyVals").value.length&&this.required?{svMapRequired:!0}:this.svListFormGroup.valid?null:{svFieldsRequired:!0}}updateModel(){let i=this.svListFormGroup.get("keyVals").value;if(this.required&&!i.length||!this.svListFormGroup.valid)this.propagateChange(null);else{let u={};i.forEach(e=>{u[e.key]=e.value}),this.propagateChange(u)}}};oi.\u0275fac=function(u){return new(u||oi)(y(me),y(di),y(G),y(Le))},oi.\u0275cmp=T({type:oi,selectors:[["tb-sv-map-config"]],inputs:{selectOptions:"selectOptions",disabled:"disabled",labelText:"labelText",requiredText:"requiredText",targetKeyPrefix:"targetKeyPrefix",selectText:"selectText",selectRequiredText:"selectRequiredText",valText:"valText",valRequiredText:"valRequiredText",hintText:"hintText",popupHelpLink:"popupHelpLink",required:"required"},features:[Te([{provide:Se,useExisting:ce(()=>oi),multi:!0},{provide:He,useExisting:ce(()=>oi),multi:!0}]),N],decls:22,vars:15,consts:[[1,"tb-form-panel","stroked",3,"formGroup"],[1,"tb-form-row","no-padding","no-border","space-between"],[1,"tb-form-panel-title"],["class","tb-form-panel-hint tb-error","translate","",4,"ngIf"],[1,"tb-form-panel","no-border","no-padding"],[1,"tb-form-table"],[1,"tb-form-table-header"],[1,"tb-form-table-header-cell","field-space"],[1,"tb-form-table-header-cell","actions-header"],[1,"tb-form-table-body"],["class","tb-form-table-row",4,"ngFor","ngForOf"],["type","button","mat-stroked-button","","color","primary",3,"click","disabled"],[3,"hintText","popupHelpLink"],["translate","",1,"tb-form-panel-hint","tb-error"],[1,"tb-form-table-row"],["appearance","outline","subscriptSizing","dynamic",1,"tb-inline-field","field-space"],["required","",3,"placeholder","formControl"],[3,"value",4,"ngFor","ngForOf"],["matInput","",3,"placeholder","formControl"],[1,"tb-form-table-row-cell-buttons"],["type","button","mat-icon-button","","matTooltipPosition","above",3,"click","disabled","matTooltip"],[3,"value"]],template:function(u,e){u&1&&(o(0,"section",0)(1,"div",1)(2,"div",2),m(3),n(),C(4,cs,2,0,"div",3)(5,fs,2,1,"div",3),n(),o(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),m(10),n(),o(11,"div",7),m(12),n(),g(13,"div",8),n(),o(14,"div",9),C(15,Cs,12,13,"div",10),n()()(),o(16,"div")(17,"button",11),s(18,"async"),Y("click",function(){return e.addKeyVal()}),m(19),s(20,"translate"),n()(),g(21,"tb-example-hint",12),n()),u&2&&(p("formGroup",e.svListFormGroup),r(3),q(e.labelText),r(),p("ngIf",e.svListFormGroup.hasError("required")),r(),p("ngIf",e.svListFormGroup.hasError("svMapRequired")),r(5),q(e.selectText),r(2),q(e.valText),r(3),p("ngForOf",e.keyValsFormArray().controls),r(2),p("disabled",d(18,11,e.isLoading$)||e.keyValsFormArray().length>=e.selectOptions.length),r(2),f(" ",d(20,13,"rule-node-config.key-val.add-mapping-entry")," "),r(2),p("hintText",e.hintText)("popupHelpLink",e.popupHelpLink))},dependencies:[z,B,Ge,_e,Z,R,k,te,X,ee,L,F,_,D,zt,S,V,he,jt,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .field-space[_ngcontent-%COMP%]{flex:1 1 50%}[_nghost-%COMP%]   .actions-header[_ngcontent-%COMP%]{width:40px}']});var At=oi;ft([St(),ct("design:type",Object)],At.prototype,"disabled",void 0);ft([St(),ct("design:type",Object)],At.prototype,"required",void 0);b();function ys(t,i){if(t&1&&(o(0,"mat-option",11),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.directionTypeTranslations.get(u))," ")}}var dr=(()=>{let i=class i extends Xe{get required(){return this.requiredValue}set required(e){this.requiredValue=yt(e)}constructor(e,a){super(),this.fb=e,this.destroyRef=a,this.directionTypes=Object.keys(mt),this.directionTypeTranslations=Yt,this.propagateChange=null}ngOnInit(){this.relationsQueryFormGroup=this.fb.group({fetchLastLevelOnly:[!1,[]],direction:[null,[c.required]],maxLevel:[null,[]],filters:[null]}),this.relationsQueryFormGroup.valueChanges.pipe(fe(this.destroyRef)).subscribe(e=>{this.relationsQueryFormGroup.valid?this.propagateChange(e):this.propagateChange(null)})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){this.disabled=e,this.disabled?this.relationsQueryFormGroup.disable({emitEvent:!1}):this.relationsQueryFormGroup.enable({emitEvent:!1})}writeValue(e){this.relationsQueryFormGroup.reset(e||{},{emitEvent:!1})}};i.\u0275fac=function(a){return new(a||i)(y(G),y(Le))},i.\u0275cmp=T({type:i,selectors:[["tb-relations-query-config-old"]],inputs:{disabled:"disabled",required:"required"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0}]),N],decls:18,vars:8,consts:[[1,"flex","flex-col",3,"formGroup"],["formControlName","fetchLastLevelOnly"],[1,"flex","flex-row","gap-2"],[1,"mat-block",2,"min-width","100px"],["translate",""],["required","","matInput","","formControlName","direction"],[3,"value",4,"ngFor","ngForOf"],["floatLabel","always",1,"mat-block","flex-1"],["matInput","","type","number","min","1","step","1","formControlName","maxLevel",3,"placeholder"],["translate","",1,"mat-caption",2,"color","#6e6e6e"],["formControlName","filters"],[3,"value"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-checkbox",1),m(2),s(3,"translate"),n(),o(4,"div",2)(5,"mat-form-field",3)(6,"mat-label",4),m(7,"relation.direction"),n(),o(8,"mat-select",5),C(9,ys,3,4,"mat-option",6),n()(),o(10,"mat-form-field",7)(11,"mat-label",4),m(12,"rule-node-config.max-relation-level"),n(),g(13,"input",8),s(14,"translate"),n()(),o(15,"div",9),m(16,"relation.relation-filters"),n(),g(17,"tb-relation-filters",10),n()),a&2&&(p("formGroup",l.relationsQueryFormGroup),r(2),f(" ",d(3,4,"alias.last-level-relation")," "),r(7),p("ngForOf",l.directionTypes),r(4),h("placeholder",d(14,6,"rule-node-config.unlimited-level")))},dependencies:[z,je,R,k,O,te,X,L,ge,F,_,D,ve,S,M,V,hn,E],encapsulation:2});let t=i;return t})();b();var vs=t=>({latestTsKeyName:t}),hs=t=>({inputName:t});function bs(t,i){t&1&&qi(0,9)}function xs(t,i){t&1&&qi(0,9)}function Ts(t,i){t&1&&qi(0,9)}function _s(t,i){t&1&&qi(0,9)}function Ss(t,i){if(t&1&&(o(0,"div",10),s(1,"translate"),o(2,"mat-slide-toggle",11),m(3),s(4,"translate"),n()()),t&2){let u=v();h("tb-hint-tooltip-icon",le(1,2,"rule-node-config.fetch-latest-telemetry-with-timestamp-tooltip",Fe(7,vs,u.attributeControlGroup.get("latestTsKeyNames").value[0]))),r(3),f(" ",d(4,5,"rule-node-config.fetch-latest-telemetry-with-timestamp")," ")}}function Fs(t,i){t&1&&(o(0,"mat-icon",12),s(1,"translate"),s(2,"translate"),m(3,"help"),n()),t&2&&h("matTooltip",le(2,3,"rule-node-config.chip-help",Fe(6,hs,d(1,1,"rule-node-config.field-name"))))}var si=(()=>{let i=class i{constructor(e,a,l){this.translate=e,this.fb=a,this.destroyRef=l,this.propagateChange=x=>{},this.separatorKeysCodes=[13,188,186],this.onTouched=()=>{}}ngOnInit(){this.attributeControlGroup=this.fb.group({clientAttributeNames:[[],[]],sharedAttributeNames:[[],[]],serverAttributeNames:[[],[]],latestTsKeyNames:[[],[]],getLatestValueWithTs:[!1,[]]},{validators:this.atLeastOne(c.required,["clientAttributeNames","sharedAttributeNames","serverAttributeNames","latestTsKeyNames"])}),this.attributeControlGroup.valueChanges.pipe(fe(this.destroyRef)).subscribe(e=>{this.propagateChange(this.preparePropagateValue(e))})}preparePropagateValue(e){let a={};for(let l in e)l==="getLatestValueWithTs"?a[l]=e[l]:a[l]=I(e[l])?e[l]:[];return a}validate(){return this.attributeControlGroup.valid?null:{atLeastOneRequired:!0}}atLeastOne(e,a=null){return l=>(a||(a=Object.keys(l.controls)),l?.controls&&a.some($=>!e(l.controls[$]))?null:{atLeastOne:!0})}writeValue(e){this.attributeControlGroup.setValue(e,{emitEvent:!1})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){e?this.attributeControlGroup.disable({emitEvent:!1}):this.attributeControlGroup.enable({emitEvent:!1})}};i.\u0275fac=function(a){return new(a||i)(y(me),y(G),y(Le))},i.\u0275cmp=T({type:i,selectors:[["tb-select-attributes"]],inputs:{popupHelpLink:"popupHelpLink"},features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0},{provide:He,useExisting:i,multi:!0}])],decls:21,vars:32,consts:[["helpIcon",""],[1,"tb-form-panel","no-padding","no-border",3,"formGroup"],[3,"hintText","popupHelpLink"],["subscriptSizing","dynamic","editable","","formControlName","clientAttributeNames",1,"mat-block",3,"focusout","placeholder","label"],["matSuffix","",4,"ngTemplateOutlet"],["subscriptSizing","dynamic","editable","","formControlName","sharedAttributeNames",1,"mat-block",3,"focusout","placeholder","label"],["subscriptSizing","dynamic","editable","","formControlName","serverAttributeNames",1,"mat-block",3,"focusout","placeholder","label"],["subscriptSizing","dynamic","editable","","formControlName","latestTsKeyNames",1,"mat-block",3,"focusout","placeholder","label"],["class","tb-form-row no-border no-padding",3,"tb-hint-tooltip-icon",4,"ngIf"],["matSuffix",""],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","getLatestValueWithTs",1,"mat-slide"],["aria-hidden","false","aria-label","help-icon","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"]],template:function(a,l){if(a&1){let x=pe();o(0,"div",1),g(1,"tb-example-hint",2),o(2,"tb-string-items-list",3),s(3,"translate"),s(4,"translate"),Y("focusout",function(){return ne(x),re(l.onTouched())}),C(5,bs,1,0,"ng-container",4),n(),o(6,"tb-string-items-list",5),s(7,"translate"),s(8,"translate"),Y("focusout",function(){return ne(x),re(l.onTouched())}),C(9,xs,1,0,"ng-container",4),n(),o(10,"tb-string-items-list",6),s(11,"translate"),s(12,"translate"),Y("focusout",function(){return ne(x),re(l.onTouched())}),C(13,Ts,1,0,"ng-container",4),n(),o(14,"tb-string-items-list",7),s(15,"translate"),s(16,"translate"),Y("focusout",function(){return ne(x),re(l.onTouched())}),C(17,_s,1,0,"ng-container",4),n(),C(18,Ss,5,9,"div",8),n(),C(19,Fs,4,8,"ng-template",null,0,Ot)}if(a&2){let x,$=$e(20);p("formGroup",l.attributeControlGroup),r(),p("hintText","rule-node-config.kv-map-pattern-hint")("popupHelpLink",l.popupHelpLink),r(),p("placeholder",d(3,16,"rule-node-config.add-attribute-key"))("label",d(4,18,"rule-node-config.client-attributes")),r(3),p("ngTemplateOutlet",$),r(),p("placeholder",d(7,20,"rule-node-config.add-attribute-key"))("label",d(8,22,"rule-node-config.shared-attributes")),r(3),p("ngTemplateOutlet",$),r(),p("placeholder",d(11,24,"rule-node-config.add-attribute-key"))("label",d(12,26,"rule-node-config.server-attributes")),r(3),p("ngTemplateOutlet",$),r(),p("placeholder",d(15,28,"rule-node-config.add-telemetry-key"))("label",d(16,30,"rule-node-config.latest-telemetry")),r(3),p("ngTemplateOutlet",$),r(),p("ngIf",((x=l.attributeControlGroup.get("latestTsKeyNames").value)==null?null:x.length)>0)}},dependencies:[B,To,Ft,Z,ae,ee,ue,F,_,S,M,Ce,he,E],encapsulation:2});let t=i;return t})();b();var Yi=(()=>{let i=class i extends Xe{constructor(e,a){super(),this.fb=e,this.destroyRef=a,this.propagateChange=null,this.alarmStatus=Fo,this.alarmStatusTranslations=Eo}ngOnInit(){this.alarmStatusGroup=this.fb.group({alarmStatus:[null,[]]}),this.alarmStatusGroup.get("alarmStatus").valueChanges.pipe(fe(this.destroyRef)).subscribe(e=>{this.propagateChange(e)})}setDisabledState(e){e?this.alarmStatusGroup.disable({emitEvent:!1}):this.alarmStatusGroup.enable({emitEvent:!1})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}writeValue(e){this.alarmStatusGroup.get("alarmStatus").patchValue(e,{emitEvent:!1})}};i.\u0275fac=function(a){return new(a||i)(y(G),y(Le))},i.\u0275cmp=T({type:i,selectors:[["tb-alarm-status-select"]],features:[Te([{provide:Se,useExisting:ce(()=>i),multi:!0}]),N],decls:16,vars:17,consts:[[1,"flex","flex-col","items-center","justify-center",3,"formGroup"],["multiple","","formControlName","alarmStatus",1,"chip-listbox","flex","flex-col"],[1,"toggle-column"],[1,"option","flex-1",3,"value"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-chip-listbox",1)(2,"div",2)(3,"mat-chip-option",3),m(4),s(5,"translate"),n(),o(6,"mat-chip-option",3),m(7),s(8,"translate"),n()(),o(9,"div",2)(10,"mat-chip-option",3),m(11),s(12,"translate"),n(),o(13,"mat-chip-option",3),m(14),s(15,"translate"),n()()()()),a&2&&(p("formGroup",l.alarmStatusGroup),r(3),p("value",l.alarmStatus.ACTIVE_UNACK),r(),f(" ",d(5,9,l.alarmStatusTranslations.get(l.alarmStatus.ACTIVE_UNACK))," "),r(2),p("value",l.alarmStatus.ACTIVE_ACK),r(),f(" ",d(8,11,l.alarmStatusTranslations.get(l.alarmStatus.ACTIVE_ACK))," "),r(3),p("value",l.alarmStatus.CLEARED_UNACK),r(),f(" ",d(12,13,l.alarmStatusTranslations.get(l.alarmStatus.CLEARED_UNACK))," "),r(2),p("value",l.alarmStatus.CLEARED_ACK),r(),f(" ",d(15,15,l.alarmStatusTranslations.get(l.alarmStatus.CLEARED_ACK))," "))},dependencies:[cn,un,F,_,S,M,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .chip-listbox[_ngcontent-%COMP%]{max-width:460px;width:100%}[_nghost-%COMP%]   .chip-listbox[_ngcontent-%COMP%]   .toggle-column[_ngcontent-%COMP%]{display:flex;flex:1 1 100%;gap:8px}[_nghost-%COMP%]   .chip-listbox[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]{margin:0}@media screen and (max-width: 959px){[_nghost-%COMP%]   .chip-listbox[_ngcontent-%COMP%]{max-width:360px}[_nghost-%COMP%]   .chip-listbox[_ngcontent-%COMP%]   .toggle-column[_ngcontent-%COMP%]{flex-direction:column}}[_nghost-%COMP%]     .chip-listbox .mdc-evolution-chip-set__chips{gap:8px}[_nghost-%COMP%]     .chip-listbox .option button{flex-basis:100%;justify-content:start}[_nghost-%COMP%]     .chip-listbox .option .mdc-evolution-chip__graphic{flex-grow:0}']});let t=i;return t})();var ut=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=Je({type:i}),i.\u0275inj=Qe({imports:[ke,Be,Et]});let t=i;return t})();(function(){Ye(ut,{declarations:[ot,Ki,mi,Hi,pi,zi,Qi,wt,_t,Pe,At,dr,si,Yi,he,Mt],imports:[ke,Be,Et],exports:[ot,Ki,mi,Hi,pi,zi,Qi,wt,_t,Pe,At,dr,si,Yi,he,Mt]})})();b();function Es(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.customer-name-pattern-required")," "))}function Ms(t,i){if(t&1&&(o(0,"mat-form-field",6)(1,"mat-label",7),m(2,"rule-node-config.customer-name-pattern"),n(),g(3,"input",8),C(4,Es,3,3,"mat-error",9),o(5,"mat-hint",7),m(6,"rule-node-config.customer-name-pattern-hint"),n()()),t&2){let u=v();r(4),p("ngIf",u.unassignCustomerConfigForm.get("customerNamePattern").hasError("required")||u.unassignCustomerConfigForm.get("customerNamePattern").hasError("pattern"))}}var ur=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.unassignCustomerConfigForm}prepareInputConfig(e){return{customerNamePattern:I(e?.customerNamePattern)?e.customerNamePattern:null,unassignFromCustomer:I(e?.customerNamePattern)}}onConfigurationSet(e){this.unassignCustomerConfigForm=this.fb.group({customerNamePattern:[e.customerNamePattern,[]],unassignFromCustomer:[e.unassignFromCustomer,[]]})}validatorTriggers(){return["unassignFromCustomer"]}updateValidators(e){this.unassignCustomerConfigForm.get("unassignFromCustomer").value?this.unassignCustomerConfigForm.get("customerNamePattern").setValidators([c.required,c.pattern(/.*\S.*/)]):this.unassignCustomerConfigForm.get("customerNamePattern").setValidators([]),this.unassignCustomerConfigForm.get("customerNamePattern").updateValueAndValidity({emitEvent:e})}prepareOutputConfig(e){return{customerNamePattern:e.unassignFromCustomer?e.customerNamePattern.trim():null}}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-un-assign-to-customer-config"]],features:[N],decls:9,vars:10,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"tb-form-panel","no-padding","no-border"],[1,"tb-form-panel","stroked"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","unassignFromCustomer",1,"mat-slide"],["class","mat-block","subscriptSizing","dynamic",4,"ngIf"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","customerNamePattern"],[4,"ngIf"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),s(4,"translate"),o(5,"mat-slide-toggle",4),m(6),s(7,"translate"),n()(),C(8,Ms,7,1,"mat-form-field",5),n()()()),a&2&&(p("formGroup",l.unassignCustomerConfigForm),r(2),Ke("no-padding-bottom",l.unassignCustomerConfigForm.get("unassignFromCustomer").value),r(),h("tb-hint-tooltip-icon",d(4,6,"rule-node-config.unassign-from-customer-tooltip")),r(3),f(" ",d(7,8,"rule-node-config.unassign-from-customer")," "),r(2),p("ngIf",l.unassignCustomerConfigForm.get("unassignFromCustomer").value))},dependencies:[B,R,k,O,de,Q,ue,L,F,_,D,S,M,V,Ce,E],encapsulation:2});let t=i;return t})();b();var cr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.deviceProfile}onConfigurationSet(e){this.deviceProfile=this.fb.group({persistAlarmRulesState:[e?e.persistAlarmRulesState:!1],fetchAlarmRulesStateOnStart:[e?e.fetchAlarmRulesStateOnStart:!1]})}validatorTriggers(){return["persistAlarmRulesState"]}updateValidators(e){this.deviceProfile.get("persistAlarmRulesState").value?this.deviceProfile.get("fetchAlarmRulesStateOnStart").enable({emitEvent:!1}):(this.deviceProfile.get("fetchAlarmRulesStateOnStart").setValue(!1,{emitEvent:!1}),this.deviceProfile.get("fetchAlarmRulesStateOnStart").disable({emitEvent:!1})),this.deviceProfile.get("fetchAlarmRulesStateOnStart").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-device-profile-config"]],features:[N],decls:13,vars:13,consts:[[1,"tb-form-panel","stroked",3,"formGroup"],["translate","",1,"tb-form-hint","tb-primary-fill"],[1,"tb-form-row","no-border","no-padding","slide-toggle",3,"tb-hint-tooltip-icon"],["formControlName","persistAlarmRulesState",1,"mat-slide"],["formControlName","fetchAlarmRulesStateOnStart",1,"mat-slide"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),m(2,"rule-node-config.device-profile-node-hint"),n(),o(3,"div",2),s(4,"translate"),o(5,"mat-slide-toggle",3),m(6),s(7,"translate"),n()(),o(8,"div",2),s(9,"translate"),o(10,"mat-slide-toggle",4),m(11),s(12,"translate"),n()()()),a&2&&(p("formGroup",l.deviceProfile),r(3),h("tb-hint-tooltip-icon",d(4,5,"rule-node-config.persist-alarm-rules-hint")),r(3),f(" ",d(7,7,"rule-node-config.persist-alarm-rules")," "),r(2),h("tb-hint-tooltip-icon",d(9,9,"rule-node-config.fetch-alarm-rules-hint")),r(3),f(" ",d(12,11,"rule-node-config.fetch-alarm-rules")," "))},dependencies:[ue,F,_,S,M,V,Ce,E],encapsulation:2});let t=i;return t})();b();var Ns=()=>({standalone:!0});function As(t,i){if(t&1&&(o(0,"mat-option",10),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.telemetryTypeTranslationsMap.get(u))," ")}}var fr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.attributeScopes=Object.keys(xt),this.telemetryTypeTranslationsMap=Ut}configForm(){return this.pushToEdgeConfigForm}onConfigurationSet(e){this.pushToEdgeConfigForm=this.fb.group({scope:[e?e.scope:null,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-push-to-edge-config"]],features:[N],decls:19,vars:16,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-panel","stroked"],[3,"hintText"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields"],[1,"flex"],["required","","matInput","","formControlName","scope",1,"tb-entity-type-select"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","readonly","","disabled","",3,"ngModel","ngModelOptions"],["type","button","matSuffix","","mat-icon-button","","aria-label","Copy","ngxClipboard","",3,"cbContent","matTooltip"],["aria-hidden","false","aria-label","help-icon"],[3,"value"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),g(2,"tb-example-hint",2),o(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),m(6),s(7,"translate"),n(),o(8,"mat-select",5),C(9,As,3,4,"mat-option",6),n()(),o(10,"mat-form-field",4)(11,"mat-label"),m(12),s(13,"translate"),n(),g(14,"input",7),o(15,"button",8),s(16,"translate"),o(17,"mat-icon",9),m(18,"content_copy "),n()()()()()()),a&2&&(p("formGroup",l.pushToEdgeConfigForm),r(2),p("hintText","rule-node-config.attributes-scope-hint"),r(4),q(d(7,9,"rule-node-config.attributes-scope")),r(3),p("ngForOf",l.attributeScopes),r(3),q(d(13,11,"rule-node-config.attributes-scope-value")),r(2),p("ngModel",l.pushToEdgeConfigForm.get("scope").value)("ngModelOptions",xe(15,Ns)),r(),h("matTooltip",d(16,13,"rule-node-config.attributes-scope-value-copy")),p("cbContent",l.pushToEdgeConfigForm.get("scope").value))},dependencies:[z,_e,Z,R,k,O,ae,te,X,ee,Vt,L,F,_,D,Ht,S,M,he,E],encapsulation:2});let t=i;return t})();b();var Ds=()=>({standalone:!0});function Vs(t,i){if(t&1&&(o(0,"mat-option",10),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.telemetryTypeTranslationsMap.get(u))," ")}}var gr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.attributeScopes=Object.keys(xt),this.telemetryTypeTranslationsMap=Ut}configForm(){return this.pushToCloudConfigForm}onConfigurationSet(e){this.pushToCloudConfigForm=this.fb.group({scope:[e?e.scope:null,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-push-to-cloud-config"]],features:[N],decls:19,vars:16,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-panel","stroked"],[3,"hintText"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields"],[1,"flex"],["required","","matInput","","formControlName","scope",1,"tb-entity-type-select"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","readonly","","disabled","",3,"ngModel","ngModelOptions"],["type","button","matSuffix","","mat-icon-button","","aria-label","Copy","ngxClipboard","",3,"cbContent","matTooltip"],["aria-hidden","false","aria-label","help-icon"],[3,"value"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),g(2,"tb-example-hint",2),o(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),m(6),s(7,"translate"),n(),o(8,"mat-select",5),C(9,Vs,3,4,"mat-option",6),n()(),o(10,"mat-form-field",4)(11,"mat-label"),m(12),s(13,"translate"),n(),g(14,"input",7),o(15,"button",8),s(16,"translate"),o(17,"mat-icon",9),m(18,"content_copy "),n()()()()()()),a&2&&(p("formGroup",l.pushToCloudConfigForm),r(2),p("hintText","rule-node-config.attributes-scope-hint"),r(4),q(d(7,9,"rule-node-config.attributes-scope")),r(3),p("ngForOf",l.attributeScopes),r(3),q(d(13,11,"rule-node-config.attributes-scope-value")),r(2),p("ngModel",l.pushToCloudConfigForm.get("scope").value)("ngModelOptions",xe(15,Ds)),r(),h("matTooltip",d(16,13,"rule-node-config.attributes-scope-value-copy")),p("cbContent",l.pushToCloudConfigForm.get("scope").value))},dependencies:[z,_e,Z,R,k,O,ae,te,X,ee,Vt,L,F,_,D,Ht,S,M,he,E],encapsulation:2});let t=i;return t})();b();var qs=["attributeChipList"],ks=()=>({standalone:!0});function Bs(t,i){if(t&1&&(o(0,"mat-option",21),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.telemetryTypeTranslationsMap.get(u))," ")}}function Os(t,i){if(t&1){let u=pe();o(0,"mat-chip-row",22),Y("removed",function(){let a=ne(u).$implicit,l=v();return re(l.removeKey(a))}),m(1),o(2,"mat-icon",23),m(3,"close"),n()()}if(t&2){let u=i.$implicit;r(),f(" ",u," ")}}function Ls(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),q(d(2,1,"rule-node-config.attributes-keys-required")))}function Rs(t,i){t&1&&(o(0,"div",18),s(1,"translate"),o(2,"mat-slide-toggle",24),m(3),s(4,"translate"),n()()),t&2&&(h("tb-hint-tooltip-icon",d(1,2,"rule-node-config.notify-device-on-delete-hint")),r(3),f(" ",d(4,4,"rule-node-config.notify-device")," "))}var Cr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.attributeScopeMap=xt,this.attributeScopes=Object.keys(xt),this.telemetryTypeTranslationsMap=Ut,this.separatorKeysCodes=[13,188,186]}configForm(){return this.deleteAttributesConfigForm}onConfigurationSet(e){this.deleteAttributesConfigForm=this.fb.group({scope:[e?e.scope:null,[c.required]],keys:[e?e.keys:null,[c.required]],sendAttributesDeletedNotification:[e?e.sendAttributesDeletedNotification:!1,[]],notifyDevice:[e?e.notifyDevice:!1,[]]}),this.deleteAttributesConfigForm.get("scope").valueChanges.pipe(fe(this.destroyRef)).subscribe(a=>{a!==xt.SHARED_SCOPE&&this.deleteAttributesConfigForm.get("notifyDevice").patchValue(!1,{emitEvent:!1})})}removeKey(e){let a=this.deleteAttributesConfigForm.get("keys").value,l=a.indexOf(e);l>=0&&(a.splice(l,1),this.deleteAttributesConfigForm.get("keys").patchValue(a,{emitEvent:!0}))}addKey(e){let a=e.input,l=e.value;if((l||"").trim()){l=l.trim();let x=this.deleteAttributesConfigForm.get("keys").value;(!x||x.indexOf(l)===-1)&&(x||(x=[]),x.push(l),this.deleteAttributesConfigForm.get("keys").patchValue(x,{emitEvent:!0}))}a&&(a.value="")}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-delete-attributes-config"]],viewQuery:function(a,l){if(a&1&&De(qs,5),a&2){let x;Ve(x=qe())&&(l.attributeChipList=x.first)}},features:[N],decls:41,vars:31,consts:[["attributeChipList",""],[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-panel","stroked"],[3,"hintText"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields"],[1,"flex"],["required","","matInput","","formControlName","scope",1,"tb-entity-type-select"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","readonly","","disabled","",3,"ngModel","ngModelOptions"],["type","button","matSuffix","","mat-icon-button","","aria-label","Copy","ngxClipboard","",3,"cbContent","matTooltip"],["aria-hidden","false","aria-label","help-icon"],["subscriptSizing","dynamic",1,"mat-block"],["formControlName","keys"],[3,"removed",4,"ngFor","ngForOf"],["matInput","","type","text",3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[4,"ngIf"],["translate",""],[1,"tb-settings"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","sendAttributesDeletedNotification",1,"mat-slide"],["class","tb-form-row no-border no-padding",3,"tb-hint-tooltip-icon",4,"ngIf"],[3,"value"],[3,"removed"],["matChipRemove",""],["formControlName","notifyDevice",1,"mat-slide"]],template:function(a,l){if(a&1){let x=pe();o(0,"section",1)(1,"div",2),g(2,"tb-example-hint",3),o(3,"div",4)(4,"mat-form-field",5)(5,"mat-label"),m(6),s(7,"translate"),n(),o(8,"mat-select",6),C(9,Bs,3,4,"mat-option",7),n()(),o(10,"mat-form-field",5)(11,"mat-label"),m(12),s(13,"translate"),n(),g(14,"input",8),o(15,"button",9),s(16,"translate"),o(17,"mat-icon",10),m(18,"content_copy "),n()()()()(),o(19,"mat-form-field",11)(20,"mat-label"),m(21),s(22,"translate"),n(),o(23,"mat-chip-grid",12,0),C(25,Os,4,1,"mat-chip-row",13),o(26,"input",14),Y("matChipInputTokenEnd",function(be){return ne(x),re(l.addKey(be))}),n()(),C(27,Ls,3,3,"mat-error",15),o(28,"mat-hint",16),m(29,"rule-node-config.general-pattern-hint"),n()(),o(30,"section",2)(31,"mat-expansion-panel",17)(32,"mat-expansion-panel-header")(33,"mat-panel-title",16),m(34,"rule-node-config.advanced-settings"),n()(),o(35,"div",18),s(36,"translate"),o(37,"mat-slide-toggle",19),m(38),s(39,"translate"),n()(),C(40,Rs,5,6,"div",20),n()()()}if(a&2){let x=$e(24);p("formGroup",l.deleteAttributesConfigForm),r(2),p("hintText","rule-node-config.attributes-scope-hint"),r(4),q(d(7,18,"rule-node-config.attributes-scope")),r(3),p("ngForOf",l.attributeScopes),r(3),q(d(13,20,"rule-node-config.attributes-scope-value")),r(2),p("ngModel",l.deleteAttributesConfigForm.get("scope").value)("ngModelOptions",xe(30,ks)),r(),h("matTooltip",d(16,22,"rule-node-config.attributes-scope-value-copy")),p("cbContent",l.deleteAttributesConfigForm.get("scope").value),r(6),q(d(22,24,"rule-node-config.attributes-keys")),r(4),p("ngForOf",l.deleteAttributesConfigForm.get("keys").value),r(),p("matChipInputFor",x)("matChipInputSeparatorKeyCodes",l.separatorKeysCodes)("matChipInputAddOnBlur",!0),r(),p("ngIf",l.deleteAttributesConfigForm.get("keys").hasError("required")),r(8),h("tb-hint-tooltip-icon",d(36,26,"rule-node-config.send-attributes-deleted-notification-hint")),r(3),f(" ",d(39,28,"rule-node-config.send-attributes-deleted-notification")," "),r(2),p("ngIf",l.deleteAttributesConfigForm.get("scope").value===l.attributeScopeMap.SHARED_SCOPE)}},dependencies:[z,B,_e,Z,R,k,O,de,Q,ae,te,X,ee,ue,Ze,et,tt,xi,Ti,hi,bi,Vt,L,F,_,D,Ht,S,M,V,Ce,he,E],encapsulation:2});let t=i;return t})();b();var Ps=(t,i)=>[t,i];function ws(t,i){t&1&&(o(0,"mat-error",8),m(1," rule-node-config.custom-expression-field-input-required "),n())}function Gs(t,i){if(t&1&&(o(0,"fieldset",2)(1,"legend",21),m(2),s(3,"translate"),n(),o(4,"mat-form-field",22),g(5,"input",23),C(6,ws,2,0,"mat-error",11),o(7,"mat-hint",8),m(8,"rule-node-config.custom-expression-field-input-hint"),n()()()),t&2){let u=v();r(2),f("",d(3,2,"rule-node-config.custom-expression-field-input")," *"),r(4),p("ngIf",u.mathFunctionConfigForm.get("customFunction").hasError("required"))}}function js(t,i){if(t&1&&(o(0,"mat-option",24),m(1),s(2,"translate"),o(3,"small",25),m(4),s(5,"translate"),n()()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,3,e.argumentTypeResultMap.get(u).name)," "),r(3),f(" ",d(5,5,e.argumentTypeResultMap.get(u).description)," ")}}function Us(t,i){t&1&&(o(0,"mat-error",8),m(1," rule-node-config.type-field-input-required "),n())}function Ks(t,i){if(t&1&&(o(0,"mat-option",28),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),f(" ",d(2,2,e.attributeScopeMap.get(u))," ")}}function Hs(t,i){if(t&1&&(o(0,"mat-form-field",7)(1,"mat-label",8),m(2,"rule-node-config.attribute-scope-field-input"),n(),o(3,"mat-select",26),C(4,Ks,3,4,"mat-option",27),n()()),t&2){let u=v();r(4),p("ngForOf",u.attributeScopeResult)}}function zs(t,i){t&1&&(o(0,"mat-error",8),m(1," rule-node-config.key-field-input-required "),n())}function Qs(t,i){t&1&&(o(0,"div",29)(1,"mat-checkbox",30),m(2),s(3,"translate"),n(),o(4,"mat-checkbox",31),m(5),s(6,"translate"),n()()),t&2&&(r(2),f(" ",d(3,2,"rule-node-config.add-to-message-field-input")," "),r(3),f(" ",d(6,4,"rule-node-config.add-to-metadata-field-input")," "))}var yr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.MathFunction=H,this.ArgumentTypeResult=Rt,this.argumentTypeResultMap=Ma,this.attributeScopeMap=Fn,this.argumentsResult=Object.values(Rt),this.attributeScopeResult=Object.values(Qn)}configForm(){return this.mathFunctionConfigForm}onConfigurationSet(e){this.mathFunctionConfigForm=this.fb.group({operation:[e?e.operation:null,[c.required]],arguments:[e?e.arguments:null,[c.required]],customFunction:[e?e.customFunction:"",[c.required]],result:this.fb.group({type:[e?e.result.type:null,[c.required]],attributeScope:[e?e.result.attributeScope:null,[c.required]],key:[e?e.result.key:"",[c.required]],resultValuePrecision:[e?e.result.resultValuePrecision:0],addToBody:[e?e.result.addToBody:!1],addToMetadata:[e?e.result.addToMetadata:!1]})})}updateValidators(e){let a=this.mathFunctionConfigForm.get("operation").value,l=this.mathFunctionConfigForm.get("result.type").value;a===H.CUSTOM?(this.mathFunctionConfigForm.get("customFunction").enable({emitEvent:!1}),this.mathFunctionConfigForm.get("customFunction").value===null&&this.mathFunctionConfigForm.get("customFunction").patchValue("(x - 32) / 1.8",{emitEvent:!1})):this.mathFunctionConfigForm.get("customFunction").disable({emitEvent:!1}),l===Rt.ATTRIBUTE?this.mathFunctionConfigForm.get("result.attributeScope").enable({emitEvent:!1}):this.mathFunctionConfigForm.get("result.attributeScope").disable({emitEvent:!1}),this.mathFunctionConfigForm.get("customFunction").updateValueAndValidity({emitEvent:e}),this.mathFunctionConfigForm.get("result.attributeScope").updateValueAndValidity({emitEvent:e})}validatorTriggers(){return["operation","result.type"]}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-math-function-config"]],features:[N],decls:39,vars:23,consts:[[1,"flex","flex-col",3,"formGroup"],["required","","formControlName","operation",1,"flex-full","max-h-30%","xs:max-h-full","md:max-h-full"],[1,"fields-group","flex","flex-col","gap-2"],["translate","",1,"group-title"],["formControlName","arguments",3,"function"],["class","fields-group flex flex-col gap-2",4,"ngIf"],["formGroupName","result"],[1,"mat-block","flex-1"],["translate",""],["formControlName","type","required",""],["style","border-bottom: 1px solid #eee;",3,"value",4,"ngFor","ngForOf"],["translate","",4,"ngIf"],[1,"xs:flex-col","gt-xs:gap-4","flex","flex-1","flex-row"],["class","mat-block flex-1",4,"ngIf"],["floatLabel","always",1,"mat-block","flex-1"],["matInput","","formControlName","key","required",""],["aria-hidden","false","aria-label","help-icon","matSuffix","","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"],["floatLabel","always","subscriptSizing","dynamic",1,"mat-block","flex-1"],["formControlName","resultValuePrecision","matInput","","step","1","min","0","type","number"],[3,"innerHTML"],["class","xs:flex-col gt-xs:gap-4 flex flex-1 flex-row items-stretch justify-start","style","padding-top: 16px;",4,"ngIf"],[1,"group-title"],["subscriptSizing","dynamic",1,"mat-block","no-margin-top","flex-1"],["matInput","","formControlName","customFunction","required",""],[2,"border-bottom","1px solid #eee",3,"value"],[2,"display","block","overflow","hidden","text-overflow","ellipsis","white-space","nowrap"],["required","","formControlName","attributeScope"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"xs:flex-col","gt-xs:gap-4","flex","flex-1","flex-row","items-stretch","justify-start",2,"padding-top","16px"],["formControlName","addToBody"],["formControlName","addToMetadata"]],template:function(a,l){if(a&1&&(o(0,"section",0),g(1,"tb-math-function-autocomplete",1),o(2,"fieldset",2)(3,"legend",3),m(4,"rule-node-config.argument-tile"),n(),g(5,"tb-arguments-map-config",4),n(),C(6,Gs,9,4,"fieldset",5),o(7,"fieldset",2)(8,"legend",3),m(9,"rule-node-config.result-title"),n(),o(10,"div",6)(11,"mat-form-field",7)(12,"mat-label",8),m(13,"rule-node-config.type-field-input"),n(),o(14,"mat-select",9)(15,"mat-select-trigger"),m(16),s(17,"translate"),n(),C(18,js,6,7,"mat-option",10),n(),C(19,Us,2,0,"mat-error",11),n(),o(20,"div",12),C(21,Hs,5,1,"mat-form-field",13),o(22,"mat-form-field",14)(23,"mat-label",8),m(24,"rule-node-config.key-field-input"),n(),g(25,"input",15),o(26,"mat-icon",16),s(27,"translate"),m(28,"help"),n(),C(29,zs,2,0,"mat-error",11),n()(),o(30,"div",12)(31,"mat-form-field",17)(32,"mat-label",8),m(33,"rule-node-config.number-floating-point-field-input"),n(),g(34,"input",18)(35,"mat-hint",19),s(36,"translate"),s(37,"safe"),n()(),C(38,Qs,7,6,"div",20),n()()()),a&2){let x;p("formGroup",l.mathFunctionConfigForm),r(5),p("function",l.mathFunctionConfigForm.get("operation").value),r(),p("ngIf",l.mathFunctionConfigForm.get("operation").value===l.MathFunction.CUSTOM),r(10),f(" ",d(17,11,(x=l.argumentTypeResultMap.get(l.mathFunctionConfigForm.get("result.type").value))==null?null:x.name)," "),r(2),p("ngForOf",l.argumentsResult),r(),p("ngIf",l.mathFunctionConfigForm.get("result.type").hasError("required")),r(2),p("ngIf",l.mathFunctionConfigForm.get("result").get("type").value===l.ArgumentTypeResult.ATTRIBUTE),r(5),h("matTooltip",d(27,13,"rule-node-config.math-templatization-tooltip")),r(3),p("ngIf",l.mathFunctionConfigForm.get("result.key").hasError("required")),r(6),p("innerHTML",le(37,17,d(36,15,"rule-node-config.number-floating-point-field-input-hint"),"html"),we),r(3),p("ngIf",Gt(20,Ps,l.ArgumentTypeResult.ATTRIBUTE,l.ArgumentTypeResult.TIME_SERIES).includes(l.mathFunctionConfigForm.get("result").get("type").value))}},dependencies:[z,B,je,Z,R,k,O,de,Q,ae,te,Jt,X,ee,L,ge,F,_,D,ve,S,M,Qt,V,zi,Qi,lt,E],styles:['@charset "UTF-8";[_nghost-%COMP%]     .fields-group{padding:0 16px 8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]     .fields-group .mat-mdc-form-field .mat-mdc-form-field-infix{width:100%}[_nghost-%COMP%]     .fields-group legend{color:#000000b3;width:fit-content}[_nghost-%COMP%]     .fields-group legend+*{display:block}[_nghost-%COMP%]     .fields-group legend+*.no-margin-top{margin-top:0}']});let t=i;return t})();b();function Js(t,i){if(t&1&&(o(0,"mat-option",4),m(1),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",e.messageTypeNames.get(u)," ")}}var vr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.messageTypeNames=yn,this.eventOptions=[Lt.CONNECT_EVENT,Lt.ACTIVITY_EVENT,Lt.DISCONNECT_EVENT,Lt.INACTIVITY_EVENT]}configForm(){return this.deviceState}prepareInputConfig(e){return{event:I(e?.event)?e.event:Lt.ACTIVITY_EVENT}}onConfigurationSet(e){this.deviceState=this.fb.group({event:[e.event,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-device-state-config"]],features:[N],decls:7,vars:5,consts:[[3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["formControlName","event"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label"),m(3),s(4,"translate"),n(),o(5,"mat-select",2),C(6,Js,2,2,"mat-option",3),n()()()),a&2&&(p("formGroup",l.deviceState),r(3),q(d(4,3,"rule-node-config.select-device-connectivity-event")),r(3),p("ngForOf",l.eventOptions))},dependencies:[z,k,O,te,X,F,_,S,M,E],encapsulation:2});let t=i;return t})();b();var hr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.sendRestApiCallReplyConfigForm}onConfigurationSet(e){this.sendRestApiCallReplyConfigForm=this.fb.group({requestIdMetaDataAttribute:[e?e.requestIdMetaDataAttribute:null,[]],serviceIdMetaDataAttribute:[e?e.serviceIdMetaDataAttribute:null,[]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-action-node-send-rest-api-call-reply-config"]],features:[N],decls:13,vars:2,consts:[[1,"tb-form-panel","stroked","no-padding-bottom",3,"formGroup"],["translate","",1,"tb-form-panel-title"],[3,"hintText"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields","column-xs"],[1,"flex"],["translate",""],["matInput","","formControlName","serviceIdMetaDataAttribute"],["matInput","","formControlName","requestIdMetaDataAttribute"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),m(2,"rule-node-config.reply-routing-configuration"),n(),g(3,"tb-example-hint",2),o(4,"div",3)(5,"mat-form-field",4)(6,"mat-label",5),m(7,"rule-node-config.service-id-metadata-attribute"),n(),g(8,"input",6),n(),o(9,"mat-form-field",4)(10,"mat-label",5),m(11,"rule-node-config.request-id-metadata-attribute"),n(),g(12,"input",7),n()()()),a&2&&(p("formGroup",l.sendRestApiCallReplyConfigForm),r(3),p("hintText","rule-node-config.reply-routing-configuration-hint"))},dependencies:[R,k,O,L,F,_,S,M,V,he],encapsulation:2});let t=i;return t})();var Nn=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=Je({type:i}),i.\u0275inj=Qe({imports:[ke,Be,Et,ut]});let t=i;return t})();(function(){Ye(Nn,{declarations:[Cr,jn,Jn,$n,Yn,Wn,Xn,Zn,ir,nr,rr,or,ar,lr,mr,pr,ur,hr,cr,fr,gr,yr,vr,En,In],imports:[ke,Be,Et,ut],exports:[Cr,jn,Jn,$n,Yn,Wn,Xn,Zn,ir,nr,rr,or,ar,lr,mr,pr,ur,hr,cr,fr,gr,yr,vr]})})();b();b();var Ua=t=>({inputName:t}),br=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.checkMessageConfigForm}prepareInputConfig(e){return{messageNames:I(e?.messageNames)?e.messageNames:[],metadataNames:I(e?.metadataNames)?e.metadataNames:[],checkAllKeys:I(e?.checkAllKeys)?e.checkAllKeys:!1}}prepareOutputConfig(e){return{messageNames:I(e?.messageNames)?e.messageNames:[],metadataNames:I(e?.metadataNames)?e.metadataNames:[],checkAllKeys:e.checkAllKeys}}atLeastOne(e,a=null){return l=>(a||(a=Object.keys(l.controls)),l?.controls&&a.some($=>!e(l.controls[$]))?null:{atLeastOne:!0})}onConfigurationSet(e){this.checkMessageConfigForm=this.fb.group({messageNames:[e.messageNames,[]],metadataNames:[e.metadataNames,[]],checkAllKeys:[e.checkAllKeys,[]]},{validators:this.atLeastOne(c.required,["messageNames","metadataNames"])})}get touchedValidationControl(){return["messageNames","metadataNames"].some(e=>this.checkMessageConfigForm.get(e).touched)}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-filter-node-check-message-config"]],features:[N],decls:25,vars:36,consts:[[1,"tb-form-panel","stroked",3,"formGroup"],[1,"tb-form-row","no-padding","no-border","space-between"],["translate","",1,"tb-form-panel-title","tb-required"],["translate","",1,"tb-form-panel-hint","tb-error",3,"hidden"],["editable","","subscriptSizing","dynamic","formControlName","messageNames",3,"label","placeholder"],["matSuffix","","color","primary","aria-hidden","false","aria-label","help-icon",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"],["editable","","subscriptSizing","dynamic","formControlName","metadataNames",3,"label","placeholder"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","checkAllKeys",1,"mat-slide"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2),m(3,"rule-node-config.fields-to-check"),n(),o(4,"div",3),m(5," rule-node-config.at-least-one-field-required "),n()(),o(6,"tb-string-items-list",4),s(7,"translate"),s(8,"translate"),o(9,"mat-icon",5),s(10,"translate"),s(11,"translate"),m(12,"help"),n()(),o(13,"tb-string-items-list",6),s(14,"translate"),s(15,"translate"),o(16,"mat-icon",5),s(17,"translate"),s(18,"translate"),m(19,"help"),n()(),o(20,"div",7),s(21,"translate"),o(22,"mat-slide-toggle",8),m(23),s(24,"translate"),n()()()),a&2&&(p("formGroup",l.checkMessageConfigForm),r(4),p("hidden",!(l.touchedValidationControl&&l.checkMessageConfigForm.hasError("atLeastOne"))),r(2),p("label",d(7,10,"rule-node-config.data-keys"))("placeholder",d(8,12,"rule-node-config.add-message-field")),r(3),h("matTooltip",le(11,16,"rule-node-config.chip-help",Fe(32,Ua,d(10,14,"rule-node-config.field-name")))),r(4),p("label",d(14,19,"rule-node-config.metadata-keys"))("placeholder",d(15,21,"rule-node-config.add-metadata-field")),r(3),h("matTooltip",le(18,25,"rule-node-config.chip-help",Fe(34,Ua,d(17,23,"rule-node-config.field-name")))),r(4),h("tb-hint-tooltip-icon",d(21,28,"rule-node-config.check-all-keys-tooltip")),r(3),f(" ",d(24,30,"rule-node-config.check-all-keys")," "))},dependencies:[Ft,Z,ae,ee,ue,F,_,S,M,V,Ce,E],encapsulation:2});let t=i;return t})();b();function Ys(t,i){if(t&1&&(o(0,"mat-option",10),m(1),s(2,"translate"),o(3,"span",11),m(4,"rule-node-config.relations-query-config-direction-suffix"),n()()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.entitySearchDirectionTranslationsMap.get(u))," ")}}function Ws(t,i){if(t&1&&g(0,"tb-entity-autocomplete",15),t&2){let u=v(2);p("entityType",u.checkRelationConfigForm.get("entityType").value)}}function Xs(t,i){if(t&1&&(o(0,"div",12),g(1,"tb-entity-type-select",13),C(2,Ws,1,1,"tb-entity-autocomplete",14),n()),t&2){let u=v();r(2),p("ngIf",u.checkRelationConfigForm.get("entityType").value)}}var xr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.entitySearchDirection=Object.values(mt),this.entitySearchDirectionTranslationsMap=Yt}configForm(){return this.checkRelationConfigForm}prepareInputConfig(e){return{checkForSingleEntity:I(e?.checkForSingleEntity)?e.checkForSingleEntity:!1,direction:I(e?.direction)?e.direction:null,entityType:I(e?.entityType)?e.entityType:null,entityId:I(e?.entityId)?e.entityId:null,relationType:I(e?.relationType)?e.relationType:null}}onConfigurationSet(e){this.checkRelationConfigForm=this.fb.group({checkForSingleEntity:[e.checkForSingleEntity,[]],direction:[e.direction,[]],entityType:[e.entityType,e&&e.checkForSingleEntity?[c.required]:[]],entityId:[e.entityId,e&&e.checkForSingleEntity?[c.required]:[]],relationType:[e.relationType,[c.required]]})}validatorTriggers(){return["checkForSingleEntity"]}updateValidators(e){let a=this.checkRelationConfigForm.get("checkForSingleEntity").value;this.checkRelationConfigForm.get("entityType").setValidators(a?[c.required]:[]),this.checkRelationConfigForm.get("entityType").updateValueAndValidity({emitEvent:e}),this.checkRelationConfigForm.get("entityId").setValidators(a?[c.required]:[]),this.checkRelationConfigForm.get("entityId").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-filter-node-check-relation-config"]],features:[N],decls:17,vars:12,consts:[[1,"tb-form-panel","stroked","no-padding-bottom",3,"formGroup"],["translate","",1,"tb-form-panel-title"],[1,"flex","flex-col"],["hideRequiredMarker","",1,"mat-block"],["formControlName","direction","required",""],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","relationType"],[1,"tb-form-row","no-border","no-padding","slide-toggle",3,"tb-hint-tooltip-icon"],["formControlName","checkForSingleEntity",1,"mat-slide"],["class","same-width-component-row",4,"ngIf"],[3,"value"],["translate",""],[1,"same-width-component-row"],["showLabel","","required","","formControlName","entityType",2,"min-width","100px","flex","1"],["class","flex-1","required","","formControlName","entityId",3,"entityType",4,"ngIf"],["required","","formControlName","entityId",1,"flex-1",3,"entityType"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),m(2,"rule-node-config.relation-search-parameters"),n(),o(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),m(6),s(7,"translate"),n(),o(8,"mat-select",4),C(9,Ys,5,4,"mat-option",5),n()(),g(10,"tb-relation-type-autocomplete",6),o(11,"div",7),s(12,"translate"),o(13,"mat-slide-toggle",8),m(14),s(15,"translate"),n()(),C(16,Xs,3,1,"div",9),n()()),a&2&&(p("formGroup",l.checkRelationConfigForm),r(6),q(d(7,6,"relation.direction")),r(3),p("ngForOf",l.entitySearchDirection),r(2),h("tb-hint-tooltip-icon",d(12,8,"rule-node-config.check-relation-to-specific-entity-tooltip")),r(3),f(" ",d(15,10,"rule-node-config.check-relation-to-specific-entity")," "),r(2),p("ngIf",l.checkRelationConfigForm.get("checkForSingleEntity").value))},dependencies:[z,B,vn,$t,Wt,k,O,te,X,ue,F,_,D,S,M,V,Ce,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-bottom:18px}']});let t=i;return t})();b();var Ka=t=>({perimeterKeyName:t});function Zs(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.latitude-field-name-required")," "))}function ed(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.longitude-field-name-required")," "))}function td(t,i){if(t&1&&(o(0,"mat-option",18),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.perimeterTypeTranslationMap.get(u))," ")}}function id(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.perimeter-key-name-required")," "))}function nd(t,i){if(t&1&&(o(0,"mat-form-field",19)(1,"mat-label"),m(2),s(3,"translate"),n(),g(4,"input",20),C(5,id,3,3,"mat-error",6),o(6,"mat-hint"),m(7),s(8,"translate"),n()()),t&2){let u=v();r(2),q(d(3,3,"rule-node-config.perimeter-key-name")),r(3),p("ngIf",u.geoFilterConfigForm.get("perimeterKeyName").hasError("required")),r(2),q(d(8,5,"rule-node-config.perimeter-key-name-hint"))}}function rd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.circle-center-latitude-required")," "))}function od(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.circle-center-longitude-required")," "))}function ad(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.range-required")," "))}function ld(t,i){if(t&1&&(o(0,"mat-option",18),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),f(" ",d(2,2,e.rangeUnitTranslationMap.get(u))," ")}}function md(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.range-units-required")," "))}function pd(t,i){if(t&1&&(o(0,"div",9)(1,"div",3)(2,"mat-form-field",21)(3,"mat-label"),m(4),s(5,"translate"),n(),g(6,"input",22),C(7,rd,3,3,"mat-error",6),n(),o(8,"mat-form-field",21)(9,"mat-label"),m(10),s(11,"translate"),n(),g(12,"input",23),C(13,od,3,3,"mat-error",6),n()(),o(14,"div",3)(15,"mat-form-field",21)(16,"mat-label"),m(17),s(18,"translate"),n(),g(19,"input",24),C(20,ad,3,3,"mat-error",6),n(),o(21,"mat-form-field",21)(22,"mat-label"),m(23),s(24,"translate"),n(),o(25,"mat-select",25),C(26,ld,3,4,"mat-option",12),n(),C(27,md,3,3,"mat-error",6),n()()()),t&2){let u=v();r(4),q(d(5,9,"rule-node-config.circle-center-latitude")),r(3),p("ngIf",u.geoFilterConfigForm.get("centerLatitude").hasError("required")),r(3),q(d(11,11,"rule-node-config.circle-center-longitude")),r(3),p("ngIf",u.geoFilterConfigForm.get("centerLongitude").hasError("required")),r(4),q(d(18,13,"rule-node-config.range")),r(3),p("ngIf",u.geoFilterConfigForm.get("range").hasError("required")),r(3),q(d(24,15,"rule-node-config.range-units")),r(3),p("ngForOf",u.rangeUnits),r(),p("ngIf",u.geoFilterConfigForm.get("rangeUnit").hasError("required"))}}function sd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.polygon-definition-required")," "))}function dd(t,i){if(t&1&&(o(0,"mat-form-field",26)(1,"mat-label"),m(2),s(3,"translate"),n(),g(4,"input",27),o(5,"mat-hint"),m(6),s(7,"translate"),n(),C(8,sd,3,3,"mat-error",6),n()),t&2){let u=v();r(2),q(d(3,3,"rule-node-config.polygon-definition")),r(4),q(d(7,5,"rule-node-config.polygon-definition-hint")),r(2),p("ngIf",u.geoFilterConfigForm.get("polygonsDefinition").hasError("required"))}}var Tr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.perimeterType=Tt,this.perimeterTypes=Object.values(Tt),this.perimeterTypeTranslationMap=Tn,this.rangeUnits=Object.values(qt),this.rangeUnitTranslationMap=_n,this.defaultPaddingEnable=!0}configForm(){return this.geoFilterConfigForm}prepareInputConfig(e){return{latitudeKeyName:I(e?.latitudeKeyName)?e.latitudeKeyName:null,longitudeKeyName:I(e?.longitudeKeyName)?e.longitudeKeyName:null,perimeterType:I(e?.perimeterType)?e.perimeterType:null,fetchPerimeterInfoFromMessageMetadata:I(e?.fetchPerimeterInfoFromMessageMetadata)?e.fetchPerimeterInfoFromMessageMetadata:!1,perimeterKeyName:I(e?.perimeterKeyName)?e.perimeterKeyName:null,centerLatitude:I(e?.centerLatitude)?e.centerLatitude:null,centerLongitude:I(e?.centerLongitude)?e.centerLongitude:null,range:I(e?.range)?e.range:null,rangeUnit:I(e?.rangeUnit)?e.rangeUnit:null,polygonsDefinition:I(e?.polygonsDefinition)?e.polygonsDefinition:null}}onConfigurationSet(e){this.geoFilterConfigForm=this.fb.group({latitudeKeyName:[e.latitudeKeyName,[c.required]],longitudeKeyName:[e.longitudeKeyName,[c.required]],perimeterType:[e.perimeterType,[c.required]],fetchPerimeterInfoFromMessageMetadata:[e.fetchPerimeterInfoFromMessageMetadata,[]],perimeterKeyName:[e.perimeterKeyName,[]],centerLatitude:[e.centerLatitude,[]],centerLongitude:[e.centerLongitude,[]],range:[e.range,[]],rangeUnit:[e.rangeUnit,[]],polygonsDefinition:[e.polygonsDefinition,[]]})}validatorTriggers(){return["fetchPerimeterInfoFromMessageMetadata","perimeterType"]}updateValidators(e){let a=this.geoFilterConfigForm.get("fetchPerimeterInfoFromMessageMetadata").value,l=this.geoFilterConfigForm.get("perimeterType").value;a?this.geoFilterConfigForm.get("perimeterKeyName").setValidators([c.required]):this.geoFilterConfigForm.get("perimeterKeyName").setValidators([]),!a&&l===Tt.CIRCLE?(this.geoFilterConfigForm.get("centerLatitude").setValidators([c.required,c.min(-90),c.max(90)]),this.geoFilterConfigForm.get("centerLongitude").setValidators([c.required,c.min(-180),c.max(180)]),this.geoFilterConfigForm.get("range").setValidators([c.required,c.min(0)]),this.geoFilterConfigForm.get("rangeUnit").setValidators([c.required]),this.defaultPaddingEnable=!1):(this.geoFilterConfigForm.get("centerLatitude").setValidators([]),this.geoFilterConfigForm.get("centerLongitude").setValidators([]),this.geoFilterConfigForm.get("range").setValidators([]),this.geoFilterConfigForm.get("rangeUnit").setValidators([]),this.defaultPaddingEnable=!0),!a&&l===Tt.POLYGON?this.geoFilterConfigForm.get("polygonsDefinition").setValidators([c.required]):this.geoFilterConfigForm.get("polygonsDefinition").setValidators([]),this.geoFilterConfigForm.get("perimeterKeyName").updateValueAndValidity({emitEvent:e}),this.geoFilterConfigForm.get("centerLatitude").updateValueAndValidity({emitEvent:e}),this.geoFilterConfigForm.get("centerLongitude").updateValueAndValidity({emitEvent:e}),this.geoFilterConfigForm.get("range").updateValueAndValidity({emitEvent:e}),this.geoFilterConfigForm.get("rangeUnit").updateValueAndValidity({emitEvent:e}),this.geoFilterConfigForm.get("polygonsDefinition").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-filter-node-gps-geofencing-config"]],features:[N],decls:39,vars:32,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"flex","flex-row","gap-4"],[1,"mat-block","max-w-50%","flex-full"],["matInput","","formControlName","latitudeKeyName","required",""],[4,"ngIf"],["matInput","","formControlName","longitudeKeyName","required",""],["translate","",1,"tb-form-hint","tb-primary-fill"],[1,"flex","flex-col"],["hideRequiredMarker","",1,"mat-block","flex-1"],["formControlName","perimeterType"],[3,"value",4,"ngFor","ngForOf"],[1,"tb-form-row","no-border","no-padding","slide-toggle",3,"tb-hint-tooltip-icon"],["formControlName","fetchPerimeterInfoFromMessageMetadata",1,"mat-slide"],["class","mat-block",4,"ngIf"],["class","flex flex-col",4,"ngIf"],["class","mat-block","subscriptSizing","dynamic",4,"ngIf"],[3,"value"],[1,"mat-block"],["matInput","","formControlName","perimeterKeyName","required",""],[1,"flex-1"],["type","number","min","-90","max","90","step","0.1","matInput","","formControlName","centerLatitude","required",""],["type","number","min","-180","max","180","step","0.1","matInput","","formControlName","centerLongitude","required",""],["type","number","min","0","step","0.1","matInput","","formControlName","range","required",""],["formControlName","rangeUnit","required",""],["subscriptSizing","dynamic",1,"mat-block"],["matInput","","formControlName","polygonsDefinition","required",""]],template:function(a,l){a&1&&(o(0,"section",0)(1,"section",1)(2,"div",2),m(3,"rule-node-config.coordinate-field-names"),n(),o(4,"section")(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),m(8),s(9,"translate"),n(),g(10,"input",5),C(11,Zs,3,3,"mat-error",6),n(),o(12,"mat-form-field",4)(13,"mat-label"),m(14),s(15,"translate"),n(),g(16,"input",7),C(17,ed,3,3,"mat-error",6),n()(),o(18,"div",8),m(19,"rule-node-config.coordinate-field-hint"),n()()(),o(20,"section",1)(21,"div",2),m(22,"rule-node-config.geofence-configuration"),n(),o(23,"section",9)(24,"mat-form-field",10)(25,"mat-label"),m(26),s(27,"translate"),n(),o(28,"mat-select",11),C(29,td,3,4,"mat-option",12),n()(),o(30,"div",13),s(31,"translate"),s(32,"translate"),o(33,"mat-slide-toggle",14),m(34),s(35,"translate"),n()(),C(36,nd,9,7,"mat-form-field",15)(37,pd,28,17,"div",16)(38,dd,9,7,"mat-form-field",17),n()()()),a&2&&(p("formGroup",l.geoFilterConfigForm),r(8),q(d(9,14,"rule-node-config.latitude-field-name")),r(3),p("ngIf",l.geoFilterConfigForm.get("latitudeKeyName").hasError("required")),r(3),q(d(15,16,"rule-node-config.longitude-field-name")),r(3),p("ngIf",l.geoFilterConfigForm.get("longitudeKeyName").hasError("required")),r(3),Ke("no-padding-bottom",!l.defaultPaddingEnable),r(6),q(d(27,18,"rule-node-config.perimeter-type")),r(3),p("ngForOf",l.perimeterTypes),r(),h("tb-hint-tooltip-icon",l.geoFilterConfigForm.get("perimeterType").value===l.perimeterType.CIRCLE?le(31,20,"rule-node-config.fetch-circle-parameter-info-from-metadata-hint",Fe(28,Ka,l.geoFilterConfigForm.get("perimeterKeyName").valid?l.geoFilterConfigForm.get("perimeterKeyName").value:"ss_perimeter")):le(32,23,"rule-node-config.fetch-poligon-parameter-info-from-metadata-hint",Fe(30,Ka,l.geoFilterConfigForm.get("perimeterKeyName").valid?l.geoFilterConfigForm.get("perimeterKeyName").value:"ss_perimeter"))),r(4),f(" ",d(35,26,"rule-node-config.fetch-perimeter-info-from-metadata")," "),r(2),p("ngIf",l.geoFilterConfigForm.get("fetchPerimeterInfoFromMessageMetadata").value),r(),p("ngIf",l.geoFilterConfigForm.get("perimeterType").value===l.perimeterType.CIRCLE&&!l.geoFilterConfigForm.get("fetchPerimeterInfoFromMessageMetadata").value),r(),p("ngIf",l.geoFilterConfigForm.get("perimeterType").value===l.perimeterType.POLYGON&&!l.geoFilterConfigForm.get("fetchPerimeterInfoFromMessageMetadata").value))},dependencies:[z,B,R,k,O,de,Q,te,X,ue,L,ge,F,_,D,ve,it,S,M,V,Ce,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .slide-toggle[_ngcontent-%COMP%]{margin-bottom:18px}']});let t=i;return t})();b();var _r=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.messageTypeConfigForm}prepareInputConfig(e){return{messageTypes:I(e?.messageTypes)?e.messageTypes:null}}onConfigurationSet(e){this.messageTypeConfigForm=this.fb.group({messageTypes:[e.messageTypes,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-filter-node-message-type-config"]],features:[N],decls:3,vars:4,consts:[[3,"formGroup"],["required","","formControlName","messageTypes",3,"label"]],template:function(a,l){a&1&&(o(0,"section",0),g(1,"tb-message-types-config",1),s(2,"translate"),n()),a&2&&(p("formGroup",l.messageTypeConfigForm),r(),p("label",d(2,2,"rule-node-config.select-message-types")))},dependencies:[F,_,D,S,M,Hi,E],encapsulation:2});let t=i;return t})();b();var ud=t=>({inputName:t}),Sr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.allowedEntityTypes=[W.DEVICE,W.ASSET,W.ENTITY_VIEW,W.TENANT,W.CUSTOMER,W.USER,W.DASHBOARD,W.RULE_CHAIN,W.RULE_NODE,W.EDGE]}configForm(){return this.originatorTypeConfigForm}prepareInputConfig(e){return{originatorTypes:I(e?.originatorTypes)?e.originatorTypes:null}}onConfigurationSet(e){this.originatorTypeConfigForm=this.fb.group({originatorTypes:[e.originatorTypes,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-filter-node-originator-type-config"]],features:[N],decls:9,vars:20,consts:[[3,"formGroup"],["formControlName","originatorTypes","required","",1,"flex-1",3,"allowedEntityTypes","ignoreAuthorityFilter","emptyInputPlaceholder","filledInputPlaceholder","label"],["matSuffix","","aria-hidden","false","aria-label","help-icon","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"tb-entity-type-list",1),s(2,"translate"),s(3,"translate"),s(4,"translate"),o(5,"mat-icon",2),s(6,"translate"),s(7,"translate"),m(8,"help"),n()()()),a&2&&(p("formGroup",l.originatorTypeConfigForm),r(),p("allowedEntityTypes",l.allowedEntityTypes)("ignoreAuthorityFilter",!0)("emptyInputPlaceholder",d(2,7,"rule-node-config.add-entity-type"))("filledInputPlaceholder",d(3,9,"rule-node-config.add-entity-type"))("label",d(4,11,"rule-node-config.select-entity-types")),r(4),h("matTooltip",le(7,15,"rule-node-config.chip-help",Fe(18,ud,d(6,13,"rule-node-config.entity-type")))))},dependencies:[Uo,Z,ae,ee,F,_,D,S,M,E],encapsulation:2});let t=i;return t})();b();var cd=["jsFuncComponent"],fd=["tbelFuncComponent"],Ha=()=>["msg","metadata","msgType"];function gd(t,i){t&1&&g(0,"tb-script-lang",7)}function Cd(t,i){if(t&1){let u=pe();o(0,"tb-js-func",8,0)(2,"button",9),s(3,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(4,"mat-icon",10),m(5,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(4,Ha)),r(2),h("matTooltip",d(3,2,u.testScriptLabel))}}function yd(t,i){if(t&1){let u=pe();o(0,"tb-js-func",11,1)(2,"button",9),s(3,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(4,"mat-icon",10),m(5,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(6,Ha))("disableUndefinedCheck",!0)("scriptLanguage",u.scriptLanguage.TBEL),r(2),h("matTooltip",d(3,4,u.testScriptLabel))}}var Fr=(()=>{let i=class i extends A{constructor(e,a,l,x){super(),this.store=e,this.fb=a,this.nodeScriptTestService=l,this.translate=x,this.tbelEnabled=Ct(this.store).tbelEnabled,this.scriptLanguage=J,this.changeScript=new gt,this.hasScript=!0,this.testScriptLabel="rule-node-config.test-filter-function"}configForm(){return this.scriptConfigForm}onConfigurationSet(e){this.scriptConfigForm=this.fb.group({scriptLang:[e.scriptLang,[c.required]],jsScript:[e.jsScript,[]],tbelScript:[e.tbelScript,[]]})}validatorTriggers(){return["scriptLang"]}updateValidators(e){let a=this.scriptConfigForm.get("scriptLang").value;a===J.TBEL&&!this.tbelEnabled&&(a=J.JS,this.scriptConfigForm.get("scriptLang").patchValue(a,{emitEvent:!1}),setTimeout(()=>{this.scriptConfigForm.updateValueAndValidity({emitEvent:!0})})),this.scriptConfigForm.get("jsScript").setValidators(a===J.JS?[c.required]:[]),this.scriptConfigForm.get("jsScript").updateValueAndValidity({emitEvent:e}),this.scriptConfigForm.get("tbelScript").setValidators(a===J.TBEL?[c.required]:[]),this.scriptConfigForm.get("tbelScript").updateValueAndValidity({emitEvent:e})}prepareInputConfig(e){return e&&(e.scriptLang||(e.scriptLang=J.JS)),{scriptLang:I(e?.scriptLang)?e.scriptLang:J.JS,jsScript:I(e?.jsScript)?e.jsScript:null,tbelScript:I(e?.tbelScript)?e.tbelScript:null}}testScript(e){let a=this.scriptConfigForm.get("scriptLang").value,l=a===J.JS?"jsScript":"tbelScript",x=a===J.JS?"rulenode/filter_node_script_fn":"rulenode/tbel/filter_node_script_fn",$=this.scriptConfigForm.get(l).value;this.nodeScriptTestService.testNodeScript($,"filter",this.translate.instant("rule-node-config.filter"),"Filter",["msg","metadata","msgType"],this.ruleNodeId,x,a,e).subscribe(be=>{be&&(this.scriptConfigForm.get(l).setValue(be),this.changeScript.emit())})}onValidate(){this.scriptConfigForm.get("scriptLang").value===J.JS&&this.jsFuncComponent.validateOnSubmit()}};i.\u0275fac=function(a){return new(a||i)(y(gi),y(j),y(ht),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-filter-node-script-config"]],viewQuery:function(a,l){if(a&1&&(De(cd,5),De(fd,5)),a&2){let x;Ve(x=qe())&&(l.jsFuncComponent=x.first),Ve(x=qe())&&(l.tbelFuncComponent=x.first)}},features:[N],decls:7,vars:7,consts:[["jsFuncComponent",""],["tbelFuncComponent",""],[3,"formGroup"],["formControlName","scriptLang",4,"ngIf"],["formControlName","jsScript","functionName","Filter","helpId","rulenode/filter_node_script_fn","noValidate","true",3,"functionArgs",4,"ngIf"],["formControlName","tbelScript","functionName","Filter","helpId","rulenode/tbel/filter_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage",4,"ngIf"],["mat-button","","mat-raised-button","","color","primary",3,"click"],["formControlName","scriptLang"],["formControlName","jsScript","functionName","Filter","helpId","rulenode/filter_node_script_fn","noValidate","true",3,"functionArgs"],["toolbarSuffixButton","","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"click","matTooltip"],["color","primary",1,"material-icons"],["formControlName","tbelScript","functionName","Filter","helpId","rulenode/tbel/filter_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage"]],template:function(a,l){a&1&&(o(0,"section",2),C(1,gd,1,0,"tb-script-lang",3)(2,Cd,6,5,"tb-js-func",4)(3,yd,6,7,"tb-js-func",5),o(4,"button",6),Y("click",function(){return l.testScript()}),m(5),s(6,"translate"),n()()),a&2&&(p("formGroup",l.scriptConfigForm),r(),p("ngIf",l.tbelEnabled),r(),p("ngIf",l.scriptConfigForm.get("scriptLang").value===l.scriptLanguage.JS),r(),p("ngIf",l.scriptConfigForm.get("scriptLang").value===l.scriptLanguage.TBEL),r(2),f(" ",d(6,5,l.testScriptLabel)," "))},dependencies:[B,vt,Ge,_e,Z,ee,F,_,S,M,It,E],encapsulation:2});let t=i;return t})();b();var vd=["jsFuncComponent"],hd=["tbelFuncComponent"],za=()=>["msg","metadata","msgType"];function bd(t,i){t&1&&g(0,"tb-script-lang",7)}function xd(t,i){if(t&1){let u=pe();o(0,"tb-js-func",8,0)(2,"button",9),s(3,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(4,"mat-icon",10),m(5,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(4,za)),r(2),h("matTooltip",d(3,2,u.testScriptLabel))}}function Td(t,i){if(t&1){let u=pe();o(0,"tb-js-func",11,1)(2,"button",9),s(3,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(4,"mat-icon",10),m(5,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(6,za))("disableUndefinedCheck",!0)("scriptLanguage",u.scriptLanguage.TBEL),r(2),h("matTooltip",d(3,4,u.testScriptLabel))}}var Ir=(()=>{let i=class i extends A{constructor(e,a,l){super(),this.fb=e,this.nodeScriptTestService=a,this.translate=l,this.tbelEnabled=Ct(this.store).tbelEnabled,this.scriptLanguage=J,this.changeScript=new gt,this.hasScript=!0,this.testScriptLabel="rule-node-config.test-switch-function"}configForm(){return this.switchConfigForm}onConfigurationSet(e){this.switchConfigForm=this.fb.group({scriptLang:[e.scriptLang,[c.required]],jsScript:[e.jsScript,[]],tbelScript:[e.tbelScript,[]]})}validatorTriggers(){return["scriptLang"]}updateValidators(e){let a=this.switchConfigForm.get("scriptLang").value;a===J.TBEL&&!this.tbelEnabled&&(a=J.JS,this.switchConfigForm.get("scriptLang").patchValue(a,{emitEvent:!1}),setTimeout(()=>{this.switchConfigForm.updateValueAndValidity({emitEvent:!0})})),this.switchConfigForm.get("jsScript").setValidators(a===J.JS?[c.required]:[]),this.switchConfigForm.get("jsScript").updateValueAndValidity({emitEvent:e}),this.switchConfigForm.get("tbelScript").setValidators(a===J.TBEL?[c.required]:[]),this.switchConfigForm.get("tbelScript").updateValueAndValidity({emitEvent:e})}prepareInputConfig(e){return e&&(e.scriptLang||(e.scriptLang=J.JS)),{scriptLang:I(e?.scriptLang)?e.scriptLang:J.JS,jsScript:I(e?.jsScript)?e.jsScript:null,tbelScript:I(e?.tbelScript)?e.tbelScript:null}}testScript(e){let a=this.switchConfigForm.get("scriptLang").value,l=a===J.JS?"jsScript":"tbelScript",x=a===J.JS?"rulenode/switch_node_script_fn":"rulenode/tbel/switch_node_script_fn",$=this.switchConfigForm.get(l).value;this.nodeScriptTestService.testNodeScript($,"switch",this.translate.instant("rule-node-config.switch"),"Switch",["msg","metadata","msgType"],this.ruleNodeId,x,a,e).subscribe(be=>{be&&(this.switchConfigForm.get(l).setValue(be),this.changeScript.emit())})}onValidate(){this.switchConfigForm.get("scriptLang").value===J.JS&&this.jsFuncComponent.validateOnSubmit()}};i.\u0275fac=function(a){return new(a||i)(y(j),y(ht),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-filter-node-switch-config"]],viewQuery:function(a,l){if(a&1&&(De(vd,5),De(hd,5)),a&2){let x;Ve(x=qe())&&(l.jsFuncComponent=x.first),Ve(x=qe())&&(l.tbelFuncComponent=x.first)}},features:[N],decls:7,vars:7,consts:[["jsFuncComponent",""],["tbelFuncComponent",""],[3,"formGroup"],["formControlName","scriptLang",4,"ngIf"],["formControlName","jsScript","functionName","Switch","helpId","rulenode/switch_node_script_fn","noValidate","true",3,"functionArgs",4,"ngIf"],["formControlName","tbelScript","functionName","Switch","helpId","rulenode/tbel/switch_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage",4,"ngIf"],["mat-button","","mat-raised-button","","color","primary",3,"click"],["formControlName","scriptLang"],["formControlName","jsScript","functionName","Switch","helpId","rulenode/switch_node_script_fn","noValidate","true",3,"functionArgs"],["toolbarSuffixButton","","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"click","matTooltip"],["color","primary",1,"material-icons"],["formControlName","tbelScript","functionName","Switch","helpId","rulenode/tbel/switch_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage"]],template:function(a,l){a&1&&(o(0,"section",2),C(1,bd,1,0,"tb-script-lang",3)(2,xd,6,5,"tb-js-func",4)(3,Td,6,7,"tb-js-func",5),o(4,"button",6),Y("click",function(){return l.testScript()}),m(5),s(6,"translate"),n()()),a&2&&(p("formGroup",l.switchConfigForm),r(),p("ngIf",l.tbelEnabled),r(),p("ngIf",l.switchConfigForm.get("scriptLang").value===l.scriptLanguage.JS),r(),p("ngIf",l.switchConfigForm.get("scriptLang").value===l.scriptLanguage.TBEL),r(2),f(" ",d(6,5,l.testScriptLabel)," "))},dependencies:[B,vt,Ge,_e,Z,ee,F,_,S,M,It,E],encapsulation:2});let t=i;return t})();b();var Er=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.searchText=""}configForm(){return this.alarmStatusConfigForm}prepareInputConfig(e){return{alarmStatusList:I(e?.alarmStatusList)?e.alarmStatusList:null}}onConfigurationSet(e){this.alarmStatusConfigForm=this.fb.group({alarmStatusList:[e.alarmStatusList,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-filter-node-check-alarm-status-config"]],features:[N],decls:7,vars:2,consts:[[1,"tb-form-panel","stroked",3,"formGroup"],[1,"tb-form-row","no-padding","no-border","space-between"],["translate","",1,"tb-form-panel-title","tb-required"],["translate","",1,"tb-form-panel-hint","tb-error",3,"hidden"],["formControlName","alarmStatusList"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2),m(3,"rule-node-config.alarm-status"),n(),o(4,"div",3),m(5," rule-node-config.alarm-required "),n()(),g(6,"tb-alarm-status-select",4),n()),a&2&&(p("formGroup",l.alarmStatusConfigForm),r(4),p("hidden",l.alarmStatusConfigForm.get("alarmStatusList").valid))},dependencies:[F,_,S,M,V,Yi],encapsulation:2});let t=i;return t})();var An=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=Je({type:i}),i.\u0275inj=Qe({imports:[ke,Be,ut]});let t=i;return t})();(function(){Ye(An,{declarations:[br,xr,Tr,_r,Sr,Fr,Ir,Er],imports:[ke,Be,ut],exports:[br,xr,Tr,_r,Sr,Fr,Ir,Er]})})();b();b();function _d(t,i){if(t&1&&(o(0,"tb-toggle-option",8),m(1),n()),t&2){let u=i.$implicit;p("value",u.value),r(),f(" ",u.name," ")}}var Mr=(()=>{let i=class i extends A{constructor(e,a){super(),this.fb=e,this.translate=a,this.fetchToData=[],this.DataToFetch=Ae;for(let l of Pt.keys())l!==Ae.FIELDS&&this.fetchToData.push({value:l,name:this.translate.instant(Pt.get(l))})}configForm(){return this.customerAttributesConfigForm}prepareOutputConfig(e){let a={};for(let l of Object.keys(e.dataMapping))a[l.trim()]=e.dataMapping[l];return e.dataMapping=a,Dt(e)}prepareInputConfig(e){let a;I(e?.telemetry)?a=e.telemetry?Ae.LATEST_TELEMETRY:Ae.ATTRIBUTES:a=I(e?.dataToFetch)?e.dataToFetch:Ae.ATTRIBUTES;let l;return I(e?.attrMapping)?l=e.attrMapping:l=I(e?.dataMapping)?e.dataMapping:null,{dataToFetch:a,dataMapping:l,fetchTo:I(e?.fetchTo)?e.fetchTo:ye.METADATA}}selectTranslation(e,a){return this.customerAttributesConfigForm.get("dataToFetch").value===Ae.LATEST_TELEMETRY?e:a}onConfigurationSet(e){this.customerAttributesConfigForm=this.fb.group({dataToFetch:[e.dataToFetch,[]],dataMapping:[e.dataMapping,[c.required]],fetchTo:[e.fetchTo]})}};i.\u0275fac=function(a){return new(a||i)(y(G),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-enrichment-node-customer-attributes-config"]],features:[N],decls:17,vars:26,consts:[[1,"tb-form-panel","stroked",3,"formGroup"],["translate","",1,"tb-form-panel-title"],[1,"flex","flex-1","items-center","justify-center"],[1,"fetch-to-data-toggle"],["formControlName","dataToFetch","appearance","fill",1,"fetch-to-data-toggle"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","dataMapping","popupHelpLink","rulenode/customer_attributes_node_fields_templatization",3,"requiredText","labelText","keyText","keyRequiredText","valText","valRequiredText","hintText"],["formControlName","fetchTo",3,"labelText"],[3,"value"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),m(2,"rule-node-config.mapping-of-customers"),n(),o(3,"div",2)(4,"div",3)(5,"tb-toggle-select",4),C(6,_d,2,2,"tb-toggle-option",5),n()()(),g(7,"tb-kv-map-config",6),s(8,"translate"),s(9,"translate"),s(10,"translate"),s(11,"translate"),s(12,"translate"),s(13,"translate"),g(14,"tb-msg-metadata-chip",7),s(15,"translate"),s(16,"translate"),n()),a&2&&(p("formGroup",l.customerAttributesConfigForm),r(6),p("ngForOf",l.fetchToData),r(),p("requiredText",d(8,10,"rule-node-config.attr-mapping-required"))("labelText",d(9,12,l.selectTranslation("rule-node-config.latest-telemetry-mapping","rule-node-config.attributes-mapping")))("keyText",d(10,14,l.selectTranslation("rule-node-config.source-telemetry","rule-node-config.source-attribute")))("keyRequiredText",d(11,16,l.selectTranslation("rule-node-config.source-telemetry-required","rule-node-config.source-attribute-required")))("valText",d(12,18,"rule-node-config.target-key"))("valRequiredText",d(13,20,"rule-node-config.target-key-required"))("hintText","rule-node-config.kv-map-pattern-hint"),r(7),p("labelText",l.customerAttributesConfigForm.get("dataToFetch").value===l.DataToFetch.LATEST_TELEMETRY?d(15,22,"rule-node-config.add-mapped-latest-telemetry-to"):d(16,24,"rule-node-config.add-mapped-attribute-to")))},dependencies:[z,F,_,D,S,M,V,nt,rt,ot,Pe,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .fetch-to-data-toggle[_ngcontent-%COMP%]{max-width:420px;width:100%}']});let t=i;return t})();b();var Sd=t=>({inputName:t}),Nr=(()=>{let i=class i extends A{constructor(e,a){super(),this.translate=e,this.fb=a,this.predefinedValues=[];for(let l of Object.keys(st))this.predefinedValues.push({value:st[l],name:this.translate.instant(fa.get(st[l]))})}ngOnInit(){super.ngOnInit()}configForm(){return this.entityDetailsConfigForm}prepareInputConfig(e){let a;return I(e?.addToMetadata)?e.addToMetadata?a=ye.METADATA:a=ye.DATA:e?.fetchTo?a=e.fetchTo:a=ye.DATA,{detailsList:I(e?.detailsList)?e.detailsList:null,fetchTo:a}}onConfigurationSet(e){this.entityDetailsConfigForm=this.fb.group({detailsList:[e.detailsList,[c.required]],fetchTo:[e.fetchTo,[]]})}};i.\u0275fac=function(a){return new(a||i)(y(me),y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-enrichment-node-entity-details-config"]],features:[N],decls:11,vars:22,consts:[[3,"formGroup"],["required","","formControlName","detailsList",1,"mat-block",3,"predefinedValues","label","placeholder","requiredText"],["matSuffix","","aria-hidden","false","aria-label","help-icon","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"],["formControlName","fetchTo",3,"labelText"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"tb-string-items-list",1),s(2,"translate"),s(3,"translate"),s(4,"translate"),o(5,"mat-icon",2),s(6,"translate"),s(7,"translate"),m(8," help "),n()(),g(9,"tb-msg-metadata-chip",3),s(10,"translate"),n()),a&2&&(p("formGroup",l.entityDetailsConfigForm),r(),p("predefinedValues",l.predefinedValues)("label",d(2,7,"rule-node-config.select-details"))("placeholder",d(3,9,"rule-node-config.add-detail"))("requiredText",d(4,11,"rule-node-config.entity-details-list-empty")),r(4),h("matTooltip",le(7,15,"rule-node-config.chip-help",Fe(20,Sd,d(6,13,"rule-node-config.detail")))),r(4),p("labelText",d(10,18,"rule-node-config.add-selected-details-to")))},dependencies:[Ft,Z,ae,ee,F,_,D,S,M,Pe,E],encapsulation:2});let t=i;return t})();b();var Ar=(()=>{let i=class i extends A{constructor(e,a){super(),this.translate=e,this.fb=a}configForm(){return this.deviceAttributesConfigForm}onConfigurationSet(e){this.deviceAttributesConfigForm=this.fb.group({deviceRelationsQuery:[e.deviceRelationsQuery,[c.required]],tellFailureIfAbsent:[e.tellFailureIfAbsent,[]],fetchTo:[e.fetchTo,[]],attributesControl:[e.attributesControl,[]]})}prepareInputConfig(e){return Ci(e)&&(e.attributesControl={clientAttributeNames:I(e?.clientAttributeNames)?e.clientAttributeNames:[],latestTsKeyNames:I(e?.latestTsKeyNames)?e.latestTsKeyNames:[],serverAttributeNames:I(e?.serverAttributeNames)?e.serverAttributeNames:[],sharedAttributeNames:I(e?.sharedAttributeNames)?e.sharedAttributeNames:[],getLatestValueWithTs:I(e?.getLatestValueWithTs)?e.getLatestValueWithTs:!1}),{deviceRelationsQuery:I(e?.deviceRelationsQuery)?e.deviceRelationsQuery:null,tellFailureIfAbsent:I(e?.tellFailureIfAbsent)?e.tellFailureIfAbsent:!0,fetchTo:I(e?.fetchTo)?e.fetchTo:ye.METADATA,attributesControl:e?e.attributesControl:null}}prepareOutputConfig(e){for(let a of Object.keys(e.attributesControl))e[a]=e.attributesControl[a];return delete e.attributesControl,e}};i.\u0275fac=function(a){return new(a||i)(y(me),y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-enrichment-node-device-attributes-config"]],features:[N],decls:19,vars:11,consts:[[1,"tb-form-panel","no-padding","no-border",3,"formGroup"],[1,"tb-form-panel","stroked","no-padding-bottom"],["translate","",1,"tb-form-panel-title"],["required","","formControlName","deviceRelationsQuery"],[1,"tb-form-panel","stroked"],[1,"tb-form-row","no-padding","no-border","space-between"],["translate","",1,"tb-form-panel-title","tb-required"],["translate","",1,"tb-form-panel-hint","tb-error",3,"hidden"],["formControlName","attributesControl","popupHelpLink","rulenode/related_device_attributes_node_fields_templatization"],["formControlName","fetchTo",3,"labelText"],[1,"tb-form-row","same-padding",3,"tb-hint-tooltip-icon"],["formControlName","tellFailureIfAbsent",1,"mat-slide","margin"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2),m(3,"rule-node-config.device-relations-query"),n(),g(4,"tb-device-relations-query-config",3),n(),o(5,"div",4)(6,"div",5)(7,"div",6),m(8,"rule-node-config.related-device-attributes"),n(),o(9,"div",7),m(10," rule-node-config.at-least-one-field-required "),n()(),g(11,"tb-select-attributes",8)(12,"tb-msg-metadata-chip",9),s(13,"translate"),n(),o(14,"div",10),s(15,"translate"),o(16,"mat-slide-toggle",11),m(17),s(18,"translate"),n()()()),a&2&&(p("formGroup",l.deviceAttributesConfigForm),r(9),p("hidden",!(l.deviceAttributesConfigForm.get("attributesControl").touched&&l.deviceAttributesConfigForm.get("attributesControl").hasError("atLeastOneRequired"))),r(3),p("labelText",d(13,5,"rule-node-config.add-selected-attributes-to")),r(2),h("tb-hint-tooltip-icon",d(15,7,"rule-node-config.tell-failure-tooltip")),r(3),f(" ",d(18,9,"rule-node-config.tell-failure")," "))},dependencies:[ue,F,_,D,S,M,V,Ce,Ki,Pe,si,E],encapsulation:2});let t=i;return t})();b();var Dr=(()=>{let i=class i extends A{constructor(e,a){super(),this.translate=e,this.fb=a}configForm(){return this.originatorAttributesConfigForm}onConfigurationSet(e){this.originatorAttributesConfigForm=this.fb.group({tellFailureIfAbsent:[e.tellFailureIfAbsent,[]],fetchTo:[e.fetchTo,[]],attributesControl:[e.attributesControl,[]]})}prepareInputConfig(e){return Ci(e)&&(e.attributesControl={clientAttributeNames:I(e?.clientAttributeNames)?e.clientAttributeNames:[],latestTsKeyNames:I(e?.latestTsKeyNames)?e.latestTsKeyNames:[],serverAttributeNames:I(e?.serverAttributeNames)?e.serverAttributeNames:[],sharedAttributeNames:I(e?.sharedAttributeNames)?e.sharedAttributeNames:[],getLatestValueWithTs:I(e?.getLatestValueWithTs)?e.getLatestValueWithTs:!1}),{fetchTo:I(e?.fetchTo)?e.fetchTo:ye.METADATA,tellFailureIfAbsent:I(e?.tellFailureIfAbsent)?e.tellFailureIfAbsent:!1,attributesControl:I(e?.attributesControl)?e.attributesControl:null}}prepareOutputConfig(e){for(let a of Object.keys(e.attributesControl))e[a]=e.attributesControl[a];return delete e.attributesControl,e}};i.\u0275fac=function(a){return new(a||i)(y(me),y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-enrichment-node-originator-attributes-config"]],features:[N],decls:15,vars:11,consts:[[1,"tb-form-panel","no-padding","no-border",3,"formGroup"],[1,"tb-form-panel","stroked"],[1,"tb-form-row","no-padding","no-border","space-between"],["translate","",1,"tb-form-panel-title","tb-required"],["translate","",1,"tb-form-panel-hint","tb-error",3,"hidden"],["formControlName","attributesControl","popupHelpLink","rulenode/originator_attributes_node_fields_templatization"],["formControlName","fetchTo",3,"labelText"],[1,"tb-form-row","same-padding",3,"tb-hint-tooltip-icon"],["formControlName","tellFailureIfAbsent",1,"mat-slide","margin"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4,"rule-node-config.originator-attributes"),n(),o(5,"div",4),m(6," rule-node-config.at-least-one-field-required "),n()(),g(7,"tb-select-attributes",5)(8,"tb-msg-metadata-chip",6),s(9,"translate"),n(),o(10,"div",7),s(11,"translate"),o(12,"mat-slide-toggle",8),m(13),s(14,"translate"),n()()()),a&2&&(p("formGroup",l.originatorAttributesConfigForm),r(5),p("hidden",!(l.originatorAttributesConfigForm.get("attributesControl").touched&&l.originatorAttributesConfigForm.get("attributesControl").hasError("atLeastOneRequired"))),r(3),p("labelText",d(9,5,"rule-node-config.add-originator-attributes-to")),r(2),h("tb-hint-tooltip-icon",d(11,7,"rule-node-config.tell-failure-tooltip")),r(3),f(" ",d(14,9,"rule-node-config.tell-failure")," "))},dependencies:[ue,F,_,S,M,V,Ce,Pe,si,E],encapsulation:2});let t=i;return t})();b();var Vr=(()=>{let i=class i extends A{constructor(e,a){super(),this.fb=e,this.translate=a,this.originatorFields=[];for(let l of Mi)this.originatorFields.push({value:l.value,name:this.translate.instant(l.name)})}configForm(){return this.originatorFieldsConfigForm}prepareOutputConfig(e){return Dt(e)}prepareInputConfig(e){return{dataMapping:I(e?.dataMapping)?e.dataMapping:null,ignoreNullStrings:I(e?.ignoreNullStrings)?e.ignoreNullStrings:null,fetchTo:I(e?.fetchTo)?e.fetchTo:ye.METADATA}}onConfigurationSet(e){this.originatorFieldsConfigForm=this.fb.group({dataMapping:[e.dataMapping,[c.required]],ignoreNullStrings:[e.ignoreNullStrings,[]],fetchTo:[e.fetchTo,[]]})}};i.\u0275fac=function(a){return new(a||i)(y(G),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-enrichment-node-originator-fields-config"]],features:[N],decls:16,vars:32,consts:[[1,"tb-form-panel","no-padding","no-border",3,"formGroup"],["required","","targetKeyPrefix","originator","formControlName","dataMapping","popupHelpLink","rulenode/originator_fields_node_fields_templatization",3,"selectOptions","requiredText","labelText","selectText","selectRequiredText","valText","valRequiredText","hintText"],["formControlName","fetchTo",3,"labelText"],[1,"tb-form-row","same-padding",3,"tb-hint-tooltip-icon"],["formControlName","ignoreNullStrings",1,"mat-slide","margin"]],template:function(a,l){a&1&&(o(0,"section",0),g(1,"tb-sv-map-config",1),s(2,"translate"),s(3,"translate"),s(4,"translate"),s(5,"translate"),s(6,"translate"),s(7,"translate"),s(8,"translate"),g(9,"tb-msg-metadata-chip",2),s(10,"translate"),o(11,"div",3),s(12,"translate"),o(13,"mat-slide-toggle",4),m(14),s(15,"translate"),n()()()),a&2&&(p("formGroup",l.originatorFieldsConfigForm),r(),p("selectOptions",l.originatorFields)("requiredText",d(2,12,"rule-node-config.attr-mapping-required"))("labelText",d(3,14,"rule-node-config.originator-fields-mapping"))("selectText",d(4,16,"rule-node-config.source-field"))("selectRequiredText",d(5,18,"rule-node-config.source-field-required"))("valText",d(6,20,"rule-node-config.target-key"))("valRequiredText",d(7,22,"rule-node-config.target-key-required"))("hintText",d(8,24,"rule-node-config.originator-fields-sv-map-hint")),r(8),p("labelText",d(10,26,"rule-node-config.add-mapped-originator-fields-to")),r(2),h("tb-hint-tooltip-icon",d(12,28,"rule-node-config.skip-empty-fields-tooltip")),r(3),f(" ",d(15,30,"rule-node-config.skip-empty-fields")," "))},dependencies:[ue,F,_,D,S,M,Ce,Pe,At,E],encapsulation:2});let t=i;return t})();b();var Fd=()=>({maxWidth:"820px"}),Id=t=>({inputName:t}),Ed=(t,i,u,e)=>({startInterval:t,endInterval:i,startIntervalTimeUnit:u,endIntervalTimeUnit:e});function Md(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.start-interval-value-required")," "))}function Nd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.time-value-range")," "))}function Ad(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.time-value-range")," "))}function Dd(t,i){if(t&1&&(o(0,"mat-option",29),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),f(" ",d(2,2,e.timeUnitsTranslationMap.get(u))," ")}}function Vd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.end-interval-value-required")," "))}function qd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.time-value-range")," "))}function kd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.time-value-range")," "))}function Bd(t,i){if(t&1&&(o(0,"mat-option",29),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),f(" ",d(2,2,e.timeUnitsTranslationMap.get(u))," ")}}function Od(t,i){if(t&1&&(Co(0),m(1),s(2,"translate"),yo()),t&2){let u=v(2);r(),f(" ",le(2,1,"rule-node-config.fetch-timeseries-from-to",xo(4,Ed,u.getTelemetryFromDatabaseConfigForm.get("interval.startInterval").value,u.getTelemetryFromDatabaseConfigForm.get("interval.endInterval").value,u.getTelemetryFromDatabaseConfigForm.get("interval.startIntervalTimeUnit").value.toLowerCase(),u.getTelemetryFromDatabaseConfigForm.get("interval.endIntervalTimeUnit").value.toLowerCase()))," ")}}function Ld(t,i){t&1&&(m(0),s(1,"translate")),t&2&&f(" ",d(1,1,"rule-node-config.fetch-timeseries-from-to-invalid")," ")}function Rd(t,i){if(t&1&&(o(0,"div",17)(1,"div",18)(2,"mat-form-field",19)(3,"mat-label"),m(4),s(5,"translate"),n(),g(6,"input",20),C(7,Md,3,3,"mat-error",16)(8,Nd,3,3,"mat-error",16)(9,Ad,3,3,"mat-error",16),n(),o(10,"mat-form-field",21)(11,"mat-label"),m(12),s(13,"translate"),n(),o(14,"mat-select",22),C(15,Dd,3,4,"mat-option",14),n()()(),o(16,"div",18)(17,"mat-form-field",19)(18,"mat-label"),m(19),s(20,"translate"),n(),g(21,"input",23),C(22,Vd,3,3,"mat-error",16)(23,qd,3,3,"mat-error",16)(24,kd,3,3,"mat-error",16),n(),o(25,"mat-form-field",21)(26,"mat-label"),m(27),s(28,"translate"),n(),o(29,"mat-select",24),C(30,Bd,3,4,"mat-option",14),n()()(),o(31,"div",25)(32,"mat-icon",26),m(33,"error_outline"),n(),o(34,"div",27),C(35,Od,3,9,"ng-container",28)(36,Ld,2,3,"ng-template",null,1,Ot),n()()()),t&2){let u=$e(37),e=v();r(4),q(d(5,16,"rule-node-config.interval-start")),r(3),p("ngIf",e.getTelemetryFromDatabaseConfigForm.get("interval.startInterval").hasError("required")),r(),p("ngIf",e.getTelemetryFromDatabaseConfigForm.get("interval.startInterval").hasError("min")),r(),p("ngIf",e.getTelemetryFromDatabaseConfigForm.get("interval.startInterval").hasError("max")),r(3),q(d(13,18,"rule-node-config.time-unit")),r(3),p("ngForOf",e.timeUnits),r(4),q(d(20,20,"rule-node-config.interval-end")),r(3),p("ngIf",e.getTelemetryFromDatabaseConfigForm.get("interval.endInterval").hasError("required")),r(),p("ngIf",e.getTelemetryFromDatabaseConfigForm.get("interval.endInterval").hasError("min")),r(),p("ngIf",e.getTelemetryFromDatabaseConfigForm.get("interval.endInterval").hasError("max")),r(3),q(d(28,22,"rule-node-config.time-unit")),r(3),p("ngForOf",e.timeUnits),r(),Ke("error",e.getTelemetryFromDatabaseConfigForm.get("interval").invalid),r(4),p("ngIf",e.getTelemetryFromDatabaseConfigForm.get("interval").valid)("ngIfElse",u)}}function Pd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.start-interval-required")," "))}function wd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.end-interval-required")," "))}function Gd(t,i){if(t&1&&(o(0,"div",30)(1,"mat-form-field",31)(2,"mat-label"),m(3),s(4,"translate"),n(),g(5,"input",32),C(6,Pd,3,3,"mat-error",16),n(),o(7,"mat-form-field",31)(8,"mat-label"),m(9),s(10,"translate"),n(),g(11,"input",33),C(12,wd,3,3,"mat-error",16),n(),g(13,"tb-example-hint",34),n()),t&2){let u=v();r(3),q(d(4,5,"rule-node-config.start-interval")),r(3),p("ngIf",u.getTelemetryFromDatabaseConfigForm.get("startIntervalPattern").hasError("required")||u.getTelemetryFromDatabaseConfigForm.get("startIntervalPattern").hasError("pattern")),r(3),q(d(10,7,"rule-node-config.end-interval")),r(3),p("ngIf",u.getTelemetryFromDatabaseConfigForm.get("endIntervalPattern").hasError("required")||u.getTelemetryFromDatabaseConfigForm.get("endIntervalPattern").hasError("pattern")),r(),p("hintText","rule-node-config.metadata-dynamic-interval-hint")}}function jd(t,i){if(t&1&&(o(0,"tb-toggle-option",29),m(1),n()),t&2){let u=i.$implicit;p("value",u.value),r(),f(" ",u.name," ")}}function Ud(t,i){if(t&1&&(o(0,"mat-option",29),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),f(" ",d(2,2,e.aggregationTypesTranslations.get(e.aggregationTypes[u]))," ")}}function Kd(t,i){if(t&1&&(o(0,"mat-option",29),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(3);p("value",u),r(),f(" ",d(2,2,e.samplingOrdersTranslate.get(u))," ")}}function Hd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.limit-required")," "))}function zd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.limit-range")," "))}function Qd(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.limit-range")," "))}function Jd(t,i){if(t&1&&(o(0,"div")(1,"mat-form-field",37)(2,"mat-label"),m(3),s(4,"translate"),n(),o(5,"mat-select",38),C(6,Kd,3,4,"mat-option",14),n()(),o(7,"mat-form-field",39)(8,"mat-label"),m(9),s(10,"translate"),n(),g(11,"input",40),o(12,"mat-hint"),m(13),s(14,"translate"),n(),C(15,Hd,3,3,"mat-error",16)(16,zd,3,3,"mat-error",16)(17,Qd,3,3,"mat-error",16),n()()),t&2){let u=v(2);r(3),f(" ",d(4,7,"rule-node-config.order-by-timestamp")," "),r(3),p("ngForOf",u.samplingOrders),r(3),q(d(10,9,"rule-node-config.limit")),r(4),q(d(14,11,"rule-node-config.limit-hint")),r(2),p("ngIf",u.getTelemetryFromDatabaseConfigForm.get("limit").hasError("required")),r(),p("ngIf",u.getTelemetryFromDatabaseConfigForm.get("limit").hasError("min")),r(),p("ngIf",u.getTelemetryFromDatabaseConfigForm.get("limit").hasError("max"))}}function $d(t,i){if(t&1&&(o(0,"div")(1,"mat-form-field",35)(2,"mat-label"),m(3),s(4,"translate"),n(),o(5,"mat-select",36),C(6,Ud,3,4,"mat-option",14),n()(),C(7,Jd,18,13,"div",16),n()),t&2){let u=v();r(),p("subscriptSizing",u.defaultPaddingEnable()?"fixed":"dynamic"),r(2),q(d(4,4,"aggregation.function")),r(3),p("ngForOf",u.aggregations),r(),p("ngIf",u.getTelemetryFromDatabaseConfigForm.get("aggregation").value===u.aggregationTypes.NONE)}}var qr=(()=>{let i=class i extends A{constructor(e,a){super(),this.translate=e,this.fb=a,this.aggregationTypes=ki,this.aggregations=Object.values(ki),this.aggregationTypesTranslations=Ao,this.fetchMode=bt,this.samplingOrders=Object.values(Ii),this.samplingOrdersTranslate=ya,this.timeUnits=Object.values(Oe),this.timeUnitsTranslationMap=Ni,this.deduplicationStrategiesHintTranslations=ga,this.headerOptions=[],this.timeUnitMap={[Oe.MILLISECONDS]:1,[Oe.SECONDS]:1e3,[Oe.MINUTES]:6e4,[Oe.HOURS]:36e5,[Oe.DAYS]:864e5},this.intervalValidator=()=>l=>l.get("startInterval").value*this.timeUnitMap[l.get("startIntervalTimeUnit").value]<=l.get("endInterval").value*this.timeUnitMap[l.get("endIntervalTimeUnit").value]?{intervalError:!0}:null;for(let l of Pi.keys())this.headerOptions.push({value:l,name:this.translate.instant(Pi.get(l))})}configForm(){return this.getTelemetryFromDatabaseConfigForm}onConfigurationSet(e){this.getTelemetryFromDatabaseConfigForm=this.fb.group({latestTsKeyNames:[e.latestTsKeyNames,[c.required]],aggregation:[e.aggregation,[c.required]],fetchMode:[e.fetchMode,[c.required]],orderBy:[e.orderBy,[]],limit:[e.limit,[]],useMetadataIntervalPatterns:[e.useMetadataIntervalPatterns,[]],interval:this.fb.group({startInterval:[e.interval.startInterval,[]],startIntervalTimeUnit:[e.interval.startIntervalTimeUnit,[]],endInterval:[e.interval.endInterval,[]],endIntervalTimeUnit:[e.interval.endIntervalTimeUnit,[]]}),startIntervalPattern:[e.startIntervalPattern,[]],endIntervalPattern:[e.endIntervalPattern,[]]})}validatorTriggers(){return["fetchMode","useMetadataIntervalPatterns"]}prepareOutputConfig(e){return e.startInterval=e.interval.startInterval,e.startIntervalTimeUnit=e.interval.startIntervalTimeUnit,e.endInterval=e.interval.endInterval,e.endIntervalTimeUnit=e.interval.endIntervalTimeUnit,delete e.interval,Dt(e)}prepareInputConfig(e){return Ci(e)&&(e.interval={startInterval:e.startInterval,startIntervalTimeUnit:e.startIntervalTimeUnit,endInterval:e.endInterval,endIntervalTimeUnit:e.endIntervalTimeUnit}),{latestTsKeyNames:I(e?.latestTsKeyNames)?e.latestTsKeyNames:null,aggregation:I(e?.aggregation)?e.aggregation:ki.NONE,fetchMode:I(e?.fetchMode)?e.fetchMode:bt.FIRST,orderBy:I(e?.orderBy)?e.orderBy:Ii.ASC,limit:I(e?.limit)?e.limit:1e3,useMetadataIntervalPatterns:I(e?.useMetadataIntervalPatterns)?e.useMetadataIntervalPatterns:!1,interval:{startInterval:I(e?.interval?.startInterval)?e.interval.startInterval:2,startIntervalTimeUnit:I(e?.interval?.startIntervalTimeUnit)?e.interval.startIntervalTimeUnit:Oe.MINUTES,endInterval:I(e?.interval?.endInterval)?e.interval.endInterval:1,endIntervalTimeUnit:I(e?.interval?.endIntervalTimeUnit)?e.interval.endIntervalTimeUnit:Oe.MINUTES},startIntervalPattern:I(e?.startIntervalPattern)?e.startIntervalPattern:null,endIntervalPattern:I(e?.endIntervalPattern)?e.endIntervalPattern:null}}updateValidators(e){let a=this.getTelemetryFromDatabaseConfigForm.get("fetchMode").value,l=this.getTelemetryFromDatabaseConfigForm.get("useMetadataIntervalPatterns").value;a&&a===bt.ALL?(this.getTelemetryFromDatabaseConfigForm.get("aggregation").setValidators([c.required]),this.getTelemetryFromDatabaseConfigForm.get("orderBy").setValidators([c.required]),this.getTelemetryFromDatabaseConfigForm.get("limit").setValidators([c.required,c.min(2),c.max(1e3)])):(this.getTelemetryFromDatabaseConfigForm.get("aggregation").setValidators([]),this.getTelemetryFromDatabaseConfigForm.get("orderBy").setValidators([]),this.getTelemetryFromDatabaseConfigForm.get("limit").setValidators([])),l?(this.getTelemetryFromDatabaseConfigForm.get("interval.startInterval").setValidators([]),this.getTelemetryFromDatabaseConfigForm.get("interval.startIntervalTimeUnit").setValidators([]),this.getTelemetryFromDatabaseConfigForm.get("interval.endInterval").setValidators([]),this.getTelemetryFromDatabaseConfigForm.get("interval.endIntervalTimeUnit").setValidators([]),this.getTelemetryFromDatabaseConfigForm.get("interval").setValidators([]),this.getTelemetryFromDatabaseConfigForm.get("startIntervalPattern").setValidators([c.required,c.pattern(/(?:.|\s)*\S(&:.|\s)*/)]),this.getTelemetryFromDatabaseConfigForm.get("endIntervalPattern").setValidators([c.required,c.pattern(/(?:.|\s)*\S(&:.|\s)*/)])):(this.getTelemetryFromDatabaseConfigForm.get("interval.startInterval").setValidators([c.required,c.min(1),c.max(2147483647)]),this.getTelemetryFromDatabaseConfigForm.get("interval.startIntervalTimeUnit").setValidators([c.required]),this.getTelemetryFromDatabaseConfigForm.get("interval.endInterval").setValidators([c.required,c.min(1),c.max(2147483647)]),this.getTelemetryFromDatabaseConfigForm.get("interval.endIntervalTimeUnit").setValidators([c.required]),this.getTelemetryFromDatabaseConfigForm.get("interval").setValidators([this.intervalValidator()]),this.getTelemetryFromDatabaseConfigForm.get("startIntervalPattern").setValidators([]),this.getTelemetryFromDatabaseConfigForm.get("endIntervalPattern").setValidators([])),this.getTelemetryFromDatabaseConfigForm.get("aggregation").updateValueAndValidity({emitEvent:e}),this.getTelemetryFromDatabaseConfigForm.get("orderBy").updateValueAndValidity({emitEvent:e}),this.getTelemetryFromDatabaseConfigForm.get("limit").updateValueAndValidity({emitEvent:e}),this.getTelemetryFromDatabaseConfigForm.get("interval.startInterval").updateValueAndValidity({emitEvent:e}),this.getTelemetryFromDatabaseConfigForm.get("interval.startIntervalTimeUnit").updateValueAndValidity({emitEvent:e}),this.getTelemetryFromDatabaseConfigForm.get("interval.endInterval").updateValueAndValidity({emitEvent:e}),this.getTelemetryFromDatabaseConfigForm.get("interval.endIntervalTimeUnit").updateValueAndValidity({emitEvent:e}),this.getTelemetryFromDatabaseConfigForm.get("interval").updateValueAndValidity({emitEvent:e}),this.getTelemetryFromDatabaseConfigForm.get("startIntervalPattern").updateValueAndValidity({emitEvent:e}),this.getTelemetryFromDatabaseConfigForm.get("endIntervalPattern").updateValueAndValidity({emitEvent:e})}defaultPaddingEnable(){return this.getTelemetryFromDatabaseConfigForm.get("fetchMode").value===bt.ALL&&this.getTelemetryFromDatabaseConfigForm.get("aggregation").value===ki.NONE}};i.\u0275fac=function(a){return new(a||i)(y(me),y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-enrichment-node-get-telemetry-from-database"]],features:[N],decls:34,vars:40,consts:[["intervalPattern",""],["invalidText",""],[1,"tb-form-panel","no-padding","no-border",3,"formGroup"],["editable","","subscriptSizing","dynamic","required","","formControlName","latestTsKeyNames",1,"mat-block",3,"placeholder","requiredText","label","hint"],["matHintEnd","","hintMode","","tb-help-popup-placement","right","trigger-style","letter-spacing:0.25px; font-size:12px",1,"see-example",3,"tb-help-popup","tb-help-popup-style","trigger-text"],["matSuffix","","aria-hidden","false","aria-label","help-icon","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","useMetadataIntervalPatterns",1,"mat-slide"],["formGroupName","interval","class","flex flex-col",4,"ngIf","ngIfElse"],[1,"tb-form-panel","no-border","no-padding","item-center"],[1,"fetch-mod-toggle"],["formControlName","fetchMode","appearance","fill"],[3,"value",4,"ngFor","ngForOf"],[1,"tb-form-hint","tb-primary-fill","hint-container"],[4,"ngIf"],["formGroupName","interval",1,"flex","flex-col"],[1,"flex","flex-col","gap-0","gt-sm:flex-row","gt-sm:gap-4"],[1,"mat-block","gt-sm:max-w-50%","gt-sm:flex-full"],["type","number","step","1","min","1","max","2147483647","matInput","","formControlName","startInterval","required",""],["hideRequiredMarker","",1,"mat-block","gt-sm:max-w-50%","gt-sm:flex-full"],["formControlName","startIntervalTimeUnit","required",""],["type","number","step","1","min","1","max","2147483647","matInput","","formControlName","endInterval","required",""],["formControlName","endIntervalTimeUnit","required",""],[1,"description-block","tb-primary-fill"],[1,"description-icon"],[1,"description-text"],[4,"ngIf","ngIfElse"],[3,"value"],[1,"input-block","flex","flex-col"],[1,"mat-block","flex-1"],["matInput","","formControlName","startIntervalPattern","required",""],["matInput","","formControlName","endIntervalPattern","required",""],["popupHelpLink","rulenode/originator_telemetry_node_fields_templatization",3,"hintText"],["hideRequiredMarker","",1,"mat-block",3,"subscriptSizing"],["formControlName","aggregation","required",""],["hideRequiredMarker","",1,"mat-block"],["formControlName","orderBy","required",""],[1,"mat-block"],["type","number","min","2","max","1000","step","1","matInput","","formControlName","limit","required",""]],template:function(a,l){if(a&1&&(o(0,"section",2)(1,"tb-string-items-list",3),s(2,"translate"),s(3,"translate"),s(4,"translate"),s(5,"translate"),g(6,"div",4),s(7,"translate"),o(8,"mat-icon",5),s(9,"translate"),s(10,"translate"),m(11,"help "),n()(),o(12,"div",6)(13,"div",7),m(14,"rule-node-config.fetch-interval"),n(),o(15,"div",8),s(16,"translate"),o(17,"mat-slide-toggle",9),m(18),s(19,"translate"),n()(),C(20,Rd,38,24,"div",10)(21,Gd,14,9,"ng-template",null,0,Ot),n(),o(23,"div",6)(24,"div",7),m(25,"rule-node-config.fetch-strategy"),n(),o(26,"div",11)(27,"div",12)(28,"tb-toggle-select",13),C(29,jd,2,2,"tb-toggle-option",14),n()(),o(30,"div",15),m(31),s(32,"translate"),n()(),C(33,$d,8,6,"div",16),n()()),a&2){let x=$e(22);p("formGroup",l.getTelemetryFromDatabaseConfigForm),r(),p("placeholder",d(2,16,"rule-node-config.add-timeseries-key"))("requiredText",d(3,18,"rule-node-config.timeseries-keys-required"))("label",d(4,20,"rule-node-config.timeseries-keys"))("hint",d(5,22,"rule-node-config.general-pattern-hint")),r(5),h("tb-help-popup","rulenode/originator_telemetry_node_fields_templatization"),h("trigger-text",d(7,24,"rule-node-config.key-val.see-examples")),p("tb-help-popup-style",xe(37,Fd)),r(2),h("matTooltip",le(10,28,"rule-node-config.chip-help",Fe(38,Id,d(9,26,"rule-node-config.timeseries-key")))),r(7),h("tb-hint-tooltip-icon",d(16,31,"rule-node-config.use-metadata-dynamic-interval-tooltip")),r(3),f(" ",d(19,33,"rule-node-config.use-metadata-dynamic-interval")," "),r(2),p("ngIf",l.getTelemetryFromDatabaseConfigForm.get("useMetadataIntervalPatterns").value===!1)("ngIfElse",x),r(9),p("ngForOf",l.headerOptions),r(2),f(" ",d(32,35,l.deduplicationStrategiesHintTranslations.get(l.getTelemetryFromDatabaseConfigForm.get("fetchMode").value))," "),r(2),p("ngIf",l.getTelemetryFromDatabaseConfigForm.get("fetchMode").value===l.fetchMode.ALL)}},dependencies:[z,B,_i,Ft,Z,R,k,O,de,Q,ae,te,X,ee,ue,L,ge,F,_,D,ve,it,S,M,Qt,V,nt,rt,Ce,he,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .see-example[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .description-block[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:6px;border:1px solid #EAEAEA}[_nghost-%COMP%]   .description-block[_ngcontent-%COMP%]   .description-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;min-height:24px;width:24px;min-width:24px;line-height:24px;color:#d9d9d9;margin:4px}[_nghost-%COMP%]   .description-block[_ngcontent-%COMP%]   .description-text[_ngcontent-%COMP%]{font-size:12px;line-height:16px;letter-spacing:.25px;margin:6px}[_nghost-%COMP%]   .description-block.error[_ngcontent-%COMP%]{color:var(--mdc-theme-error, #f44336)}[_nghost-%COMP%]   .description-block.error[_ngcontent-%COMP%]   .description-icon[_ngcontent-%COMP%]{color:var(--mdc-theme-error, #f44336)}[_nghost-%COMP%]   .item-center[_ngcontent-%COMP%]{align-items:center}[_nghost-%COMP%]   .item-center[_ngcontent-%COMP%]   .fetch-mod-toggle[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .hint-container[_ngcontent-%COMP%]{width:100%}']});let t=i;return t})();b();function Yd(t,i){if(t&1&&(o(0,"tb-toggle-option",9),m(1),n()),t&2){let u=i.$implicit;p("value",u.value),r(),f(" ",u.name," ")}}var kr=(()=>{let i=class i extends A{constructor(e,a){super(),this.fb=e,this.translate=a,this.DataToFetch=Ae,this.msgMetadataLabelTranslations=Ca,this.originatorFields=[],this.fetchToData=[];for(let l of Object.keys(Mi))this.originatorFields.push({value:Mi[l].value,name:this.translate.instant(Mi[l].name)});for(let l of Pt.keys())this.fetchToData.push({value:l,name:this.translate.instant(Pt.get(l))})}configForm(){return this.relatedAttributesConfigForm}prepareOutputConfig(e){e.dataToFetch===Ae.FIELDS?(e.dataMapping=e.svMap,delete e.svMap):(e.dataMapping=e.kvMap,delete e.kvMap);let a={};if(e&&e.dataMapping)for(let l of Object.keys(e.dataMapping))a[l.trim()]=e.dataMapping[l];return e.dataMapping=a,delete e.svMap,delete e.kvMap,Dt(e)}prepareInputConfig(e){let a={[We.name.value]:`relatedEntity${this.translate.instant(We.name.name)}`},l={serialNumber:"sn"},x;I(e?.telemetry)?x=e.telemetry?Ae.LATEST_TELEMETRY:Ae.ATTRIBUTES:x=I(e?.dataToFetch)?e.dataToFetch:Ae.ATTRIBUTES;let $;return I(e?.attrMapping)?$=e.attrMapping:$=I(e?.dataMapping)?e.dataMapping:null,x===Ae.FIELDS?a=$:l=$,{relationsQuery:I(e?.relationsQuery)?e.relationsQuery:null,dataToFetch:x,svMap:a,kvMap:l,fetchTo:I(e?.fetchTo)?e.fetchTo:ye.METADATA}}selectTranslation(e,a){return this.relatedAttributesConfigForm.get("dataToFetch").value===Ae.LATEST_TELEMETRY?e:a}onConfigurationSet(e){this.relatedAttributesConfigForm=this.fb.group({relationsQuery:[e.relationsQuery,[c.required]],dataToFetch:[e.dataToFetch,[]],kvMap:[e.kvMap,[c.required]],svMap:[e.svMap,[c.required]],fetchTo:[e.fetchTo,[]]})}validatorTriggers(){return["dataToFetch"]}updateValidators(e){this.relatedAttributesConfigForm.get("dataToFetch").value===Ae.FIELDS?(this.relatedAttributesConfigForm.get("svMap").enable({emitEvent:!1}),this.relatedAttributesConfigForm.get("kvMap").disable({emitEvent:!1}),this.relatedAttributesConfigForm.get("svMap").updateValueAndValidity()):(this.relatedAttributesConfigForm.get("svMap").disable({emitEvent:!1}),this.relatedAttributesConfigForm.get("kvMap").enable({emitEvent:!1}),this.relatedAttributesConfigForm.get("kvMap").updateValueAndValidity())}};i.\u0275fac=function(a){return new(a||i)(y(G),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-enrichment-node-related-attributes-config"]],features:[N],decls:24,vars:48,consts:[[1,"tb-form-panel","no-padding","no-border",3,"formGroup"],["required","","formControlName","relationsQuery"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],["formControlName","dataToFetch","appearance","fill"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","kvMap","popupHelpLink","rulenode/related_entity_data_node_fields_templatization",3,"hidden","requiredText","labelText","keyText","keyRequiredText","valText","valRequiredText","hintText"],["required","","targetKeyPrefix","relatedEntity","formControlName","svMap","popupHelpLink","rulenode/related_entity_data_node_fields_templatization",3,"hidden","labelText","selectOptions","requiredText","selectText","selectRequiredText","valText","valRequiredText","hintText"],["formControlName","fetchTo",3,"labelText"],[3,"value"]],template:function(a,l){a&1&&(o(0,"section",0),g(1,"tb-relations-query-config",1),o(2,"div",2)(3,"div",3),m(4,"rule-node-config.data-to-fetch"),n(),o(5,"tb-toggle-select",4),C(6,Yd,2,2,"tb-toggle-option",5),n(),g(7,"tb-kv-map-config",6),s(8,"translate"),s(9,"translate"),s(10,"translate"),s(11,"translate"),s(12,"translate"),s(13,"translate"),g(14,"tb-sv-map-config",7),s(15,"translate"),s(16,"translate"),s(17,"translate"),s(18,"translate"),s(19,"translate"),s(20,"translate"),s(21,"translate"),g(22,"tb-msg-metadata-chip",8),s(23,"translate"),n()()),a&2&&(p("formGroup",l.relatedAttributesConfigForm),r(6),p("ngForOf",l.fetchToData),r(),p("hidden",l.relatedAttributesConfigForm.get("dataToFetch").value===l.DataToFetch.FIELDS)("requiredText",d(8,20,"rule-node-config.attr-mapping-required"))("labelText",d(9,22,l.selectTranslation("rule-node-config.latest-telemetry-mapping","rule-node-config.attributes-mapping")))("keyText",d(10,24,l.selectTranslation("rule-node-config.source-telemetry","rule-node-config.source-attribute")))("keyRequiredText",d(11,26,l.selectTranslation("rule-node-config.source-telemetry-required","rule-node-config.source-attribute-required")))("valText",d(12,28,"rule-node-config.target-key"))("valRequiredText",d(13,30,"rule-node-config.target-key-required"))("hintText","rule-node-config.kv-map-pattern-hint"),r(7),p("hidden",l.relatedAttributesConfigForm.get("dataToFetch").value!==l.DataToFetch.FIELDS)("labelText",d(15,32,"rule-node-config.fields-mapping"))("selectOptions",l.originatorFields)("requiredText",d(16,34,"rule-node-config.attr-mapping-required"))("selectText",d(17,36,"rule-node-config.source-field"))("selectRequiredText",d(18,38,"rule-node-config.source-field-required"))("valText",d(19,40,"rule-node-config.target-key"))("valRequiredText",d(20,42,"rule-node-config.target-key-required"))("hintText",d(21,44,"rule-node-config.sv-map-hint")),r(8),p("labelText",d(23,46,l.msgMetadataLabelTranslations.get(l.relatedAttributesConfigForm.get("dataToFetch").value))))},dependencies:[z,F,_,D,S,M,V,nt,rt,ot,mi,Pe,At,E],encapsulation:2});let t=i;return t})();b();function Wd(t,i){if(t&1&&(o(0,"tb-toggle-option",8),m(1),n()),t&2){let u=i.$implicit;p("value",u.value),r(),f(" ",u.name," ")}}var Br=(()=>{let i=class i extends A{constructor(e,a){super(),this.fb=e,this.translate=a,this.fetchToData=[],this.DataToFetch=Ae;for(let l of Pt.keys())l!==Ae.FIELDS&&this.fetchToData.push({value:l,name:this.translate.instant(Pt.get(l))})}configForm(){return this.tenantAttributesConfigForm}prepareInputConfig(e){let a;I(e?.telemetry)?a=e.telemetry?Ae.LATEST_TELEMETRY:Ae.ATTRIBUTES:a=I(e?.dataToFetch)?e.dataToFetch:Ae.ATTRIBUTES;let l;return I(e?.attrMapping)?l=e.attrMapping:l=I(e?.dataMapping)?e.dataMapping:null,{dataToFetch:a,dataMapping:l,fetchTo:I(e?.fetchTo)?e.fetchTo:ye.METADATA}}selectTranslation(e,a){return this.tenantAttributesConfigForm.get("dataToFetch").value===Ae.LATEST_TELEMETRY?e:a}onConfigurationSet(e){this.tenantAttributesConfigForm=this.fb.group({dataToFetch:[e.dataToFetch,[]],dataMapping:[e.dataMapping,[c.required]],fetchTo:[e.fetchTo,[]]})}};i.\u0275fac=function(a){return new(a||i)(y(G),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-enrichment-node-tenant-attributes-config"]],features:[N],decls:17,vars:26,consts:[[1,"tb-form-panel","stroked",3,"formGroup"],["translate","",1,"tb-form-panel-title"],[1,"flex","flex-1","items-center","justify-center"],[1,"fetch-to-data-toggle"],["formControlName","dataToFetch","appearance","fill",1,"fetch-to-data-toggle"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","dataMapping","popupHelpLink","rulenode/tenant_attributes_node_fields_templatization",3,"requiredText","labelText","keyText","keyRequiredText","valText","valRequiredText","hintText"],["formControlName","fetchTo",3,"labelText"],[3,"value"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),m(2,"rule-node-config.mapping-of-tenant"),n(),o(3,"div",2)(4,"div",3)(5,"tb-toggle-select",4),C(6,Wd,2,2,"tb-toggle-option",5),n()()(),g(7,"tb-kv-map-config",6),s(8,"translate"),s(9,"translate"),s(10,"translate"),s(11,"translate"),s(12,"translate"),s(13,"translate"),g(14,"tb-msg-metadata-chip",7),s(15,"translate"),s(16,"translate"),n()),a&2&&(p("formGroup",l.tenantAttributesConfigForm),r(6),p("ngForOf",l.fetchToData),r(),p("requiredText",d(8,10,"rule-node-config.attr-mapping-required"))("labelText",d(9,12,l.selectTranslation("rule-node-config.latest-telemetry-mapping","rule-node-config.attributes-mapping")))("keyText",d(10,14,l.selectTranslation("rule-node-config.source-telemetry","rule-node-config.source-attribute")))("keyRequiredText",d(11,16,l.selectTranslation("rule-node-config.source-telemetry-required","rule-node-config.source-attribute-required")))("valText",d(12,18,"rule-node-config.target-key"))("valRequiredText",d(13,20,"rule-node-config.target-key-required"))("hintText","rule-node-config.kv-map-pattern-hint"),r(7),p("labelText",l.tenantAttributesConfigForm.get("dataToFetch").value===l.DataToFetch.LATEST_TELEMETRY?d(15,22,"rule-node-config.add-mapped-latest-telemetry-to"):d(16,24,"rule-node-config.add-mapped-attribute-to")))},dependencies:[z,F,_,D,S,M,V,nt,rt,ot,Pe,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .fetch-to-data-toggle[_ngcontent-%COMP%]{max-width:420px;width:100%}']});let t=i;return t})();b();var Qa=t=>({inputValueKey:t}),Xd=t=>({periodValueKey:t}),Zd=(t,i)=>({outputValueKey:t,periodValueKey:i}),eu=t=>({outputValueKey:t});function tu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.input-value-key-required")," "))}function iu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.output-value-key-required")," "))}function nu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.number-of-digits-after-floating-point-range")," "))}function ru(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.number-of-digits-after-floating-point-range")," "))}function ou(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.period-value-key-required")," "))}function au(t,i){if(t&1&&(o(0,"mat-form-field",16)(1,"mat-label"),m(2),s(3,"translate"),n(),g(4,"input",17),C(5,ou,3,3,"mat-error",4),n()),t&2){let u=v();r(2),q(d(3,2,"rule-node-config.period-value-key")),r(3),p("ngIf",u.calculateDeltaConfigForm.get("periodValueKey").hasError("required"))}}var Or=(()=>{let i=class i extends A{constructor(e,a){super(),this.translate=e,this.fb=a,this.separatorKeysCodes=[13,188,186]}configForm(){return this.calculateDeltaConfigForm}onConfigurationSet(e){this.calculateDeltaConfigForm=this.fb.group({inputValueKey:[e.inputValueKey,[c.required,c.pattern(/(?:.|\s)*\S(&:.|\s)*/)]],outputValueKey:[e.outputValueKey,[c.required,c.pattern(/(?:.|\s)*\S(&:.|\s)*/)]],useCache:[e.useCache,[]],addPeriodBetweenMsgs:[e.addPeriodBetweenMsgs,[]],periodValueKey:[e.periodValueKey,[]],round:[e.round,[c.min(0),c.max(15)]],tellFailureIfDeltaIsNegative:[e.tellFailureIfDeltaIsNegative,[]],excludeZeroDeltas:[e.excludeZeroDeltas,[]]})}prepareInputConfig(e){return{inputValueKey:I(e?.inputValueKey)?e.inputValueKey:null,outputValueKey:I(e?.outputValueKey)?e.outputValueKey:null,useCache:I(e?.useCache)?e.useCache:!0,addPeriodBetweenMsgs:I(e?.addPeriodBetweenMsgs)?e.addPeriodBetweenMsgs:!1,periodValueKey:I(e?.periodValueKey)?e.periodValueKey:null,round:I(e?.round)?e.round:null,tellFailureIfDeltaIsNegative:I(e?.tellFailureIfDeltaIsNegative)?e.tellFailureIfDeltaIsNegative:!0,excludeZeroDeltas:I(e?.excludeZeroDeltas)?e.excludeZeroDeltas:!1}}prepareOutputConfig(e){return Dt(e)}updateValidators(e){this.calculateDeltaConfigForm.get("addPeriodBetweenMsgs").value?this.calculateDeltaConfigForm.get("periodValueKey").setValidators([c.required]):this.calculateDeltaConfigForm.get("periodValueKey").setValidators([]),this.calculateDeltaConfigForm.get("periodValueKey").updateValueAndValidity({emitEvent:e})}validatorTriggers(){return["addPeriodBetweenMsgs"]}};i.\u0275fac=function(a){return new(a||i)(y(me),y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-enrichment-node-calculate-delta-config"]],features:[N],decls:50,vars:69,consts:[[3,"formGroup"],[1,"gt-sm:flex","gt-sm:flex-row","gt-sm:gap-5.5"],[1,"mat-block","flex-1"],["matInput","","formControlName","inputValueKey"],[4,"ngIf"],["matInput","","formControlName","outputValueKey"],["type","number","min","0","max","15","step","1","matInput","","formControlName","round"],[1,"tb-form-panel","no-padding","no-border"],[1,"tb-form-row","same-padding",3,"tb-hint-tooltip-icon"],["formControlName","tellFailureIfDeltaIsNegative",1,"mat-slide","margin"],["formControlName","useCache",1,"mat-slide","margin"],[1,"tb-form-panel","stroked"],[1,"tb-form-row","no-border","no-padding",3,"tb-hint-tooltip-icon"],["formControlName","addPeriodBetweenMsgs",1,"mat-slide"],["class","mat-block",4,"ngIf"],["formControlName","excludeZeroDeltas",1,"mat-slide","margin"],[1,"mat-block"],["required","","matInput","","formControlName","periodValueKey"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),m(4),s(5,"translate"),n(),g(6,"input",3),C(7,tu,3,3,"mat-error",4),n(),o(8,"mat-form-field",2)(9,"mat-label"),m(10),s(11,"translate"),n(),g(12,"input",5),C(13,iu,3,3,"mat-error",4),n()(),o(14,"mat-form-field",2)(15,"mat-label"),m(16),s(17,"translate"),n(),g(18,"input",6),C(19,nu,3,3,"mat-error",4)(20,ru,3,3,"mat-error",4),n(),o(21,"div",7)(22,"div",8),s(23,"translate"),o(24,"mat-slide-toggle",9),m(25),s(26,"translate"),n()(),o(27,"div",8),s(28,"translate"),s(29,"translate"),o(30,"mat-slide-toggle",10),m(31),s(32,"translate"),n()(),o(33,"div",11)(34,"div",12),s(35,"translate"),o(36,"mat-slide-toggle",13),m(37),s(38,"translate"),s(39,"translate"),n()(),C(40,au,6,4,"mat-form-field",14),n(),o(41,"div",8),s(42,"translate"),s(43,"translate"),s(44,"translate"),s(45,"translate"),s(46,"translate"),o(47,"mat-slide-toggle",15),m(48),s(49,"translate"),n()()()()),a&2&&(p("formGroup",l.calculateDeltaConfigForm),r(4),q(d(5,19,"rule-node-config.input-value-key")),r(3),p("ngIf",l.calculateDeltaConfigForm.get("inputValueKey").hasError("required")||l.calculateDeltaConfigForm.get("inputValueKey").hasError("pattern")),r(3),q(d(11,21,"rule-node-config.output-value-key")),r(3),p("ngIf",l.calculateDeltaConfigForm.get("outputValueKey").hasError("required")||l.calculateDeltaConfigForm.get("outputValueKey").hasError("pattern")),r(3),q(d(17,23,"rule-node-config.number-of-digits-after-floating-point")),r(3),p("ngIf",l.calculateDeltaConfigForm.get("round").hasError("min")),r(),p("ngIf",l.calculateDeltaConfigForm.get("round").hasError("max")),r(2),h("tb-hint-tooltip-icon",d(23,25,"rule-node-config.failure-if-delta-negative-tooltip")),r(3),f(" ",d(26,27,"rule-node-config.failure-if-delta-negative")," "),r(2),h("tb-hint-tooltip-icon",le(29,31,"rule-node-config.use-caching-tooltip",Fe(58,Qa,l.calculateDeltaConfigForm.get("inputValueKey").valid?l.calculateDeltaConfigForm.get("inputValueKey").value:d(28,29,"rule-node-config.input-value-key")))),r(4),f(" ",d(32,34,"rule-node-config.use-caching")," "),r(2),Ke("no-padding-bottom",l.calculateDeltaConfigForm.get("addPeriodBetweenMsgs").value),r(),h("tb-hint-tooltip-icon",le(35,36,"rule-node-config.add-time-difference-between-readings-tooltip",Fe(60,Xd,l.calculateDeltaConfigForm.get("periodValueKey").valid&&l.calculateDeltaConfigForm.get("addPeriodBetweenMsgs").value?l.calculateDeltaConfigForm.get("periodValueKey").value:"periodInMs"))),r(3),f(" ",le(39,41,"rule-node-config.add-time-difference-between-readings",Fe(62,Qa,l.calculateDeltaConfigForm.get("inputValueKey").valid?l.calculateDeltaConfigForm.get("inputValueKey").value:d(38,39,"rule-node-config.input-value-key")))," "),r(3),p("ngIf",l.calculateDeltaConfigForm.get("addPeriodBetweenMsgs").value),r(),h("tb-hint-tooltip-icon",l.calculateDeltaConfigForm.get("addPeriodBetweenMsgs").value?le(44,48,"rule-node-config.exclude-zero-deltas-time-difference-hint",Gt(64,Zd,l.calculateDeltaConfigForm.get("outputValueKey").valid?l.calculateDeltaConfigForm.get("outputValueKey").value:d(42,44,"rule-node-config.output-value-key"),l.calculateDeltaConfigForm.get("periodValueKey").valid?l.calculateDeltaConfigForm.get("periodValueKey").value:d(43,46,"rule-node-config.period-value-key"))):le(46,53,"rule-node-config.exclude-zero-deltas-hint",Fe(67,eu,l.calculateDeltaConfigForm.get("outputValueKey").valid?l.calculateDeltaConfigForm.get("outputValueKey").value:d(45,51,"rule-node-config.output-value-key")))),r(7),f(" ",d(49,56,"rule-node-config.exclude-zero-deltas")," "))},dependencies:[B,R,k,O,Q,ue,L,ge,F,_,D,ve,it,S,M,Ce,E],encapsulation:2});let t=i;return t})();b();var Lr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.fetchDeviceCredentialsConfigForm}prepareInputConfig(e){return{fetchTo:I(e?.fetchTo)?e.fetchTo:ye.METADATA}}onConfigurationSet(e){this.fetchDeviceCredentialsConfigForm=this.fb.group({fetchTo:[e.fetchTo,[]]})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-enrichment-node-fetch-device-credentials-config"]],features:[N],decls:3,vars:4,consts:[[3,"formGroup"],["formControlName","fetchTo",3,"labelText"]],template:function(a,l){a&1&&(o(0,"section",0),g(1,"tb-msg-metadata-chip",1),s(2,"translate"),n()),a&2&&(p("formGroup",l.fetchDeviceCredentialsConfigForm),r(),p("labelText",d(2,2,"rule-node-config.fetch-credentials-to")))},dependencies:[F,_,S,M,Pe,E],encapsulation:2});let t=i;return t})();var Dn=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=Je({type:i}),i.\u0275inj=Qe({imports:[ke,Be,ut]});let t=i;return t})();(function(){Ye(Dn,{declarations:[Mr,Nr,Ar,Dr,Vr,qr,kr,Br,Or,Lr],imports:[ke,Be,ut],exports:[Mr,Nr,Ar,Dr,Vr,qr,kr,Br,Or,Lr]})})();b();b();function lu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.topic-arn-pattern-required")," "))}function mu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.aws-access-key-id-required")," "))}function pu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.aws-secret-access-key-required")," "))}function su(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.aws-region-required")," "))}var Rr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.snsConfigForm}onConfigurationSet(e){this.snsConfigForm=this.fb.group({topicArnPattern:[e?e.topicArnPattern:null,[c.required]],accessKeyId:[e?e.accessKeyId:null,[c.required]],secretAccessKey:[e?e.secretAccessKey:null,[c.required]],region:[e?e.region:null,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-sns-config"]],features:[N],decls:23,vars:5,consts:[[1,"flex","flex-col",3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","topicArnPattern"],[4,"ngIf"],[1,"mat-block"],["required","","matInput","","formControlName","accessKeyId"],["required","","matInput","","formControlName","secretAccessKey"],["required","","matInput","","formControlName","region"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.topic-arn-pattern"),n(),g(4,"input",3),C(5,lu,3,3,"mat-error",4),o(6,"mat-hint",2),m(7,"rule-node-config.general-pattern-hint"),n()(),o(8,"mat-form-field",5)(9,"mat-label",2),m(10,"rule-node-config.aws-access-key-id"),n(),g(11,"input",6),C(12,mu,3,3,"mat-error",4),n(),o(13,"mat-form-field",5)(14,"mat-label",2),m(15,"rule-node-config.aws-secret-access-key"),n(),g(16,"input",7),C(17,pu,3,3,"mat-error",4),n(),o(18,"mat-form-field",5)(19,"mat-label",2),m(20,"rule-node-config.aws-region"),n(),g(21,"input",8),C(22,su,3,3,"mat-error",4),n()()),a&2&&(p("formGroup",l.snsConfigForm),r(5),p("ngIf",l.snsConfigForm.get("topicArnPattern").hasError("required")),r(7),p("ngIf",l.snsConfigForm.get("accessKeyId").hasError("required")),r(5),p("ngIf",l.snsConfigForm.get("secretAccessKey").hasError("required")),r(5),p("ngIf",l.snsConfigForm.get("region").hasError("required")))},dependencies:[B,R,k,O,de,Q,L,F,_,D,S,M,V,E],encapsulation:2});let t=i;return t})();b();function du(t,i){if(t&1&&(o(0,"mat-option",15),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.sqsQueueTypeTranslationsMap.get(u))," ")}}function uu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.queue-url-pattern-required")," "))}function cu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-delay-seconds-message")," "))}function fu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-delay-seconds-message")," "))}function gu(t,i){if(t&1&&(o(0,"mat-form-field",1)(1,"mat-label",2),m(2,"rule-node-config.delay-seconds"),n(),g(3,"input",16),C(4,cu,3,3,"mat-error",7)(5,fu,3,3,"mat-error",7),n()),t&2){let u=v();r(4),p("ngIf",u.sqsConfigForm.get("delaySeconds").hasError("min")),r(),p("ngIf",u.sqsConfigForm.get("delaySeconds").hasError("max"))}}function Cu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.aws-access-key-id-required")," "))}function yu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.aws-secret-access-key-required")," "))}function vu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.aws-region-required")," "))}var Pr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.sqsQueueType=Ei,this.sqsQueueTypes=Object.keys(Ei),this.sqsQueueTypeTranslationsMap=va}configForm(){return this.sqsConfigForm}onConfigurationSet(e){this.sqsConfigForm=this.fb.group({queueType:[e?e.queueType:null,[c.required]],queueUrlPattern:[e?e.queueUrlPattern:null,[c.required]],delaySeconds:[e?e.delaySeconds:null,[c.min(0),c.max(900)]],messageAttributes:[e?e.messageAttributes:null,[]],accessKeyId:[e?e.accessKeyId:null,[c.required]],secretAccessKey:[e?e.secretAccessKey:null,[c.required]],region:[e?e.region:null,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-sqs-config"]],features:[N],decls:35,vars:13,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","queueType","required",""],[3,"value",4,"ngFor","ngForOf"],["subscriptSizing","dynamic",1,"mat-block"],["required","","matInput","","formControlName","queueUrlPattern"],[4,"ngIf"],["class","mat-block",4,"ngIf"],["translate","",1,"tb-title"],[1,"tb-hint",3,"innerHTML"],["required","false","formControlName","messageAttributes","keyText","rule-node-config.name","keyRequiredText","rule-node-config.name-required","valText","rule-node-config.value","valRequiredText","rule-node-config.value-required"],["required","","matInput","","formControlName","accessKeyId"],["required","","matInput","","formControlName","secretAccessKey"],["required","","matInput","","formControlName","region"],[3,"value"],["required","","type","number","min","0","max","900","step","1","matInput","","formControlName","delaySeconds"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.queue-type"),n(),o(4,"mat-select",3),C(5,du,3,4,"mat-option",4),n()(),o(6,"mat-form-field",5)(7,"mat-label",2),m(8,"rule-node-config.queue-url-pattern"),n(),g(9,"input",6),C(10,uu,3,3,"mat-error",7),o(11,"mat-hint",2),m(12,"rule-node-config.general-pattern-hint"),n()(),C(13,gu,6,2,"mat-form-field",8),o(14,"label",9),m(15,"rule-node-config.message-attributes"),n(),g(16,"div",10),s(17,"translate"),s(18,"safe"),g(19,"tb-kv-map-config-old",11),o(20,"mat-form-field",1)(21,"mat-label",2),m(22,"rule-node-config.aws-access-key-id"),n(),g(23,"input",12),C(24,Cu,3,3,"mat-error",7),n(),o(25,"mat-form-field",1)(26,"mat-label",2),m(27,"rule-node-config.aws-secret-access-key"),n(),g(28,"input",13),C(29,yu,3,3,"mat-error",7),n(),o(30,"mat-form-field",1)(31,"mat-label",2),m(32,"rule-node-config.aws-region"),n(),g(33,"input",14),C(34,vu,3,3,"mat-error",7),n()()),a&2&&(p("formGroup",l.sqsConfigForm),r(5),p("ngForOf",l.sqsQueueTypes),r(5),p("ngIf",l.sqsConfigForm.get("queueUrlPattern").hasError("required")),r(3),p("ngIf",l.sqsConfigForm.get("queueType").value===l.sqsQueueType.STANDARD),r(3),p("innerHTML",le(18,10,d(17,8,"rule-node-config.message-attributes-hint"),"html"),we),r(8),p("ngIf",l.sqsConfigForm.get("accessKeyId").hasError("required")),r(5),p("ngIf",l.sqsConfigForm.get("secretAccessKey").hasError("required")),r(5),p("ngIf",l.sqsConfigForm.get("region").hasError("required")))},dependencies:[z,B,R,k,O,de,Q,te,X,L,ge,F,_,D,ve,it,S,M,V,_t,lt,E],encapsulation:2});let t=i;return t})();b();function hu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.gcp-project-id-required")," "))}function bu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.pubsub-topic-name-required")," "))}var wr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.pubSubConfigForm}onConfigurationSet(e){this.pubSubConfigForm=this.fb.group({projectId:[e?e.projectId:null,[c.required]],topicName:[e?e.topicName:null,[c.required]],serviceAccountKey:[e?e.serviceAccountKey:null,[c.required]],serviceAccountKeyFileName:[e?e.serviceAccountKeyFileName:null,[c.required]],messageAttributes:[e?e.messageAttributes:null,[]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-pub-sub-config"]],features:[N],decls:20,vars:16,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"mat-block"],["translate",""],["required","","matInput","","formControlName","projectId"],[4,"ngIf"],["required","","matInput","","formControlName","topicName"],["formControlName","serviceAccountKey","required","","requiredAsError","","noFileText","rule-node-config.no-file",2,"padding-bottom","24px",3,"fileNameChanged","existingFileName","label","dropLabel"],["translate","",1,"tb-title"],[1,"tb-hint",3,"innerHTML"],["required","false","formControlName","messageAttributes","keyText","rule-node-config.name","keyRequiredText","rule-node-config.name-required","valText","rule-node-config.value","valRequiredText","rule-node-config.value-required"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.gcp-project-id"),n(),g(4,"input",3),C(5,hu,3,3,"mat-error",4),n(),o(6,"mat-form-field",1)(7,"mat-label",2),m(8,"rule-node-config.pubsub-topic-name"),n(),g(9,"input",5),C(10,bu,3,3,"mat-error",4),n(),o(11,"tb-file-input",6),s(12,"translate"),s(13,"translate"),Y("fileNameChanged",function($){return l.pubSubConfigForm.get("serviceAccountKeyFileName").setValue($)}),n(),o(14,"label",7),m(15,"rule-node-config.message-attributes"),n(),g(16,"div",8),s(17,"translate"),s(18,"safe"),g(19,"tb-kv-map-config-old",9),n()),a&2&&(p("formGroup",l.pubSubConfigForm),r(5),p("ngIf",l.pubSubConfigForm.get("projectId").hasError("required")),r(5),p("ngIf",l.pubSubConfigForm.get("topicName").hasError("required")),r(),h("label",d(12,7,"rule-node-config.gcp-service-account-key")),h("dropLabel",d(13,9,"rule-node-config.drop-file")),p("existingFileName",l.pubSubConfigForm.get("serviceAccountKeyFileName").value),r(5),p("innerHTML",le(18,13,d(17,11,"rule-node-config.message-attributes-hint"),"html"),we))},dependencies:[B,R,k,O,Q,L,F,_,D,S,M,Si,V,_t,lt,E],encapsulation:2});let t=i;return t})();b();function xu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.topic-pattern-required")," "))}function Tu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.bootstrap-servers-required")," "))}function _u(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-retries-message")," "))}function Su(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-batch-size-bytes-message")," "))}function Fu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-linger-ms-message")," "))}function Iu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-buffer-memory-bytes-message")," "))}function Eu(t,i){if(t&1&&(o(0,"mat-option",21),m(1),n()),t&2){let u=i.$implicit;p("value",u),r(),f(" ",u," ")}}function Mu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.key-serializer-required")," "))}function Nu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.value-serializer-required")," "))}function Au(t,i){if(t&1&&(o(0,"mat-option",21),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v(2);p("value",u),r(),f(" ",d(2,2,e.ToByteStandartCharsetTypeTranslationMap.get(u))," ")}}function Du(t,i){if(t&1&&(o(0,"mat-form-field",22)(1,"mat-label",2),m(2,"rule-node-config.charset-encoding"),n(),o(3,"mat-select",23),C(4,Au,3,4,"mat-option",14),n()()),t&2){let u=v();r(4),p("ngForOf",u.ToByteStandartCharsetTypesValues)}}var Gr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.ackValues=["all","-1","0","1"],this.ToByteStandartCharsetTypesValues=_a,this.ToByteStandartCharsetTypeTranslationMap=Sa}configForm(){return this.kafkaConfigForm}onConfigurationSet(e){this.kafkaConfigForm=this.fb.group({topicPattern:[e?e.topicPattern:null,[c.required]],keyPattern:[e?e.keyPattern:null],bootstrapServers:[e?e.bootstrapServers:null,[c.required]],retries:[e?e.retries:null,[c.min(0)]],batchSize:[e?e.batchSize:null,[c.min(0)]],linger:[e?e.linger:null,[c.min(0)]],bufferMemory:[e?e.bufferMemory:null,[c.min(0)]],acks:[e?e.acks:null,[c.required]],keySerializer:[e?e.keySerializer:null,[c.required]],valueSerializer:[e?e.valueSerializer:null,[c.required]],otherProperties:[e?e.otherProperties:null,[]],addMetadataKeyValuesAsKafkaHeaders:[e?e.addMetadataKeyValuesAsKafkaHeaders:!1,[]],kafkaHeadersCharset:[e?e.kafkaHeadersCharset:null,[]]})}validatorTriggers(){return["addMetadataKeyValuesAsKafkaHeaders"]}updateValidators(e){this.kafkaConfigForm.get("addMetadataKeyValuesAsKafkaHeaders").value?this.kafkaConfigForm.get("kafkaHeadersCharset").setValidators([c.required]):this.kafkaConfigForm.get("kafkaHeadersCharset").setValidators([]),this.kafkaConfigForm.get("kafkaHeadersCharset").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-kafka-config"]],features:[N],decls:65,vars:14,consts:[[1,"flex","flex-col",3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","topicPattern"],[4,"ngIf"],["matInput","","formControlName","keyPattern"],["translate","",1,"tb-hint"],[1,"mat-block"],["required","","matInput","","formControlName","bootstrapServers"],["type","number","step","1","min","0","matInput","","formControlName","retries"],["type","number","step","1","min","0","matInput","","formControlName","batchSize"],["type","number","step","1","min","0","matInput","","formControlName","linger"],["type","number","step","1","min","0","matInput","","formControlName","bufferMemory"],["formControlName","acks","required",""],[3,"value",4,"ngFor","ngForOf"],["required","","matInput","","formControlName","keySerializer"],["required","","matInput","","formControlName","valueSerializer"],["translate","",1,"tb-title"],["required","false","formControlName","otherProperties","keyText","rule-node-config.key","keyRequiredText","rule-node-config.key-required","valText","rule-node-config.value","valRequiredText","rule-node-config.value-required"],["formControlName","addMetadataKeyValuesAsKafkaHeaders",1,"flex-1"],["class","mat-block flex-1",4,"ngIf"],[3,"value"],[1,"mat-block","flex-1"],["formControlName","kafkaHeadersCharset","required",""]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.topic-pattern"),n(),g(4,"input",3),C(5,xu,3,3,"mat-error",4),o(6,"mat-hint",2),m(7,"rule-node-config.general-pattern-hint"),n()(),o(8,"mat-form-field",1)(9,"mat-label",2),m(10,"rule-node-config.key-pattern"),n(),g(11,"input",5),o(12,"mat-hint",2),m(13,"rule-node-config.general-pattern-hint"),n()(),o(14,"div",6),m(15,"rule-node-config.key-pattern-hint"),n(),o(16,"mat-form-field",7)(17,"mat-label",2),m(18,"rule-node-config.bootstrap-servers"),n(),g(19,"input",8),C(20,Tu,3,3,"mat-error",4),n(),o(21,"mat-form-field",7)(22,"mat-label",2),m(23,"rule-node-config.retries"),n(),g(24,"input",9),C(25,_u,3,3,"mat-error",4),n(),o(26,"mat-form-field",7)(27,"mat-label",2),m(28,"rule-node-config.batch-size-bytes"),n(),g(29,"input",10),C(30,Su,3,3,"mat-error",4),n(),o(31,"mat-form-field",7)(32,"mat-label",2),m(33,"rule-node-config.linger-ms"),n(),g(34,"input",11),C(35,Fu,3,3,"mat-error",4),n(),o(36,"mat-form-field",7)(37,"mat-label",2),m(38,"rule-node-config.buffer-memory-bytes"),n(),g(39,"input",12),C(40,Iu,3,3,"mat-error",4),n(),o(41,"mat-form-field",7)(42,"mat-label",2),m(43,"rule-node-config.acks"),n(),o(44,"mat-select",13),C(45,Eu,2,2,"mat-option",14),n()(),o(46,"mat-form-field",7)(47,"mat-label",2),m(48,"rule-node-config.key-serializer"),n(),g(49,"input",15),C(50,Mu,3,3,"mat-error",4),n(),o(51,"mat-form-field",7)(52,"mat-label",2),m(53,"rule-node-config.value-serializer"),n(),g(54,"input",16),C(55,Nu,3,3,"mat-error",4),n(),o(56,"label",17),m(57,"rule-node-config.other-properties"),n(),g(58,"tb-kv-map-config-old",18),o(59,"mat-checkbox",19),m(60),s(61,"translate"),n(),o(62,"div",6),m(63,"rule-node-config.add-metadata-key-values-as-kafka-headers-hint"),n(),C(64,Du,5,1,"mat-form-field",20),n()),a&2&&(p("formGroup",l.kafkaConfigForm),r(5),p("ngIf",l.kafkaConfigForm.get("topicPattern").hasError("required")),r(15),p("ngIf",l.kafkaConfigForm.get("bootstrapServers").hasError("required")),r(5),p("ngIf",l.kafkaConfigForm.get("retries").hasError("min")),r(5),p("ngIf",l.kafkaConfigForm.get("batchSize").hasError("min")),r(5),p("ngIf",l.kafkaConfigForm.get("linger").hasError("min")),r(5),p("ngIf",l.kafkaConfigForm.get("bufferMemory").hasError("min")),r(5),p("ngForOf",l.ackValues),r(5),p("ngIf",l.kafkaConfigForm.get("keySerializer").hasError("required")),r(5),p("ngIf",l.kafkaConfigForm.get("valueSerializer").hasError("required")),r(5),f(" ",d(61,12,"rule-node-config.add-metadata-key-values-as-kafka-headers")," "),r(4),p("ngIf",l.kafkaConfigForm.get("addMetadataKeyValuesAsKafkaHeaders").value))},dependencies:[z,B,je,R,k,O,de,Q,te,X,L,ge,F,_,D,ve,S,M,V,_t,E],encapsulation:2});let t=i;return t})();b();function Vu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.topic-pattern-required")," "))}function qu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.host-required")," "))}function ku(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.port-required")," "))}function Bu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.port-range")," "))}function Ou(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.port-range")," "))}function Lu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.connect-timeout-required")," "))}function Ru(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.connect-timeout-range")," "))}function Pu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.connect-timeout-range")," "))}var jr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.mqttConfigForm}onConfigurationSet(e){this.mqttConfigForm=this.fb.group({topicPattern:[e?e.topicPattern:null,[c.required]],host:[e?e.host:null,[c.required]],port:[e?e.port:null,[c.required,c.min(1),c.max(65535)]],connectTimeoutSec:[e?e.connectTimeoutSec:null,[c.required,c.min(1),c.max(200)]],clientId:[e?e.clientId:null,[]],appendClientIdSuffix:[{value:e?e.appendClientIdSuffix:!1,disabled:!(e&&Rn(e.clientId))},[]],parseToPlainText:[e?e.parseToPlainText:!1,[]],cleanSession:[e?e.cleanSession:!1,[]],retainedMessage:[e?e.retainedMessage:!1,[]],ssl:[e?e.ssl:!1,[]],credentials:[e?e.credentials:null,[]]})}updateValidators(e){Rn(this.mqttConfigForm.get("clientId").value)?this.mqttConfigForm.get("appendClientIdSuffix").enable({emitEvent:!1}):this.mqttConfigForm.get("appendClientIdSuffix").disable({emitEvent:!1}),this.mqttConfigForm.get("appendClientIdSuffix").updateValueAndValidity({emitEvent:e})}validatorTriggers(){return["clientId"]}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-mqtt-config"]],features:[N],decls:57,vars:34,consts:[[1,"flex","flex-col",3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","topicPattern"],[4,"ngIf"],[1,"flex","flex-1","flex-col","gt-sm:flex-row","gt-sm:gap-2"],[1,"mat-block","gt-sm:max-w-60%","gt-sm:flex-full"],["required","","matInput","","formControlName","host"],[1,"mat-block","gt-sm:max-w-40%","gt-sm:flex-full"],["required","","type","number","step","1","min","1","max","65535","matInput","","formControlName","port"],["required","","type","number","step","1","min","1","max","200","matInput","","formControlName","connectTimeoutSec"],["matInput","","formControlName","clientId"],["formControlName","appendClientIdSuffix"],[1,"tb-hint"],["formControlName","parseToPlainText"],["formControlName","cleanSession"],["formControlName","retainedMessage"],["formControlName","ssl"],["formControlName","credentials",3,"passwordFieldRequired"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.topic-pattern"),n(),g(4,"input",3),C(5,Vu,3,3,"mat-error",4),o(6,"mat-hint",2),m(7,"rule-node-config.general-pattern-hint"),n()(),o(8,"div",5)(9,"mat-form-field",6)(10,"mat-label",2),m(11,"rule-node-config.host"),n(),g(12,"input",7),C(13,qu,3,3,"mat-error",4),n(),o(14,"mat-form-field",8)(15,"mat-label",2),m(16,"rule-node-config.port"),n(),g(17,"input",9),C(18,ku,3,3,"mat-error",4)(19,Bu,3,3,"mat-error",4)(20,Ou,3,3,"mat-error",4),n(),o(21,"mat-form-field",8)(22,"mat-label",2),m(23,"rule-node-config.connect-timeout"),n(),g(24,"input",10),C(25,Lu,3,3,"mat-error",4)(26,Ru,3,3,"mat-error",4)(27,Pu,3,3,"mat-error",4),n()(),o(28,"mat-form-field",1)(29,"mat-label",2),m(30,"rule-node-config.client-id"),n(),g(31,"input",11),o(32,"mat-hint"),m(33),s(34,"translate"),n()(),o(35,"mat-checkbox",12),m(36),s(37,"translate"),n(),o(38,"div",13),m(39),s(40,"translate"),n(),o(41,"mat-checkbox",14),m(42),s(43,"translate"),n(),o(44,"div",13),m(45),s(46,"translate"),n(),o(47,"mat-checkbox",15),m(48),s(49,"translate"),n(),o(50,"mat-checkbox",16),m(51),s(52,"translate"),n(),o(53,"mat-checkbox",17),m(54),s(55,"translate"),n(),g(56,"tb-credentials-config",18),n()),a&2&&(p("formGroup",l.mqttConfigForm),r(5),p("ngIf",l.mqttConfigForm.get("topicPattern").hasError("required")),r(8),p("ngIf",l.mqttConfigForm.get("host").hasError("required")),r(5),p("ngIf",l.mqttConfigForm.get("port").hasError("required")),r(),p("ngIf",l.mqttConfigForm.get("port").hasError("min")),r(),p("ngIf",l.mqttConfigForm.get("port").hasError("max")),r(5),p("ngIf",l.mqttConfigForm.get("connectTimeoutSec").hasError("required")),r(),p("ngIf",l.mqttConfigForm.get("connectTimeoutSec").hasError("min")),r(),p("ngIf",l.mqttConfigForm.get("connectTimeoutSec").hasError("max")),r(6),q(d(34,18,"rule-node-config.client-id-hint")),r(3),f(" ",d(37,20,"rule-node-config.append-client-id-suffix")," "),r(3),q(d(40,22,"rule-node-config.client-id-suffix-hint")),r(3),f(" ",d(43,24,"rule-node-config.parse-to-plain-text")," "),r(3),q(d(46,26,"rule-node-config.parse-to-plain-text-hint")),r(3),f(" ",d(49,28,"rule-node-config.clean-session")," "),r(3),f(" ",d(52,30,"rule-node-config.retained-message")," "),r(3),f(" ",d(55,32,"rule-node-config.enable-ssl")," "),r(2),p("passwordFieldRequired",!1))},dependencies:[B,je,R,k,O,de,Q,L,ge,F,_,D,ve,it,S,M,V,pi,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-mqtt-credentials-panel-group[_ngcontent-%COMP%]{margin:0 6px}']});let t=i;return t})();b();var Ur=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.notificationType=Wo,this.entityType=W}configForm(){return this.notificationConfigForm}onConfigurationSet(e){this.notificationConfigForm=this.fb.group({templateId:[e?e.templateId:null,[c.required]],targets:[e?e.targets:[],[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-notification-config"]],features:[N],decls:6,vars:13,consts:[[1,"flex","flex-col",3,"formGroup"],["required","","allowCreate","","formControlName","templateId",3,"notificationTypes"],["required","","formControlName","targets",3,"labelText","placeholderText","requiredText","entityType","subType"]],template:function(a,l){a&1&&(o(0,"section",0),g(1,"tb-template-autocomplete",1)(2,"tb-entity-list",2),s(3,"translate"),s(4,"translate"),s(5,"translate"),n()),a&2&&(p("formGroup",l.notificationConfigForm),r(),p("notificationTypes",l.notificationType.RULE_NODE),r(),h("labelText",d(3,7,"notification.recipients")),h("placeholderText",d(4,9,"notification.recipient")),h("requiredText",d(5,11,"notification.recipients-required")),h("entityType",l.entityType.NOTIFICATION_TARGET),h("subType",l.notificationType.RULE_NODE))},dependencies:[wo,F,_,D,S,M,Xo,E],encapsulation:2});let t=i;return t})();b();function wu(t,i){if(t&1&&(o(0,"mat-option",22),m(1),n()),t&2){let u=i.$implicit;p("value",u),r(),f(" ",u," ")}}function Gu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.host-required")," "))}function ju(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.port-required")," "))}function Uu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.port-range")," "))}function Ku(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.port-range")," "))}function Hu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-connection-timeout-ms-message")," "))}function zu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-handshake-timeout-ms-message")," "))}var Kr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.messageProperties=[null,"BASIC","TEXT_PLAIN","MINIMAL_BASIC","MINIMAL_PERSISTENT_BASIC","PERSISTENT_BASIC","PERSISTENT_TEXT_PLAIN"]}configForm(){return this.rabbitMqConfigForm}onConfigurationSet(e){this.rabbitMqConfigForm=this.fb.group({exchangeNamePattern:[e?e.exchangeNamePattern:null,[]],routingKeyPattern:[e?e.routingKeyPattern:null,[]],messageProperties:[e?e.messageProperties:null,[]],host:[e?e.host:null,[c.required]],port:[e?e.port:null,[c.required,c.min(1),c.max(65535)]],virtualHost:[e?e.virtualHost:null,[]],username:[e?e.username:null,[]],password:[e?e.password:null,[]],automaticRecoveryEnabled:[e?e.automaticRecoveryEnabled:!1,[]],connectionTimeout:[e?e.connectionTimeout:null,[c.min(0)]],handshakeTimeout:[e?e.handshakeTimeout:null,[c.min(0)]],clientProperties:[e?e.clientProperties:null,[]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-rabbit-mq-config"]],features:[N],decls:56,vars:11,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"mat-block"],["translate",""],["matInput","","formControlName","exchangeNamePattern"],["matInput","","formControlName","routingKeyPattern"],["formControlName","messageProperties"],[3,"value",4,"ngFor","ngForOf"],[1,"gt-sm:flex","gt-sm:flex-row","gt-sm:gap-2"],[1,"mat-block","gt-sm:max-w-60%","gt-sm:flex-full"],["required","","matInput","","formControlName","host"],[4,"ngIf"],[1,"mat-block","gt-sm:max-w-40%","gt-sm:flex-full"],["required","","type","number","step","1","min","1","max","65535","matInput","","formControlName","port"],["matInput","","formControlName","virtualHost"],["matInput","","formControlName","username"],["type","password","matInput","","formControlName","password"],["matSuffix",""],["formControlName","automaticRecoveryEnabled"],["type","number","step","1","min","0","matInput","","formControlName","connectionTimeout"],["type","number","step","1","min","0","matInput","","formControlName","handshakeTimeout"],["translate","",1,"tb-title"],["required","false","formControlName","clientProperties","keyText","rule-node-config.key","keyRequiredText","rule-node-config.key-required","valText","rule-node-config.value","valRequiredText","rule-node-config.value-required"],[3,"value"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.exchange-name-pattern"),n(),g(4,"input",3),n(),o(5,"mat-form-field",1)(6,"mat-label",2),m(7,"rule-node-config.routing-key-pattern"),n(),g(8,"input",4),n(),o(9,"mat-form-field",1)(10,"mat-label",2),m(11,"rule-node-config.message-properties"),n(),o(12,"mat-select",5),C(13,wu,2,2,"mat-option",6),n()(),o(14,"div",7)(15,"mat-form-field",8)(16,"mat-label",2),m(17,"rule-node-config.host"),n(),g(18,"input",9),C(19,Gu,3,3,"mat-error",10),n(),o(20,"mat-form-field",11)(21,"mat-label",2),m(22,"rule-node-config.port"),n(),g(23,"input",12),C(24,ju,3,3,"mat-error",10)(25,Uu,3,3,"mat-error",10)(26,Ku,3,3,"mat-error",10),n()(),o(27,"mat-form-field",1)(28,"mat-label",2),m(29,"rule-node-config.virtual-host"),n(),g(30,"input",13),n(),o(31,"mat-form-field",1)(32,"mat-label",2),m(33,"rule-node-config.username"),n(),g(34,"input",14),n(),o(35,"mat-form-field",1)(36,"mat-label",2),m(37,"rule-node-config.password"),n(),g(38,"input",15)(39,"tb-toggle-password",16),n(),o(40,"mat-checkbox",17),m(41),s(42,"translate"),n(),o(43,"mat-form-field",1)(44,"mat-label",2),m(45,"rule-node-config.connection-timeout-ms"),n(),g(46,"input",18),C(47,Hu,3,3,"mat-error",10),n(),o(48,"mat-form-field",1)(49,"mat-label",2),m(50,"rule-node-config.handshake-timeout-ms"),n(),g(51,"input",19),C(52,zu,3,3,"mat-error",10),n(),o(53,"label",20),m(54,"rule-node-config.client-properties"),n(),g(55,"tb-kv-map-config-old",21),n()),a&2&&(p("formGroup",l.rabbitMqConfigForm),r(13),p("ngForOf",l.messageProperties),r(6),p("ngIf",l.rabbitMqConfigForm.get("host").hasError("required")),r(5),p("ngIf",l.rabbitMqConfigForm.get("port").hasError("required")),r(),p("ngIf",l.rabbitMqConfigForm.get("port").hasError("min")),r(),p("ngIf",l.rabbitMqConfigForm.get("port").hasError("max")),r(15),f(" ",d(42,9,"rule-node-config.automatic-recovery")," "),r(6),p("ngIf",l.rabbitMqConfigForm.get("connectionTimeout").hasError("min")),r(5),p("ngIf",l.rabbitMqConfigForm.get("handshakeTimeout").hasError("min")))},dependencies:[z,B,je,R,k,O,Q,ae,te,X,L,ge,F,_,D,ve,it,S,M,V,Xt,_t,E],encapsulation:2});let t=i;return t})();b();var Qu=t=>({max:t});function Ju(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.endpoint-url-pattern-required")," "))}function $u(t,i){if(t&1&&(o(0,"mat-option",20),m(1),n()),t&2){let u=i.$implicit;p("value",u),r(),f(" ",u," ")}}function Yu(t,i){t&1&&(o(0,"mat-checkbox",21),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.use-simple-client-http-factory")," "))}function Wu(t,i){if(t&1&&(o(0,"mat-option",20),m(1),n()),t&2){let u=i.$implicit;p("value",u),r(),f(" ",u," ")}}function Xu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.proxy-host-required")," "))}function Zu(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.proxy-port-required")," "))}function ec(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.proxy-port-range")," "))}function tc(t,i){if(t&1&&(o(0,"div")(1,"div",23)(2,"mat-form-field",24)(3,"mat-label",2),m(4,"rule-node-config.proxy-scheme"),n(),o(5,"mat-select",25),C(6,Wu,2,2,"mat-option",7),n()(),o(7,"mat-form-field",26)(8,"mat-label",2),m(9,"rule-node-config.proxy-host"),n(),g(10,"input",27),C(11,Xu,3,3,"mat-error",4),n(),o(12,"mat-form-field",28)(13,"mat-label",2),m(14,"rule-node-config.proxy-port"),n(),g(15,"input",29),C(16,Zu,3,3,"mat-error",4)(17,ec,3,3,"mat-error",4),n()(),o(18,"mat-form-field",5)(19,"mat-label",2),m(20,"rule-node-config.proxy-user"),n(),g(21,"input",30),n(),o(22,"mat-form-field",5)(23,"mat-label",2),m(24,"rule-node-config.proxy-password"),n(),g(25,"input",31),n()()),t&2){let u=v(2);r(6),p("ngForOf",u.proxySchemes),r(5),p("ngIf",u.restApiCallConfigForm.get("proxyHost").hasError("required")),r(5),p("ngIf",u.restApiCallConfigForm.get("proxyPort").hasError("required")),r(),p("ngIf",u.restApiCallConfigForm.get("proxyPort").hasError("min")||u.restApiCallConfigForm.get("proxyPort").hasError("max"))}}function ic(t,i){if(t&1&&(o(0,"div")(1,"mat-checkbox",22),m(2),s(3,"translate"),n(),C(4,tc,26,4,"div",4),n()),t&2){let u=v();r(2),f(" ",d(3,2,"rule-node-config.use-system-proxy-properties")," "),r(2),p("ngIf",!u.restApiCallConfigForm.get("useSystemProxyProperties").value)}}function nc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.int-range")," "))}function rc(t,i){if(t&1&&(o(0,"mat-form-field",1)(1,"mat-label",2),m(2,"rule-node-config.read-timeout"),n(),g(3,"input",32),o(4,"mat-hint",2),m(5,"rule-node-config.read-timeout-hint"),n(),C(6,nc,3,3,"mat-error",4),n()),t&2){let u=v();r(3),p("max",u.IntLimit),r(3),p("ngIf",u.restApiCallConfigForm.get("readTimeoutMs").hasError("max"))}}function oc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.int-range")," "))}function ac(t,i){if(t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2){let u=v();r(),f(" ",le(2,1,"rule-node-config.memory-buffer-size-range",Fe(4,Qu,u.MemoryBufferSizeInKbLimit))," ")}}var Hr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.proxySchemes=["http","https"],this.httpRequestTypes=Object.keys(Hn),this.MemoryBufferSizeInKbLimit=25e3,this.IntLimit=Gi}configForm(){return this.restApiCallConfigForm}onConfigurationSet(e){this.restApiCallConfigForm=this.fb.group({restEndpointUrlPattern:[e?e.restEndpointUrlPattern:null,[c.required]],requestMethod:[e?e.requestMethod:null,[c.required]],useSimpleClientHttpFactory:[e?e.useSimpleClientHttpFactory:!1,[]],parseToPlainText:[e?e.parseToPlainText:!1,[]],ignoreRequestBody:[e?e.ignoreRequestBody:!1,[]],enableProxy:[e?e.enableProxy:!1,[]],useSystemProxyProperties:[e?e.enableProxy:!1,[]],proxyScheme:[e?e.proxyHost:null,[]],proxyHost:[e?e.proxyHost:null,[]],proxyPort:[e?e.proxyPort:null,[]],proxyUser:[e?e.proxyUser:null,[]],proxyPassword:[e?e.proxyPassword:null,[]],readTimeoutMs:[e?e.readTimeoutMs:null,[c.min(0),c.max(Gi)]],maxParallelRequestsCount:[e?e.maxParallelRequestsCount:null,[c.min(0),c.max(Gi)]],headers:[e?e.headers:null,[]],credentials:[e?e.credentials:null,[]],maxInMemoryBufferSizeInKb:[e?e.maxInMemoryBufferSizeInKb:null,[c.min(1),c.max(this.MemoryBufferSizeInKbLimit)]]})}validatorTriggers(){return["useSimpleClientHttpFactory","enableProxy","useSystemProxyProperties"]}updateValidators(e){let a=this.restApiCallConfigForm.get("useSimpleClientHttpFactory").value,l=this.restApiCallConfigForm.get("enableProxy").value,x=this.restApiCallConfigForm.get("useSystemProxyProperties").value;l&&!x?(this.restApiCallConfigForm.get("proxyHost").setValidators(l?[c.required]:[]),this.restApiCallConfigForm.get("proxyPort").setValidators(l?[c.required,c.min(1),c.max(65535)]:[])):(this.restApiCallConfigForm.get("proxyHost").setValidators([]),this.restApiCallConfigForm.get("proxyPort").setValidators([]),a?this.restApiCallConfigForm.get("readTimeoutMs").setValidators([]):this.restApiCallConfigForm.get("readTimeoutMs").setValidators([c.min(0),c.max(Gi)])),this.restApiCallConfigForm.get("readTimeoutMs").updateValueAndValidity({emitEvent:e}),this.restApiCallConfigForm.get("proxyHost").updateValueAndValidity({emitEvent:e}),this.restApiCallConfigForm.get("proxyPort").updateValueAndValidity({emitEvent:e}),this.restApiCallConfigForm.get("credentials").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-rest-api-call-config"]],features:[N],decls:48,vars:26,consts:[[1,"flex","flex-col",3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","restEndpointUrlPattern"],[4,"ngIf"],[1,"mat-block"],["formControlName","requestMethod"],[3,"value",4,"ngFor","ngForOf"],["formControlName","enableProxy"],["formControlName","useSimpleClientHttpFactory",4,"ngIf"],["formControlName","parseToPlainText"],["translate","",1,"tb-hint",2,"padding-bottom","5px"],["formControlName","ignoreRequestBody"],["class","mat-block","subscriptSizing","dynamic",4,"ngIf"],["type","text","min","0","inputmode","numeric","pattern","[0-9]*","matInput","","formControlName","maxParallelRequestsCount",3,"max"],["type","text","min","1","inputmode","numeric","pattern","[0-9]*","matInput","","formControlName","maxInMemoryBufferSizeInKb",3,"max"],["translate","",1,"tb-title"],[1,"tb-hint",3,"innerHTML"],["required","false","formControlName","headers","keyText","rule-node-config.header","keyRequiredText","rule-node-config.header-required","valText","rule-node-config.value","valRequiredText","rule-node-config.value-required"],["formControlName","credentials",3,"disableCertPemCredentials"],[3,"value"],["formControlName","useSimpleClientHttpFactory"],["formControlName","useSystemProxyProperties"],[1,"gt-sm:flex","gt-sm:flex-row","gt-sm:gap-2"],[1,"mat-block","gt-sm:max-w-10%","gt-sm:flex-full"],["formControlName","proxyScheme"],[1,"md-block","gt-sm:max-w-50%","gt-sm:flex-full"],["matInput","","required","","formControlName","proxyHost"],[1,"mat-block","gt-sm:max-w-40%","gt-sm:flex-full"],["matInput","","required","","formControlName","proxyPort","type","number","step","1"],["matInput","","formControlName","proxyUser"],["matInput","","formControlName","proxyPassword"],["type","text","min","0","inputmode","numeric","pattern","[0-9]*","matInput","","formControlName","readTimeoutMs",3,"max"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.endpoint-url-pattern"),n(),g(4,"input",3),C(5,Ju,3,3,"mat-error",4),o(6,"mat-hint",2),m(7,"rule-node-config.general-pattern-hint"),n()(),o(8,"mat-form-field",5)(9,"mat-label",2),m(10,"rule-node-config.request-method"),n(),o(11,"mat-select",6),C(12,$u,2,2,"mat-option",7),n()(),o(13,"mat-checkbox",8),m(14),s(15,"translate"),n(),C(16,Yu,3,3,"mat-checkbox",9),o(17,"mat-checkbox",10),m(18),s(19,"translate"),n(),o(20,"div",11),m(21,"rule-node-config.parse-to-plain-text-hint"),n(),o(22,"mat-checkbox",12),m(23),s(24,"translate"),n(),C(25,ic,5,4,"div",4)(26,rc,7,2,"mat-form-field",13),o(27,"mat-form-field",1)(28,"mat-label",2),m(29,"rule-node-config.max-parallel-requests-count"),n(),g(30,"input",14),o(31,"mat-hint",2),m(32,"rule-node-config.max-parallel-requests-count-hint"),n(),C(33,oc,3,3,"mat-error",4),n(),o(34,"mat-form-field",1)(35,"mat-label",2),m(36,"rule-node-config.max-response-size"),n(),g(37,"input",15),o(38,"mat-hint",2),m(39,"rule-node-config.max-response-size-hint"),n(),C(40,ac,3,6,"mat-error",4),n(),o(41,"label",16),m(42,"rule-node-config.headers"),n(),g(43,"div",17),s(44,"translate"),s(45,"safe"),g(46,"tb-kv-map-config-old",18)(47,"tb-credentials-config",19),n()),a&2&&(p("formGroup",l.restApiCallConfigForm),r(5),p("ngIf",l.restApiCallConfigForm.get("restEndpointUrlPattern").hasError("required")),r(7),p("ngForOf",l.httpRequestTypes),r(2),f(" ",d(15,15,"rule-node-config.enable-proxy")," "),r(2),p("ngIf",!l.restApiCallConfigForm.get("enableProxy").value),r(2),f(" ",d(19,17,"rule-node-config.parse-to-plain-text")," "),r(5),f(" ",d(24,19,"rule-node-config.ignore-request-body")," "),r(2),p("ngIf",l.restApiCallConfigForm.get("enableProxy").value),r(),p("ngIf",!l.restApiCallConfigForm.get("useSimpleClientHttpFactory").value||l.restApiCallConfigForm.get("enableProxy").value),r(4),p("max",l.IntLimit),r(3),p("ngIf",l.restApiCallConfigForm.get("maxParallelRequestsCount").hasError("max")),r(4),p("max",l.MemoryBufferSizeInKbLimit),r(3),p("ngIf",l.restApiCallConfigForm.get("maxInMemoryBufferSizeInKb").hasError("min")||l.restApiCallConfigForm.get("maxInMemoryBufferSizeInKb").hasError("max")),r(3),p("innerHTML",le(45,23,d(44,21,"rule-node-config.headers-hint"),"html"),we),r(4),p("disableCertPemCredentials",l.restApiCallConfigForm.get("useSimpleClientHttpFactory").value))},dependencies:[z,B,je,R,k,O,de,Q,te,X,L,ge,F,_,D,vi,S,M,V,pi,_t,lt,E],encapsulation:2});let t=i;return t})();b();function lc(t,i){if(t&1&&(o(0,"mat-option",22),m(1),n()),t&2){let u=i.$implicit;p("value",u),r(),f(" ",u.toUpperCase()," ")}}function mc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.smtp-host-required")," "))}function pc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.smtp-port-required")," "))}function sc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.smtp-port-range")," "))}function dc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.smtp-port-range")," "))}function uc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.timeout-required")," "))}function cc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.min-timeout-msec-message")," "))}function fc(t,i){if(t&1&&(o(0,"mat-option",22),m(1),n()),t&2){let u=i.$implicit;p("value",u),r(),f(" ",u," ")}}function gc(t,i){if(t&1&&(o(0,"mat-form-field",4)(1,"mat-label",5),m(2,"rule-node-config.tls-version"),n(),o(3,"mat-select",23),C(4,fc,2,2,"mat-option",7),n()()),t&2){let u=v(2);r(4),p("ngForOf",u.tlsVersions)}}function Cc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.proxy-host-required")," "))}function yc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.proxy-port-required")," "))}function vc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.proxy-port-range")," "))}function hc(t,i){if(t&1&&(o(0,"div")(1,"div",8)(2,"mat-form-field",9)(3,"mat-label",5),m(4,"rule-node-config.proxy-host"),n(),g(5,"input",24),C(6,Cc,3,3,"mat-error",11),n(),o(7,"mat-form-field",12)(8,"mat-label",5),m(9,"rule-node-config.proxy-port"),n(),g(10,"input",25),C(11,yc,3,3,"mat-error",11)(12,vc,3,3,"mat-error",11),n()(),o(13,"mat-form-field",4)(14,"mat-label",5),m(15,"rule-node-config.proxy-user"),n(),g(16,"input",26),n(),o(17,"mat-form-field",4)(18,"mat-label",5),m(19,"rule-node-config.proxy-password"),n(),g(20,"input",27),n()()),t&2){let u=v(2);r(6),p("ngIf",u.sendEmailConfigForm.get("proxyHost").hasError("required")),r(5),p("ngIf",u.sendEmailConfigForm.get("proxyPort").hasError("required")),r(),p("ngIf",u.sendEmailConfigForm.get("proxyPort").hasError("min")||u.sendEmailConfigForm.get("proxyPort").hasError("max"))}}function bc(t,i){if(t&1&&(o(0,"section",3)(1,"mat-form-field",4)(2,"mat-label",5),m(3,"rule-node-config.smtp-protocol"),n(),o(4,"mat-select",6),C(5,lc,2,2,"mat-option",7),n()(),o(6,"div",8)(7,"mat-form-field",9)(8,"mat-label",5),m(9,"rule-node-config.smtp-host"),n(),g(10,"input",10),C(11,mc,3,3,"mat-error",11),n(),o(12,"mat-form-field",12)(13,"mat-label",5),m(14,"rule-node-config.smtp-port"),n(),g(15,"input",13),C(16,pc,3,3,"mat-error",11)(17,sc,3,3,"mat-error",11)(18,dc,3,3,"mat-error",11),n()(),o(19,"mat-form-field",4)(20,"mat-label",5),m(21,"rule-node-config.timeout-msec"),n(),g(22,"input",14),C(23,uc,3,3,"mat-error",11)(24,cc,3,3,"mat-error",11),n(),o(25,"mat-checkbox",15),m(26),s(27,"translate"),n(),C(28,gc,5,1,"mat-form-field",16),o(29,"tb-checkbox",17),m(30),s(31,"translate"),n(),C(32,hc,21,3,"div",11),o(33,"mat-form-field",18)(34,"mat-label",5),m(35,"rule-node-config.username"),n(),g(36,"input",19),s(37,"translate"),n(),o(38,"mat-form-field",18)(39,"mat-label",5),m(40,"rule-node-config.password"),n(),g(41,"input",20),s(42,"translate"),g(43,"tb-toggle-password",21),n()()),t&2){let u=v();r(5),p("ngForOf",u.smtpProtocols),r(6),p("ngIf",u.sendEmailConfigForm.get("smtpHost").hasError("required")),r(5),p("ngIf",u.sendEmailConfigForm.get("smtpPort").hasError("required")),r(),p("ngIf",u.sendEmailConfigForm.get("smtpPort").hasError("min")),r(),p("ngIf",u.sendEmailConfigForm.get("smtpPort").hasError("max")),r(5),p("ngIf",u.sendEmailConfigForm.get("timeout").hasError("required")),r(),p("ngIf",u.sendEmailConfigForm.get("timeout").hasError("min")),r(2),f(" ",d(27,13,"rule-node-config.enable-tls")," "),r(2),p("ngIf",u.sendEmailConfigForm.get("enableTls").value===!0),r(2),f(" ",d(31,15,"rule-node-config.enable-proxy")," "),r(2),p("ngIf",u.sendEmailConfigForm.get("enableProxy").value),r(4),h("placeholder",d(37,17,"rule-node-config.enter-username")),r(5),h("placeholder",d(42,19,"rule-node-config.enter-password"))}}var zr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.smtpProtocols=["smtp","smtps"],this.tlsVersions=["TLSv1","TLSv1.1","TLSv1.2","TLSv1.3"]}configForm(){return this.sendEmailConfigForm}onConfigurationSet(e){this.sendEmailConfigForm=this.fb.group({useSystemSmtpSettings:[e?e.useSystemSmtpSettings:!1,[]],smtpProtocol:[e?e.smtpProtocol:null,[]],smtpHost:[e?e.smtpHost:null,[]],smtpPort:[e?e.smtpPort:null,[]],timeout:[e?e.timeout:null,[]],enableTls:[e?e.enableTls:!1,[]],tlsVersion:[e?e.tlsVersion:null,[]],enableProxy:[e?e.enableProxy:!1,[]],proxyHost:[e?e.proxyHost:null,[]],proxyPort:[e?e.proxyPort:null,[]],proxyUser:[e?e.proxyUser:null,[]],proxyPassword:[e?e.proxyPassword:null,[]],username:[e?e.username:null,[]],password:[e?e.password:null,[]]})}validatorTriggers(){return["useSystemSmtpSettings","enableProxy"]}updateValidators(e){let a=this.sendEmailConfigForm.get("useSystemSmtpSettings").value,l=this.sendEmailConfigForm.get("enableProxy").value;a?(this.sendEmailConfigForm.get("smtpProtocol").setValidators([]),this.sendEmailConfigForm.get("smtpHost").setValidators([]),this.sendEmailConfigForm.get("smtpPort").setValidators([]),this.sendEmailConfigForm.get("timeout").setValidators([]),this.sendEmailConfigForm.get("proxyHost").setValidators([]),this.sendEmailConfigForm.get("proxyPort").setValidators([])):(this.sendEmailConfigForm.get("smtpProtocol").setValidators([c.required]),this.sendEmailConfigForm.get("smtpHost").setValidators([c.required]),this.sendEmailConfigForm.get("smtpPort").setValidators([c.required,c.min(1),c.max(65535)]),this.sendEmailConfigForm.get("timeout").setValidators([c.required,c.min(0)]),this.sendEmailConfigForm.get("proxyHost").setValidators(l?[c.required]:[]),this.sendEmailConfigForm.get("proxyPort").setValidators(l?[c.required,c.min(1),c.max(65535)]:[])),this.sendEmailConfigForm.get("smtpProtocol").updateValueAndValidity({emitEvent:e}),this.sendEmailConfigForm.get("smtpHost").updateValueAndValidity({emitEvent:e}),this.sendEmailConfigForm.get("smtpPort").updateValueAndValidity({emitEvent:e}),this.sendEmailConfigForm.get("timeout").updateValueAndValidity({emitEvent:e}),this.sendEmailConfigForm.get("proxyHost").updateValueAndValidity({emitEvent:e}),this.sendEmailConfigForm.get("proxyPort").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-send-email-config"]],features:[N],decls:5,vars:5,consts:[[1,"flex","flex-col",3,"formGroup"],["formControlName","useSystemSmtpSettings"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],[1,"mat-block"],["translate",""],["formControlName","smtpProtocol"],[3,"value",4,"ngFor","ngForOf"],[1,"gt-sm:flex","gt-sm:flex-row","gt-sm:gap-2"],[1,"mat-block","gt-sm:max-w-60%","gt-sm:flex-full"],["required","","matInput","","formControlName","smtpHost"],[4,"ngIf"],[1,"mat-block","gt-sm:max-w-40%","gt-sm:flex-full"],["required","","type","number","step","1","min","1","max","65535","matInput","","formControlName","smtpPort"],["required","","type","number","step","1","min","0","matInput","","formControlName","timeout"],["formControlName","enableTls"],["class","mat-block",4,"ngIf"],["formControlName","enableProxy"],["floatLabel","always",1,"mat-block"],["matInput","","formControlName","username",3,"placeholder"],["matInput","","type","password","formControlName","password",3,"placeholder"],["matSuffix",""],[3,"value"],["formControlName","tlsVersion"],["matInput","","required","","formControlName","proxyHost"],["matInput","","required","","formControlName","proxyPort","type","number","step","1","min","1","max","65535"],["matInput","","formControlName","proxyUser"],["matInput","","formControlName","proxyPassword"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-checkbox",1),m(2),s(3,"translate"),n(),C(4,bc,44,21,"section",2),n()),a&2&&(p("formGroup",l.sendEmailConfigForm),r(2),f(" ",d(3,3,"rule-node-config.use-system-smtp-settings")," "),r(2),p("ngIf",l.sendEmailConfigForm.get("useSystemSmtpSettings").value===!1))},dependencies:[z,B,Ro,je,R,k,O,Q,ae,te,X,L,ge,F,_,D,ve,it,S,M,V,Xt,E],encapsulation:2});let t=i;return t})();b();function xc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.topic-required")," "))}function Tc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.hostname-required")," "))}function _c(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.device-id-required")," "))}function Sc(t,i){if(t&1&&(o(0,"mat-option",17),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.azureIotHubCredentialsTypeTranslationsMap.get(u))," ")}}function Fc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.credentials-type-required")," "))}function Ic(t,i){}function Ec(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.sas-key-required")," "))}function Mc(t,i){if(t&1){let u=pe();o(0,"mat-form-field",5)(1,"mat-label",2),m(2,"rule-node-config.sas-key"),n(),g(3,"input",18)(4,"tb-toggle-password",19),C(5,Ec,3,3,"mat-error",4),n(),o(6,"tb-file-input",20),s(7,"translate"),s(8,"translate"),Y("fileNameChanged",function(a){ne(u);let l=v();return re(l.azureIotHubConfigForm.get("credentials.caCertFileName").setValue(a))}),n()}if(t&2){let u=v();r(5),p("ngIf",u.azureIotHubConfigForm.get("credentials.sasKey").hasError("required")),r(),h("label",d(7,4,"rule-node-config.azure-ca-cert")),h("dropLabel",d(8,6,"rule-node-config.drop-file")),p("existingFileName",u.azureIotHubConfigForm.get("credentials.caCertFileName").value)}}function Nc(t,i){if(t&1){let u=pe();o(0,"tb-file-input",20),s(1,"translate"),s(2,"translate"),Y("fileNameChanged",function(a){ne(u);let l=v();return re(l.azureIotHubConfigForm.get("credentials.caCertFileName").setValue(a))}),n(),o(3,"tb-file-input",21),s(4,"translate"),s(5,"translate"),Y("fileNameChanged",function(a){ne(u);let l=v();return re(l.azureIotHubConfigForm.get("credentials.certFileName").setValue(a))}),n(),o(6,"tb-file-input",22),s(7,"translate"),s(8,"translate"),Y("fileNameChanged",function(a){ne(u);let l=v();return re(l.azureIotHubConfigForm.get("credentials.privateKeyFileName").setValue(a))}),n(),o(9,"mat-form-field",5)(10,"mat-label",2),m(11,"rule-node-config.private-key-password"),n(),g(12,"input",23)(13,"tb-toggle-password",19),n()}if(t&2){let u=v();h("label",d(1,9,"rule-node-config.azure-ca-cert")),h("dropLabel",d(2,11,"rule-node-config.drop-file")),p("existingFileName",u.azureIotHubConfigForm.get("credentials.caCertFileName").value),r(3),h("label",d(4,13,"rule-node-config.cert")),h("dropLabel",d(5,15,"rule-node-config.drop-file")),p("existingFileName",u.azureIotHubConfigForm.get("credentials.certFileName").value),r(3),h("label",d(7,17,"rule-node-config.private-key")),h("dropLabel",d(8,19,"rule-node-config.drop-file")),p("existingFileName",u.azureIotHubConfigForm.get("credentials.privateKeyFileName").value)}}var Qr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.allAzureIotHubCredentialsTypes=xa,this.azureIotHubCredentialsTypeTranslationsMap=Ta}configForm(){return this.azureIotHubConfigForm}onConfigurationSet(e){this.azureIotHubConfigForm=this.fb.group({topicPattern:[e?e.topicPattern:null,[c.required]],host:[e?e.host:null,[c.required]],port:[e?e.port:null,[c.required,c.min(1),c.max(65535)]],connectTimeoutSec:[e?e.connectTimeoutSec:null,[c.required,c.min(1),c.max(200)]],clientId:[e?e.clientId:null,[c.required]],cleanSession:[e?e.cleanSession:!1,[]],ssl:[e?e.ssl:!1,[]],credentials:this.fb.group({type:[e&&e.credentials?e.credentials.type:null,[c.required]],sasKey:[e&&e.credentials?e.credentials.sasKey:null,[]],caCert:[e&&e.credentials?e.credentials.caCert:null,[]],caCertFileName:[e&&e.credentials?e.credentials.caCertFileName:null,[]],privateKey:[e&&e.credentials?e.credentials.privateKey:null,[]],privateKeyFileName:[e&&e.credentials?e.credentials.privateKeyFileName:null,[]],cert:[e&&e.credentials?e.credentials.cert:null,[]],certFileName:[e&&e.credentials?e.credentials.certFileName:null,[]],password:[e&&e.credentials?e.credentials.password:null,[]]})})}prepareOutputConfig(e){let a=e.credentials.type;return a==="sas"&&(e.credentials={type:a,sasKey:e.credentials.sasKey,caCert:e.credentials.caCert,caCertFileName:e.credentials.caCertFileName}),e}validatorTriggers(){return["credentials.type"]}updateValidators(e){let a=this.azureIotHubConfigForm.get("credentials"),l=a.get("type").value;switch(e&&a.reset({type:l},{emitEvent:!1}),a.get("sasKey").setValidators([]),a.get("privateKey").setValidators([]),a.get("privateKeyFileName").setValidators([]),a.get("cert").setValidators([]),a.get("certFileName").setValidators([]),l){case"sas":a.get("sasKey").setValidators([c.required]);break;case"cert.PEM":a.get("privateKey").setValidators([c.required]),a.get("privateKeyFileName").setValidators([c.required]),a.get("cert").setValidators([c.required]),a.get("certFileName").setValidators([c.required]);break}a.get("sasKey").updateValueAndValidity({emitEvent:e}),a.get("privateKey").updateValueAndValidity({emitEvent:e}),a.get("privateKeyFileName").updateValueAndValidity({emitEvent:e}),a.get("cert").updateValueAndValidity({emitEvent:e}),a.get("certFileName").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-azure-iot-hub-config"]],features:[N],decls:37,vars:10,consts:[[1,"flex","flex-col",3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","topicPattern"],[4,"ngIf"],[1,"mat-block"],["required","","matInput","","formControlName","host"],["required","","matInput","","formControlName","clientId","autocomplete","new-clientId"],[1,"tb-mqtt-credentials-panel-group"],["translate","",1,"tb-required"],["formGroupName","credentials",1,"flex","flex-col"],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","flex-col",3,"ngSwitch"],["ngSwitchCase","anonymous"],["ngSwitchCase","sas"],["ngSwitchCase","cert.PEM"],[3,"value"],["type","password","required","","matInput","","formControlName","sasKey","autocomplete","new-password"],["matSuffix",""],["formControlName","caCert","inputId","caCertSelect","noFileText","rule-node-config.no-file",3,"fileNameChanged","existingFileName","label","dropLabel"],["formControlName","cert","inputId","CertSelect","required","","requiredAsError","","noFileText","rule-node-config.no-file",3,"fileNameChanged","existingFileName","label","dropLabel"],["formControlName","privateKey","inputId","privateKeySelect","required","","requiredAsError","","noFileText","rule-node-config.no-file",2,"padding-bottom","8px",3,"fileNameChanged","existingFileName","label","dropLabel"],["type","password","matInput","","formControlName","password","autocomplete","new-password"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.topic"),n(),g(4,"input",3),C(5,xc,3,3,"mat-error",4),o(6,"mat-hint",2),m(7,"rule-node-config.general-pattern-hint"),n()(),o(8,"mat-form-field",5)(9,"mat-label",2),m(10,"rule-node-config.hostname"),n(),g(11,"input",6),C(12,Tc,3,3,"mat-error",4),n(),o(13,"mat-form-field",5)(14,"mat-label",2),m(15,"rule-node-config.device-id"),n(),g(16,"input",7),C(17,_c,3,3,"mat-error",4),n(),o(18,"mat-accordion")(19,"mat-expansion-panel",8)(20,"mat-expansion-panel-header")(21,"mat-panel-title",9),m(22,"rule-node-config.credentials"),n(),o(23,"mat-panel-description"),m(24),s(25,"translate"),n()(),o(26,"section",10)(27,"mat-form-field",5)(28,"mat-label",2),m(29,"rule-node-config.credentials-type"),n(),o(30,"mat-select",11),C(31,Sc,3,4,"mat-option",12),n(),C(32,Fc,3,3,"mat-error",4),n(),o(33,"section",13),C(34,Ic,0,0,"ng-template",14)(35,Mc,9,8,"ng-template",15)(36,Nc,14,21,"ng-template",16),n()()()()()),a&2&&(p("formGroup",l.azureIotHubConfigForm),r(5),p("ngIf",l.azureIotHubConfigForm.get("topicPattern").hasError("required")),r(7),p("ngIf",l.azureIotHubConfigForm.get("host").hasError("required")),r(5),p("ngIf",l.azureIotHubConfigForm.get("clientId").hasError("required")),r(7),f(" ",d(25,8,l.azureIotHubCredentialsTypeTranslationsMap.get(l.azureIotHubConfigForm.get("credentials.type").value))," "),r(7),p("ngForOf",l.allAzureIotHubCredentialsTypes),r(),p("ngIf",l.azureIotHubConfigForm.get("credentials.type").hasError("required")),r(),p("ngSwitch",l.azureIotHubConfigForm.get("credentials.type").value))},dependencies:[z,B,en,tn,R,k,O,de,Q,ae,te,X,Do,Ze,et,tt,an,L,F,_,D,S,M,Qt,Si,V,Xt,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-mqtt-credentials-panel-group[_ngcontent-%COMP%]{margin:0 6px}']});let t=i;return t})();b();function Ac(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.numbers-to-template-required")," "))}function Dc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.sms-message-template-required")," "))}function Vc(t,i){t&1&&g(0,"tb-sms-provider-configuration",9)}var Jr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.sendSmsConfigForm}onConfigurationSet(e){this.sendSmsConfigForm=this.fb.group({numbersToTemplate:[e?e.numbersToTemplate:null,[c.required]],smsMessageTemplate:[e?e.smsMessageTemplate:null,[c.required]],useSystemSmsSettings:[e?e.useSystemSmsSettings:!1,[]],smsProviderConfiguration:[e?e.smsProviderConfiguration:null,[]]})}validatorTriggers(){return["useSystemSmsSettings"]}updateValidators(e){this.sendSmsConfigForm.get("useSystemSmsSettings").value?this.sendSmsConfigForm.get("smsProviderConfiguration").setValidators([]):this.sendSmsConfigForm.get("smsProviderConfiguration").setValidators([c.required]),this.sendSmsConfigForm.get("smsProviderConfiguration").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-send-sms-config"]],features:[N],decls:20,vars:13,consts:[[1,"flex","flex-col",3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["translate",""],["required","","matInput","","formControlName","numbersToTemplate"],[4,"ngIf"],[3,"innerHTML"],["required","","matInput","","formControlName","smsMessageTemplate","rows","6"],["formControlName","useSystemSmsSettings"],["formControlName","smsProviderConfiguration","required","",4,"ngIf"],["formControlName","smsProviderConfiguration","required",""]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.numbers-to-template"),n(),g(4,"input",3),C(5,Ac,3,3,"mat-error",4),g(6,"mat-hint",5),s(7,"translate"),s(8,"safe"),n(),o(9,"mat-form-field",1)(10,"mat-label",2),m(11,"rule-node-config.sms-message-template"),n(),g(12,"textarea",6),C(13,Dc,3,3,"mat-error",4),o(14,"mat-hint",2),m(15,"rule-node-config.general-pattern-hint"),n()(),o(16,"mat-checkbox",7),m(17),s(18,"translate"),n(),C(19,Vc,1,0,"tb-sms-provider-configuration",8),n()),a&2&&(p("formGroup",l.sendSmsConfigForm),r(5),p("ngIf",l.sendSmsConfigForm.get("numbersToTemplate").hasError("required")),r(),p("innerHTML",le(8,8,d(7,6,"rule-node-config.numbers-to-template-hint"),"html"),we),r(7),p("ngIf",l.sendSmsConfigForm.get("smsMessageTemplate").hasError("required")),r(4),f(" ",d(18,11,"rule-node-config.use-system-sms-settings")," "),r(2),p("ngIf",l.sendSmsConfigForm.get("useSystemSmsSettings").value===!1))},dependencies:[B,je,R,k,O,de,Q,L,F,_,D,S,M,V,ea,lt,E],encapsulation:2});let t=i;return t})();b();function qc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.message-template-required")," "))}function kc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.slack-api-token-required")," "))}function Bc(t,i){if(t&1&&(o(0,"mat-form-field",11)(1,"mat-label",2),m(2,"rule-node-config.slack-api-token"),n(),g(3,"input",12),C(4,kc,3,3,"mat-error",4),n()),t&2){let u=v();r(4),p("ngIf",u.slackConfigForm.get("botToken").hasError("required"))}}function Oc(t,i){if(t&1&&(o(0,"mat-radio-button",13),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.slackChanelTypesTranslateMap.get(u))," ")}}var $r=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.slackChanelTypes=Object.keys($o),this.slackChanelTypesTranslateMap=Yo}configForm(){return this.slackConfigForm}onConfigurationSet(e){this.slackConfigForm=this.fb.group({botToken:[e?e.botToken:null],useSystemSettings:[e?e.useSystemSettings:!1],messageTemplate:[e?e.messageTemplate:null,[c.required]],conversationType:[e?e.conversationType:null,[c.required]],conversation:[e?e.conversation:null,[c.required]]})}validatorTriggers(){return["useSystemSettings"]}updateValidators(e){this.slackConfigForm.get("useSystemSettings").value?this.slackConfigForm.get("botToken").clearValidators():this.slackConfigForm.get("botToken").setValidators([c.required]),this.slackConfigForm.get("botToken").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-slack-config"]],features:[N],decls:18,vars:12,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"mat-block","flex-1"],["translate",""],["required","","matInput","","formControlName","messageTemplate"],[4,"ngIf"],["formControlName","useSystemSettings"],["class","mat-block",4,"ngIf"],[1,"tb-title"],["formControlName","conversationType"],[3,"value",4,"ngFor","ngForOf"],["formControlName","conversation","required","",3,"token","slackChanelType"],[1,"mat-block"],["required","","matInput","","formControlName","botToken"],[3,"value"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.message-template"),n(),g(4,"input",3),C(5,qc,3,3,"mat-error",4),o(6,"mat-hint",2),m(7,"rule-node-config.general-pattern-hint"),n()(),o(8,"mat-checkbox",5),m(9),s(10,"translate"),n(),C(11,Bc,5,1,"mat-form-field",6),o(12,"label",7),m(13),s(14,"translate"),n(),o(15,"mat-radio-group",8),C(16,Oc,3,4,"mat-radio-button",9),n(),g(17,"tb-slack-conversation-autocomplete",10),n()),a&2&&(p("formGroup",l.slackConfigForm),r(5),p("ngIf",l.slackConfigForm.get("messageTemplate").hasError("required")),r(4),f(" ",d(10,8,"rule-node-config.use-system-slack-settings")," "),r(2),p("ngIf",!l.slackConfigForm.get("useSystemSettings").value),r(2),q(d(14,10,"notification.slack-chanel-type")),r(3),p("ngForOf",l.slackChanelTypes),r(),p("token",l.slackConfigForm.get("useSystemSettings").value?"":l.slackConfigForm.get("botToken").value)("slackChanelType",l.slackConfigForm.get("conversationType").value))},dependencies:[z,B,je,R,k,O,de,Q,ko,Bo,L,F,_,D,S,M,V,Zo,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .tb-title[_ngcontent-%COMP%]{display:block;padding-bottom:6px}[_nghost-%COMP%]     .mat-mdc-radio-group{display:flex;flex-direction:row;margin-bottom:22px;gap:12px}[_nghost-%COMP%]     .mat-mdc-radio-group .mat-mdc-radio-button{flex:1 1 100%;padding:4px;border:1px solid rgba(0,0,0,.12);border-radius:6px}@media screen and (max-width: 599px){[_nghost-%COMP%]     .mat-mdc-radio-group{flex-direction:column}}']});let t=i;return t})();b();function Lc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.function-name-required")," "))}function Rc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.aws-access-key-id-required")," "))}function Pc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.aws-secret-access-key-required")," "))}function wc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.aws-region-required")," "))}function Gc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.connection-timeout-required")," "))}function jc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.connection-timeout-min")," "))}function Uc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.request-timeout-required")," "))}function Kc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.request-timeout-min")," "))}var Yr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.lambdaConfigForm}onConfigurationSet(e){this.lambdaConfigForm=this.fb.group({functionName:[e?e.functionName:null,[c.required]],qualifier:[e?e.qualifier:null,[]],accessKey:[e?e.accessKey:null,[c.required]],secretKey:[e?e.secretKey:null,[c.required]],region:[e?e.region:null,[c.required]],connectionTimeout:[e?e.connectionTimeout:null,[c.required,c.min(0)]],requestTimeout:[e?e.requestTimeout:null,[c.required,c.min(0)]],tellFailureIfFuncThrowsExc:[e?e.tellFailureIfFuncThrowsExc:!1,[]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-external-node-lambda-config"]],features:[N],decls:71,vars:28,consts:[[1,"tb-form-panel","no-padding","no-border",3,"formGroup"],[1,"tb-form-panel","stroked"],[1,"tb-form-row","no-padding","no-border"],["translate","",1,"tb-form-panel-title","tb-required"],["popupHelpLink","rulenode/node-templatization-doc",3,"hintText"],[1,"tb-standard-fields"],[1,"mat-block"],["required","","matInput","","formControlName","functionName"],[4,"ngIf"],["matInput","","formControlName","qualifier"],["translate",""],["expanded","",1,"tb-settings"],["required","","matInput","","formControlName","accessKey"],["required","","matInput","","formControlName","secretKey"],["required","","matInput","","formControlName","region"],[1,"tb-form-panel","stroked","no-padding"],[1,"tb-settings"],[2,"padding","16px"],[1,"tb-form-panel","no-border","no-padding","no-gap",2,"margin-top","0"],[1,"tb-form-row","no-border","same-padding","tb-standard-fields"],[1,"flex"],["type","number","required","","min","0","matInput","","formControlName","connectionTimeout"],["matSuffix","","aria-hidden","false","aria-label","help-icon","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"],["type","number","required","","min","0","matInput","","formControlName","requestTimeout"],[1,"tb-form-row","no-border",2,"margin-bottom","16px",3,"tb-hint-tooltip-icon"],["formControlName","tellFailureIfFuncThrowsExc",1,"mat-slide"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3),m(4,"rule-node-config.function-configuration"),n()(),g(5,"tb-example-hint",4),o(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),m(9),s(10,"translate"),n(),g(11,"input",7),C(12,Lc,3,3,"mat-error",8),n(),o(13,"mat-form-field",6)(14,"mat-label"),m(15),s(16,"translate"),n(),g(17,"input",9),o(18,"mat-hint",10),m(19,"rule-node-config.qualifier-hint"),n()()()(),o(20,"div",1)(21,"mat-expansion-panel",11)(22,"mat-expansion-panel-header")(23,"mat-panel-title",3),m(24,"rule-node-config.aws-credentials"),n()(),o(25,"div",5)(26,"mat-form-field",6)(27,"mat-label",10),m(28,"rule-node-config.aws-access-key-id"),n(),g(29,"input",12),C(30,Rc,3,3,"mat-error",8),n(),o(31,"mat-form-field",6)(32,"mat-label",10),m(33,"rule-node-config.aws-secret-access-key"),n(),g(34,"input",13),C(35,Pc,3,3,"mat-error",8),n(),o(36,"mat-form-field",6)(37,"mat-label",10),m(38,"rule-node-config.aws-region"),n(),g(39,"input",14),C(40,wc,3,3,"mat-error",8),n()()()(),o(41,"div",15)(42,"mat-expansion-panel",16)(43,"mat-expansion-panel-header",17)(44,"mat-panel-title",10),m(45,"rule-node-config.advanced-settings"),n()(),o(46,"div",18)(47,"div",19)(48,"mat-form-field",20)(49,"mat-label",10),m(50,"rule-node-config.connection-timeout"),n(),g(51,"input",21),C(52,Gc,3,3,"mat-error",8)(53,jc,3,3,"mat-error",8),o(54,"mat-icon",22),s(55,"translate"),m(56,"help"),n()(),o(57,"mat-form-field",20)(58,"mat-label",10),m(59,"rule-node-config.request-timeout"),n(),g(60,"input",23),C(61,Uc,3,3,"mat-error",8)(62,Kc,3,3,"mat-error",8),o(63,"mat-icon",22),s(64,"translate"),m(65,"help"),n()()(),o(66,"div",24),s(67,"translate"),o(68,"mat-slide-toggle",25),m(69),s(70,"translate"),n()()()()()()),a&2&&(p("formGroup",l.lambdaConfigForm),r(5),p("hintText","rule-node-config.template-rules-hint"),r(4),q(d(10,16,"rule-node-config.function-name")),r(3),p("ngIf",l.lambdaConfigForm.get("functionName").hasError("required")),r(3),q(d(16,18,"rule-node-config.qualifier")),r(15),p("ngIf",l.lambdaConfigForm.get("accessKey").hasError("required")),r(5),p("ngIf",l.lambdaConfigForm.get("secretKey").hasError("required")),r(5),p("ngIf",l.lambdaConfigForm.get("region").hasError("required")),r(12),p("ngIf",l.lambdaConfigForm.get("connectionTimeout").hasError("required")),r(),p("ngIf",l.lambdaConfigForm.get("connectionTimeout").hasError("min")),r(),h("matTooltip",d(55,20,"rule-node-config.connection-timeout-hint")),r(7),p("ngIf",l.lambdaConfigForm.get("requestTimeout").hasError("required")),r(),p("ngIf",l.lambdaConfigForm.get("requestTimeout").hasError("min")),r(),h("matTooltip",d(64,22,"rule-node-config.request-timeout-hint")),r(3),h("tb-hint-tooltip-icon",d(67,24,"rule-node-config.tell-failure-aws-lambda-hint")),r(3),f(" ",d(70,26,"rule-node-config.tell-failure-aws-lambda")," "))},dependencies:[B,Z,R,k,O,de,Q,ae,ee,ue,Ze,et,tt,L,ge,F,_,D,ve,S,M,V,Ce,he,E],encapsulation:2});let t=i;return t})();var Vn=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=Je({type:i}),i.\u0275inj=Qe({imports:[ke,Be,Et,ut]});let t=i;return t})();(function(){Ye(Vn,{declarations:[Rr,Pr,Yr,wr,Gr,jr,Ur,Kr,Hr,zr,Qr,Jr,$r],imports:[ke,Be,Et,ut],exports:[Rr,Pr,Yr,wr,Gr,jr,Ur,Kr,Hr,zr,Qr,Jr,$r]})})();b();b();function Hc(t,i){if(t&1&&(o(0,"span"),m(1),s(2,"translate"),n()),t&2){let u=v();r(),f(" ",d(2,1,u.originatorSourceTranslationMap.get(u.changeOriginatorConfigForm.get("originatorSource").value))," ")}}function zc(t,i){if(t&1&&(o(0,"mat-option",8)(1,"span",9),m(2),s(3,"translate"),n(),g(4,"br"),o(5,"small",10),m(6),s(7,"translate"),n()()),t&2){let u=i.$implicit,e=v();p("value",u),r(2),f(" ",d(3,3,e.originatorSourceTranslationMap.get(u))," "),r(4),f(" ",d(7,5,e.originatorSourceDescTranslationMap.get(u))," ")}}function Qc(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.entity-name-pattern-required")," "))}function Jc(t,i){if(t&1&&(o(0,"div",11),g(1,"tb-example-hint",12),o(2,"div",13),g(3,"tb-entity-type-select",14),o(4,"mat-form-field",15)(5,"mat-label",2),m(6,"rule-node-config.entity-name-pattern"),n(),g(7,"input",16),C(8,Qc,3,3,"mat-error",4),n()()()),t&2){let u=v();r(),p("hintText","rule-node-config.entity-name-pattern-hint"),r(2),p("allowedEntityTypes",u.allowedEntityTypes),r(5),p("ngIf",u.changeOriginatorConfigForm.get("entityNamePattern").hasError("required")||u.changeOriginatorConfigForm.get("entityNamePattern").hasError("pattern"))}}function $c(t,i){t&1&&g(0,"tb-relations-query-config",17)}var Wr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.originatorSource=dt,this.originatorSources=Object.keys(dt),this.originatorSourceTranslationMap=da,this.originatorSourceDescTranslationMap=ua,this.allowedEntityTypes=[W.DEVICE,W.ASSET,W.ENTITY_VIEW,W.USER,W.EDGE]}configForm(){return this.changeOriginatorConfigForm}onConfigurationSet(e){this.changeOriginatorConfigForm=this.fb.group({originatorSource:[e?e.originatorSource:null,[c.required]],entityType:[e?e.entityType:null,[]],entityNamePattern:[e?e.entityNamePattern:null,[]],relationsQuery:[e?e.relationsQuery:null,[]]})}validatorTriggers(){return["originatorSource"]}updateValidators(e){let a=this.changeOriginatorConfigForm.get("originatorSource").value;a===dt.RELATED?this.changeOriginatorConfigForm.get("relationsQuery").setValidators([c.required]):this.changeOriginatorConfigForm.get("relationsQuery").setValidators([]),a===dt.ENTITY?(this.changeOriginatorConfigForm.get("entityType").setValidators([c.required]),this.changeOriginatorConfigForm.get("entityNamePattern").setValidators([c.required,c.pattern(/.*\S.*/)])):(this.changeOriginatorConfigForm.get("entityType").patchValue(null,{emitEvent:e}),this.changeOriginatorConfigForm.get("entityNamePattern").patchValue(null,{emitEvent:e}),this.changeOriginatorConfigForm.get("entityType").setValidators([]),this.changeOriginatorConfigForm.get("entityNamePattern").setValidators([])),this.changeOriginatorConfigForm.get("relationsQuery").updateValueAndValidity({emitEvent:e}),this.changeOriginatorConfigForm.get("entityType").updateValueAndValidity({emitEvent:e}),this.changeOriginatorConfigForm.get("entityNamePattern").updateValueAndValidity({emitEvent:e})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-transformation-node-change-originator-config"]],features:[N],decls:10,vars:5,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],["subscriptSizing","dynamic","hideRequiredMarker","",1,"mat-block"],["translate",""],["formControlName","originatorSource","required",""],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["class","tb-form-panel stroked no-padding-bottom",4,"ngIf"],["required","","formControlName","relationsQuery",4,"ngIf"],[3,"value"],["matListItemTitle",""],["matListItemMeta","",2,"color","inherit"],[1,"tb-form-panel","stroked","no-padding-bottom"],["popupHelpLink","rulenode/change_originator_node_fields_templatization",3,"hintText"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields"],["showLabel","","required","","formControlName","entityType",1,"mat-mdc-form-field","flex",3,"allowedEntityTypes"],[1,"flex"],["required","","matInput","","formControlName","entityNamePattern"],["required","","formControlName","relationsQuery"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label",2),m(3,"rule-node-config.new-originator"),n(),o(4,"mat-select",3)(5,"mat-select-trigger"),C(6,Hc,3,3,"span",4),n(),C(7,zc,8,7,"mat-option",5),n()(),C(8,Jc,9,3,"div",6)(9,$c,1,0,"tb-relations-query-config",7),n()),a&2&&(p("formGroup",l.changeOriginatorConfigForm),r(6),p("ngIf",l.originatorSourceTranslationMap.get(l.changeOriginatorConfigForm.get("originatorSource").value)),r(),p("ngForOf",l.originatorSources),r(),p("ngIf",l.changeOriginatorConfigForm.get("originatorSource").value===l.originatorSource.ENTITY),r(),p("ngIf",l.changeOriginatorConfigForm.get("originatorSource").value===l.originatorSource.RELATED))},dependencies:[z,B,$t,R,k,O,Q,te,Jt,X,fn,gn,L,F,_,D,S,M,V,mi,he,E],encapsulation:2});let t=i;return t})();b();var Yc=["jsFuncComponent"],Wc=["tbelFuncComponent"],Ja=()=>["msg","metadata","msgType"];function Xc(t,i){t&1&&g(0,"tb-script-lang",7)}function Zc(t,i){if(t&1){let u=pe();o(0,"tb-js-func",8,0)(2,"button",9),s(3,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(4,"mat-icon",10),m(5,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(4,Ja)),r(2),h("matTooltip",d(3,2,u.testScriptLabel))}}function ef(t,i){if(t&1){let u=pe();o(0,"tb-js-func",11,1)(2,"button",9),s(3,"translate"),Y("click",function(){ne(u);let a=v();return re(a.testScript())}),o(4,"mat-icon",10),m(5,"bug_report"),n()()()}if(t&2){let u=v();p("functionArgs",xe(6,Ja))("disableUndefinedCheck",!0)("scriptLanguage",u.scriptLanguage.TBEL),r(2),h("matTooltip",d(3,4,u.testScriptLabel))}}var Xr=(()=>{let i=class i extends A{constructor(e,a,l){super(),this.fb=e,this.nodeScriptTestService=a,this.translate=l,this.tbelEnabled=Ct(this.store).tbelEnabled,this.scriptLanguage=J,this.changeScript=new gt,this.hasScript=!0,this.testScriptLabel="rule-node-config.test-transformer-function"}configForm(){return this.scriptConfigForm}onConfigurationSet(e){this.scriptConfigForm=this.fb.group({scriptLang:[e?e.scriptLang:J.JS,[c.required]],jsScript:[e?e.jsScript:null,[c.required]],tbelScript:[e?e.tbelScript:null,[]]})}validatorTriggers(){return["scriptLang"]}updateValidators(e){let a=this.scriptConfigForm.get("scriptLang").value;a===J.TBEL&&!this.tbelEnabled&&(a=J.JS,this.scriptConfigForm.get("scriptLang").patchValue(a,{emitEvent:!1}),setTimeout(()=>{this.scriptConfigForm.updateValueAndValidity({emitEvent:!0})})),this.scriptConfigForm.get("jsScript").setValidators(a===J.JS?[c.required]:[]),this.scriptConfigForm.get("jsScript").updateValueAndValidity({emitEvent:e}),this.scriptConfigForm.get("tbelScript").setValidators(a===J.TBEL?[c.required]:[]),this.scriptConfigForm.get("tbelScript").updateValueAndValidity({emitEvent:e})}prepareInputConfig(e){return e&&(e.scriptLang||(e.scriptLang=J.JS)),e}testScript(e){let a=this.scriptConfigForm.get("scriptLang").value,l=a===J.JS?"jsScript":"tbelScript",x=a===J.JS?"rulenode/transformation_node_script_fn":"rulenode/tbel/transformation_node_script_fn",$=this.scriptConfigForm.get(l).value;this.nodeScriptTestService.testNodeScript($,"update",this.translate.instant("rule-node-config.transformer"),"Transform",["msg","metadata","msgType"],this.ruleNodeId,x,a,e).subscribe(be=>{be&&(this.scriptConfigForm.get(l).setValue(be),this.changeScript.emit())})}onValidate(){this.scriptConfigForm.get("scriptLang").value===J.JS&&this.jsFuncComponent.validateOnSubmit()}};i.\u0275fac=function(a){return new(a||i)(y(G),y(ht),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-transformation-node-script-config"]],viewQuery:function(a,l){if(a&1&&(De(Yc,5),De(Wc,5)),a&2){let x;Ve(x=qe())&&(l.jsFuncComponent=x.first),Ve(x=qe())&&(l.tbelFuncComponent=x.first)}},features:[N],decls:8,vars:7,consts:[["jsFuncComponent",""],["tbelFuncComponent",""],[3,"formGroup"],["formControlName","scriptLang",4,"ngIf"],["formControlName","jsScript","functionName","Transform","helpId","rulenode/transformation_node_script_fn","noValidate","true",3,"functionArgs",4,"ngIf"],["formControlName","tbelScript","functionName","Transform","helpId","rulenode/tbel/transformation_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage",4,"ngIf"],["mat-button","","mat-raised-button","","color","primary",3,"click"],["formControlName","scriptLang"],["formControlName","jsScript","functionName","Transform","helpId","rulenode/transformation_node_script_fn","noValidate","true",3,"functionArgs"],["toolbarSuffixButton","","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"click","matTooltip"],["color","primary",1,"material-icons"],["formControlName","tbelScript","functionName","Transform","helpId","rulenode/tbel/transformation_node_script_fn","noValidate","true",3,"functionArgs","disableUndefinedCheck","scriptLanguage"]],template:function(a,l){a&1&&(o(0,"section",2),C(1,Xc,1,0,"tb-script-lang",3)(2,Zc,6,5,"tb-js-func",4)(3,ef,6,7,"tb-js-func",5),o(4,"div")(5,"button",6),Y("click",function(){return l.testScript()}),m(6),s(7,"translate"),n()()()),a&2&&(p("formGroup",l.scriptConfigForm),r(),p("ngIf",l.tbelEnabled),r(),p("ngIf",l.scriptConfigForm.get("scriptLang").value===l.scriptLanguage.JS),r(),p("ngIf",l.scriptConfigForm.get("scriptLang").value===l.scriptLanguage.TBEL),r(3),f(" ",d(7,5,l.testScriptLabel)," "))},dependencies:[B,vt,Ge,_e,Z,ee,F,_,S,M,It,E],encapsulation:2});let t=i;return t})();b();var tf=()=>({maxWidth:"820px"});function nf(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.from-template-required")," "))}function rf(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.to-template-required")," "))}function of(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.subject-template-required")," "))}function af(t,i){if(t&1&&(o(0,"span"),m(1),s(2,"translate"),n()),t&2){let u=v();r(),f(" ",d(2,1,u.getBodyTypeName())," ")}}function lf(t,i){if(t&1&&(o(0,"mat-option",24)(1,"span",25),m(2),s(3,"translate"),n(),g(4,"br"),o(5,"small",26),m(6),s(7,"translate"),n()()),t&2){let u=i.$implicit;p("value",u.value),r(2),f(" ",d(3,3,u.name)," "),r(4),f(" ",d(7,5,u.description)," ")}}function mf(t,i){t&1&&(o(0,"mat-form-field",18)(1,"mat-label",5),m(2,"rule-node-config.body-type-template"),n(),g(3,"input",27),o(4,"mat-hint",5),m(5,"rule-node-config.mail-body-types.after-template-evaluation-hint"),n()())}function pf(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.body-template-required")," "))}var Zr=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.mailBodyTypes=[{name:"rule-node-config.mail-body-types.plain-text",description:"rule-node-config.mail-body-types.plain-text-description",value:"false"},{name:"rule-node-config.mail-body-types.html",description:"rule-node-config.mail-body-types.html-text-description",value:"true"},{name:"rule-node-config.mail-body-types.use-body-type-template",description:"rule-node-config.mail-body-types.dynamic-text-description",value:"dynamic"}]}configForm(){return this.toEmailConfigForm}onConfigurationSet(e){this.toEmailConfigForm=this.fb.group({fromTemplate:[e?e.fromTemplate:null,[c.required]],toTemplate:[e?e.toTemplate:null,[c.required]],ccTemplate:[e?e.ccTemplate:null,[]],bccTemplate:[e?e.bccTemplate:null,[]],subjectTemplate:[e?e.subjectTemplate:null,[c.required]],mailBodyType:[e?e.mailBodyType:null],isHtmlTemplate:[e?e.isHtmlTemplate:null,[c.required]],bodyTemplate:[e?e.bodyTemplate:null,[c.required]]})}prepareInputConfig(e){return{fromTemplate:I(e?.fromTemplate)?e.fromTemplate:null,toTemplate:I(e?.toTemplate)?e.toTemplate:null,ccTemplate:I(e?.ccTemplate)?e.ccTemplate:null,bccTemplate:I(e?.bccTemplate)?e.bccTemplate:null,subjectTemplate:I(e?.subjectTemplate)?e.subjectTemplate:null,mailBodyType:I(e?.mailBodyType)?e.mailBodyType:null,isHtmlTemplate:I(e?.isHtmlTemplate)?e.isHtmlTemplate:null,bodyTemplate:I(e?.bodyTemplate)?e.bodyTemplate:null}}updateValidators(e){this.toEmailConfigForm.get("mailBodyType").value==="dynamic"?this.toEmailConfigForm.get("isHtmlTemplate").enable({emitEvent:!1}):this.toEmailConfigForm.get("isHtmlTemplate").disable({emitEvent:!1}),this.toEmailConfigForm.get("isHtmlTemplate").updateValueAndValidity({emitEvent:e})}validatorTriggers(){return["mailBodyType"]}getBodyTypeName(){return this.mailBodyTypes.find(e=>e.value===this.toEmailConfigForm.get("mailBodyType").value).name}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-transformation-node-to-email-config"]],features:[N],decls:59,vars:19,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title"],[1,"tb-form-row","no-border","no-padding","tb-standard-fields"],["subscriptSizing","dynamic",1,"flex"],["translate",""],["required","","matInput","","formControlName","fromTemplate"],["align","start"],["align","end"],[1,"input-bottom-double-hint"],["hintMode","","tb-help-popup-placement","right","trigger-style","letter-spacing:0.25px; font-size:12px;",1,"see-example",3,"tb-help-popup","tb-help-popup-style","trigger-text"],[4,"ngIf"],[1,"tb-form-panel","no-padding","no-border"],["popupHelpLink","rulenode/to_email_node_fields_templatization",3,"hintText"],[1,"flex"],["required","","matInput","","formControlName","toTemplate","cdkTextareaAutosize","","cdkAutosizeMinRows","1",1,"tb-enable-vertical-resize"],["matInput","","formControlName","ccTemplate","cdkTextareaAutosize","","cdkAutosizeMinRows","1",1,"tb-enable-vertical-resize"],["matInput","","formControlName","bccTemplate","cdkTextareaAutosize","","cdkAutosizeMinRows","1",1,"tb-enable-vertical-resize"],[1,"mat-block"],["required","","matInput","","formControlName","subjectTemplate","cdkTextareaAutosize","","cdkAutosizeMinRows","1",1,"tb-enable-vertical-resize"],["formControlName","mailBodyType"],[3,"value",4,"ngFor","ngForOf"],["class","mat-block",4,"ngIf"],["required","","matInput","","formControlName","bodyTemplate","cdkTextareaAutosize","","cdkAutosizeMinRows","2",1,"tb-enable-vertical-resize"],[3,"value"],["matListItemTitle",""],["matListItemMeta","",2,"color","inherit"],["required","","matInput","","formControlName","isHtmlTemplate"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2),m(3,"rule-node-config.email-sender"),n(),o(4,"div",3)(5,"mat-form-field",4)(6,"mat-label",5),m(7,"rule-node-config.from-template"),n(),g(8,"input",6),o(9,"mat-hint",7),m(10),s(11,"translate"),n(),o(12,"mat-hint",8)(13,"div",9),g(14,"div",10),s(15,"translate"),n()(),C(16,nf,3,3,"mat-error",11),n()()(),o(17,"div",1)(18,"div",12)(19,"div",2),m(20,"rule-node-config.recipients"),n(),g(21,"tb-example-hint",13),n(),o(22,"div",3)(23,"mat-form-field",14)(24,"mat-label",5),m(25,"rule-node-config.to-template"),n(),g(26,"textarea",15),C(27,rf,3,3,"mat-error",11),n(),o(28,"mat-form-field",14)(29,"mat-label",5),m(30,"rule-node-config.cc-template"),n(),g(31,"textarea",16),n(),o(32,"mat-form-field",14)(33,"mat-label",5),m(34,"rule-node-config.bcc-template"),n(),g(35,"textarea",17),n()()(),o(36,"div",1)(37,"div",2),m(38,"rule-node-config.message-subject-and-content"),n(),g(39,"tb-example-hint",13),o(40,"section")(41,"mat-form-field",18)(42,"mat-label",5),m(43,"rule-node-config.subject-template"),n(),g(44,"textarea",19),C(45,of,3,3,"mat-error",11),n(),o(46,"mat-form-field",18)(47,"mat-label",5),m(48,"rule-node-config.mail-body-type"),n(),o(49,"mat-select",20)(50,"mat-select-trigger"),C(51,af,3,3,"span",11),n(),C(52,lf,8,7,"mat-option",21),n()(),C(53,mf,6,0,"mat-form-field",22),o(54,"mat-form-field",18)(55,"mat-label",5),m(56,"rule-node-config.body-template"),n(),g(57,"textarea",23),C(58,pf,3,3,"mat-error",11),n()()()()),a&2&&(p("formGroup",l.toEmailConfigForm),r(10),f(" ",d(11,14,"rule-node-config.email-from-template-hint")," "),r(4),h("tb-help-popup","rulenode/to_email_node_fields_templatization"),h("trigger-text",d(15,16,"rule-node-config.key-val.see-examples")),p("tb-help-popup-style",xe(18,tf)),r(2),p("ngIf",l.toEmailConfigForm.get("fromTemplate").hasError("required")),r(5),p("hintText","rule-node-config.recipients-block-main-hint"),r(6),p("ngIf",l.toEmailConfigForm.get("toTemplate").hasError("required")),r(12),p("hintText","rule-node-config.kv-map-pattern-hint"),r(6),p("ngIf",l.toEmailConfigForm.get("subjectTemplate").hasError("required")),r(6),p("ngIf",l.toEmailConfigForm.get("mailBodyType").value),r(),p("ngForOf",l.mailBodyTypes),r(),p("ngIf",l.toEmailConfigForm.get("mailBodyType").value==="dynamic"),r(5),p("ngIf",l.toEmailConfigForm.get("bodyTemplate").hasError("required")))},dependencies:[z,B,_i,R,k,O,de,Q,qo,te,Jt,X,fn,gn,L,F,_,D,S,M,V,he,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .input-bottom-double-hint[_ngcontent-%COMP%]{display:inline-flex}[_nghost-%COMP%]   .input-bottom-double-hint[_ngcontent-%COMP%]   .see-example[_ngcontent-%COMP%]{flex-shrink:0;padding-right:16px}[_nghost-%COMP%]   textarea.tb-enable-vertical-resize[_ngcontent-%COMP%]{resize:vertical}']});let t=i;return t})();b();var eo=(()=>{let i=class i extends A{constructor(e,a){super(),this.fb=e,this.translate=a,this.copyFrom=[],this.translation=Fa;for(let l of this.translation.keys())this.copyFrom.push({value:l,name:this.translate.instant(this.translation.get(l))})}onConfigurationSet(e){this.copyKeysConfigForm=this.fb.group({copyFrom:[e.copyFrom,[c.required]],keys:[e?e.keys:null,[c.required]]})}configForm(){return this.copyKeysConfigForm}prepareInputConfig(e){let a;return I(e?.fromMetadata)?a=e.copyFrom?ye.METADATA:ye.DATA:I(e?.copyFrom)?a=e.copyFrom:a=ye.DATA,{keys:I(e?.keys)?e.keys:null,copyFrom:a}}};i.\u0275fac=function(a){return new(a||i)(y(G),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-transformation-node-copy-keys-config"]],features:[N],decls:10,vars:17,consts:[[1,"tb-form-panel","no-padding","no-border",3,"formGroup"],["formControlName","copyFrom",3,"labelText","translation"],["required","","formControlName","keys",1,"mat-block",3,"label","placeholder","requiredText"],["matSuffix","","aria-hidden","false","aria-label","help-icon","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"]],template:function(a,l){a&1&&(o(0,"section",0),g(1,"tb-msg-metadata-chip",1),s(2,"translate"),o(3,"tb-string-items-list",2),s(4,"translate"),s(5,"translate"),s(6,"translate"),o(7,"mat-icon",3),s(8,"translate"),m(9," help "),n()()()),a&2&&(p("formGroup",l.copyKeysConfigForm),r(),p("labelText",d(2,7,"rule-node-config.key-val.copy-key-values-from"))("translation",l.translation),r(2),p("label",d(4,9,"rule-node-config.keys"))("placeholder",d(5,11,"rule-node-config.add-key"))("requiredText",d(6,13,"rule-node-config.key-val.at-least-one-key-error")),r(4),h("matTooltip",d(8,15,"rule-node-config.use-regular-expression-hint")))},dependencies:[Ft,Z,ae,ee,F,_,D,S,M,Pe,E],encapsulation:2});let t=i;return t})();b();function sf(t,i){if(t&1&&(o(0,"tb-toggle-option",7),m(1),n()),t&2){let u=i.$implicit;p("value",u.value),r(),f(" ",u.name," ")}}var to=(()=>{let i=class i extends A{constructor(e,a){super(),this.fb=e,this.translate=a,this.renameIn=[],this.translation=Ia;for(let l of this.translation.keys())this.renameIn.push({value:l,name:this.translate.instant(this.translation.get(l))})}configForm(){return this.renameKeysConfigForm}onConfigurationSet(e){this.renameKeysConfigForm=this.fb.group({renameIn:[e?e.renameIn:null,[c.required]],renameKeysMapping:[e?e.renameKeysMapping:null,[c.required]]})}prepareInputConfig(e){let a;return I(e?.fromMetadata)?a=e.fromMetadata?ye.METADATA:ye.DATA:I(e?.renameIn)?a=e?.renameIn:a=ye.DATA,{renameKeysMapping:I(e?.renameKeysMapping)?e.renameKeysMapping:null,renameIn:a}}};i.\u0275fac=function(a){return new(a||i)(y(G),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-transformation-node-rename-keys-config"]],features:[N],decls:15,vars:24,consts:[[1,"tb-form-panel","stroked",3,"formGroup"],["translate","",1,"tb-form-panel-title"],[1,"fx-centered"],[1,"fetch-to-data-toggle"],["formControlName","renameIn","appearance","fill",1,"fetch-to-data-toggle"],[3,"value",4,"ngFor","ngForOf"],["required","","formControlName","renameKeysMapping","uniqueKeyValuePairValidator","",3,"labelText","requiredText","keyText","keyRequiredText","valText","valRequiredText"],[3,"value"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1),m(2,"rule-node-config.rename-keys-in"),n(),o(3,"div",2)(4,"div",3)(5,"tb-toggle-select",4),C(6,sf,2,2,"tb-toggle-option",5),n()()(),g(7,"tb-kv-map-config",6),s(8,"translate"),s(9,"translate"),s(10,"translate"),s(11,"translate"),s(12,"translate"),s(13,"translate"),s(14,"translate"),n()),a&2&&(p("formGroup",l.renameKeysConfigForm),r(6),p("ngForOf",l.renameIn),r(),bo("labelText","",d(8,10,l.translation.get(l.renameKeysConfigForm.get("renameIn").value))," ",d(9,12,"rule-node-config.keys-mapping"),""),h("requiredText",d(10,14,"rule-node-config.attr-mapping-required")),h("keyText",d(11,16,"rule-node-config.current-key-name")),h("keyRequiredText",d(12,18,"rule-node-config.key-name-required")),h("valText",d(13,20,"rule-node-config.new-key-name")),h("valRequiredText",d(14,22,"rule-node-config.new-key-name-required")))},dependencies:[z,F,_,D,S,M,V,nt,rt,ot,E],styles:['@charset "UTF-8";[_nghost-%COMP%]   .fetch-to-data-toggle[_ngcontent-%COMP%]{max-width:420px;width:100%}[_nghost-%COMP%]   .fx-centered[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-around}']});let t=i;return t})();b();function df(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),q(d(2,1,"rule-node-config.json-path-expression-required")))}var io=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.jsonPathConfigForm}onConfigurationSet(e){this.jsonPathConfigForm=this.fb.group({jsonPath:[e?e.jsonPath:null,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-transformation-node-json-path-config"]],features:[N],decls:10,vars:8,consts:[[3,"formGroup"],["subscriptSizing","dynamic",1,"mat-block"],["matInput","","formControlName","jsonPath","required",""],[4,"ngIf"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label"),m(3),s(4,"translate"),n(),g(5,"input",2),o(6,"mat-hint"),m(7),s(8,"translate"),n(),C(9,df,3,3,"mat-error",3),n()()),a&2&&(p("formGroup",l.jsonPathConfigForm),r(3),q(d(4,4,"rule-node-config.json-path-expression")),r(4),q(d(8,6,"rule-node-config.json-path-expression-hint")),r(2),p("ngIf",l.jsonPathConfigForm.get("jsonPath").hasError("required")))},dependencies:[B,R,k,O,de,Q,L,F,_,D,S,M,E],encapsulation:2});let t=i;return t})();b();var no=(()=>{let i=class i extends A{constructor(e,a){super(),this.fb=e,this.translate=a,this.deleteFrom=[],this.translation=Sn;for(let l of this.translation.keys())this.deleteFrom.push({value:l,name:this.translate.instant(this.translation.get(l))})}onConfigurationSet(e){this.deleteKeysConfigForm=this.fb.group({deleteFrom:[e.deleteFrom,[c.required]],keys:[e?e.keys:null,[c.required]]})}prepareInputConfig(e){let a;return I(e?.fromMetadata)?a=e.fromMetadata?ye.METADATA:ye.DATA:I(e?.deleteFrom)?a=e?.deleteFrom:a=ye.DATA,{keys:I(e?.keys)?e.keys:null,deleteFrom:a}}configForm(){return this.deleteKeysConfigForm}};i.\u0275fac=function(a){return new(a||i)(y(G),y(me))},i.\u0275cmp=T({type:i,selectors:[["tb-transformation-node-delete-keys-config"]],features:[N],decls:10,vars:16,consts:[[1,"tb-form-panel","no-border","no-padding",3,"formGroup"],["formControlName","deleteFrom",3,"labelText"],["required","","formControlName","keys",1,"mat-block",3,"label","placeholder","requiredText"],["matSuffix","","aria-hidden","false","aria-label","help-icon","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"]],template:function(a,l){a&1&&(o(0,"section",0),g(1,"tb-msg-metadata-chip",1),s(2,"translate"),o(3,"tb-string-items-list",2),s(4,"translate"),s(5,"translate"),s(6,"translate"),o(7,"mat-icon",3),s(8,"translate"),m(9," help "),n()()()),a&2&&(p("formGroup",l.deleteKeysConfigForm),r(),p("labelText",d(2,6,"rule-node-config.key-val.delete-key-values-from")),r(2),p("label",d(4,8,"rule-node-config.keys"))("placeholder",d(5,10,"rule-node-config.add-key"))("requiredText",d(6,12,"rule-node-config.key-val.at-least-one-key-error")),r(4),h("matTooltip",d(8,14,"rule-node-config.use-regular-expression-delete-hint")))},dependencies:[Ft,Z,ae,ee,F,_,D,S,M,Pe,E],encapsulation:2});let t=i;return t})();b();function uf(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.interval-required")," "))}function cf(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.interval-min-error")," "))}function ff(t,i){if(t&1&&(o(0,"tb-toggle-option",18),m(1),s(2,"translate"),n()),t&2){let u=i.$implicit,e=v();p("value",u),r(),f(" ",d(2,2,e.deduplicationStrategiesTranslations.get(u))," ")}}function gf(t,i){t&1&&g(0,"tb-example-hint",19),t&2&&p("hintText","rule-node-config.strategy-all-hint")}function Cf(t,i){t&1&&g(0,"tb-example-hint",20),t&2&&p("hintText","rule-node-config.strategy-first-hint")}function yf(t,i){t&1&&g(0,"tb-example-hint",20),t&2&&p("hintText","rule-node-config.strategy-last-hint")}function vf(t,i){t&1&&(o(0,"div"),g(1,"tb-output-message-type-autocomplete",21),n())}function hf(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-pending-msgs-required")," "))}function bf(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-pending-msgs-max-error")," "))}function xf(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-pending-msgs-min-error")," "))}function Tf(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-retries-required")," "))}function _f(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-retries-max-error")," "))}function Sf(t,i){t&1&&(o(0,"mat-error"),m(1),s(2,"translate"),n()),t&2&&(r(),f(" ",d(2,1,"rule-node-config.max-retries-min-error")," "))}var ro=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.deduplicationStrategie=bt,this.deduplicationStrategies=Object.keys(this.deduplicationStrategie),this.deduplicationStrategiesTranslations=Pi}configForm(){return this.deduplicationConfigForm}onConfigurationSet(e){this.deduplicationConfigForm=this.fb.group({interval:[I(e?.interval)?e.interval:null,[c.required,c.min(1)]],strategy:[I(e?.strategy)?e.strategy:null,[c.required]],outMsgType:[I(e?.outMsgType)?e.outMsgType:null,[c.required]],maxPendingMsgs:[I(e?.maxPendingMsgs)?e.maxPendingMsgs:null,[c.required,c.min(1),c.max(1e3)]],maxRetries:[I(e?.maxRetries)?e.maxRetries:null,[c.required,c.min(0),c.max(100)]]})}prepareInputConfig(e){return e||(e={}),e.outMsgType||(e.outMsgType="POST_TELEMETRY_REQUEST"),super.prepareInputConfig(e)}updateValidators(e){this.deduplicationConfigForm.get("strategy").value===this.deduplicationStrategie.ALL?this.deduplicationConfigForm.get("outMsgType").enable({emitEvent:!1}):this.deduplicationConfigForm.get("outMsgType").disable({emitEvent:!1}),this.deduplicationConfigForm.get("outMsgType").updateValueAndValidity({emitEvent:e})}validatorTriggers(){return["strategy"]}};i.\u0275fac=function(a){return new(a||i)(y(G))},i.\u0275cmp=T({type:i,selectors:[["tb-transformation-node-deduplication-config"]],features:[N],decls:49,vars:32,consts:[[3,"formGroup"],[1,"mat-block"],["type","number","required","","matInput","","formControlName","interval"],[4,"ngIf"],["matSuffix","","aria-hidden","false","aria-label","help-icon","color","primary",1,"help-icon","margin-8","cursor-pointer",3,"matTooltip"],[1,"tb-form-panel","no-padding","no-border"],[1,"tb-form-panel","stroked"],["translate","",1,"tb-form-panel-title","tb-required"],["formControlName","strategy","appearance","fill",1,"fetch-to-data-toggle"],[3,"value",4,"ngFor","ngForOf"],[3,"hintText",4,"ngIf"],["textAlign","'center'",3,"hintText",4,"ngIf"],[1,"tb-settings"],["translate",""],[1,"tb-form-row","no-border","no-padding","tb-standard-fields"],[1,"flex"],["type","number","required","","matInput","","formControlName","maxPendingMsgs"],["type","number","required","","matInput","","formControlName","maxRetries"],[3,"value"],[3,"hintText"],["textAlign","'center'",3,"hintText"],["required","","formControlName","outMsgType"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"mat-form-field",1)(2,"mat-label"),m(3),s(4,"translate"),n(),g(5,"input",2),C(6,uf,3,3,"mat-error",3)(7,cf,3,3,"mat-error",3),o(8,"mat-icon",4),s(9,"translate"),m(10,"help"),n()(),o(11,"div",5)(12,"div",6)(13,"div",7),m(14,"rule-node-config.strategy"),n(),o(15,"tb-toggle-select",8),C(16,ff,3,4,"tb-toggle-option",9),n(),C(17,gf,1,1,"tb-example-hint",10)(18,Cf,1,1,"tb-example-hint",11)(19,yf,1,1,"tb-example-hint",11)(20,vf,2,0,"div",3),n(),o(21,"section",6)(22,"mat-expansion-panel",12)(23,"mat-expansion-panel-header")(24,"mat-panel-title",13),m(25,"rule-node-config.advanced-settings"),n()(),o(26,"div",14)(27,"mat-form-field",15)(28,"mat-label"),m(29),s(30,"translate"),n(),g(31,"input",16),C(32,hf,3,3,"mat-error",3)(33,bf,3,3,"mat-error",3)(34,xf,3,3,"mat-error",3),o(35,"mat-icon",4),s(36,"translate"),m(37,"help"),n()(),o(38,"mat-form-field",15)(39,"mat-label"),m(40),s(41,"translate"),n(),g(42,"input",17),C(43,Tf,3,3,"mat-error",3)(44,_f,3,3,"mat-error",3)(45,Sf,3,3,"mat-error",3),o(46,"mat-icon",4),s(47,"translate"),m(48,"help"),n()()()()()()()),a&2&&(p("formGroup",l.deduplicationConfigForm),r(3),q(d(4,20,"rule-node-config.interval")),r(3),p("ngIf",l.deduplicationConfigForm.get("interval").hasError("required")),r(),p("ngIf",l.deduplicationConfigForm.get("interval").hasError("min")),r(),h("matTooltip",d(9,22,"rule-node-config.interval-hint")),r(8),p("ngForOf",l.deduplicationStrategies),r(),p("ngIf",l.deduplicationConfigForm.get("strategy").value==="ALL"),r(),p("ngIf",l.deduplicationConfigForm.get("strategy").value==="FIRST"),r(),p("ngIf",l.deduplicationConfigForm.get("strategy").value==="LAST"),r(),p("ngIf",l.deduplicationConfigForm.get("strategy").value===l.deduplicationStrategie.ALL),r(9),q(d(30,24,"rule-node-config.max-pending-msgs")),r(3),p("ngIf",l.deduplicationConfigForm.get("maxPendingMsgs").hasError("required")),r(),p("ngIf",l.deduplicationConfigForm.get("maxPendingMsgs").hasError("max")),r(),p("ngIf",l.deduplicationConfigForm.get("maxPendingMsgs").hasError("min")),r(),h("matTooltip",d(36,26,"rule-node-config.max-pending-msgs-hint")),r(5),q(d(41,28,"rule-node-config.max-retries")),r(3),p("ngIf",l.deduplicationConfigForm.get("maxRetries").hasError("required")),r(),p("ngIf",l.deduplicationConfigForm.get("maxRetries").hasError("max")),r(),p("ngIf",l.deduplicationConfigForm.get("maxRetries").hasError("min")),r(),h("matTooltip",d(47,30,"rule-node-config.max-retries-hint")))},dependencies:[z,B,Z,R,k,O,Q,ae,ee,Ze,et,tt,L,ge,F,_,D,S,M,V,nt,rt,wt,he,E],encapsulation:2});let t=i;return t})();var qn=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=Je({type:i}),i.\u0275inj=Qe({imports:[ke,Be,ut]});let t=i;return t})();(function(){Ye(qn,{declarations:[Wr,Xr,Zr,eo,to,io,no,ro],imports:[ke,Be,ut],exports:[Wr,Xr,Zr,eo,to,io,no,ro]})})();b();b();var Ff=t=>[t],oo=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e,this.entityType=W}configForm(){return this.ruleChainInputConfigForm}onConfigurationSet(e){this.ruleChainInputConfigForm=this.fb.group({forwardMsgToDefaultRuleChain:[e?e?.forwardMsgToDefaultRuleChain:!1,[]],ruleChainId:[e?e.ruleChainId:null,[c.required]]})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-flow-node-rule-chain-input-config"]],features:[N],decls:8,vars:12,consts:[[1,"flex","flex-col",3,"formGroup"],[1,"tb-form-panel","no-padding","no-border"],[1,"tb-form-row","no-border",3,"tb-hint-tooltip-icon"],["formControlName","forwardMsgToDefaultRuleChain",1,"mat-slide"],["required","","formControlName","ruleChainId",3,"excludeEntityIds","entityType","entitySubtype"]],template:function(a,l){a&1&&(o(0,"section",0)(1,"div",1)(2,"div",2),s(3,"translate"),o(4,"mat-slide-toggle",3),m(5),s(6,"translate"),n()(),g(7,"tb-entity-autocomplete",4),n()()),a&2&&(p("formGroup",l.ruleChainInputConfigForm),r(2),h("tb-hint-tooltip-icon",d(3,6,"rule-node-config.forward-msg-default-rule-chain-tooltip")),r(3),f(" ",d(6,8,"rule-node-config.forward-msg-default-rule-chain")," "),r(2),p("excludeEntityIds",Fe(10,Ff,l.ruleChainId))("entityType",l.entityType.RULE_CHAIN)("entitySubtype",l.ruleChainType))},dependencies:[vn,ue,F,_,D,S,M,Ce,E],encapsulation:2});let t=i;return t})();b();var ao=(()=>{let i=class i extends A{constructor(e){super(),this.fb=e}configForm(){return this.ruleChainOutputConfigForm}onConfigurationSet(e){this.ruleChainOutputConfigForm=this.fb.group({})}};i.\u0275fac=function(a){return new(a||i)(y(j))},i.\u0275cmp=T({type:i,selectors:[["tb-flow-node-rule-chain-output-config"]],features:[N],decls:3,vars:4,consts:[[1,"flex","flex-col",3,"formGroup"],[3,"innerHTML"]],template:function(a,l){a&1&&(o(0,"section",0),g(1,"div",1),s(2,"translate"),n()),a&2&&(p("formGroup",l.ruleChainOutputConfigForm),r(),h("innerHTML",d(2,2,"rule-node-config.output-node-name-hint"),we))},dependencies:[_,S,E],encapsulation:2});let t=i;return t})();var kn=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=Je({type:i}),i.\u0275inj=Qe({imports:[ke,Be]});let t=i;return t})();(function(){Ye(kn,{declarations:[oo,ao],imports:[ke,Be],exports:[oo,ao]})})();var Bn=(()=>{let i=class i{constructor(e){this.ruleChainService=e,this.ruleChainService.registerSystemRuleNodeConfigModule(this.constructor)}};i.\u0275fac=function(a){return new(a||i)(uo(Po))},i.\u0275mod=Je({type:i}),i.\u0275inj=Qe({imports:[ke,Be,Nn,An,Dn,Vn,qn,kn]});let t=i;return t})();(function(){Ye(Bn,{declarations:[Gn],imports:[ke,Be],exports:[Nn,An,Dn,Vn,qn,kn,Gn]})})();var If=(()=>{let i=class i{};i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=Je({type:i}),i.\u0275inj=Qe({imports:[ke,Be,wn,Bn,Et]});let t=i;return t})();(function(){Ye(If,{declarations:[aa,na,ra,oa,ia,la,ma,pa],imports:[ke,Be,ta,wn,Bn,Et]})})();export{If as RuleChainPageModule};
